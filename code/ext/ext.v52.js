var UDOC={};function FromPS(){}function FromPDF(){}UDOC.B=function(){var r=new Uint8Array(4),t=r.buffer,n=new Int16Array(t),i=new Uint16Array(t),s=new Int32Array(t),a=new Uint32Array(t),o=new Float32Array(t);return{readShort:function(t,e){return r[0]=t[e],r[1]=t[e+1],n[0]},readUshort:function(t,e){return r[0]=t[e],r[1]=t[e+1],i[0]},readInt:function(t,e){return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],s[0]},readUint:function(t,e){return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],a[0]},readUintBE:function(t,e){return r[3]=t[e],r[2]=t[e+1],r[1]=t[e+2],r[0]=t[e+3],a[0]},readFloat:function(t,e){return r[0]=t[e],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],o[0]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}}}(),UDOC.G={concat:function(t,e){for(var r=0;r<e.cmds.length;r++)t.cmds.push(e.cmds[r]);for(r=0;r<e.crds.length;r++)t.crds.push(e.crds[r])},getBB:function(t){for(var e=1e99,r=1e99,n=-e,i=-r,s=0;s<t.length;s+=2){var a=t[s],o=t[s+1];a<e&&(e=a),n<a&&(n=a),o<r&&(r=o),i<o&&(i=o)}return[e,r,n,i]},rectToPath:function(t){return{cmds:["M","L","L","L","Z"],crds:[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]]}},insideBox:function(t,e){return e[0]<=t[0]&&e[1]<=t[1]&&t[2]<=e[2]&&t[3]<=e[3]},isBox:function(t,e){function r(t,e){for(var r=0;r<8;r+=2){for(var n=!0,i=0;i<8;i++)if(2<=Math.abs(e[i]-t[i+r&7])){n=!1;break}if(n)return!0}return!1}var n=!1;if(10<t.cmds.length)return!1;var i=t.cmds.join(""),s=t.crds;if("MLLLZ"==i&&8==s.length||("MLLLLZ"==i||"MLLLL"==i)&&10==s.length){if(10==s.length&&(s=s.slice(0,8)),null==e){e=[s[0],s[1],s[0],s[1]];for(var a=0;a<s.length;a+=2){var o=s[a],h=s[a+1];o<e[0]&&(e[0]=o),h<e[1]&&(e[1]=h),e[2]<o&&(e[2]=o),e[3]<h&&(e[3]=h)}}var l=e[0],f=e[1],t=e[2],i=e[3];n=(n=n||r(s,[l,f,t,f,t,i,l,i]))||r(s,[l,i,t,i,t,f,l,f])}return n},boxArea:function(t){return(t[2]-t[0])*(t[3]-t[1])},newPath:function(t){t.pth={cmds:[],crds:[]}},moveTo:function(t,e,r){var n=UDOC.M.multPoint(t.ctm,[e,r]),e=t.pth,r=e.cmds.length;0!=r&&"M"==e.cmds[r-1]&&(e.cmds.pop(),e.crds.pop(),e.crds.pop()),t.pth.cmds.push("M"),t.pth.crds.push(n[0],n[1]),t.cpos=n},lineTo:function(t,e,r){r=UDOC.M.multPoint(t.ctm,[e,r]);t.cpos[0]==r[0]&&t.cpos[1]==r[1]||(t.pth.cmds.push("L"),t.pth.crds.push(r[0],r[1]),t.cpos=r)},curveTo:function(t,e,r,n,i,s,a){var o;0==t.pth.cmds.length&&UDOC.G.moveTo(t,0,0),e=(o=UDOC.M.multPoint(t.ctm,[e,r]))[0],r=o[1],n=(o=UDOC.M.multPoint(t.ctm,[n,i]))[0],i=o[1],s=(o=UDOC.M.multPoint(t.ctm,[s,a]))[0],a=o[1],t.cpos=o,t.pth.cmds.push("C"),t.pth.crds.push(e,r,n,i,s,a)},quadCurveTo:function(t,e,r,n,i){var s;0==t.pth.cmds.length&&UDOC.G.moveTo(t,0,0),e=(s=UDOC.M.multPoint(t.ctm,[e,r]))[0],r=s[1],n=(s=UDOC.M.multPoint(t.ctm,[n,i]))[0],i=s[1],t.cpos=s,t.pth.cmds.push("Q"),t.pth.crds.push(e,r,n,i)},closePath:function(t){t.pth.cmds.push("Z")},arc:function(t,e,r,n,i,s,a){if(a)for(;i<s;)s-=2*Math.PI;else for(;s<i;)s+=2*Math.PI;for(var o=(s-i)/4,h=Math.cos(o/2),l=-Math.sin(o/2),f=(4-h)/3,a=0==l?l:(1-h)*(3-h)/(3*l),u=[f,a],c=[f,-a],p=[h,-l],d={cmds:[0==t.pth.cmds.length?"M":"L"],crds:[h,l]},g=[1,0,0,1,0,0],v=0;v<4;v++)u=UDOC.M.multPoint(g,u),c=UDOC.M.multPoint(g,c),p=UDOC.M.multPoint(g,p),d.crds.push(u[0],u[1],c[0],c[1],p[0],p[1]),d.cmds.push("C"),0==v&&UDOC.M.rotate(g,-o);n=[n,0,0,n,e,r];UDOC.M.rotate(g,o/2-i),UDOC.M.concat(g,n),UDOC.M.multArray(g,d.crds),UDOC.M.multArray(t.ctm,d.crds),UDOC.G.concat(t.pth,d);r=d.crds.pop();e=d.crds.pop(),t.cpos=[e,r]},drawRect:function(t,e,r,n,i){UDOC.G.moveTo(t,e,r),UDOC.G.lineTo(t,e+n,r),UDOC.G.lineTo(t,e+n,r+i),UDOC.G.lineTo(t,e,r+i),UDOC.G.closePath(t)},toPoly:function(t){if("M"!=t.cmds[0]||"Z"!=t.cmds[t.cmds.length-1])return null;for(var e=1;e<t.cmds.length-1;e++)if("L"!=t.cmds[e])return null;var r=[],n=t.crds.length;t.crds[0]==t.crds[n-2]&&t.crds[1]==t.crds[n-1]&&(n-=2);for(e=0;e<n;e+=2)r.push([t.crds[e],t.crds[e+1]]);return UDOC.G.polyArea(t.crds)<0&&r.reverse(),r},fromPoly:function(t){for(var e={cmds:[],crds:[]},r=0;r<t.length;r++)e.crds.push(t[r][0],t[r][1]),e.cmds.push(0==r?"M":"L");return e.cmds.push("Z"),e},polyArea:function(t){if(t.length<6)return 0;for(var e=t.length-2,r=(t[0]-t[e])*(t[1+e]+t[1]),n=0;n<e;n+=2)r+=(t[n+2]-t[n])*(t[n+1]+t[n+3]);return.5*-r},polyClip:function(t,e){function r(t){return(l[0]-o[0])*(t[1]-o[1])>(l[1]-o[1])*(t[0]-o[0])}function n(){var t=[o[0]-l[0],o[1]-l[1]],e=[u[0]-h[0],u[1]-h[1]],r=o[0]*l[1]-o[1]*l[0],n=u[0]*h[1]-u[1]*h[0],i=1/(t[0]*e[1]-t[1]*e[0]);return[(r*e[0]-n*t[0])*i,(r*e[1]-n*t[1])*i]}var i,s,a=t,o=e[e.length-1];for(s in e){var h,l=e[s],f=a,a=[],u=f[f.length-1];for(i in f)r(h=f[i])?(r(u)||a.push(n()),a.push(h)):r(u)&&a.push(n()),u=h;o=l}return a}},UDOC.M={getScale:function(t){return Math.sqrt(Math.abs(t[0]*t[3]-t[1]*t[2]))},translate:function(t,e,r){UDOC.M.concat(t,[1,0,0,1,e,r])},rotate:function(t,e){UDOC.M.concat(t,[Math.cos(e),-Math.sin(e),Math.sin(e),Math.cos(e),0,0])},scale:function(t,e,r){UDOC.M.concat(t,[e,0,0,r,0,0])},concat:function(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5];t[0]=r*e[0]+n*e[2],t[1]=r*e[1]+n*e[3],t[2]=i*e[0]+s*e[2],t[3]=i*e[1]+s*e[3],t[4]=a*e[0]+o*e[2]+e[4],t[5]=a*e[1]+o*e[3]+e[5]},invert:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=e*i-r*n;t[0]=i/o,t[1]=-r/o,t[2]=-n/o,t[3]=e/o,t[4]=(n*a-i*s)/o,t[5]=(r*s-e*a)/o},multPoint:function(t,e){var r=e[0],e=e[1];return[r*t[0]+e*t[2]+t[4],r*t[1]+e*t[3]+t[5]]},multArray:function(t,e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];e[r]=n*t[0]+i*t[2]+t[4],e[r+1]=n*t[1]+i*t[3]+t[5]}}},UDOC.C={srgbGamma:function(t){return t<.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},cmykToRgb:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=255+e*(8.841041422036149*e+60.118027045597366*r+6.871425592049007*n+31.159100130055922*i-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*n+131.35250912493976*i-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*i-24.86741582555878)+i*(-20.737325471181034*i-187.80453709719578),t=255+e*(.8842522430003296*e+8.078677503112928*r+30.89978309703729*n-.23883238689178934*i-14.183576799673286)+r*(10.49593273432072*r+63.02378494754052*n+50.606957656360734*i-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*i-193.58209356861505)+i*(-22.33816807309886*i-180.12613974708367);return[Math.max(0,Math.min(1,(255+e*(-4.387332384609988*e+54.48615194189176*r+18.82290502165302*n+212.25662451639585*i-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*n+-17.873870861415444*i-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*i+17.5119270841813)+i*(-21.86122147463605*i-189.48180835922747))/255)),Math.max(0,Math.min(1,s/255)),Math.max(0,Math.min(1,t/255))]},labToRgb:function(t){for(var e=.008856,r=t[0],n=t[1],i=(r+16)/116,s=i*i*i,a=i-t[2]/200,r=a*a*a,t=n/500+i,n=t*t*t,r=[96.72*(e<n?n:(116*t-16)/903.3)/100,100*(e<s?s:(116*i-16)/903.3)/100,81.427*(e<r?r:(116*a-16)/903.3)/100],a=[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427],o=[a[0]*r[0]+a[1]*r[1]+a[2]*r[2],a[3]*r[0]+a[4]*r[1]+a[5]*r[2],a[6]*r[0]+a[7]*r[1]+a[8]*r[2]],h=0;h<3;h++)o[h]=Math.max(0,Math.min(1,UDOC.C.srgbGamma(o[h])));return o}},UDOC.getState=function(t){return{font:UDOC.getFont(),dd:{flat:1},ca:1,colr:[0,0,0],space:"/DeviceGray",CA:1,COLR:[0,0,0],sspace:"/DeviceGray",bmode:"/Normal",SA:!1,OPM:0,AIS:!1,OP:!1,op:!1,SMask:"/None",lwidth:1,lcap:0,ljoin:0,mlimit:10,SM:.1,doff:0,dash:[],ctm:[1,0,0,1,0,0],cpos:[0,0],pth:{cmds:[],crds:[]},cpth:t?UDOC.G.rectToPath(t):null,cpstack:[]}},UDOC.getFont=function(){return{Tc:0,Tw:0,Th:100,Tl:0,Tf:"Helvetica-Bold",Tfs:1,Tmode:0,Trise:0,Tk:0,Tal:0,Tun:0,Tm:[1,0,0,1,0,0],Tlm:[1,0,0,1,0,0],Trm:[1,0,0,1,0,0]}},FromPS.Parse=function(t,e){t=new Uint8Array(t);for(var r=0,n=null,i=null,s=!0;37!=t[r]||33!=t[r+1];)r++;for(var a=FromPS.B.readASCII(t,r,t.length-r).split(/[\n\r]+/),o=0;o<a.length;o++){var h=a[o].trim();if("%"==h.charAt(0)){for(h=h.slice(1);"%"==h.charAt(0);)h=h.slice(1);var l=h.split(":");"BoundingBox"==l[0]&&(n=l[1].trim().split(/[ ]+/).map(parseFloat)),-1!=h.indexOf("!PS-Adobe-3.0 EPSF-3.0")&&(i=h),-1!=h.indexOf("!PS-Adobe-2.0 EPSF-1.2")&&(i=h)}}null!=i&&null!=n||(n=[0,0,595,842]);for(var f=[],u=FromPS._getDictStack([],{}),c=[{typ:"file",val:{buff:t,off:r}}],p=[],d=FromPS._getEnv(n),g=Date.now();s;)s=FromPS.step(f,u,c,p,d,e);d.pgOpen&&e.ShowPage(),e.Done(),console.log(Date.now()-g)},FromPS._getDictStack=function(t,e){for(var r,n="def undef known begin end currentfile currentdict currentpacking setpacking currentoverprint setoverprint currentglobal setglobal gcheck currentsystemparams setsystemparams currentuserparams setuserparams currentpagedevice setpagedevice currentflat currentlinewidth currentdash currentpoint currentscreen setscreen currenthalftone currentblackgeneration currentundercolorremoval currentcolortransfer internaldict dict string readstring readhexstring readline getinterval putinterval token array aload astore length maxlength matrix count mark counttomark cleartomark dictstack countdictstack makepattern makefont scalefont stringwidth setfont currentcolorspace setcolorspace setcolor _setHSB_ currentgray currentrgbcolor setlinewidth setstrokeadjust setflat setlinecap setlinejoin setmiterlimit setdash clip eoclip clippath pathbbox newpath stroke fill eofill shfill closepath flattenpath showpage print _drawRect_ moveto lineto curveto arc arcn show ashow xshow yshow xyshow widthshow awidthshow charpath cshow rmoveto rlineto rcurveto translate rotate scale concat concatmatrix invertmatrix currentmatrix defaultmatrix setmatrix limitcheck save restore clipsave cliprestore gsave grestore grestoreall usertime readtime flush flushfile readonly executeonly findresource resourcestatus defineresource undefineresource resourceforall image imagemask colorimage xcheck status cachestatus setcachelimit type if ifelse exec stopped stop dup exch copy roll index anchorsearch pop put get load where store repeat for forall pathforall loop exit bind cvi cvr cvs cvx cvn cvlit add sub mul div idiv bitshift mod exp atan neg abs floor ceiling round truncate sqrt ln sin cos srand rand == transform itransform dtransform idtransform eq ge gt le lt ne and or not filter begincmap endcmap begincodespacerange endcodespacerange beginbfrange endbfrange beginbfchar endbfchar".split(" ").concat(t),i="image colorimage repeat for forall loop".split(" "),s=0;s<i.length;s++)n.push(i[s]+"---");for(r in FromPS._myOps=FromPS.makeProcs({CIDSystemInfo:"/CIDSystemInfo",findfont:"/Font findresource",definefont:"/Font defineresource",undefinefont:"/Font undefineresource",selectfont:"exch findfont exch scalefont setfont",rectfill:"gsave newpath _drawRect_  fill   grestore",rectstroke:"gsave newpath _drawRect_  stroke grestore",rectclip:"newpath _drawRect_  clip newpath",setgray:"/DeviceGray setcolorspace setcolor",setrgbcolor:"/DeviceRGB  setcolorspace setcolor",sethsbcolor:"/DeviceRGB  setcolorspace _setHSB_",setcmykcolor:"/DeviceCMYK setcolorspace setcolor",setpattern:"/Pattern    setcolorspace setcolor"}),FromPS._myOps)n.push(r);var a=e,o={},t={},e={};o.systemdict={typ:"dict",val:o},o.globaldict={typ:"dict",val:t},o.userdict={typ:"dict",val:e},o.statusdict={typ:"dict",val:{}},o.GlobalFontDirectory=o.SharedFontDirectory={typ:"dict",val:{}},o.FontDirectory={typ:"dict",val:{}},o.$error={typ:"dict",val:{}},o.errordict={typ:"dict",val:FromPS.makeProcs({handleerror:""})},o.null={typ:"null",val:null},o.true={typ:"boolean",val:!0},o.false={typ:"boolean",val:!1},o.product={typ:"string",val:FromPS.makeStr("Photopea")},o.version={typ:"string",val:[51]},o.languagelevel={typ:"integer",val:3};for(var h,s=0;s<n.length;s++)o[n[s]]={typ:"operator",val:n[s]};for(h in a)o[h]=a[h];return[o,t,e]},FromPS._getEnv=function(t){for(var e={bb:t,gst:UDOC.getState(t),packing:!1,overprint:!1,global:!1,systemparams:{MaxPatternCache:{type:"integer",val:5e3}},userparams:{},pagedevice:{PageSize:{typ:"array",val:[{typ:"real",val:t[2]},{typ:"real",val:t[3]}]}},cmnum:0,fnt:null,res:{},pgOpen:!1,funs:FromPS.makeProcs({blackgeneration:"",undercolorremoval:"pop 0"})},r="Font CIDFont CMap FontSet Form Pattern ProcSet Halftone ColorRendering IdiomSet InkParams TrapParams OutputDevice ControlLanguage Localization PDL HWOptions".split(" "),n=0;n<r.length;n++)e.res[r[n]]={typ:"dict",val:{},maxl:1e3};r=["Encoding","ColorSpace"];for(n=0;n<r.length;n++)e.res[r[n]]={typ:"array",val:[]};e.res.Category={typ:"dict",val:e.res},e.res.ColorSpace.val=[{typ:"array",val:[{typ:"name",val:"/DeviceRGB"}]},{typ:"array",val:[{typ:"name",val:"/DeviceCMYK"}]},{typ:"array",val:[{typ:"name",val:"/DeviceGray"}]}];for(n=0;n<r.length;n++)e.res[r[n]]={typ:"dict",val:{},maxl:1e3};return e},FromPS.makeProcs=function(t){var e,r={};for(e in t){var n=t[e].replace(/  +/g," ").split(" ");r[e]={typ:"procedure",val:[]};for(var i=0;i<n.length;i++)r[e].val.push({typ:"name",val:n[i]})}return r},FromPS.addProc=function(t,e){if(0!=t.val.length){if("procedure"!=t.typ)throw console.log(t),t.typ;e.push({typ:"procedure",val:t.val,off:0})}},FromPS.stepC=0,FromPS._f32=new Float32Array(1),FromPS.step=function(t,e,r,n,i,s,a,o){var h=Date.now(),l=FromPS._f32,f=FromPS.getToken,u=i.gst;if(null==(L=f(r,e)))return!1;var c=(L=o&&"string"==L.typ&&"def"==FromPS.readStr(L.val)?{typ:"operator",val:"def"}:L).typ;if("NaN"!=(te=L.val)&&"INF"!=te||(c="integer"),isNaN(u.cpos[0]))throw"e";if(0,-1!="integer real dict boolean string array procedure null file".split(" ").indexOf(c))return t.push(L),!0;if("name"!=c&&"operator"!=c)throw"e";if("/"==te.charAt(0))t.push(L);else{if("undefined"==te)return!0;if(te.startsWith("II*"))return!1;if("{"==te){for(var p=[],d={typ:"procedure",val:[]},g=f(r,e);;){if("{"==g.val){var v={typ:"procedure",val:[]};d.val.push(v),p.push(d),d=v}else if("}"==g.val){if(0==p.length)break;d=p.pop()}else d.val.push(g);g=f(r,e)}t.push(d)}else if("["==te||"<<"==te)t.push({typ:"mark"});else if("]"==te||">>"==te){for(var m=[];0!=t.length;){if("mark"==(ee=t.pop()).typ)break;m.push(ee)}if(m.reverse(),"]"==te)t.push({typ:"array",val:m});else{for(var _={},y=0;y<m.length;y+=2)_[m[y].val.slice(1)]=m[y+1];t.push({typ:"dict",val:_,maxl:1e3})}}else{if(0,null==(Jt=FromPS.getFromStacks(te,e))){if(o)return!1;throw console.log("unknown operator",te,t,e),"e"}if("procedure"==Jt.typ)FromPS.addProc(Jt,r);else if(-1!="array string dict null integer real boolean state name file".split(" ").indexOf(Jt.typ))t.push(Jt);else{if("operator"!=Jt.typ)throw Jt.typ;var w,b=Jt.val;"known if ifelse currentpacking setpacking dict dup begin end put bind def undef where pop get exec ge stop stopped cvr string not and".split(" ");if(FromPS._myOps[b])FromPS.addProc(FromPS._myOps[b],r);else if("flattenpath"!=b&&"limitcheck"!=b)if("def"==b){var x=t.pop();if(null==(re=t.pop())&&o)return!1;re=FromPS.getDKey(re),e[e.length-1][re]=x}else if("undef"==b||"known"==b){var S=FromPS.getDKey(t.pop()),o=t.pop(),C=o.val;"undef"==b?delete C[S]:t.push({typ:"boolean",val:"null"!=o.typ&&null!=C[S]})}else if("internaldict"==b){var P=t.pop().val;t.push({typ:"dict",val:{},maxl:1e3})}else if("dict"==b){P=t.pop().val;t.push({typ:"dict",val:{},maxl:P})}else if("string"==b){P=t.pop().val;t.push({typ:"string",val:new Array(P)})}else if("readstring"==b||"readhexstring"==b){var P=(I=t.pop()).val.length,k=t.pop(),T=FromPS.GetFile(k).val;if("readstring"==b){for(y=0;y<P;y++)I.val[y]=T.buff[T.off+y];T.off+=P}else FromPS.readHex(T,P,I.val);t.push(I,{typ:"boolean",val:!0})}else if("readline"==b){var I=t.pop(),T=FromPS.GetFile(t.pop()).val,y=0;for(FromPS.isEOL(T.buff[T.off])&&T.off++;y<I.val.length;){var M=T.buff[T.off];if(T.off++,null==M)throw"e";if(FromPS.isEOL(M)){10==T.buff[T.off]&&T.off++;break}I.val[y]=M,y++}t.push({typ:"string",val:I.val.slice(0,y)}),t.push({typ:"boolean",val:!0})}else if("getinterval"==b){var F=t.pop().val,A=t.pop().val,E=[];if("string"!=(U=t.pop()).typ&&"array"!=U.typ)throw"e";for(y=0;y<F;y++)E.push(U.val[A+y]);t.push({typ:U.typ,val:E})}else if("putinterval"==b){var U=t.pop(),A=t.pop().val,O=t.pop();if(!(A+U.val.length>=O.val.length)){if("string"!=U.typ)throw"e";for(y=0;y<U.val.length;y++)O.val[A+y]=U.val[y]}}else if("token"==b){if("string"!=(U=t.pop()).typ)throw"e";for(m=[],y=0;y<U.val.length;y++){var D=U.val[y];if(null==D)break;m.push(D)}for(var k={buff:new Uint8Array(m),off:0},L=f([{typ:"file",val:k}],e),N=[],y=k.off;y<m.length;y++)N.push(m[y]);t.push({typ:"string",val:N},L,{typ:"boolean",val:!0})}else if("array"==b){P=t.pop().val;t.push({typ:"array",val:new Array(P)})}else if("aload"==b){for(m=(ee=t.pop()).val,y=0;y<m.length;y++)t.push(m[y]);t.push(ee)}else if("astore"==b){for(m=(ee=t.pop()).val,y=0;y<m.length;y++)m[m.length-1-y]=t.pop();t.push(ee)}else if("length"==b){P=0;if("array"==(c=(ee=t.pop()).typ))P=ee.val.length;else if("procedure"==c)P=ee.val.length;else if("dict"==c)P=Object.keys(ee.val).length;else{if("string"!=c)throw console.log(ee),"e";P=ee.val.length}t.push({typ:"integer",val:P})}else if("maxlength"==b){var R=t.pop();t.push({typ:"integer",val:R.maxl})}else if("matrix"==b)t.push({typ:"array",val:FromPS.makeArr([1,0,0,1,0,0],"real")});else if("count"==b)t.push({typ:"integer",val:t.length});else if("mark"==b)t.push({typ:"mark"});else if("counttomark"==b||"cleartomark"==b){for(var B=0;B<t.length&&"mark"!=t[t.length-1-B].typ;)B++;if("cleartomark"==b)for(y=0;y<B+1;y++)t.pop();else t.push({typ:"integer",val:B})}else if("dictstack"==b){for(m=t.pop(),y=0;y<e.length;y++)m.val[y]={typ:"dict",val:e[y],maxl:1e3};t.push(m)}else if("countdictstack"==b){for(var z=0,y=0;y<t.length;y++)"dict"==t[y].typ&&z++;t.push({typ:"integer",val:z})}else if("begin"==b){if(null==(C=(ee=t.pop()).val)||"dict"!=ee.typ)throw console.log(ee,e),"e";e.push(C)}else if("end"==b)e.pop();else if("currentfile"==b){for(var G,y=r.length-1;0<=y;y--)if("file"==r[y].typ){G=r[y];break}t.push({typ:"file",val:G.val})}else if("currentdict"==b){C=e[e.length-1];t.push({typ:"dict",val:C,maxl:1e3})}else if(-1!="currentpacking currentoverprint currentglobal currentsystemparams currentuserparams currentpagedevice".split(" ").indexOf(b)){x=i[b.slice(7)];t.push({typ:"boolean"==typeof x?"boolean":"dict",val:x})}else if("gcheck"==b){var Z=t.pop();t.push({typ:"boolean",val:!1})}else if(-1!="setpacking setoverprint setglobal setsystemparams setuserparams setpagedevice".split(" ").indexOf(b))i[b.slice(3)]=t.pop().val;else if("currentflat"==b)t.push({typ:"real",val:1});else if("currentlinewidth"==b)t.push({typ:"real",val:u.lwidth});else if("currentdash"==b)t.push({typ:"array",val:FromPS.makeArr(u.dash,"integer")},{typ:"real",val:u.doff});else if("currentpoint"==b){var q=u.ctm.slice(0);UDOC.M.invert(q);var j=UDOC.M.multPoint(q,u.cpos);t.push({typ:"real",val:j[0]},{typ:"real",val:j[1]})}else if("currentscreen"==b)t.push({typ:"int",val:60},{typ:"real",val:0},{typ:"real",val:0});else if("setscreen"==b)t.pop(),t.pop(),t.pop();else if("currenthalftone"==b)t.push({typ:"dict",val:{},maxl:1e3});else if("currentblackgeneration"==b||"currentundercolorremoval"==b)t.push(i.funs[b.slice(7)]);else if("currentcolortransfer"==b)for(y=0;y<4;y++)t.push(i.funs.blackgeneration);else if("findresource"==b){var H=t.pop().val.slice(1),V=t.pop(),S=V.val.slice(1);if("Font"==H&&(i.res[H].val[S]={typ:"dict",val:{FontType:{typ:"integer",val:1},FontMatrix:{typ:"array",val:FromPS.makeArr([1,0,0,1,0,0],"real")},FontName:V,FID:{typ:"fontID",val:Math.floor(16777215*Math.random())},Encoding:{typ:"array",val:[]},FontBBox:{typ:"array",val:FromPS.makeArr([0,0,1,1],"real")},PaintType:{typ:"integer",val:0}}}),null==(V=("Category"!=H||"Generic"!=S)&&("ProcSet"!=H&&"Procset"!=H||"CIDInit"!=S)?i.res[H].val[S]:{typ:"dict",val:{},maxl:1e3}))throw"e";t.push(V)}else if("resourcestatus"==b){H=t.pop().val.slice(1),S=t.pop().val.slice(1);(V=i.res[H].val[S])&&(t.push({typ:"integer",val:1}),t.push({typ:"integer",val:Object.keys(V.val).length})),t.push({typ:"boolean",val:null!=V})}else if("defineresource"==b){var H=t.pop().val.slice(1),W=t.pop(),S=t.pop().val.slice(1);i.res[H].val[S]=W,t.push(W)}else if("undefineresource"==b){H=t.pop().val.slice(1),S=t.pop().val.slice(1);delete i.res[H].val[S]}else if("resourceforall"==b){var H=t.pop().val.slice(1),X=t.pop().val,J=t.pop(),W=t.pop().val;if(1!=W.length||42!=W[0])throw"e";for(S in i.res[H].val){for(I=X.slice(0),y=0;y<S.length;y++)I[y]=S[y];FromPS.addProc(J,r),FromPS.addProc({typ:"procedure",val:[{typ:"string",val:I}]},r)}}else if("image"==b||"colorimage"==b){var Y=1,Q=!1,K=[],H=t.pop();if(t.push(H),"image"==b&&"dict"==H.typ?(tt=(pt=t.pop().val).Width.val,et=pt.Height.val,rt=pt.BitsPerComponent.val,nt=FromPS.readArr(pt.ImageMatrix.val),Y=pt.NComponents?pt.NComponents.val:1,Q=!!pt.MultipleDataSources&&pt.MultipleDataSources.val,K=pt.DataSource.val,"file"==pt.DataSource.typ&&(K=[pt.DataSource])):("colorimage"==b&&(Y=t.pop().val,Q=t.pop().val),Q?(K[2]=t.pop(),K[1]=t.pop(),K[0]=t.pop()):K=[t.pop()],nt=FromPS.readArr(t.pop().val),rt=t.pop().val,et=t.pop().val,tt=t.pop().val),1!=Y&&3!=Y&&4!=Y)throw"unsupported number of channels "+Y;if(8!=rt)throw"unsupported bits per channel: "+rt;for(var $=new Uint8Array(tt*et*4),y=0;y<$.length;y++)$[y]=255;if(r.push({typ:"name",val:b+"---",ctx:[tt,et,rt,nt,Y,Q,$,0,K]}),"procedure"==K[0].typ)for(y=0;y<K.length;y++)FromPS.addProc(K[y],r)}else if("image---"==b||"colorimage---"==b){var tt=(gt=L.ctx)[0],et=gt[1],rt=gt[2],nt=gt[3],Y=gt[4],Q=gt[5],$=gt[6],it=gt[7],K=gt[8],st=0;if(Q)for(y=0;y<Y;y++){var at,st=(at=("procedure"==(at=K[y]).typ?t.pop():at).val).length;if(4==Y)for(var ot=0;ot<st;ot++)$[4*(it+ot)+3-y]=at[ot];if(3==Y)for(ot=0;ot<st;ot++)$[4*(it+ot)+2-y]=at[ot]}else{at="file"==K[0].typ?FromPS.GetFile(K[0]).val.buff:t.pop().val,st=Math.floor(at.length/3);for(ot=0;ot<st;ot++){var ht=3*ot,lt=4*(it+ot);$[0+lt]=at[0+ht],$[1+lt]=at[1+ht],$[2+lt]=at[2+ht]}}if(it+=st,FromPS.checkPageStarted(i,s),it==tt*et){var ft=1/255;if("/DeviceCMYK"==u.space)for(y=0;y<$.length;y+=4){var ut=[$[y]*ft,$[y+1]*ft,$[y+2]*ft,$[y+3]*ft],ct=UDOC.C.cmykToRgb(ut);$[y]=255*ct[0],$[y+1]=255*ct[1],$[y+2]=255*ct[2],$[y+3]=255}var pt=u.ctm.slice(),Q=nt.slice(0);UDOC.M.invert(Q);nt=[tt,0,0,-et,0,et];UDOC.M.concat(nt,Q),UDOC.M.concat(u.ctm,nt),s.PutImage(u,$,tt,et),u.ctm=pt}else if(gt[7]=it,r.push(L),"procedure"==K[0].typ)for(y=0;y<K.length;y++)FromPS.addProc(K[y],r)}else if("makepattern"==b){var dt=t.pop().val,R=t.pop().val;t.push({typ:"array",val:[R,JSON.parse(JSON.stringify(dt))]})}else if("makefont"==b||"scalefont"==b){var R="makefont"==b,gt=t.pop().val;R&&(gt=FromPS.readArr(gt));var vt=JSON.parse(JSON.stringify(t.pop())),mt=FromPS.readArr(vt.val.FontMatrix.val);R?UDOC.M.concat(mt,gt):UDOC.M.scale(mt,gt,gt),vt.val.FontMatrix.val=FromPS.makeArr(mt),t.push(vt)}else if("stringwidth"==b||"charpath"==b){"charpath"==b&&t.pop();var _t=t.pop().val,I=FromPS.readStr(_t),gt=UDOC.M.getScale(u.font.Tm)/UDOC.M.getScale(u.ctm),mt=.55*gt*I.length;"stringwidth"==b?t.push({typ:"real",val:mt},{typ:"real",val:0}):UDOC.G.drawRect(u,0,0,mt,gt)}else if("setfont"==b){vt=t.pop().val;u.font.Tf=vt.FontName.val.slice(1),u.font.Tm=FromPS.readArr(vt.FontMatrix.val)}else if("setlinewidth"==b)u.lwidth=t.pop().val;else if("setstrokeadjust"==b)u.SA=t.pop().val;else if("setlinecap"==b)u.lcap=t.pop().val;else if("setlinejoin"==b)u.ljoin=t.pop().val;else if("setmiterlimit"==b)u.mlimit=t.pop().val;else if("setflat"==b)u.dd.flat=t.pop();else if("setdash"==b)u.doff=t.pop().val,u.dash=FromPS.readArr(t.pop().val);else if("show"==b||"ashow"==b||"xshow"==b||"yshow"==b||"xyshow"==b||"widthshow"==b||"awidthshow"==b){"xshow"!=b&&"xyshow"!=b&&"yshow"!=b||t.pop();_t=t.pop().val,I=FromPS.readStr(_t);"awidthshow"==b&&(t.pop(),t.pop(),t.pop(),t.pop()),"widthshow"==b&&(t.pop(),t.pop(),t.pop()),"ashow"==b&&(t.pop(),t.pop());var yt=u.ctm;u.ctm=yt.slice(0),u.ctm[4]=u.cpos[0],u.ctm[5]=u.cpos[1],FromPS.checkPageStarted(i,s),s.PutText(u,I,.55*I.length),u.cpos[0]+=I.length*UDOC.M.getScale(yt)*UDOC.M.getScale(u.font.Tm)*.55,u.ctm=yt}else if("cshow"==b)t.pop(),t.pop();else if("currentcolorspace"==b)t.push({typ:"array",val:[{typ:"name",val:u.space}]});else if("setcolorspace"==b){var wt=t.pop();if(u.space=wt.val,"array"==wt.typ)u.space=wt.val[0].val;else{if("name"!=wt.typ)throw console.log(wt),"e";u.space=wt.val}}else if("setcolor"==b||"_setHSB_"==b){if("/Pattern"==u.space){if("array"!=(ut=t.pop()).typ)throw"e";var j=ut.val,dt=FromPS.readArr(j[1]);UDOC.M.concat(dt,u.ctm),bt=FromPS.getPSShadingFill(j[0].Shading,dt)}else if("/DeviceGray"==u.space)var bt=[Pt=FromPS.nrm(t.pop().val),Pt,Pt];else if("_setHSB_"==b){var xt,St,Z=t.pop().val,yt=t.pop().val;switch(j=Z*(1-yt),xt=Z*(1-(wt=6*(et=t.pop().val)-(y=Math.floor(6*et)))*yt),St=Z*(1-(1-wt)*yt),y%6){case 0:kt=Z,Pt=St,Ct=j;break;case 1:kt=xt,Pt=Z,Ct=j;break;case 2:kt=j,Pt=Z,Ct=St;break;case 3:kt=j,Pt=xt,Ct=Z;break;case 4:kt=St,Pt=j,Ct=Z;break;case 5:kt=Z,Pt=j,Ct=xt}bt=[FromPS.nrm(kt),FromPS.nrm(Pt),FromPS.nrm(Ct)]}else if("/DeviceRGB"==u.space){var Ct=t.pop().val,Pt=t.pop().val,kt=t.pop().val;bt=[FromPS.nrm(kt),FromPS.nrm(Pt),FromPS.nrm(Ct)]}else{if("/DeviceCMYK"!=u.space)throw u.space;var Tt=t.pop().val,It=t.pop().val,dt=t.pop().val,Mt=t.pop().val;bt=UDOC.C.cmykToRgb([Mt,dt,It,Tt])}bt&&(u.colr=u.COLR=bt)}else if("currentrgbcolor"==b)for(y=0;y<3;y++)t.push({typ:"real",val:u.colr[y]});else if("currentgray"==b)t.push({typ:"real",val:(u.colr[0]+u.colr[1]+u.colr[2])/3});else if("clip"==b||"eoclip"==b){Mt=UDOC.G.getBB(u.pth.crds),bt=UDOC.G.getBB(u.cpth.crds);UDOC.G.isBox(u.pth,Mt)&&UDOC.G.insideBox(bt,Mt)||(UDOC.G.isBox(u.cpth,bt)&&UDOC.G.insideBox(Mt,bt)?u.cpth=JSON.parse(JSON.stringify(u.pth)):(bt=UDOC.G.toPoly(u.pth),Ft=UDOC.G.toPoly(u.cpth),bt&&Ft?0!=(j=UDOC.G.polyClip(bt,Ft)).length?u.cpth=UDOC.G.fromPoly(j):console.log("strange intersection of polygons"):u.cpth=JSON.parse(JSON.stringify(u.pth))))}else if("clippath"==b)u.pth=JSON.parse(JSON.stringify(u.cpth));else if("pathbbox"==b){var Ft=u.pth.crds,At=UDOC.G.getBB(Ft),Ft=[At[0],At[1],At[2],At[1],At[0],At[3],At[2],At[3]],q=u.ctm.slice(0);UDOC.M.invert(q),UDOC.M.multArray(q,Ft),At=UDOC.G.getBB(Ft),l[0]=At[0],At[0]=l[0],l[0]=At[1],At[1]=l[0],l[0]=At[2],At[2]=l[0],l[0]=At[3],At[3]=l[0],At=FromPS.makeArr(At,"real"),t.push(At[0],At[1],At[2],At[3])}else if("newpath"==b)UDOC.G.newPath(u);else if("stroke"==b)FromPS.checkPageStarted(i,s),s.Stroke(u),UDOC.G.newPath(u);else if("shfill"==b){var At=u.colr,Et=u.pth,j=t.pop().val,dt=u.ctm.slice(0);u.colr=FromPS.getPSShadingFill({typ:"dict",val:j,maxl:1e3},dt),FromPS.checkPageStarted(i,s),u.pth=u.cpth,u.cpth=UDOC.G.rectToPath(i.bb),s.Fill(u),u.colr=At,u.pth=Et}else if("fill"==b||"eofill"==b)FromPS.checkPageStarted(i,s),s.Fill(u,"eofill"==b),UDOC.G.newPath(u);else if("showpage"==b){FromPS.checkPageStarted(i,s),s.ShowPage();Et=u.font;(u=i.gst=UDOC.getState(i.bb)).font=Et,i.pgOpen=!1}else if("print"==b){_t=t.pop().val,I=FromPS.readStr(_t);s.Print(I)}else if("_drawRect_"==b){if("real"!=(et=t.pop()).typ&&"integer"!=et.typ)throw"e";et=et.val;var tt=t.pop().val,It=t.pop().val,Ut=t.pop().val;UDOC.G.drawRect(u,Ut,It,tt,et)}else if("closepath"==b)UDOC.G.closePath(u);else if("moveto"==b||"lineto"==b){var It=t.pop().val,Ut=t.pop().val;"moveto"==b?UDOC.G.moveTo(u,Ut,It):UDOC.G.lineTo(u,Ut,It)}else if("rmoveto"==b||"rlineto"==b){It=t.pop().val,Ut=t.pop().val,q=u.ctm.slice(0);UDOC.M.invert(q),It+=(j=UDOC.M.multPoint(q,u.cpos))[1],Ut+=j[0],"rmoveto"==b?UDOC.G.moveTo(u,Ut,It):UDOC.G.lineTo(u,Ut,It)}else if("curveto"==b){var Ot=t.pop().val,Dt=t.pop().val,_t=t.pop().val,tt=t.pop().val,et=t.pop().val,q=0==t.length?0:t.pop().val;UDOC.G.curveTo(u,q,et,tt,_t,Dt,Ot)}else if("arc"==b||"arcn"==b){Dt=t.pop().val,Ot=t.pop().val,kt=t.pop().val,It=t.pop().val,Ut=t.pop().val;UDOC.G.arc(u,Ut,It,kt,Ot*Math.PI/180,Dt*Math.PI/180,"arcn"==b)}else if("concat"==b){dt=FromPS.readArr(t.pop().val);UDOC.M.concat(dt,u.ctm),u.ctm=dt}else if(-1!=["translate","scale","rotate"].indexOf(b))It="array"==(Z=t.pop()).typ?(dt=FromPS.readArr(Z.val),t.pop().val):(dt=[1,0,0,1,0,0],Z.val),"rotate"!=b&&(Ut=t.pop().val),"translate"==b&&UDOC.M.translate(dt,Ut,It),"scale"==b&&UDOC.M.scale(dt,Ut,It),"rotate"==b&&UDOC.M.rotate(dt,-It*Math.PI/180),"array"==Z.typ?t.push({typ:"array",val:FromPS.makeArr(dt,"real")}):(UDOC.M.concat(dt,u.ctm),u.ctm=dt);else if("concatmatrix"==b){(Nt=FromPS.readArr)(t.pop().val);var Lt=Nt(t.pop().val),dt=Nt(t.pop().val).slice(0);UDOC.M.concat(dt,Lt),dt=FromPS.makeArr(dt,"real"),t.push({typ:"array",val:dt})}else if("invertmatrix"==b){var Nt,Lt=(Nt=FromPS.readArr)(t.pop().val),dt=Nt(t.pop().val).slice(0);UDOC.M.invert(dt),dt=FromPS.makeArr(dt,"real"),t.push({typ:"array",val:dt})}else if("currentmatrix"==b||"defaultmatrix"==b){for(var dt=t.pop(),Rt=FromPS.makeArr("currentmatrix"==b?u.ctm:[1,0,0,1,0,0],"real"),y=0;y<6;y++)dt.val[y]=Rt[y];t.push(dt)}else if("setmatrix"==b)u.ctm=FromPS.readArr(t.pop().val);else if("cvi"==b){Z=(ee=t.pop()).val,E=0;if("real"==ee.typ)E=Math.round(Z);else{if("integer"!=ee.typ)throw"unknown type "+ee.typ;E=Z}t.push({typ:"integer",val:E})}else if("cvr"==b){Z=(ee=t.pop()).val,E=0;if("real"==ee.typ)E=Z;else if("integer"==ee.typ)E=Z;else{if("string"!=ee.typ)throw"unknown type "+ee.typ;E=parseFloat(FromPS.readStr(Z))}t.push({typ:"real",val:E})}else if("cvs"==b){var I=t.pop(),Bt=t.pop(),x="";if(I.val=[],t.push(I),"real"==Bt.typ||"integer"==Bt.typ)x=Math.abs(Math.round(Bt.val)-Bt.val)<1e-6?Math.round(Bt.val)+".0":(Math.round(1e6*Bt.val)/1e6).toString();else{if("name"!=Bt.typ)throw"unknown var type: "+Bt.typ;x=Bt.val}for(y=0;y<x.length;y++)I.val[y]=x.charCodeAt(y)}else if("cvx"==b){if("array"==(ee=t.pop()).typ)Ht={typ:"procedure",val:ee.val};else if("name"==ee.typ)Ht={typ:"name",val:ee.val.slice(1)};else{if("string"!=ee.typ)throw console.log(ee),ee.typ;Ht={typ:"file",val:{off:0,buff:new Uint8Array(ee.val)}}}t.push(Ht)}else if("cvlit"==b)"procedure"==(Jt=t.pop()).typ?t.push({typ:"array",val:Jt.val}):t.push(Jt);else if("cvn"==b)t.push({typ:"name",val:FromPS.readStr(t.pop().val)});else if(-1!="add sub mul div idiv bitshift mod exp atan".split(" ").indexOf(b)){var zt=t.pop(),Gt=(jt=t.pop()).val,Zt=zt.val,E=0,qt="";"add"==b||"sub"==b||"mul"==b?qt="real"==jt.typ||"real"==zt.typ?"real":"integer":"div"==b||"atan"==b||"exp"==b?qt="real":"mod"!=b&&"idiv"!=b&&"bitshift"!=b||(qt="integer"),"real"==jt.typ&&(l[0]=Gt,Gt=l[0]),"real"==zt.typ&&(l[0]=Zt,Zt=l[0]),"add"==b&&(E=Gt+Zt),"sub"==b&&(E=Gt-Zt),"mul"==b&&(E=Gt*Zt),"div"==b&&(E=Gt/Zt),"idiv"==b&&(E=~~(Gt/Zt)),"bitshift"==b&&(E=0<Zt?Gt<<Zt:Gt>>>-Zt),"mod"==b&&(E=Gt%Zt),"exp"==b&&(E=Math.pow(Gt,Zt)),"atan"==b&&(E=180*Math.atan2(Gt,Zt)/Math.PI),"real"==qt&&(l[0]=E,E=l[0]),t.push({typ:qt,val:E})}else if(-1!="neg abs floor ceiling round truncate sqrt ln sin cos".split(" ").indexOf(b)){Gt=(jt=t.pop()).val,E=0,qt="";if("neg"==b||"abs"==b||"truncate"==b||"floor"==b||"ceiling"==b||"round"==b?qt=jt.typ:"sqrt"!=b&&"sin"!=b&&"cos"!=b&&"ln"!=b||(qt="real"),"real"==jt.typ&&(l[0]=Gt,Gt=l[0]),"neg"==b&&(E=-Gt),"abs"==b&&(E=Math.abs(Gt)),"floor"==b&&(E=Math.floor(Gt)),"ceiling"==b&&(E=Math.ceil(Gt)),"round"==b&&(E=Math.round(Gt)),"truncate"==b&&(E=Math.trunc(Gt)),"sqrt"==b&&(E=Math.sqrt(Gt)),"ln"==b&&(E=Math.log(Gt)),"sin"==b&&(E=Math.sin(Gt*Math.PI/180)),"cos"==b&&(E=Math.cos(Gt*Math.PI/180)),"ln"==b&&Gt<=0)throw"e";"real"==qt&&(l[0]=E,E=l[0]),t.push({typ:qt,val:E})}else if(-1!="eq ge gt le lt ne".split(" ").indexOf(b)){var jt,zt=t.pop(),Bt=(jt=t.pop()).typ,Ht=zt.typ,Gt=jt.val,Zt=zt.val,E=!1;if("eq"==b||"ne"==b){l=jt.typ==zt.typ;if(l&&-1!=["integer","real","name","null","dict"].indexOf(Bt))E=Gt==Zt;else if("real"==Bt&&"integer"==Ht||"real"==Ht&&"integer"==Bt)E=Gt==Zt;else if(l||"null"!=jt.typ&&"null"!=zt.typ){if(!l||"string"!=jt.typ)throw console.log(b,jt,zt,jt.val==zt.val),"e";if(Gt.length!=Zt.length)E=!1;else{E=!0;for(y=0;y<Gt.length;y++)Gt[y]!=Zt[y]&&(E=!1)}}else E=!1;"ne"==b&&(E=!E)}else"ge"==b?E=Zt<=Gt:"gt"==b?E=Zt<Gt:"le"==b?E=Gt<=Zt:"lt"==b&&(E=Gt<Zt);t.push({typ:"boolean",val:E})}else if(-1!=["and","or"].indexOf(b)){var zt=t.pop(),Vt=t.pop(),Zt=Vt.val,zt=zt.val,Vt="integer"==Vt.typ;"and"==b&&(E=Vt?Zt&zt:Zt&&zt),t.push({typ:Vt?"integer":"boolean",val:E="or"==b?Vt?Zt|zt:Zt||zt:E})}else if("not"==b){Z=(Ct=t.pop()).val,E=(Vt="integer"==Ct.typ)?~Z:!Z;t.push({typ:Vt?"integer":"boolean",val:E})}else if("if"==b){J=t.pop();(Xt=t.pop().val)&&FromPS.addProc(J,r)}else if("ifelse"==b){var Wt=t.pop(),Vt=t.pop(),Xt=t.pop().val;FromPS.addProc(Xt?Vt:Wt,r)}else if("exec"==b||"stopped"==b){var Jt=t.pop();if("stopped"==b&&FromPS.addProc({typ:"procedure",val:[{typ:"boolean",val:!1}]},r),"procedure"==Jt.typ)FromPS.addProc(Jt,r);else{if("name"!=Jt.typ&&"operator"!=Jt.typ&&"integer"!=Jt.typ&&"real"!=Jt.typ&&"array"!=Jt.typ)throw console.log(Jt),"unknown executable type: "+Jt.typ;FromPS.addProc({typ:"procedure",val:[Jt]},r)}}else if("stop"==b){var Yt=r[r.length-1];"procedure"==Yt.typ&&0!=Yt.off&&r.pop()}else if("dup"==b){Z=t.pop();t.push(Z,Z)}else if("exch"==b)t.push(t.pop(),t.pop());else if("copy"==b)if("integer"==(z=t.pop()).typ){for(var Qt=[],y=0;y<z.val;y++)Qt[z.val-1-y]=t.pop();for(y=0;y<z.val;y++)t.push(Qt[y]);for(y=0;y<z.val;y++)t.push(Qt[y])}else if("array"==z.typ){for(dt=t.pop().val,y=0;y<dt.length;y++)if(z.val[y]=dt[y],null==dt[y].val)throw console.log(e),"e";t.push(z)}else{if("dict"!=z.typ)throw"e";for(w in dt=t.pop().val)z.val[w]=dt[w];t.push(z)}else if("roll"==b){for(ot=t.pop().val,z=t.pop().val,Qt=[],y=0;y<z;y++)Qt.push(t.pop());Qt.reverse(),ot=(z+ot)%z;for(y=0;y<ot;y++)Qt.unshift(Qt.pop());for(y=0;y<z;y++)t.push(Qt[y])}else if("index"==b){z=t.pop().val;t.push(t[t.length-1-z])}else if("anchorsearch"==b){var Wt=t.pop(),Yt=t.pop(),Kt=Wt.val,I=Yt.val,$t=!0;if(Kt.length<=I.length)for(y=0;y<Kt.length;y++)Kt[y]!=I[y]&&($t=!1);else $t=!1;$t?t.push({typ:"string",val:I.slice(Kt.length)},Wt):t.push(Yt),t.push({typ:"boolean",val:$t})}else if("transform"==b||"itransform"==b||"dtransform"==b||"idtransform"==b){It=0,Ut=0;"array"==(dt=t.pop()).typ?(dt=FromPS.readArr(dt.val),It=t.pop().val):(It=dt.val,dt=u.ctm.slice(0)),"itransform"!=b&&"idtransform"!=b||UDOC.M.invert(dt),Ut=t.pop().val,b.endsWith("dtransform")&&(dt[4]=0,dt[5]=0);It=UDOC.M.multPoint(dt,[Ut,It]);t.push({typ:"real",val:It[0]},{typ:"real",val:It[1]})}else if("pop"==b||"srand"==b||"=="==b)t.pop();else if("rand"==b)t.push({typ:"integer",val:Math.floor(2147483647*Math.random())});else if("put"==b){var te=t.pop(),ee=t.pop();if("array"==(qt=(Jt=t.pop()).typ)){if("integer"!=ee.typ)throw"e";Jt.val[ee.val]=te}else if("dict"==qt){var re=FromPS.getDKey(ee);Jt.val[re]=te}else{if("string"!=qt)throw qt+" e";Jt.val[ee.val]=te.val}}else if("get"==b){ee=t.pop();if("string"==(qt=(Jt=t.pop()).typ))t.push({typ:"integer",val:Jt.val[ee.val]});else if("array"==qt){if(null==(x=Jt.val[ee.val]))throw"e";t.push(x)}else{if("dict"!=qt)throw"getting from unknown type "+Jt.typ;Tt=FromPS.getDKey(ee);if(null==(Z=Jt.val[Tt]))throw"e";t.push(Z)}}else if("load"==b){S=t.pop().val.slice(1);if(null==(te=FromPS.getFromStacks(S,e)))throw console.log(S,e),"e";t.push(te)}else if("where"==b){S=t.pop().val.slice(1);null!=(C=FromPS.where(S,e))&&t.push({typ:"dict",val:C,maxl:1e3}),t.push({typ:"boolean",val:null!=C})}else if("store"==b){te=t.pop(),S=t.pop().val.slice(1);(C=null==(C=FromPS.where(S,e))?e[e.length-1]:C)[S]=te}else if("repeat"==b){var J=t.pop(),ne=t.pop().val;r.push({typ:"name",val:b+"---",ctx:{proc:J,cur:0,cnt:ne}})}else if("repeat---"==b)(ie=L.ctx).cur<ie.cnt&&(r.push(L),FromPS.addProc(ie.proc,r),ie.cur++);else if("for"==b){J=t.pop(),re=t.pop(),qt=t.pop(),ne=t.pop();r.push({typ:"name",val:b+"---",ctx:{proc:J,isInt:"integer"==ne.typ&&"integer"==qt.typ,init:ne.val,inc:qt.val,limit:re.val}})}else if("for---"==b)(ie=L.ctx).isInt?(0<ie.inc&&ie.init<=ie.limit||ie.inc<0&&ie.init>=ie.limit)&&(r.push(L),FromPS.addProc(ie.proc,r),t.push({typ:"integer",val:ie.init}),ie.init+=ie.inc):((ae=new Float32Array(1))[0]=ie.limit,ie.limit=ae[0],ae[0]=ie.inc,ie.inc=ae[0],ae[0]=ie.init,(0<ie.inc&&ae[0]<=ie.limit||ie.inc<0&&ae[0]>=ie.limit)&&(r.push(L),FromPS.addProc(ie.proc,r),t.push({typ:"real",val:ae[0]}),ae[0]+=ie.inc,ie.init=ae[0]));else if("loop"==b){J=t.pop();r.push({typ:"name",val:b+"---",ctx:{proc:J}})}else if("loop---"==b){var ie=L.ctx;r.push(L),FromPS.addProc(ie.proc,r)}else if("pathforall"==b){var se=t.pop();t.pop(),t.pop(),t.pop()}else if("forall"==b){ie=[J=t.pop(),Jt=t.pop(),0];r.push({typ:"name",val:b+"---",ctx:ie})}else if("forall---"==b){J=(ie=L.ctx)[0],Jt=ie[1],y=ie[2];if("dict"==Jt.typ){var ae=Object.keys(Jt.val);if(y<ae.length){if(r.push(L),FromPS.addProc(J,r),t.push({typ:"name",val:"/"+ae[y]}),null==(x=Jt.val[ae[y]]))throw"e";t.push(null==x?{typ:"null",val:null}:x),ie[2]++}}else{if("procedure"!=Jt.typ&&"array"!=Jt.typ)throw console.log(J,Jt),"forall: unknown type: "+Jt.typ;y<Jt.val.length&&(r.push(L),FromPS.addProc(J,r),L=Jt.val[y],t.push(null==L?{typ:"null",val:null}:L),ie[2]++)}}else if("exit"==b){for(y=r.length-1;0!=y&&("name"!=r[y].typ||!r[y].val.endsWith("---"));)y--;if(0!=y)for(;r.length>y;)r.pop()}else if("bind"!=b)if("xcheck"==b){c=(Jt=t.pop()).typ;t.push({typ:"boolean",val:"procedure"==c})}else if("status"==b){I=t.pop();t.push({typ:"boolean",val:!1})}else if("cachestatus"==b)for(y=0;y<7;y++)t.push({typ:"integer",val:5e3});else if("setcachelimit"==b)t.pop();else if("type"==b){c={name:"nametype",dict:"dicttype",boolean:"booleantype",procedure:"operatortype",string:"stringtype",null:"nulltype",integer:"integertype",array:"arraytype",operator:"operatortype",real:"realtype"};if(null==c[(ee=t.pop()).typ])throw console.log(ee),ee.typ;t.push({typ:"name",val:"/"+c[ee.typ]})}else if("save"==b)t.push({typ:"state",val:JSON.parse(JSON.stringify(u))});else if("restore"==b)u=i.gst=t.pop().val;else if("clipsave"==b)u.cpstack.push(JSON.parse(JSON.stringify(u.cpth)));else if("cliprestore"==b)u.cpath=u.cpstack.pop();else if("gsave"==b)n.push(JSON.parse(JSON.stringify(u)));else if("grestore"==b)u=0!=n.length?i.gst=n.pop():UDOC.getState();else if("grestoreall"==b)for(;0!=n.length;)u=i.gst=n.pop();else if("usertime"==b||"realtime"==b)t.push({typ:"integer",val:"usertime"==b?Date.now()-h:Date.now()});else if("flush"!=b&&"readonly"!=b&&"executeonly"!=b)if("flushfile"==b)FromPS.GetFile(t.pop());else if("filter"==b){h=t.pop().val;if("/SubFileDecode"==h){if("string"!=(I=t.pop()).typ)throw"e";var F=t.pop().val,oe=[h,I=I.val,F]}else oe=[h];h=t.pop();t.push({typ:"file",val:{buff:new Uint8Array,off:0},_flt:oe,_src:h})}else if("begincmap"!=b&&"endcmap"!=b)if("begincodespacerange"==b||"beginbfrange"==b||"beginbfchar"==b)i.cmnum=t.pop().val;else if("endcodespacerange"==b||"endbfrange"==b||"endbfchar"==b){var se="endbfrange"==b?3:2,he=b.slice(3),rt=0;null==(C=e[e.length-1])[he]&&(C[he]=[]);for(y=0;y<i.cmnum;y++){for(var le=[],ot=se-1;0<=ot;ot--){var fe=t.pop(),ue=fe.val;if("string"==fe.typ)x=FromPS.strToInt(ue),0==ot&&(rt=ue.length);else{x=[];for(Tt=0;Tt<ue.length;Tt++)x.push(FromPS.strToInt(ue[Tt].val))}le[ot]=x}C[he]=C[he].concat(le)}"endcodespacerange"!=b&&(C.bpc=rt)}else{if(!a)throw console.log(te,b),console.log(e,t),"e";a(b,t,e,r,n,i,s)}}}}return!0},FromPS.strToInt=function(t){for(var e=0,r=0;r<t.length;r++)e=e<<8|t[r];return e},FromPS.getDKey=function(t){return"name"==t.typ?t.val.slice(1):"string"==t.typ?FromPS.readStr(t.val):t.val},FromPS.GetFile=function(t){if(null==t._flt||t.val.off<t.val.buff.length)return t;FromPS.GetFile(t._src);var e,r=t._src.val,n=t._flt,i=n[0];if("/ASCII85Decode"==i)e=FromPS.F.ASCII85Decode(r);else if("/RunLengthDecode"==i)e=FromPS.F.RunLengthDecode(r);else if("/FlateDecode"==i)e=FromPS.F.FlateDecode(r);else if("/LZWDecode"==i)e=FromPS.F.LZWDecode(r);else{if("/SubFileDecode"!=i)throw i;for(var s=n[1],a=n[2],o=r.off,h=0;o<r.buff.length;){for(var l=0;l<s.length&&r.buff[o+l]==s[l];)l++;if(l==s.length){if(h==a)break;h++}o++}e=r.buff.slice(r.off,o),r.off=o}return t.val={buff:e,off:0},t},FromPS.checkPageStarted=function(t,e){t.pgOpen||(e.StartPage(t.bb[0],t.bb[1],t.bb[2],t.bb[3]),t.pgOpen=!0)},FromPS.getPSShadingFill=function(t,e){t=function t(e){var r=e.typ,n=e.val;if("dict"==r)for(var i in s={},n)s["/"+i]=t(n[i]);else if("array"==r)for(var s=[],a=0;a<n.length;a++)s.push(t(n[a]));else if("string"==r)for(s="",a=0;a<n.length;a++)s+=String.fromCharCode(n[a]);else if(-1!=["boolean","integer","real","name"].indexOf(r))s=n;else{if("procedure"!=r)throw console.log(e),"e";for(var o="",a=0;a<n.length;a++)o+=n[a].val+" ";for(var o="{ "+o+"}",h=new Uint8Array(o.length),a=0;a<o.length;a++)h[a]=o.charCodeAt(a);s={"/FunctionType":4,"/Domain":[0,1],"/Range":[0,1,0,1,0,1,0,1],"/Length":o.length,stream:h}}return s}(t);return FromPS.getShadingFill(t,e)},FromPS.F={HexDecode:function(t){var e=[];return FromPS.readHex(t,1e9,e),new Uint8Array(e)},ASCII85Decode:function(t){var e=[52200625,614125,7225,85,1],r=[],n=0,i=0,s=t.off,a=t.buff;for(a.length;;){var o,h,l=a[s++];if(!FromPS.isWhite(l)){if(126==l)return 0!=n&&(3==n&&r.push(i>>>24&255),4==n&&(r.push(i>>>24&255),r.push(i>>>16&255)),h=i>>>(o=5-n<<3)&255,0!=(i&=(1<<o)-1)&&h++,r.push(h)),t.off=s+1,new Uint8Array(r);122==l?(r.push(0),r.push(0),r.push(0),r.push(0)):(i+=(l-33)*e[n],5==++n&&(r.push(i>>>24&255),r.push(i>>>16&255),r.push(i>>>8&255),r.push(i>>>0&255),i=n=0))}}},RunLengthDecode:function(t){for(var e=[],r=t.off,n=t.buff.length;r<n;){var i=t.buff[r];if(r++,128==i)break;if(i<128){for(var s=0;s<i+1;s++)e.push(t.buff[r+s]);r+=i+1}else{for(s=0;s<257-i;s++)e.push(t.buff[r]);r++}}return t.off=r,new Uint8Array(e)},FlateDecode:function(t){var e=t.buff,e=new Uint8Array(e.buffer,e.byteOffset+t.off+2,e.length-2);return pako.inflateRaw(e)},LZWDecode:function(t){var e=new Uint8Array(20*(t.buff.length-t.off)),t=UTIF.decode._decodeLZW(t.buff,t.off,e,0);return e.slice(0,t)},_myLZW:function(){function w(t,e,r,n,i){for(var s=0;s<i;s+=4)r[n+s]=t[e+s],r[n+s+1]=t[e+s+1],r[n+s+2]=t[e+s+2],r[n+s+3]=t[e+s+3]}var b={};return function(t,e,r,n){if(!b.c){for(var i=new Uint32Array(65535),s=new Uint16Array(65535),a=new Uint8Array(2e6),o=0;o<256;o++)i[a[o<<2]=o]=o<<2,s[o]=1;b.c=[i,s,a]}for(var h,l,f,u,c=b.c[0],p=b.c[1],a=b.c[2],d=258,g=1032,v=9,m=e<<3,_=0,y=0;;){if(_=(t[m>>>3]<<16|t[m+8>>>3]<<8|t[m+16>>>3])>>24-(7&m)-v&(1<<v)-1,m+=v,257==_)break;if(256==_){if(d=258,g=1032,_=(t[m>>>3]<<16|t[m+8>>>3]<<8|t[m+16>>>3])>>24-(7&m)-(v=9)&(1<<v)-1,m+=v,257==_)break;r[n]=_,n++}else _<d?(h=c[_],l=p[_],w(a,h,r,n,l),n+=l,d<=y?(c[d]=g,a[c[d]]=h[0],g=g+(p[d]=1)+3&-4,d++):(c[d]=g,f=c[y],u=p[y],w(a,f,a,g,u),a[g+u]=a[h],u++,p[d]=u,d++,g=g+u+3&-4)):d<=y?(c[d]=g,p[d]=0,d++):(c[d]=g,f=c[y],u=p[y],w(a,f,a,g,u),a[g+u]=a[g],u++,p[d]=u,d++,w(a,g,r,n,u),n+=u,g=g+u+3&-4),d+1==1<<v&&v++;y=_}return n}}()},FromPS.B={readUshort:function(t,e){return t[e]<<8|t[e+1]},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}},FromPS.nrm=function(t){return Math.max(0,Math.min(1,t))},FromPS.makeArr=function(t,e){for(var r=[],n=0;n<t.length;n++)r.push({typ:e,val:t[n]});return r},FromPS.readArr=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].val);return e},FromPS.makeStr=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return e},FromPS.readStr=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},FromPS.getFromStacks=function(t,e){for(var r=e.length-1;0<=r;){if(null!=e[r][t])return e[r][t];r--}return null},FromPS.where=function(t,e){for(var r=e.length-1;0<=r;){if(null!=e[r][t])return e[r];r--}return null},FromPS.skipWhite=function(t){for(var e=t.off,r=t.buff,n=FromPS.isWhite;n(r[e])||37==r[e];){for(;n(r[e]);)e++;if(37==r[e]){for(;e<r.length&&!FromPS.isEOL(r[e]);)e++;e++}}t.off=e},FromPS.getToken=function(t,e){if(0==t.length)return null;var r=t[t.length-1];if("procedure"==r.typ){var n=r.val[r.off];return r.off++,r.off==r.val.length&&t.pop(),n}if("name"==r.typ)return t.pop(),r;for(var i=FromPS.getFToken(r.val,e);null==i&&1<t.length;)t.pop(),0!=t.length&&(i=FromPS.getFToken(t[t.length-1].val,e));return i},FromPS.getFToken=function(t,e){FromPS.skipWhite(t);var r=FromPS.isWhite,n=FromPS.isSpecl,i=t.off,s=t.buff,a=null;if(i>=s.length)return null;var o=s[i],h=String.fromCharCode(o);if(i++,"("==h){for(var l=0,f=i;41!=s[f]||0!=l;){var u=s[f];40==u?l++:41==u?l--:92==u&&f++,f++}for(var c=[],p=0;p<f-i;p++)c.push(s[i+p]);i=f+1,a={typ:"string",val:c=FromPS.getString(c)}}else if("{"==h||"}"==h||"["==h||"]"==h)a={typ:"name",val:h};else if("<"==h&&60==s[i]||">"==h&&62==s[i])a={typ:"name",val:"<"==h?"<<":">>"},i++;else if("<"==h){if(s[i]=="~".charCodeAt(0)){t.off=i+1;var d=FromPS.F.ASCII85Decode(t);c=[];for(p=0;p<d.length;p++)c.push(d[p]);i=t.off}else{for(f=i;62!=s[f];)f++;c=[];FromPS.readHex({buff:s,off:i},1e9,c),i=f+1}a={typ:"string",val:c}}else{for(f=i;f<s.length&&!r(s[f])&&(!n(s[f])||47==s[f]&&47==s[f-1]&&f==i&&e);)f++;var g,o=FromPS.B.readASCII(s,i-1,f-i+1),i=f,h=parseFloat(o);a="true"==o||"false"==o?{typ:"boolean",val:"true"==o}:isNaN(h)?"//"==o.slice(0,2)&&e?(g=o.slice(2),null!=(g=FromPS.getFromStacks(g,e))?g:{typ:"name",val:o}):{typ:"name",val:o}:((g=new Float32Array(1))[0]=h,h=g[0],{typ:-1==o.indexOf(".")?"integer":"real",val:h})}return t.off=i,a},FromPS.isSpecl=function(t){return-1!=[40,41,60,62,91,93,123,125,37,47].indexOf(t)},FromPS.isWhite=function(t){return 0==t||9==t||10==t||12==t||13==t||32==t},FromPS.isEOL=function(t){return 10==t||13==t},FromPS.getString=function(t){for(var e=[],r="n,r,t,b,f,\\,(,), ,/".split(","),n=["\n","\r","\t","\b","\f","\\","(",")"," ","/"],i=0;i<t.length;i++){var s,a,o=t[i];"\\"==String.fromCharCode(o)?(a=String.fromCharCode(t[i+1]),i++,"\r"!=a&&"\n"!=a&&(-1!=(s=r.indexOf(a))?e.push(n[s].charCodeAt(0)):(a=a+String.fromCharCode(t[i+1])+String.fromCharCode(t[i+2]),i+=2,e.push(parseInt(a,8))))):e.push(o)}return e},FromPS.makeString=function(t){for(var e="n r t b f \\ ( )".split(" "),r=["\n","\r","\t","\b","\f","\\","(",")"],n=[],i=0;i<t.length;i++){var s=t[i],a=r.indexOf(String.fromCharCode(s));-1==a?n.push(s):n.push(92,e[a].charCodeAt(0))}return n},FromPS.readHex=function(t,e,r){for(var n=0,i=-1,s=t.off,a=t.buff.length;n!=e&&s<a;){var o=t.buff[s],h=0;if(s++,47<o&&o<58)h=o-48;else if(96<o&&o<103)h=10+o-97;else{if(!(64<o&&o<71)){if(62==o)break;if(FromPS.isWhite(o))continue;throw"e"}h=10+o-65}-1==i?i=h:(r[n]=i<<4|h,i=-1,n++)}t.off=s},FromPS.getShadingFill=function(t,e){var r,n=t["/ShadingType"],i=t["/ColorSpace"],s=t["/Extend"],a=t["/Coords"]?t["/Coords"].slice(0):null,o="";if(null==s&&(s=[!1,!1]),2==n)o="lin";else{if(3!=n)return void console.log("Unknown shading type",n);o="rad"}var h,l=t["/Function"];if(l instanceof Array){for(var f,u=l.length,c=0;c<u;c++){var p=FromPS.getGrad(l[c],"/DeviceGray");if(0==c)f=p;else for(var d=f.length,g=0;g<d;g++)f[g][1][c]=p[g][1][0]}if("/DeviceCMYK"==i)for(c=0;c<f.length;c++)f[c][1]=UDOC.C.cmykToRgb(f[c][1]);r=f}else r=FromPS.getGrad(l,i);if("rad"==o&&a[2]>a[5]){a=a.slice(3).concat(a.slice(0,3)),s.reverse(),r.reverse();for(c=0;c<r.length;c++)r[c][0]=1-r[c][0]}return s[0]||"rad"==o||((h=r[0])[0]+=.002,r.unshift([.001,h[1].slice(),0])),s[1]||((h=r[r.length-1])[0]-=.002,r.push([0,999,h[1].slice(),0])),{typ:o,mat:e,grad:r,crds:a}},FromPS.getGrad=function(t,e){var r=FromPS._normColor,n=t["/Functions"],i=t["/FunctionType"],s=t["/Bounds"],a=t["/Encode"];if(0==i)for(var o=[],h=Math.min(4,t["/Size"][0]),l=0;l<=h;l++)o.push([l/h,r(t,[l/h],e)]);else if(2==i)o=[[0,r(t,[0],e)],[1,r(t,[1],e)]];else if(3==i){o=[],(0==s.length||0<s[0])&&o.push([0,r(n[0],[a[0]],e)]);for(l=0;l<s.length;l++)o.push([s[l],r(n[l],[a[2*l+1]],e)]);(0==s.length||s[s.length-1]<1)&&o.push([1,r(n[n.length-1],[a[a.length-1]],e)])}else if(4==i){o=[];for(l=0;l<5;l++)o.push([l/5,r(t,[l/5],e)])}return o},FromPS._normColor=function(t,e,r){var n,i="/DeviceCMYK",s="/DeviceRGB",t=FromPS.Func(t,e);if(r[3]&&r[3]["/Length"])if(t=FromPS.Func(r[3],t),r[2]==i||4==t.length)n=i;else if(r[2]==s)n=s;else if(r[2]&&"/Lab"==r[2][0])n="/Lab";else if(r[2]&&r[2][1]&&r[2][1]["/Alternate"]&&"/Lab"==r[2][1]["/Alternate"][0])n="/Lab";else{if(!(r[2]&&r[2][1]&&r[2][1]["/Alternate"]&&r[2][1]["/Alternate"]==s))throw console.log(t,r),"unknown color profile";n=s}else if("/ICCBased"==r[0]&&r[1]){e=r[1]["/N"];if(4==e)n=i;else{if(3!=e)throw e;n=s}}else n="/Separation"==r[0]?(t=FromPS._readSeparation(r,t[0]),s):1==r.length?r[0]:"/Lab"==r[0]?"/Lab":r[2]==i?i:r;if(n!=s)if(n==i)t=UDOC.C.cmykToRgb(t);else if("/DeviceGray"==n)t=[t[0],t[0],t[0]];else{if("/Lab"!=n)throw"Unknown color space "+n;t=UDOC.C.labToRgb(t)}return t},FromPS._readSeparation=function(t,e){e=FromPS.Func(t[3],[e]),e=t&&"/DeviceCMYK"==t[2]?UDOC.C.cmykToRgb(e):t&&"/DeviceGray"==t[2]?[e[0],e[0],e[0]]:t&&t[2]&&t[2][0]&&"/Lab"==t[2][0]?UDOC.C.labToRgb(e):e;return e},FromPS.Func=function(t,e){for(var r=FromPS.intp,n=t["/Domain"],i=t["/Range"],s=t["/FunctionType"],a=[],o=0;o<e.length;o++)e[o]=Math.max(n[2*o],Math.min(n[2*o+1],e[o]));if(0==s){var h=t["/Encode"],l=t["/Size"],f=t["/Decode"],u=i.length/2;null==h&&(h=[0,l[0]-1]),null==f&&(f=i);for(o=0;o<e.length;o++){var c=r(e[o],n[2*o],n[2*o+1],h[2*o],h[2*o+1]);e[o]=Math.max(0,Math.min(l[o]-1,c))}for(var p=t["/DataSource"],d=0;d<u;d++){var g=Math.round(e[0]),v=p?p.charCodeAt(u*g+d):FromPS.GS(t)[u*g+d];v=r(v,0,255,f[2*d],f[2*d+1]),a.push(v)}}else if(2==s){var m=t["/C0"],_=t["/C1"],y=t["/N"];null==m&&(m=[0]),null==_&&(_=[1]);for(g=e[0],o=0;o<m.length;o++)a[o]=m[o]+Math.pow(g,y)*(_[o]-m[o])}else if(4==s){var w=FromPS._getEnv([0,0,0,0]),b=!0;w.pgOpen=!0;var x=[],S=[],p=FromPS._getDictStack([],{}),C=[];for(C.push({typ:"file",val:{buff:FromPS.GS(t),off:0}});b;)b=FromPS.step(S,p,C,x,w,{},FromPS.operator);s=S.pop();s.off=0,C.push(s);for(o=0;o<e.length;o++)S.push({typ:"real",val:e[o]});for(b=!0;b;)b=FromPS.step(S,p,C,x,w,{},FromPS.operator);for(o=0;o<S.length;o++)a.push(S[o].val)}if(i)for(o=0;o<a.length;o++)a[o]=Math.max(i[2*o],Math.min(i[2*o+1],a[o]));return a},FromPS.intp=function(t,e,r,n,i){return n+(t-e)*(i-n)/(r-e)},FromPS.GS=function(t){if(null==t.stream){var e=t.buff;delete t.buff;var r,n,i=t["/Filter"],s=t["/DecodeParms"];if(null!=i){for(var a="string"==typeof i?[i]:i,o=!1,h=0;h<a.length;h++){var l=a[h],f={buff:e,off:0};if("/FlateDecode"==l)e=FromPS.F.FlateDecode(f);else if("/RunLengthDecode"==l)e=FromPS.F.RunLengthDecode(f);else if("/LZWDecode"==l)e=FromPS.F.LZWDecode(f);else if("/ASCIIHexDecode"==l)e=FromPS.F.HexDecode(f);else if("/ASCII85Decode"==l||"/A85"==l)e=FromPS.F.ASCII85Decode(f);else{if("/DCTDecode"!=l&&"/CCITTFaxDecode"!=l&&"/JPXDecode"!=l&&"/JBIG2Decode"!=l)throw console.log(l,e),"e";o=!0}}o||delete t["/Filter"]}null!=s&&(s=s instanceof Array?s[0]:s)&&null!=s["/Predictor"]&&1!=s["/Predictor"]&&(r=s["/Columns"],n=s["/Colors"]||1,s=e.length/(1+(i=n*r)),FromPS._filterZero(e,0,r,s,n),e=e.slice(0,s*i)),t.stream=e}return t.stream},FromPS._filterZero=function(t,e,r,n,i){for(var s=i*r,a=FromPS._paeth,o=0;o<n;o++){var h=e+o*s,l=h+o+1,f=t[l-1];if(0==f)for(var u=0;u<s;u++)t[h+u]=t[l+u];else if(1==f){for(u=0;u<i;u++)t[h+u]=t[l+u];for(u=i;u<s;u++)t[h+u]=t[l+u]+t[h+u-i]&255}else if(0==o){for(u=0;u<i;u++)t[h+u]=t[l+u];if(2==f)for(u=i;u<s;u++)t[h+u]=255&t[l+u];if(3==f)for(u=i;u<s;u++)t[h+u]=t[l+u]+(t[h+u-i]>>1)&255;if(4==f)for(u=i;u<s;u++)t[h+u]=t[l+u]+a(t[h+u-i],0,0)&255}else{if(2==f)for(u=0;u<s;u++)t[h+u]=t[l+u]+t[h+u-s]&255;if(3==f){for(u=0;u<i;u++)t[h+u]=t[l+u]+(t[h+u-s]>>1)&255;for(u=i;u<s;u++)t[h+u]=t[l+u]+(t[h+u-s]+t[h+u-i]>>1)&255}if(4==f){for(u=0;u<i;u++)t[h+u]=t[l+u]+a(0,t[h+u-s],0)&255;for(u=i;u<s;u++)t[h+u]=t[l+u]+a(t[h+u-i],t[h+u-s],t[h+u-i-s])&255}}}return t},FromPS._paeth=function(t,e,r){var n=t+e-r,i=Math.abs(n-t),s=Math.abs(n-e),n=Math.abs(n-r);return i<=s&&i<=n?t:s<=n?e:r},FromPDF.indexOfXref=function(t){for(var e=t.length-3;"%%E"!=FromPS.B.readASCII(t,e,3);)e--;for(;37==t[e-1];)e--;var r=e;for(e--;FromPS.isEOL(t[e])||32==t[e];)e--;for(;!FromPS.isEOL(t[e])&&32!=t[e];)e--;e++;r=parseInt(FromPS.B.readASCII(t,e,r-e));if(isNaN(r))throw"no xref";return r},FromPDF.Parse=function(t,e){t=new Uint8Array(t);for(var r=0;32==t[r];)r++;0!=r&&(t=new Uint8Array(t.buffer,t.byteOffset+r,t.length-r));for(var n=FromPDF.indexOfXref(t),i=[],s=FromPDF.readXrefTrail(t,n,i),a=-1,o=0;o<i.length;o++)null==i[o]&&(a=o);if(null==s||-1!=a){for(console.log("PDF is broken, trying to rebuild");0!=i.length;)i.pop();s=FromPDF.brokenXrefTrail(t,i)}if(s["/Encrypt"])alert("Encrypted PDFs are not supported yet.");else{var h={buff:t,off:0},n=s["/Root"];"ref"==n.typ&&(s["/Root"]=FromPDF.getIndirect(n.ind,n.gen,h,i));n=s["/Root"]["/Pages"];"ref"==n.typ&&(s["/Root"]["/Pages"]=FromPDF.getIndirect(n.ind,n.gen,h,i));for(var l=[s["/Root"]["/Pages"]];0!=l.length;){var f=l.pop();if(f["/Kids"])for(var u=f["/Kids"],o=0;o<u.length;o++)"ref"==u[o].typ&&(u[o]=FromPDF.getIndirect(u[o].ind,u[o].gen,h,i)),FromPDF.solveIndirects(u[o],h,i),l.push(u[o])}Date.now();FromPDF.render(s["/Root"],e,s),e.Done()}},FromPDF.solveIndirects=function(t,e,r){if("object"==typeof t)for(var n in t)n.startsWith("/")&&(t[n]&&"ref"==t[n].typ&&r[t[n].ind]&&(t[n]=FromPDF.getIndirect(t[n].ind,t[n].gen,e,r)),FromPDF.solveIndirects(t[n],e,r))},FromPDF.render=function(t,e,r){for(var n="CS cs SCN scn SC sc sh Do gs ID EI cm y v B B* BT ET Tj TJ Tf Tm Td T* Tc Tw Tz TL Tr Ts MP DP BMC BDC EMC BX EX ri".split(" "),i=0,s=FromPS.makeProcs(s={J:"setlinecap",j:"setlinejoin",w:"setlinewidth",d:"setdash",M:"setmiterlimit",i:"setflat",q:"gsave",Q:"grestore",m:"moveto",l:"lineto",c:"curveto",h:"closepath",re:"_drawRect_",W:"clip","W*":"eoclip",f:"fill",F:"fill","f*":"eofill",S:"stroke",b:"h B","b*":"h B*",n:"newpath",RG:"/DeviceRGB  CS SCN",rg:"/DeviceRGB  cs scn",G:"/DeviceGray CS SCN",g:"/DeviceGray cs scn",K:"/DeviceCMYK CS SCN",k:"/DeviceCMYK cs scn",TD:"dup neg TL Td",'"':"exch Tc exch Tw '","'":"T* Tj",s:"h S",BI:"/BI"}),a=[t["/Pages"]];0!=a.length;){var o=a.pop();if(o["/Kids"])for(var h=(u=o["/Kids"]).length-1;0<=h;h--)a.push(u[h]);else i+=((p=null==(p=o["/MediaBox"])?t["/Pages"]["/MediaBox"]:p)[2]-p[0])*(p[3]-p[1])}for(var a=[t["/Pages"]],l=-1,f=[-1e9,1e9];0!=a.length;)if((o=a.pop())["/Kids"])for(var u,h=(u=o["/Kids"]).length-1;0<=h;h--)a.push(u[h]);else if(!(++l<f[0])){null==o["/Resources"]&&(o["/Resources"]=t["/Pages"]["/Resources"]);var c=o["/Contents"];if(null!=c){null==c.length&&(c=[c]);var p,d=null!=o["/Rotate"]&&(o["/Rotate"]+36e3)%360==90;null==(p=o["/MediaBox"])&&(p=t["/Pages"]["/MediaBox"]),d&&(p=[p[0],p[1],p[3],p[2]]);var g=FromPS._getEnv(p);g.pgOpen=!0;var v=[],m=[],_=FromPS._getDictStack(n,s),y=[];if(d&&(UDOC.M.rotate(g.gst.ctm,Math.PI/2),UDOC.M.translate(g.gst.ctm,0,p[3])),e.StartPage(p[0],p[1],p[2],p[3],i),r["/Encrypt"])0==a.length&&alert("Encrypted PDF is not supported yet.");else for(var w=0;w<c.length;w++)if(null!=c[w].buff&&0!=c[w]["/Length"]){for(var b=FromPS.GS(c[w]),x=b.length-1,S=!0;0==b[x];)x--;for(b=new Uint8Array(b.buffer,b.byteOffset,x+1),y.push({typ:"file",val:{buff:b,off:0,extra:o,clgrp:!1}});S;)S=FromPS.step(m,_,y,v,g,e,FromPDF.operator)}if(e.ShowPage(),f[1]<=l)break}}},FromPDF.addCmd=function(t,e,r){for(var n=t.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=t.charCodeAt(s);e.push({typ:"file",val:{buff:i,off:0,extra:r}})},FromPDF._pushForm=function(t,e,r,n){var i,s=e["/Matrix"];n&&FromPDF.addCmd("Q",t,e),s&&(i=s.slice(0),UDOC.M.invert(i),FromPDF.addCmd(i.join(" ")+" cm",t,e)),t.push({typ:"file",val:{buff:FromPS.GS(e),off:0,extra:e,clgrp:r}}),s&&FromPDF.addCmd(s.join(" ")+" cm",t,e),n&&FromPDF.addCmd("q",t,e)},FromPDF.operator=function(t,e,r,n,i,s,a){for(var o=s.gst,h=n.length-1;"file"!=n[h].typ;)h--;var l=n[h].val,f=l.extra["/Resources"];if("Do"==t){var u=e.pop().val,c=f["/XObject"][u],p=c["/Subtype"];if("/Form"==p){var d=null!=c["/Group"]?!0:!1;null==c["/Resources"]&&(c["/Resources"]=f),FromPDF._pushForm(n,c,d)}else if("/Image"==p){var g,v,m=c["/Width"],_=c["/Height"],y=c["/ColorSpace"],w=c["/SMask"],b=FromPDF.getImage(c),x=FromPDF.getJBIG2Glob(c);if(w&&w["/Width"]&&(u=w["/Width"],g=w["/Height"],u==m&&g==_||(v=new Uint32Array(u*g),w=new Uint32Array(b.buffer.slice(b.byteOffset,b.byteOffset+4)),v.fill(w[0]),m=u,_=g,b=new Uint8Array(v.buffer)),g=FromPDF.getImage(c["/SMask"]),v=FromPDF.getJBIG2Glob(c["/SMask"])),1==c["/ImageMask"]){g=b,v=x,b=new Uint8Array(m*_*4);for(var x=null,S=255*o.colr[0],C=255*o.colr[1],P=255*o.colr[2],k=0;k<m*_*4;k+=4)b[k]=S,b[k+1]=C,b[k+2]=P,b[k+3]=255}b&&0!=b.byteOffset&&(b=b.slice(0)),g&&0!=g.byteOffset&&(g=g.slice(0)),a.PutImage(o,b,m,_,g,x,v)}else console.log("Unknown XObject",p)}else if("gs"==t){if(0!=e.length){var T=e.pop().val,I=f["/ExtGState"][T];for(G in I){var M=I[G];"/Type"!=G&&("/CA"==G?o.CA=l.clgrp?o.CA*M:M:"/ca"==G?o.ca=l.clgrp?o.ca*M:M:"/BM"==G?l.clgrp&&"/Normal"!=o.bmode||(o.bmode=M):"/LC"==G?o.lcap=M:"/LJ"==G?o.ljoin=M:"/LW"==G?o.lwidth=M:"/ML"==G?o.mlimit=M:"/SA"==G?o.SA=M:"/OPM"==G?o.OPM=M:"/AIS"==G?o.AIS=M:"/OP"==G?o.OP=M:"/op"==G?o.op=M:"/SMask"==G?o.SMask="":"/SM"==G?o.SM=M:"/HT"==G||"/TR"==G||console.log("Unknown gstate property: ",G,M))}}}else if("ID"==t){for(var F={};;){if("/BI"==(M=e.pop().val))break;F[e.pop().val]=M}l.off++;for(var A=(m=F["/W"])*(_=F["/H"]),b=new Uint8Array(4*A),y=F["/CS"],E=F["/BPC"],U=l.off,O=l.buff;!FromPS.isWhite(O[U])||69!=O[U+1]||73!=O[U+2]||!FromPS.isWhite(O[U+3]);)U++;var D=O.slice(l.off,U);if(l.off+=D.length,"/Fl"==F["/F"]){var L={buff:D,"/Filter":"/FlateDecode"};if(F["/DP"])for(var N=L["/DecodeParms"]={},R=["Predictor","Columns","Colors"],k=0;k<3;k++)F["/DP"][R[k]]&&(N["/"+R[k]]=F["/DP"][R[k]].val);D=FromPS.GS(L),delete F["/F"],delete F["/DP"]}if("/G"==y&&null==F["/F"])FromPDF.plteImage(D,0,b,null,m,_,E);else if("/RGB"==y&&null==F["/F"]&&D.length==m*_*3)for(k=0;k<A;k++){var B=3*k,z=4*k;b[z]=D[B],b[1+z]=D[1+B],b[2+z]=D[2+B],b[3+z]=255}else y&&null!=y[0].typ?FromPDF.plteImage(D,0,b,y[3].val,m,_,E):b=D;a.PutImage(o,b,m,_)}else if("n"!=t&&"BT"!=t&&"EI"!=t)if("ET"==t)o.font.Tm=[1,0,0,1,0,0],o.font.Tlm=o.font.Tm.slice(0);else if("y"==t||"v"==t){T=o.ctm.slice(0);UDOC.M.invert(T);var G=UDOC.M.multPoint(T,o.cpos),Z=e.pop().val,L=e.pop().val,E=e.pop().val,T=e.pop().val;"y"==t?UDOC.G.curveTo(o,T,E,L,Z,L,Z):UDOC.G.curveTo(o,G[0],G[1],T,E,L,Z)}else if("B"==t||"B*"==t)a.Fill(o,"B*"==t),a.Stroke(o),UDOC.G.newPath(o);else if("cm"==t||"Tm"==t){for(var q=[],k=0;k<6;k++)q.push(e.pop().val);q.reverse(),"cm"==t?(UDOC.M.concat(q,o.ctm),o.ctm=q):(o.font.Tm=q,o.font.Tlm=q.slice(0))}else if("Td"==t||"T*"==t){var Z=0,j=0;"T*"==t?(Z=0,j=-o.font.Tl):(j=e.pop().val,Z=e.pop().val);j=[1,0,0,1,Z,j];UDOC.M.concat(j,o.font.Tlm),o.font.Tm=j,o.font.Tlm=j.slice(0)}else if("Tf"==t){var H=e.pop().val,V=e.pop().val;o.font.Tf=V,o.font.Tfs=H}else if("Tj"==t||"TJ"==t){var W="string"==(W=e.pop()).typ?[W]:W.val,X=o.font.Tf;null==(V=f["/Font"][X])&&(V=f["/Font"][X.replace("_","#5F")]);function J(t,e){e=[1,0,0,1,e,0];UDOC.M.concat(e,t.Tm),t.Tm=e}for(var Y,Q,K=o.font.Tfs/1e3,k=0;k<W.length;k++)"string"==W[k].typ?(Y=FromPDF.getString(W[k].val,V),W[k+1]&&"string"!=W[k+1].typ&&(Q=W[k+1].val,Y[1]+=-Q,-900<Q&&Q<-100&&(Y[0]+=" ")),o.font.Tf=Y[2],a.PutText(o,Y[0],Y[1]/1e3),o.font.Tf=X,J(o.font,K*Y[1])):0==k&&J(o.font,-K*W[k].val)}else if("Tc"==t)o.font.Tc=e.pop().val;else if("Tw"==t)o.font.Tw=e.pop().val;else if("Tz"==t)o.font.Th=e.pop().val;else if("TL"==t)o.font.Tl=e.pop().val;else if("Tr"==t)o.font.Tmode=e.pop().val;else if("Ts"==t)o.font.Trise=e.pop().val;else if("CS"==t||"cs"==t){y=e.pop().val;"CS"==t?o.sspace=y:o.space=y}else if("SCN"==t||"scn"==t||"SC"==t||"sc"==t){var $="SCN"==t||"SC"==t,j=$?o.sspace:o.space,tt=null,H=f?f["/ColorSpace"]:null;if("/DeviceN"==(y=null!=H&&null!=H[j]?H[j][1]&&H[j][1]["/Alternate"]?H[j][1]["/Alternate"]:"string"==typeof H[j]?H[j]:H[j][0]:j)){for(var et=H[j][1].length,k=0;k<et;k++)e.pop();tt=[1,0,0]}else if("/Lab"==y||"/DeviceRGB"==y||"/CalRGB"==y||"/ICCBased"==y&&3==H[j][1]["/N"])(tt=[e.pop().val,e.pop().val,e.pop().val]).reverse();else if("/DeviceCMYK"==y||"/ICCBased"==y&&4==H[j][1]["/N"]){var rt=[e.pop().val,e.pop().val,e.pop().val,e.pop().val];rt.reverse(),tt=UDOC.C.cmykToRgb(rt)}else if("/DeviceGray"==y||"/CalGray"==y||"/ICCBased"==y&&1==H[j][1]["/N"])var nt=FromPS.nrm(e.pop().val),tt=[nt,nt,nt];else if("/Separation"==y)tt=FromPS._readSeparation(H[j],e.pop().val);else if("/Indexed"==y){rt=FromPDF.getPalette(H[j]),nt=3*e.pop().val;tt=[rt[nt]/255,rt[1+nt]/255,rt[2+nt]/255]}else{if("/Pattern"!=y)throw console.log(j,y,H,f),"e";H=f["/Pattern"][e.pop().val];if(1==H["/PatternType"])return console.log("tile pattern"),void FromPDF._pushForm(n,H,d,!0);d=H["/Matrix"];null==(tt=FromPS.getShadingFill(H["/Shading"],d=null==d?[1,0,0,1,0,0]:d))&&(tt=[0,0,0])}$?o.COLR=tt:o.colr=tt}else if("sh"==t){$=f["/Shading"][e.pop().val],tt=o.colr,f=o.pth;o.pth=o.cpth,o.cpth=UDOC.G.rectToPath(s.bb),o.colr=FromPS.getShadingFill($,o.ctm.slice(0)),null==o.colr&&(o.colr=[0,0,0]),a.Fill(o),o.colr=tt,o.pth=f}else if("MP"==t||"BMC"==t||"ri"==t)e.pop();else if("DP"==t||"BDC"==t)e.pop(),e.pop();else if("EMC"!=t&&"BX"!=t&&"EX"!=t)throw t},FromPDF.getJBIG2Glob=function(t){return null==(t=t["/DecodeParms"])||null==(t=(t=null!=t.length?t[0]:t)["/JBIG2Globals"])?null:FromPS.GS(t)},FromPDF.getImage=function(t){var e=t["/Width"],r=t["/Height"],n=e*r,i=FromPS.GS(t),s=t["/Filter"],a=t["/ColorSpace"],o=t["/BitsPerComponent"],h=t["/Matte"],l=t.image;if(null==l){var f=t["/Mask"];if(a&&"/Indexed"==a[0]){var u=FromPDF.getPalette(a),c=new Uint8Array(4*n);FromPDF.plteImage(i,0,c,u,e,r,o,f),l=c}else if(null!=s||null!=a&&"/DeviceGray"!=a)if(null==s&&a&&("/DeviceCMYK"==a||"/ICCBased"==a[0]&&a[1]&&4==a[1]["/N"])){for(var c=new Uint8Array(4*n),p=[0,0,0,0],d=0;d<n;d++){var g=4*d;p[0]=i[g]*(1/255),p[1]=i[g+1]*(1/255),p[2]=i[g+2]*(1/255),p[3]=i[g+3]*(1/255);var v=UDOC.C.cmykToRgb(p);c[g]=~~(255*v[0]+.5),c[g+1]=~~(255*v[1]+.5),c[g+2]=~~(255*v[2]+.5),c[g+3]=255}l=c}else if(null==s){Math.round(255/((1<<o)-1));var m=Math.ceil(3*e*o/8);(c=new Uint8Array(4*n)).fill(255);for(var _=Math.round(255/((1<<o)-1)),y=0;y<r;y++)for(var w=m*y,b=0;b<e;b++){var x=3*b;c[g=4*(y*e+b)]=FromPDF.getBitNum(i,w,x,o)*_,c[g+1]=FromPDF.getBitNum(i,w,1+x,o)*_,c[g+2]=FromPDF.getBitNum(i,w,2+x,o)*_}l=c}else l=i;else{var u=[0,0,0,255,255,255],c=new Uint8Array(4*n);t["/Decode"]&&1==t["/Decode"][0]&&u.reverse(),1==t["/ImageMask"]&&u.reverse(),FromPDF.plteImage(i,0,c,1==o?u:null,e,r,o,f),l=c}if(h&&"000"!=h.join(""))for(var S=Math.round(255*h[0]),C=Math.round(255*h[1]),P=Math.round(255*h[2]),d=0;d<l.length;d+=4)l[d]=Math.max(l[d],S),l[d+1]=Math.max(l[d+1],C),l[d+2]=Math.max(l[d+2],P);t.image=l}return l},FromPDF.getPalette=function(t){if(null!=t[3].length){var e=t[3];i=new Uint8Array(768);for(var r=0;r<e.length;r++)i[r]=e.charCodeAt(r)}else i=FromPS.GS(t[3]);if("/DeviceCMYK"==t[1]||t[1]&&t[1][1]&&4==t[1][1]["/N"])for(var n=i,i=new Uint8Array(768),r=0;r<256;r++){var s=r<<2,a=s-r,s=UDOC.C.cmykToRgb([n[s]/255,n[1+s]/255,n[2+s]/255,n[3+s]/255]);i[a]=255*s[0],i[1+a]=255*s[1],i[2+a]=255*s[2]}return i},FromPDF.plteImage=function(t,e,r,n,i,s,a,o){for(var h=Math.round(255/((1<<a)-1)),l=Math.ceil(i*a/8),f=0;f<s;f++)for(var u=e+l*f,c=0;c<i;c++){var p,d=FromPDF.getBitNum(t,u,c,a),g=f*i+c<<2;n?(r[g]=n[p=3*d],r[1+g]=n[1+p],r[2+g]=n[2+p]):(r[g]=p=d*h,r[1+g]=p,r[2+g]=p),r[3+g]=255,o&&o[0]<=d&&d<=o[1]&&(r[3+g]=0)}},FromPDF.getBitNum=function(t,e,r,n){var i=0;return 8==n?i=t[e+r]:4==n?i=t[e+(r>>1)]>>(1-(1&r)<<2)&15:2==n?i=t[e+(r>>2)]>>(3-(3&r)<<1)&3:1==n&&(i=t[e+(r>>3)]>>(7-(7&r)<<0)&1),i},FromPDF.getString=function(t,e){var r,n=e["/Subtype"],i="",s=0,a=null,o=e["/ToUnicode"],h=e["/Encoding"],l=e;if("/Type0"==n&&(l=e["/DescendantFonts"][0]),null!=(o=null!=o&&"object"!=typeof o?null:o))i=FromPDF.toUnicode(t,o);else if("/WinAnsiEncoding"==h)i=FromPDF.encFromMap(t,FromPDF._win1252);else if("/MacRomanEncoding"==h)i=FromPDF.encFromMap(t,FromPDF._macRoman);else if("/Type0"==n)for(var f=0,o=l["/CIDSystemInfo"]["/Ordering"],f="Identity"==o?0:"Japan1"==o||"GB1"==o||"CNS1"==o||"Korea1"==o?31:(console.log("unknown ordering",o),0),u=0;u<t.length;u+=2){var c=t[u]<<8|t[u+1];i+=String.fromCharCode(c+f)}else if(null!=h&&"/Encoding"==h["/Type"]){var p=h["/Differences"],h=h["/BaseEncoding"],d=null,i="";"/WinAnsiEncoding"==h&&(d=FromPDF._win1252),"/MacRomanEncoding"==h&&(d=FromPDF._macRoman);for(var g=0;g<t.length;g++){var v,m=t[g],_=-5,y=!1;if(p)for(u=0;u<p.length;u++)if("string"==typeof p[u]){if(m==_){i+=FromPDF.fromCName(p[u].slice(1)),y=!0;break}_++}else _=p[u];y||null==d?y||(i+=String.fromCharCode(m)):(-1!=(v=d.indexOf(m))&&(m=String.fromCharCode(d[v+1])),i+=String.fromCharCode(m))}}else i=FromPS.readStr(t);if("/Type0"==n)if(null==(C=(C=l["/W"])&&0==C.length?null:C))s=1e3*i.length*.4,console.log("approximating word widths");else for(g=0;g<t.length;g+=2){for(var w=t[g]<<8|t[g+1],b=!1,u=0;u<C.length;u+=2){var x=C[u],S=C[u+1];S.length?0<=w-x&&w-x<S.length&&(s+=S[w-x],b=!0):(x<=w&&w<=S&&(s+=C[u+2],b=!0),u++)}b||(s+=C[1][0])}else{if("/Type1"!=n&&"/Type3"!=n&&"/TrueType"!=n)throw"unknown font type";var C,P=e["/FirstChar"];if(C=e["/Widths"])for(g=0;g<t.length;g++)s+=C[t[g]-P];else s=1e3*i.length*.4,console.log("approximating word width")}for(var k=l["/FontDescriptor"],T=["","2","3"],g=0;g<3;g++)k&&k["/FontFile"+T[g]]&&(r="/FontFile"+T[g]);return k&&(k.psName?a=k.psName:r&&(l=FromPS.GS(k[r]),null!=r&&l&&65536==FromPS.B.readUint(l,0)&&(a=k.psName=FromPDF._psName(l)))),[i,s,a=null==(a=null==a&&e["/BaseFont"]?e["/BaseFont"].slice(1):a)||""==a?"DejaVuSans":a]},FromPDF._psName=function(t){for(var e=FromPS.B.readUshort,r=e(t,4),n=0,i=0;i<r;i++){var s=FromPS.B.readASCII(t,12+16*i,4),a=FromPS.B.readUint(t,12+16*i+8);if("name"==s){n=a;break}}if(0==n)return null;for(var o=e(t,n+2),h=n+6,l=n+6,i=0;i<o;i++){var f=e(t,l),u=e(t,l+2),c=(e(t,l+4),e(t,l+6)),p=e(t,l+8),d=e(t,l+10);l+=12;var g=h+12*o+d;if(1==u||10==u||3==u||3==f&&0==u)for(var v="",m=1;m<p;m+=2)v+=String.fromCharCode(t[g+m]);else 0!=u&&2!=u||(v=FromPS.B.readASCII(t,g,p));if(6==c&&null!=v&&"OTS"!=v.slice(0,3))return v.replace(/\s/g,"")}return null},FromPDF.encFromMap=function(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n],s=e.indexOf(i);-1!=s&&(i=e[s+1]),r+=String.fromCharCode(i)}return r},FromPDF._win1252=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376],FromPDF._macRoman=[128,196,129,197,130,199,131,201,132,209,133,214,134,220,135,225,136,224,137,226,138,228,139,227,140,229,141,231,142,233,143,232,144,234,145,235,146,237,147,236,148,238,149,239,150,241,151,243,152,242,153,244,154,246,155,245,156,250,157,249,158,251,159,252,160,8224,161,176,162,162,163,163,164,167,165,8226,166,182,167,223,168,174,169,169,170,8482,171,180,172,168,173,9824,174,198,175,216,176,8734,177,177,178,8804,179,8805,180,165,181,181,182,8706,183,8721,184,8719,185,960,186,8747,187,170,188,186,189,937,190,230,191,248,192,191,193,161,194,172,195,8730,196,402,197,8776,198,8710,199,171,200,187,201,8230,202,160,203,192,204,195,205,213,206,338,207,339,208,8211,209,8212,210,8220,211,8221,212,8216,213,8217,214,247,215,9674,216,255,217,376,218,8260,219,8364,220,8249,221,8250,222,64257,223,64258,224,8225,225,183,226,8218,227,8222,228,8240,229,194,230,202,231,193,232,203,233,200,234,205,235,206,236,207,237,204,238,211,239,212,240,63743,241,210,242,218,243,219,244,217,245,305,246,710,247,732,248,175,249,728,250,729,251,730,252,184,253,733,254,731,255,711],FromPDF.fromCName=function(t){if("f_f_i"==t)return"ffi";if(1==t.length)return t;if("uni"==t.slice(0,3))return String.fromCharCode(parseInt(t.slice(3),16));var e={space:32,exclam:33,quotedbl:34,numbersign:35,dollar:36,percent:37,ampersand:38,quotesingle:39,parenleft:40,parenright:41,asterisk:42,plus:43,comma:44,hyphen:45,period:46,slash:47,zero:48,one:49,two:50,three:51,four:52,five:53,six:54,seven:55,eight:56,nine:57,colon:58,semicolon:59,less:60,equal:61,at:64,bracketleft:91,bracketright:93,underscore:95,braceleft:123,braceright:125,dieresis:168,circlecopyrt:169,copyright:169,registered:174,degree:176,plusminus:177,periodcentered:183,Eacute:201,Adieresis:196,adieresis:228,Udieresis:220,germandbls:223,udieresis:252,Odieresis:214,ntilde:241,odieresis:246,Cacute:262,cacute:263,Ccaron:268,ccaron:269,Dcroat:272,dcroat:273,Ecaron:283,ecaron:283,dotlessi:305,Scaron:352,scaron:353,Tcaron:356,tcaron:357,Zcaron:381,zcaron:382,alpha:945,phi:966,endash:8211,emdash:8212,asteriskmath:8727,quoteright:8217,quotedblbase:8222,ellipsis:8230,quotedblleft:8220,quotedblright:8221,bullet:8226,minus:8706,fi:64257,fl:64258}[t];return null==e?("g"!=t.charAt(0)&&console.log("unknown character "+t),t):String.fromCharCode(e)},FromPDF.toUnicode=function(t,e){var r,n=e.cmap,i="";if(null==n){var s={buff:FromPS.GS(e),off:0},a=[],o=FromPS._getDictStack({}),h=[{typ:"file",val:s}],l=[],f=FromPS._getEnv([0,0,1,1]),u=!0;for(f.pgOpen=!0;u;)u=FromPS.step(a,o,h,l,f,null,FromPS.operator,!0);n=f.res.CMap.val,e.cmap=n}for(r in n){n=n[r].val;break}for(var c=n.bfrange,p=n.bfchar,d=n.bpc,g=0;g<t.length;g+=d){var v=t[g],m=!1;if(2==d&&(v=v<<8|t[g+1]),!m&&c)for(var _=0;_<c.length;_+=3){var y=c[_],w=c[_+1],b=c[_+2];if(y<=v&&v<=w){y==w&&0==b||(null==b.length?v+=b-y:v=b[v-y]),m=!0;break}}if(!m&&p)for(_=0;_<p.length;_+=2)if(p[_]==v){v=p[_+1],m=!0;break}65535<v&&(i+=String.fromCharCode(v>>>16)),i+=String.fromCharCode(v)}return i},FromPDF.brokenXrefTrail=function(t,e){function r(t,e){for(var r=e;48<=t[e]&&t[e]<=57;)e++;return FromPS.B.readASCII(t,r,e-r)}for(var n,i=t.length,s=0;s<i;s++)if(FromPS.isEOL(t[s])){for(var a=s;FromPS.isWhite(t[a]);)a++;var o=r(t,a);if(""!=o){for(a+=o.length;FromPS.isWhite(t[a]);)a++;var h=r(t,a);if(""!=h){for(a+=h.length;FromPS.isWhite(t[a]);)a++;"obj"==FromPS.B.readASCII(t,a,3)&&(o=parseInt(o),l=parseInt(h),e[o]={off:s+1,gen:l,chr:"n"},s=a)}}else if(116==t[a]&&114==t[a+1]&&"trailer"==FromPS.B.readASCII(t,a,7))null==n&&(n=FromPDF._readTrailer(t,a+7,e));else if(115==t[a]&&116==t[a+1]&&"startxref"==FromPS.B.readASCII(t,a,9)){for(a+=10;FromPS.isWhite(t[a]);)a++;var l=parseInt(r(t,a));0!=l&&null==n&&(n=FromPDF.readXrefTrail(t,l,e))}}return n},FromPDF._readTrailer=function(t,e,r){e={buff:t,off:e},e=FromPDF.readObject(e,e,r);return e["/Prev"]&&FromPDF.readXrefTrail(t,e["/Prev"],r),e},FromPDF.readXrefTrail=function(t,e,r){if("xref"==FromPS.B.readASCII(t,e,4)){for(13==t[m=e+4]&&m++,10==t[m]&&m++;;){if("trailer"==FromPS.B.readASCII(t,m,7)){13==t[m+=7]&&m++,10==t[m]&&m++;break}for(var n=m;!FromPS.isEOL(t[m]);)m++;var n=(n=FromPS.B.readASCII(t,n,m-n)).split(" "),i=parseInt(n[0]),s=parseInt(n[1]);13==t[m]&&m++,10==t[m]&&m++;for(var a=0;a<s;a++){var o=i+a;if(null==r[o]&&(r[o]={off:parseInt(FromPS.B.readASCII(t,m,10)),gen:parseInt(FromPS.B.readASCII(t,m+11,5)),chr:FromPS.B.readASCII(t,m+17,1),val:null,opn:!1}),32!=t[m+16])return null;m+=20}}return FromPDF._readTrailer(t,m,r)}for(var h=(m=e)+32;m<h&&"<<"!=FromPS.B.readASCII(t,m,2);)m++;if("<<"!=FromPS.B.readASCII(t,m,2))return null;var e={buff:t,off:m},l=FromPDF.readObject(e,e,null),f=0,u=FromPS.GS(l),c=l["/W"],p=l["/Index"],d=[],a=0;if(p)for(a=0;a<p.length;a+=2)for(var g=0;g<p[a+1];g++)d.push(p[a]+g);for(a=0;f<u.length;){var v=FromPDF.getInt(u,f,c[0]),m=0,_=0,y="n";f+=c[0];var w=FromPDF.getInt(u,f,c[1]);f+=c[1];var b=FromPDF.getInt(u,f,c[2]);f+=c[2],0==v&&(m=w,_=b,y="f"),1==v&&(m=w,_=b,y="n"),2==v&&(m=w,_=b,y="s"),r[p?d[a]:a]={off:m,gen:_,chr:y,val:null,opn:!1},a++}if(l["/Prev"]&&FromPDF.readXrefTrail(t,l["/Prev"],r),l["/Encrypt"])return l;var x={buff:t,off:0},S=["/Root","/Info"];for(a=0;a<S.length;a++){var C=S[a],P=l[C];P&&"ref"==P.typ&&(l[C]=FromPDF.getIndirect(P.ind,P.gen,x,r))}return l},FromPDF.getInt=function(t,e,r){if(0==r)return 0;if(1==r)return t[e];if(2==r)return t[e]<<8|t[e+1];if(3==r)return t[e]<<16|t[e+1]<<8|t[e+2];if(4==r)return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3];for(;4<r;)r--,e++;return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]},FromPDF.getIndirect=function(t,e,r,n){var i=n[t];if("f"==i.chr)return null;if(null!=i.val)return i.val;if(i.opn)return{typ:"ref",ind:t,gen:e};i.opn=!0;e=r.off;if("s"==i.chr){for(var s=FromPDF.getIndirect(i.off,i.gen,r,n),a={buff:FromPS.GS(s),off:0},o=0,h=0;o!=t;)o=FromPS.getFToken(a).val,h=FromPS.getFToken(a).val;a.off=h+s["/First"],s=FromPDF.readObject(a,r,n)}else r.off=i.off,"<<"!=FromPS.getFToken(r).val?(FromPS.getFToken(r),FromPS.getFToken(r)):r.off-=2,s=FromPDF.readObject(r,r,n);return i.val=s,r.off=e,i.opn=!1,s},FromPDF.readObject=function(t,e,r){var n=FromPS.getFToken(t);if("integer"==n.typ){var i=t.off,s=FromPS.getFToken(t);if(s&&"integer"==s.typ&&(FromPS.skipWhite(t),82==t.buff[t.off]))return t.off++,r&&r[n.val]?FromPDF.getIndirect(n.val,s.val,e,r):{typ:"ref",ind:n.val,gen:s.val};t.off=i}if("<<"==n.val)return FromPDF.readDict(t,e,r);if("["==n.val)return FromPDF.readArra(t,e,r);if("string"==n.typ){for(var a="",o=0;o<n.val.length;o++)a+=String.fromCharCode(n.val[o]);return a}if("name"==n.typ&&">>"==n.val)throw"e";return n.val},FromPDF.readDict=function(t,e,r){for(var n={};;){var i=t.off,s=FromPS.getFToken(t);if("name"==s.typ&&">>"==s.val)break;t.off=i;s=FromPDF.readObject(t,e,r),i=FromPDF.readObject(t,e,r);n[s]=i}if(null!=n["/Length"]&&null==n["/CFM"]){var a=n["/Length"];if(a.typ&&"ref"==a.typ)throw"e";FromPS.getFToken(t);32==t.buff[t.off]&&t.off++,13==t.buff[t.off]&&t.off++,10==t.buff[t.off]&&t.off++,t.off+a>t.buff.length&&(console.log("too big /Length of a stream",a,t.buff.length-t.off,t.off),a=t.buff.length-t.off),n.buff=new Uint8Array(t.buff.buffer,t.buff.byteOffset+t.off,a),t.off+=a,FromPS.getFToken(t)}return n},FromPDF.readArra=function(t,e,r){for(var n=[];;){var i=t.off,s=FromPS.getFToken(t);if("name"==s.typ&&"]"==s.val)return n;t.off=i;i=FromPDF.readObject(t,e,r);n.push(i)}};var FromWMF=function(){var L=UDOC.B;function N(t,e,r){r.fill&&t.Fill(e,!1),r.strk&&0!=e.lwidth&&t.Stroke(e,!1),UDOC.G.newPath(e)}function R(t,e,r,n,i){for(var s=L.readShort,a=0;a<r;a++){var o=s(t,e),h=s(t,e+=2);e+=2,0==a?UDOC.G.moveTo(n,o,h):UDOC.G.lineTo(n,o,h)}return i&&UDOC.G.closePath(n),e}return{Parse:function(t,e){t=new Uint8Array(t);var r=0,n={fill:!1,strk:!1,bb:[0,0,600,600],lbb:[0,0,600,600],scl:1,fnt:{nam:"Arial",hgh:25,und:!1,orn:0,chrst:0},tclr:[0,0,0],talg:0},i=L.readShort,s=L.readUshort,a=L.readUint;if(2596720087==a(t,0)){var o=i(t,(r=6)+8);n.scl=120/o;for(var h=0;h<4;h++)n.bb[h]=Math.round(i(t,r)*n.scl),r+=2;r+=2,r+=6}e.StartPage(n.bb[0],n.bb[1],n.bb[2],n.bb[3]);var l=UDOC.getState(n.bb);s(t,r),s(t,r+=2),s(t,r+=2),a(t,r+=2),s(t,r+=4),a(t,r+=2),s(t,r+=4),r+=2;for(var f,u,c=[];;){var p=a(t,r)<<1,d=null,g=s(t,r+=4),v=r+=2;if(0,0==g)break;if(1574==g){var m=s(t,r);v+=2,console.log(g,m)}else if(259!=g&&262!=g&&258!=g)if(301==g){var _=s(t,v);v+=2;var y=c[_];if("br"==y.t){if(n.fill=1!=y.stl,0!=y.stl&&1!=y.stl)throw y.stl+" e";l.colr=y.clr}else if("pn"==y.t){var w=7&y.stl;if(n.strk=5!=w,0==w||6==w)l.lwidth=y.px;else if(5!=w)throw w+" e";0!=(4096&y.stl)?l.ljoin=2:0!=(8192&y.stl)?l.ljoin=0:l.ljoin=1,l.COLR=y.clr}else{if("fn"!=y.t)throw"e";n.fnt=y,l.font.Tf=y.nam,l.font.Tfs=Math.abs(y.hgh),l.font.Tun=y.und}}else if(496==g){_=s(t,v);v+=2,c[_]=null}else if(523==g||524==g){var m=523==g?0:2;n.lbb[1+m]=i(t,v),v+=2,n.lbb[m]=i(t,v),v+=2,w=l,y=b=void 0,b=[1,0,0,1,0,0],y=(m=n).lbb,m=m.bb,UDOC.M.translate(b,-y[0],-y[1]),UDOC.M.scale(b,1/y[2],1/y[3]),UDOC.M.scale(b,m[2]-m[0],m[3]-m[1]),UDOC.M.translate(b,m[0],m[1]),w.ctm=b}else if(764==g)(d={t:"br"}).stl=s(t,v),v+=2,d.clr=[t[v]/255,t[v+1]/255,t[v+2]/255],v+=4,d.htc=s(t,v),v+=2;else if(762==g)(d={t:"pn"}).stl=s(t,v),v+=2,d.px=i(t,v),v+=2,d.py=i(t,v),v+=2,d.clr=[t[v]/255,t[v+1]/255,t[v+2]/255],v+=4;else if(763==g){(d={t:"fn",nam:""}).hgh=i(t,v),v+=2,v+=4,d.orn=i(t,v)/10;var b=i(t,v+=2);for(v+=2,d.und=t[v+1],v+=2,d.stk=t[v],d.chrst=t[r+1],v+=2,v+=4;0!=t[v];)d.nam+=String.fromCharCode(t[v]),v++;500<b&&(d.nam+="-Bold")}else if(247==g)d={t:"pl"};else if(521==g)n.tclr=[t[v]/255,t[v+1]/255,t[v+2]/255];else if(302==g)n.talg=s(t,v);else if(532==g)UDOC.G.moveTo(l,i(t,v+2),i(t,v));else if(531==g){0==l.pth.cmds.length&&(x=l.ctm.slice(0),UDOC.M.invert(x),x=UDOC.M.multPoint(x,l.cpos),UDOC.G.moveTo(l,x[0],x[1])),UDOC.G.lineTo(l,i(t,v+2),i(t,v));var x=n.fill;n.fill=!1,N(e,l,n),n.fill=x}else if(1336==g){var S=s(t,v),C=v+=2;v+=2*S;for(h=0;h<S;h++)v=R(t,v,P=s(t,C+2*h),l,!0);N(e,l,n)}else if(804==g||805==g){var P=s(t,v);v=R(t,v+=2,P,l,804==g);x=n.fill;n.fill=x&&804==g,N(e,l,n),n.fill=x}else if(1051==g||1048==g){var k=i(t,v),T=i(t,v+=2),I=i(t,v+=2),M=i(t,v+=2);v+=2,1051==g?(UDOC.G.moveTo(l,M,I),UDOC.G.lineTo(l,T,I),UDOC.G.lineTo(l,T,k),UDOC.G.lineTo(l,M,k)):UDOC.G.arc(l,(M+T)/2,(I+k)/2,(k-I)/2,0,2*Math.PI,!1),UDOC.G.closePath(l);x=n.fill;n.fill=!0,N(e,l,n),n.fill=x}else if(3907==g||2881==g||2368==g){a(t,v);v+=4,3907==g&&(s(t,v),v+=2),2368!=g&&(u=i(t,v),f=i(t,v+=2),v+=2);i(t,v),i(t,v+=2);M=i(t,v+=2),T=i(t,v+=2),k=i(t,v+=2),I=i(t,v+=2);2368==g&&(f=T,u=M);var F=function(t,e){L.readShort;var r,n,i,s=L.readUshort,a=L.readUint,o=a(t,e);{if(e+=4,12==o)throw"e";r=a(t,e),n=a(t,e+=4);var h=s(t,e+=4);if(e+=2,1!=h)throw"e";o=s(t,e);if(e+=2,1!=o&&24!=o&&32!=o)throw o+" e";s=a(t,e);if(e+=4,0!=s)throw"e";a(t,e),a(t,e+=4),a(t,e+=4);i=a(t,e+=4);a(t,e+=4);e+=4}var l=new Uint8Array(r*n*4),f=Math.floor((r*h*o+31&-32)/8);if(1==o)for(var u=0;u<n;u++)for(var c=e+4*i+(n-1-u)*f,p=0;p<r;p++){var d=u*r+p<<2,g=t[c+(p>>>3)]>>>7-(7&p)&1;l[d]=t[e+4*g+2],l[d+1]=t[e+4*g+1],l[d+2]=t[e+4*g+0],l[d+3]=255}if(24==o)for(u=0;u<n;u++)for(p=0;p<r;p++){var v=e+(n-1-u)*f+3*p;l[d=u*r+p<<2]=t[v+2],l[d+1]=t[v+1],l[d+2]=t[v+0],l[d+3]=255}if(32==o)for(u=0;u<n;u++)for(p=0;p<r;p++){v=e+(n-1-u)*f+4*p;l[d=u*r+p<<2]=t[v+2],l[d+1]=t[v+1],l[d+2]=t[v+0],l[d+3]=t[v+3]}return l}(t,v+=2);F.length>f*u*4&&(F=F.slice(0,f*u*4));var A=l.ctm.slice(0);l.ctm=[1,0,0,1,0,0],UDOC.M.scale(l.ctm,T,-M),UDOC.M.translate(l.ctm,I,k+M),UDOC.M.concat(l.ctm,A),e.PutImage(l,F,f,u),l.ctm=A}else if(2610==g){var F=i(t,v),E="",A=i(t,v+=2);v+=2,l.font.Tm=[1,0,0,-1,0,0],UDOC.M.rotate(l.font.Tm,n.fnt.orn*Math.PI/180),UDOC.M.translate(l.font.Tm,A,F);F=n.talg;if(6==(6&F))l.font.Tal=2;else{if(0!=(7&F))throw F+" e";l.font.Tal=0}if(24!=(24&F)){if(0!=(24&F))throw"e";UDOC.M.translate(l.font.Tm,0,l.font.Tfs)}var U=s(t,v),F=s(t,v+=2);v+=2,4&F&&(v+=8);for(h=0;h<U;h++){var O=t[v+h];127<O&&(O=O<<8|t[v+ ++h]),E+=String.fromCharCode(O)}F=l.colr;l.colr=n.tclr,e.PutText(l,E,E.length*l.font.Tfs*.5),l.colr=F}else 513==g||console.log(g.toString(16),p);if(null!=d){for(var D=0;null!=c[D];)D++;c[D]=d}r+=p-6}e.ShowPage(),e.Done()}}}(),FromEMF=function(){var rt=17,nt=18,it=19,st=20,at=75,ot=98,ht=UDOC.B,lt=null;function ft(t,e){for(var r=[],n=0;n<4;n++)r[n]=ht.readInt(t,e+4*n);return r}function ut(t,e){var r=[1,0,0,1,0,0],n=t.wbb,t=(t.bb,t.vbb&&4==t.vbb.length?t.vbb:t.bb);UDOC.M.translate(r,-n[0],-n[1]),UDOC.M.scale(r,1/n[2],1/n[3]),UDOC.M.scale(r,t[2],t[3]),e.ctm=r}function ct(t,e,r,n){r.fill&&n&&t.Fill(e,!1),r.strk&&0!=e.lwidth&&t.Stroke(e)}function pt(t,e,r,n,i,s,a){for(var o=2==i?ht.readShort:ht.readInt,h=0;h<r;h++){var l=o(t,e),f=o(t,e+=i);e+=i,0!=h||a?UDOC.G.lineTo(n,l,f):UDOC.G.moveTo(n,l,f)}return s&&UDOC.G.closePath(n),e}return{Parse:function(t,e){t=new Uint8Array(t);for(var r,n=0,i={fill:!1,strk:!1,bb:[0,0,1,1],wbb:[0,0,1,1],fnt:{nam:"Arial",hgh:25,und:!1,orn:0},tclr:[0,0,0],talg:0},s=[],a=[],o=ht.readShort,h=ht.readUshort,l=ht.readInt,f=ht.readUint,u=ht.readFloat;;){var c=null,p=0,d=f(t,n),g=f(t,n+=4),v=n+=4;if(0,14==d)break;if(1==d)i.bb=ft(t,v),v+=16,e.StartPage(i.bb[0],i.bb[1],i.bb[2],i.bb[3]),r=UDOC.getState(i.bb);else if(33==d)a.push(JSON.stringify(r),JSON.stringify(i));else if(34==d){var m=l(t,v);for(v+=4;m<-1;)a.pop(),a.pop(),m++;i=JSON.parse(a.pop()),r=JSON.parse(a.pop())}else if(67==d)r.cpth=JSON.parse(JSON.stringify(r.pth));else if(30==d){var _=ft(t,v);v+=16;var y=r.pth;r.pth={cmds:[],crds:[]},UDOC.G.drawRect(r,_[0],_[1],_[2]-_[0],_[3]-_[1]),r.cpth=r.pth,r.pth=y}else if(-1==[rt,it,nt,ot,st,at].indexOf(d))if(58==d)r.mlimit=f(t,v);else if(24==d)i.tclr=[t[v]/255,t[v+1]/255,t[v+2]/255];else if(22==d)i.talg=f(t,v);else if(11==d||12==d){null==i.vbb&&(i.vbb=[]);var w=12==d?0:2;i.vbb[w]=l(t,v),v+=4,i.vbb[w+1]=l(t,v),v+=4,11==d&&ut(i,r)}else if(9==d||10==d){w=10==d?0:2;i.wbb[w]=l(t,v),v+=4,i.wbb[w+1]=l(t,v),v+=4,9==d&&ut(i,r)}else if(70==d){f(t,v);v+=4}else if(37==d){var b=f(t,v);if(v+=4,2147483648==b)i.fill=!0,r.colr=[1,1,1];else if(2147483653==b)i.fill=!1;else if(2147483655==b)i.strk=!0,i.lwidth=1,r.COLR=[0,0,0];else if(2147483656==b)i.strk=!1;else if(2147483661!=b&&2147483662!=b){var x=s[b];if("b"==x.t){if(i.fill=1!=x.stl,0!=x.stl&&1!=x.stl)throw x.stl+" e";r.colr=x.clr}else if("p"==x.t)i.strk=5!=x.stl,r.lwidth=x.wid,r.COLR=x.clr;else{if("f"!=x.t)throw"e";i.fnt=x,r.font.Tf=x.nam,r.font.Tfs=Math.abs(x.hgh),r.font.Tun=x.und}}}else if(40==d){b=f(t,v);if(v+=4,null==s[b])throw"e";s[b]=null}else if(39==d)p=f(t,v),(c={t:"b"}).stl=f(t,v+=4),v+=4,c.clr=[t[v]/255,t[v+1]/255,t[v+2]/255],v+=4,c.htc=f(t,v),v+=4;else if(94==d)p=f(t,v),v+=4,console.log("unsupported pattern brush"),c={t:"b",stl:0};else if(38==d||95==d)p=f(t,v),v+=4,95==d&&(v+=16),(c={t:"p"}).stl=f(t,v),v+=4,c.wid=f(t,v),v+=4,v+=4,c.clr=[t[v]/255,t[v+1]/255,t[v+2]/255],v+=4;else if(82==d){p=f(t,v),(c={t:"f",nam:""}).hgh=l(t,v+=4),v+=4,v+=8,c.orn=l(t,v)/10;x=f(t,v+=4);for(v+=4,c.und=t[v+1],c.stk=t[v+2],v+=8;0!=h(t,v);)c.nam+=String.fromCharCode(h(t,v)),v+=2;500<x&&(c.nam+="-Bold")}else if(84==d){var S=f(t,v+=16),C="",P=(u(t,v+=4),u(t,v+=4),l(t,v+=4)),k=l(t,v+=4);v+=4;var T=r.ctm.slice(0);1==S&&(r.ctm=[1,0,0,1,0,0]),r.font.Tm=[1,0,0,-1,0,0],UDOC.M.rotate(r.font.Tm,i.fnt.orn*Math.PI/180),UDOC.M.translate(r.font.Tm,P,k);var I=i.talg;if(6==(6&I))r.font.Tal=2;else{if(0!=(7&I))throw I+" e";r.font.Tal=0}24==(24&I)||(0==(24&I)?UDOC.M.translate(r.font.Tm,0,r.font.Tfs):console.log("unknown alignment",I));var M=f(t,v),F=f(t,v+=4);f(t,v+=4);v+=4;f(t,v+=16);v+=4,F+=n-8;for(var A=0;A<M;A++){var E=h(t,F+2*A);C+=String.fromCharCode(E)}P=r.colr;r.colr=i.tclr,e.PutText(r,C,C.length*r.font.Tfs*.5),r.colr=P,r.ctm=T}else if(59==d)UDOC.G.newPath(r);else if(60!=d)if(61==d)UDOC.G.closePath(r);else if(27==d)UDOC.G.moveTo(r,l(t,v),l(t,v+4));else if(54==d)0==r.pth.cmds.length&&(H=r.ctm.slice(0),UDOC.M.invert(H),V=UDOC.M.multPoint(H,r.cpos),UDOC.G.moveTo(r,V[0],V[1])),UDOC.G.lineTo(r,l(t,v),l(t,v+4));else if(3==d||86==d||4==d||87==d||6==d||89==d){var U=3==d||86==d,O=6==d||89==d,D=f(t,v+=16);v+=4,O||UDOC.G.newPath(r),v=pt(t,v,D,r,86==d||87==d||89==d?2:4,U,O),O||ct(e,r,i,U)}else if(91==d){var U=!0,O=!1,L=f(t,v+=16);v+=4;var N=v+=4;v+=4*L,O||UDOC.G.newPath(r);for(A=0;A<L;A++)v=pt(t,v,h(t,N+4*A),r,2,U,O);O||ct(e,r,i,U)}else if(2==d||85==d||5==d||88==d){var R=85==d||88==d,B=R?o:l,z=R?2:4,D=f(t,v+=16);for(v+=4,5!=d&&88!=d&&(UDOC.G.moveTo(r,B(t,v),B(t,v+z)),v+=2*z,D--);0<D;)UDOC.G.curveTo(r,B(t,v),B(t,v+z),B(t,v+2*z),B(t,v+3*z),B(t,v+4*z),B(t,v+5*z)),v+=6*z,D-=3}else if(43==d||42==d){UDOC.G.newPath(r);_=ft(t,v);43==d?UDOC.G.drawRect(r,_[0],_[1],_[2]-_[0],_[3]-_[1]):(K=(_[0]+_[2])/2,Q=(_[1]+_[3])/2,UDOC.G.arc(r,K,Q,(_[2]-_[0])/2,0,2*Math.PI,!1)),UDOC.G.closePath(r),ct(e,r,i,!0)}else if(62==d)e.Fill(r,!1);else if(64==d)e.Stroke(r);else if(63==d)e.Fill(r,!1),e.Stroke(r);else if(35==d||36==d){for(var G=[],A=0;A<6;A++)G.push(u(t,v+4*A));if(v+=24,35==d)r.ctm=G;else{S=f(t,v);if(v+=4,2==S){var Z=r.ctm;r.ctm=G,UDOC.M.concat(r.ctm,Z)}else{if(4!=S)throw S;r.ctm=G}}}else if(21==d){f(t,v);v+=4}else if(81==d){var _=ft(t,v),k=l(t,v+=16),I=l(t,v+=4),P=(l(t,v+=4),l(t,v+=4),l(t,v+=4)),T=l(t,v+=4),q=f(t,v+=4)+n-8,j=(f(t,v+=4),f(t,v+=4)+n-8);f(t,v+=4);if(0!=f(t,v+=4))throw"e";var H=f(t,v+=4);if(v+=4,13369376!=H&&15597702!=H&&8913094!=H)throw H.toString(16);var V=l(t,v),R=l(t,v+=4);v+=4;Z=f(t,q);if(40!=Z)throw Z;var W=f(t,q+=4),X=f(t,q+=4);if(W!=P||X!=T)throw"e";Z=h(t,q+=4);if(1!=Z)throw"e";P=h(t,q+=2);if(1!=P&&4!=P&&8!=P&&16!=P&&24!=P&&32!=P)throw P+" e";T=f(t,q+=2);if(0!=T)throw T+" e";f(t,q+=4),f(t,q+=4),f(t,q+=4),f(t,q+=4);T=f(t,q+=4);if(q+=4,0!=T)throw T;var J=Math.floor((W*Z*P+31&-32)/8),Y=new Uint8Array(W*X*4);if(1==P)for(var Q=0;Q<X;Q++)for(var K=0;K<W;K++){var $=Q*W+K<<2,b=(t[j+(X-1-Q)*J+(K>>>3)]>>>7-(7&K)&1)<<2;Y[$]=t[q+b+2],Y[$+1]=t[q+b+1],Y[$+2]=t[q+b+0],Y[$+3]=255}else if(8==P)for(Q=0;Q<X;Q++)for(K=0;K<W;K++){$=Q*W+K<<2,b=t[j+(X-1-Q)*J+K]<<2;Y[$]=t[q+b+2],Y[$+1]=t[q+b+1],Y[$+2]=t[q+b+0],Y[$+3]=255}else if(16==P)for(Q=0;Q<X;Q++)for(K=0;K<W;K++){var $=Q*W+K<<2,tt=t[(et=j+(X-1-Q)*J+2*K)+1]<<8|t[et];Y[$]=255/31*(tt>>>10&31),Y[$+1]=255/31*(tt>>>5&31),Y[$+2]=255/31*(tt>>>0&31),Y[$+3]=255}else if(24==P)for(Q=0;Q<X;Q++)for(K=0;K<W;K++){var et=j+(X-1-Q)*J+3*K;Y[$=Q*W+K<<2]=t[et+2],Y[$+1]=t[et+1],Y[$+2]=t[et+0],Y[$+3]=255}else if(32==P)for(Q=0;Q<X;Q++)for(K=0;K<W;K++){et=j+(X-1-Q)*J+4*K;Y[$=Q*W+K<<2]=t[et+2],Y[$+1]=t[et+1],Y[$+2]=t[et+0],Y[$+3]=t[et+3]}else console.log("unsupported bit depth",P,W,X);P=r.ctm.slice(0);r.ctm=[1,0,0,1,0,0],UDOC.M.scale(r.ctm,V,-R),UDOC.M.translate(r.ctm,k,I+R),UDOC.M.concat(r.ctm,P),15597702==H?lt=Y:8913094==H?e.PutImage(r,Y,W,X,lt):e.PutImage(r,Y,W,X),r.ctm=P}else console.log("unknown command",d,g);null!=c&&(s[p]=c),n+=g-8}e.ShowPage(),e.Done()}}}(),FromDXF=function(){function h(){this.bb=[1e9,1e9,-1e9,-1e9]}function l(t,e,r,n){null==r&&(r=UDOC.getState(n=[0,0,1e3,1e3])),e.StartPage(n[0],n[1],n[2],n[3]);!function t(e,r,n,i,s,a,o){var h,l,f;for(;s<a;){var u=parseInt(e[s++]),c=e[s++],p=-1!=[10,11,12,13,14,20,21,22,23,24,30,31,32,33,34,40,41,42,43,44,45,46,47,48,49,50,51,52,53,62,70,71,72,73,74,90,370].indexOf(u),d="LWPOLYLINE"==h&&(10==u||20==u||30==u)||"LTYPE"==h&&49==u||"SPLINE"==h&&(10==u||20==u||30==u||40==u)||"OLE2FRAME"==h&&310==u;if(p&&(c=parseFloat(c)),999!=u)if("SECTION"==c)o=-1;else if("ENDSEC"!=c)if(-1==o)o=c;else if("EOF"!=c&&"HEADER"!=o&&"CLASSES"!=o)if("TABLES"==o||"BLOCKS"==o)if(0!=u){if(d?(null==l[u]&&(l[u]=[]),l[u].push(c)):l[u]=c,"0"==e[s])if("LTYPE"==h){if(null!=i.tabs[h][l[2]])throw"e";i.tabs[h][l[2]]=l}else"BLOCK"==h?f=i.blocks[l[2]]=[s]:"ENDBLK"==h&&(f[1]=s-2,f=null)}else h=c,l={};else if("ENTITIES"==o){if(0==u?(h=c,l={}):d?(null==l[u]&&(l[u]=[]),l[u].push(c)):l[u]=c,"0"==e[s]){if(null==f){if(n.colr=[0,0,0],n.ca=1,n.COLR=[0,0,0],n.dash=[],null!=l[62]&&256!=l[62]&&((_={c0:[0,0,0],c1:[1,0,0],c2:[1,1,0],c4:[0,1,1],c5:[0,0,1],c7:[0,0,0],c8:[0,0,0],c242:[.64,0,.16],c250:[0,0,0]}["c"+l[62]])?n.COLR=_:(n.COLR=[0,1,0],console.log(h+" "+l[62]))),null!=l[6]){var g=i.tabs.LTYPE[l[6]];if(null!=g[49]){for(var v=g[49].slice(0),m=0;m<v.length;m++)v[m]=Math.abs(v[m])*(l[48]||1);n.dash=v}}"H"==l[8]&&(n.dash=[.1,.02]),UDOC.G.newPath(n)}var _=-1/3.17;if("LINE"==h){var y=(l[30]||0)*_,w=(l[31]||0)*_;UDOC.G.moveTo(n,l[10]+y,l[20]-y),UDOC.G.lineTo(n,l[11]+w,l[21]-w),r.Stroke(n,!1)}else if("POLYLINE"==h)f=[l,[]];else if("VERTEX"==h)f[1].push(l);else if("SEQEND"==h){if(null!=f){var b=f[0],x=f[1],S=x.length,C=1==b[70]?S+1:S;UDOC.G.moveTo(n,x[0][10],x[0][20]);for(m=1;m<C;m++){var P,k,T,I,M,F,A,E=x[m%S][10],U=x[m%S][20],O=x[m-1][42];0==(O=null==O?0:O)?UDOC.G.lineTo(n,E,U):(M=x[m-1],P=M[10],k=M[20],H=E-P,V=U-k,F=-O*Math.PI/2,T=.42,I=Math.sin(F),A=Math.cos(F),M=A*H-I*V,O=I*H+A*V,F=A*H+I*V,A=-I*H+A*V,UDOC.G.curveTo(n,P+T*M,k+T*O,E-T*F,U-T*A,E,U))}r.Stroke(n,!1),f=null}}else if("OLE2FRAME"==h){for(var D=l[310].join(""),L=new Uint8Array(D.length>>>1),m=0;m<L.length;m++)L[m]=parseInt(D.slice(2*m,2*m+2),16);new Float64Array(L.slice(2,98).buffer);var N=new Uint8Array(67260);new Uint32Array(N.buffer).fill(4281563135);var R=n.ctm,B=[1,0,0,1,0,0],g=l[11]-l[10],b=l[21]-l[20];UDOC.M.scale(B,g,b),UDOC.M.translate(B,l[10],l[20]),UDOC.M.concat(B,n.ctm),n.ctm=B,r.PutImage(n,N,295,57),n.ctm=R}else if("INSERT"==h){N=i.blocks[l[2]],R=n.ctm.slice(0),B=[1,0,0,1,0,0];null!=l[50]&&UDOC.M.rotate(B,l[50]*Math.PI/180),null!=l[41]&&UDOC.M.scale(B,l[41],l[42]),UDOC.M.translate(B,l[10],l[20]),UDOC.M.concat(B,n.ctm),n.ctm=B,t(e,r,n,i,N[0],N[1],o),n.ctm=R}else if("--VIEWPORT"==h)console.log(l),n.COLR=[1,0,0],UDOC.G.moveTo(n,l[10],l[20]),UDOC.G.lineTo(n,l[10]+5,l[20]+5),r.Stroke(n,!1);else if("--DIMENSION"==h){var z=7&l[70];0==z&&(console.log(l),n.COLR=[0,.3,.6],V=H=0,UDOC.G.moveTo(n,l[13]+H,l[23]+V),UDOC.G.lineTo(n,l[14]+H,l[24]+V),r.Stroke(n,!1))}else if("3DFACE"==h||"SOLID"==h){var y=l[30]*_,w=l[31]*_,z=l[32]*_,G=l[33]*_;UDOC.G.moveTo(n,l[10]+y,l[20]-y),UDOC.G.lineTo(n,l[11]+w,l[21]-w),UDOC.G.lineTo(n,l[12]+z,l[22]-z),UDOC.G.lineTo(n,l[13]+G,l[23]-G),UDOC.G.closePath(n),"3DFACE"==h&&(n.colr=[Math.random(),Math.random(),Math.random()],n.ca=.5),r.Fill(n,!1)}else if("LWPOLYLINE"==h){for(m=0;m<l[90];m++){var Z=0==m?UDOC.G.moveTo:UDOC.G.lineTo;Z(n,l[10][m],l[20][m])}1==l[70]&&UDOC.G.closePath(n),r.Stroke(n,!1)}else if("CIRCLE"==h)UDOC.G.arc(n,l[10],l[20],l[40],0,2*Math.PI),r.Stroke(n,!1);else if("ELLIPSE"==h){var q=n.ctm.slice(0),G=l[10],j=l[20],H=l[11],V=l[21],W=Math.sqrt(H*H+V*V),B=[1,0,0,1,0,0];UDOC.M.scale(B,1,l[40]),UDOC.M.rotate(B,-Math.atan2(V,H)),UDOC.M.translate(B,G,j),UDOC.M.concat(B,n.ctm),n.ctm=B,UDOC.G.arc(n,0,0,W,l[41],l[42]),r.Stroke(n,!1),n.ctm=q}else if("ARC"==h)UDOC.G.arc(n,l[10],l[20],l[40],l[50]*Math.PI/180,l[51]*Math.PI/180),r.Stroke(n,!1);else if("SPLINE"==h){var X=l[10],J=l[20],Y=l[40].slice(0);X.length;if(UDOC.G.moveTo(n,X[0],J[0]),3==l[71]&&4==l[73])UDOC.G.curveTo(n,X[1],J[1],X[2],J[2],X[3],J[3]);else{for(var Q=-1e6,K=1e6,m=0;m<Y.length;m++){var $=Y[m];$<K&&(K=$),Q<$&&(Q=$)}for(m=0;m<Y.length;m++)Y[m]=(Y[m]-K)/(Q-K);for(var S=10*X.length,tt=1;tt<S;tt++){var et=tt/S,et=nt(X,J,l[71],Y,et);UDOC.G.lineTo(n,et[0],et[1])}UDOC.G.lineTo(n,X[X.length-1],J[J.length-1])}1&l[70]&&UDOC.G.closePath(n),r.Stroke(n,!1)}else"--ATTDEF"==h||"ATTRIB"==h||"TEXT"==h||"MTEXT"==h?(n.font.Tun=0,n.font.Tal=0,n.font.Tm=[1,0,0,1,0,0],l[50]&&UDOC.M.rotate(n.font.Tm,-l[50]*Math.PI/180),UDOC.M.translate(n.font.Tm,l[10],l[20]),n.font.Tfs=l[40],D=l["ATTDEF"==h?3:1],j=null,D=rt(D,n),W=null==l[71]?0:(l[71]-1)%3,n.font.Tal=[0,2,1][W],"MTEXT"==h&&null!=l[41]&&0!=l[41]?(q=D.length*n.font.Tfs/l[41],q=Math.max(q,D.split("\n").length),j=[l[41],q*n.font.Tfs*1.5],0==W||(2==W?UDOC.M.translate(n.font.Tm,-l[41],0):1==W?UDOC.M.translate(n.font.Tm,-l[41]/2,0):console.log("unknown align",l))):"MTEXT"==h&&null!=l[71]&&(l[71]<=3?UDOC.M.translate(n.font.Tm,0,.8*-n.font.Tfs):l[71]<=6&&UDOC.M.translate(n.font.Tm,0,.4*-n.font.Tfs)),r.PutText(n,D,.5*D.length,j)):console.log("unknown command",h)}}else if("OBJECTS"!=o&&"ACDSDATA"!=o)throw console.log(o,u,c),o}}(t,e,r,{tabs:{LTYPE:{}},blocks:{}},0,t.length),e.ShowPage(),e.Done()}function rt(t,e){for(t.startsWith("%%u")&&(t=t.slice(3),e.font.Tun=1),t=(t=(t=(t=t.split("\\P").join("\n")).split("%%d").join("'")).split("{").join("")).split("}").join("");;){if(-1==(r=t.indexOf("\\U+")))break;t=t.slice(0,r)+String.fromCharCode(parseInt(t.slice(r+3,r+7),16))+t.slice(r+7)}for(;;){var r=t.indexOf("\\"),n=t.indexOf(";");if(-1==r||-1==n)break;var i=(i=t.slice(r+1,n)).startsWith("pi")?" ".repeat(.5*parseFloat(i.slice(2))):"";t=t.slice(0,r)+i+t.slice(n+1)}return t}function nt(t,e,r,n,i){for(var s=0,a=0,o=0;o<t.length;o++){var h=function(t,e,r,n){var i,s,a=new Float64Array(e+1),o=r.Length-1;if(0==t&&n==r[0]||t==o-e-1&&n==r[o])return 1;if(n<r[t]||n>=r[t+e+1])return 0;for(var h=0;h<=e;h++)n>=r[t+h]&&n<r[t+h+1]?a[h]=1:a[h]=0;for(var l=1;l<=e;l++){i=0==a[0]?0:(n-r[t])*a[0]/(r[t+l]-r[t]);for(h=0;h<e-l+1;h++){var f=r[t+h+1],u=r[t+h+l+1];i=0==a[h+1]?(a[h]=i,0):(s=a[h+1]/(u-f),a[h]=i+(u-n)*s,(n-f)*s)}}return a[0]}(o,r,n,i);s+=t[o]*h,a+=e[o]*h}return[s,a]}return h.prototype={StartPage:function(){},PutText:function(t,e,r,n){r=[0,0,r*t.font.Tfs,0,0,-t.font.Tfs,0,t.font.Tfs];n&&(r[2]=n[0],r[5]=-n[1]),UDOC.M.multArray(t.ctm,r),UDOC.M.multArray(t.font.Tm,r),this.checkPath(r)},PutImage:function(){},Stroke:function(t){this.checkPath(t.pth.crds)},Fill:function(t){this.checkPath(t.pth.crds)},checkPath:function(t){for(var e=this.bb,r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];e[0]=Math.min(e[0],n),e[1]=Math.min(e[1],i),e[2]=Math.max(e[2],n),e[3]=Math.max(e[3],i)}},ShowPage:function(){},Done:function(){}},{Parse:function(t,e){t=new Uint8Array(t);for(var r=(new TextDecoder).decode(t).split("\n"),n=0;n<r.length;n++)r[n]=r[n].trim();for(;""==r[r.length-1];)r.pop();var i=new h;l(r,i);var s=i.bb,a=1800/(s[2]-s[0]),o=Math.round((s[3]-s[1])*a+200),t=[0,0,2e3,o];(i=UDOC.getState(t)).lwidth=1/a,i.ctm=[a,0,0,-a,100-s[0]*a,s[1]*a-100+o],l(r,e,i,t)}}}(),ToPDF=function(){function l(){this._res={"/Font":{},"/XObject":{},"/ExtGState":{},"/Pattern":{}},this._xr=[null,{"/Type":"/Catalog","/Pages":{typ:"ref",ind:2}},{"/Type":"/Pages","/Kids":[],"/Count":0},this._res],this._bnds=[],this._cont="",this._gst=i()}function i(){return{colr:"[0,0,0]",COLR:"[0,0,0]",lcap:"0",ljoin:"0",lwidth:"1",mlimit:"10",dash:"[]",doff:"0",bmode:"/Normal",CA:"1",ca:"1"}}function u(t){return""+parseFloat(t.toFixed(2))}function s(t){return""+parseFloat(t.toFixed(3))}function f(t){t=t.map(u).join(" ");return"1 0 0 1 0 0"==t?"":t+" cm "}function v(t,e){if(t.length==e.length){for(var r=0;r<t.length;r++)if(t[r]!=e[r])return;return 1}}function m(t){for(var e=[[255,216,255],[0,0,0,12,106,80,32,32],[0,0,0,0,48,0,1,0]],r=["/DCTDecode","/JPXDecode","/JBIG2Decode"],n=0;n<e.length;n++){for(var i=e[n],s=!0,a=0;a<i.length;a++)s=s&&t[a]==i[a];if(s)return r[n]}}function c(t,e,r){if(null!=t.length)return t.map(s).join(" ")+" "+(e?"rg":"RG")+" \n";var n=r["/Pattern"],i=t,r="/P"+(y(n)+1),t={"/ShadingType":"lin"==i.typ?2:3,"/ColorSpace":"/DeviceRGB","/Extend":[!0,!0],"/Function":function(t){0!=(t=t.slice(0))[0][0]&&t.unshift(JSON.parse(JSON.stringify(t[0])));1!=t[t.length-1][0]&&t.unshift(JSON.parse(JSON.stringify(t[t.length-1])));t[0][0]=0,t[t.length-1][0]=1;var e=[],r=[],n=[0,1],i=a;if(2==t.length)return i(t[0][1],t[1][1]);r.push(i(t[0][1],t[1][1]));for(var s=1;s<t.length-1;s++)e.push(t[s][0]),r.push(i(t[s][1],t[s+1][1])),n.push(0,1);return{"/FunctionType":3,"/Encode":n,"/Domain":[0,1],"/Bounds":e,"/Functions":r}}(i.grad),"/Coords":i.crds};return n[r]={"/Type":"/Pattern","/PatternType":2,"/Matrix":i.mat,"/Shading":t},"/Pattern "+(e?"cs "+r+" scn ":"CS "+r+" SCN ")}function a(t,e){return{"/FunctionType":2,"/C0":t,"/C1":e,"/Domain":[0,1],"/N":1}}function _(t){for(var e=0;e<t.length;){for(;255==t[e];)e++;var r=t[e];if(e++,216!=r){if(217==r)break;if(!(208<=r&&r<=215)&&1!=r){var n=(t[e]<<8|t[e+1])-2;if(e+=2,192==r)return{bpp:t[e],w:t[e+1]<<8|t[e+2],h:t[e+3]<<8|t[e+4],comps:t[e+5]};e+=n}}}}function y(t){var e,r;for(r in t)e=r;return null==e?0:parseInt(e.slice(2))}l.prototype.StartPage=function(t,e,r,n){this._bnds=[t,e,r,n]},l.prototype.Stroke=function(t){0!=t.CA&&(this.setGState(t,!0),this._cont+=" S\n")},l.prototype.Fill=function(t,e){0!=t.ca&&(this.setGState(t,!0),this._cont+=" f\n")},l.prototype.setGState=function(t,e){var r,n=this._gst,i={};for(r in t)i[r]="string"==typeof t[r]?t[r]:JSON.stringify(t[r]);for(var s=(f=t.ctm,Math.sqrt(Math.abs(f[0]*f[3]-f[1]*f[2]))),a=t.dash.slice(0),o=0;o<a.length;o++)a[o]=u(a[o]*s);var h=this._cont;n.lcap!=i.lcap&&(h+=t.lcap+" J "),n.ljoin!=i.ljoin&&(h+=t.ljoin+" j "),n.lwidth!=i.lwidth&&(h+=u(t.lwidth*s)+" w "),n.mlimit!=i.mlimit&&(h+=u(t.mlimit)+" M "),n.dash==i.dash&&n.doff==i.doff||(h+="["+a.join(" ")+"] "+t.doff+" d "),n.COLR!=i.COLR&&(h+=c(t.COLR,!1,this._res)),n.colr!=i.colr&&(h+=c(t.colr,!0,this._res));var l,f=this._res["/ExtGState"];n.bmode!=i.bmode&&(null==f[l=i.bmode]&&(f[l]={"/Type":"/ExtGState","/BM":t.bmode}),h+=l+" gs "),n.CA!=i.CA&&(null==f[l="/Alpha"+Math.round(255*i.CA)]&&(f[l]={"/Type":"/ExtGState","/CA":t.CA}),h+=l+" gs "),n.ca!=i.ca&&(null==f[l="/alpha"+Math.round(255*i.ca)]&&(f[l]={"/Type":"/ExtGState","/ca":t.ca}),h+=l+" gs "),e&&(h+=function(t){for(var e=0,r="",n=u,i=0;i<t.cmds.length;i++){var s=t.cmds[i];if("M"==s){for(var a=0;a<2;a++)r+=n(t.crds[e++])+" ";r+="m "}else if("L"==s){for(a=0;a<2;a++)r+=n(t.crds[e++])+" ";r+="l "}else if("C"==s){for(a=0;a<6;a++)r+=n(t.crds[e++])+" ";r+="c "}else{if("Z"!=s)throw s;r+="h "}}return r}(t.pth)),this._cont=h,this._gst=i},l.prototype.PutText=function(t,e,r,n){this.setGState(t,!1);var i=this.addFont(t.font.Tf,n);this._cont+="q ",this._cont+=f(t.ctm),this._cont+=f(t.font.Tm),this._cont+="BT  "+i+" "+u(t.font.Tfs)+" Tf  0 0 Td  (";var s=[];if(null==n)for(var a,o=[128,8364,130,8218,131,402,132,8222,133,8230,134,8224,135,8225,136,710,137,8240,138,352,139,8249,140,338,142,381,145,8216,146,8217,147,8220,148,8221,149,8226,150,8211,151,8212,152,732,153,8482,154,353,155,8250,156,339,158,382,159,376],h=0;h<e.length;h++)255<(l=e.charCodeAt(h))?(a=o.indexOf(l),s.push(-1==a?32:o[a-1])):s.push(l);else for(h=0;h<e.length;h++){var l=e.charCodeAt(h);s.push(255&l)}for(s=FromPS.makeString(s),h=0;h<s.length;h++)this._cont+=String.fromCharCode(s[h]);this._cont+=") Tj  ET ",this._cont+=" Q\n"},l.prototype.PutImage=function(t,e,r,n,i){if(e.length==r*n*4&&null==i){for(var s=r*n,a=new Uint8Array(s),o=255,h=0;h<s;h++)a[h]=e[3+(h<<2)],o&=e[3+(h<<2)];255!=o&&(i=a)}i=this.addImage(e,r,n,i);this.setGState(t,!1),this._cont+="q "+f(t.ctm),this._cont+=i+" Do  Q\n"},l.prototype.ShowPage=function(){var t,e,r,n;t=this._xr,e=this._cont,r=this._bnds,n=t.length,t[2]["/Kids"].push({typ:"ref",ind:n}),t[2]["/Count"]++,t.push({"/Type":"/Page","/Parent":{typ:"ref",ind:2},"/Resources":{typ:"ref",ind:3},"/MediaBox":r,"/Contents":{typ:"ref",ind:n+1}}),t.push({stream:e}),this._cont="",this._gst=i()},l.prototype.Print=function(t){},l.prototype.Done=function(){var t,e=this._res;for(t in e)0==Object.keys(e[t])&&delete e[t];this.buffer=function(t){var e={file:new o,off:0},r=l.write,n=[];r(e,"%PDF-1.1\n");for(var i=1;i<t.length;i++)n.push(e.off),r(e,i+" 0 obj\n"),l.writeDict(e,t[i],0),r(e,"\nendobj\n");var s=e.off;r(e,"xref\n"),r(e,"0 "+t.length+"\n"),r(e,"0000000000 65535 f \n");for(i=0;i<n.length;i++){for(var a=n[i]+"";a.length<10;)a="0"+a;r(e,a+" 00000 n \n")}return r(e,"trailer\n"),l.writeDict(e,{"/Root":{typ:"ref",ind:1},"/Size":t.length},0),r(e,"\nstartxref\n"+s+"\n%%EOF\n"),e.file.data.buffer.slice(0,e.off)}(this._xr)},l.prototype.addImage=function(t,e,r,n){var i;if(n){var s=n;if(n.length==e*r*4)for(var s=new Uint8Array(e*r),a=0;a<s.length;a++)s[a]=n[1+(a<<2)];i=this.addImage(s,e,r,null)}var o=m(t),h=t;if(t.length==e*r*4)for(h=new Uint8Array(e*r*3),a=0;a<t.length;a+=4){var l=3*(a>>2);h[l]=t[a+0],h[1+l]=t[a+1],h[2+l]=t[a+2]}var f,u=this._res["/XObject"];for(f in u){var c=this._xr[u[f].ind],p=c["/SMask"],d=null!=p?1:0,g=null!=i?1:0;if(v(c.stream,h)&&d+g!=1&&(d+g!=2||v(this._xr[p.ind].stream,s)))return f}u[f="/I"+(y(u)+1)]={typ:"ref",ind:this._xr.length};e={"/Type":"/XObject","/Subtype":"/Image","/BitsPerComponent":8,"/ColorSpace":t.length==e*r||"/DCTDecode"==o&&_(t)&&1==_(t).comps?"/DeviceGray":"/DeviceRGB","/Height":r,"/Width":e,stream:h};return null!=o&&(e["/Filter"]=m(t)),n&&(e["/SMask"]={typ:"ref",ind:this._xr.length-1}),this._xr.push(e),f},l.prototype.addFont=function(t,e){var r,n,i,s;n=(r=t).toLowerCase(),i="Helvetica Helvetica-Bold Helvetica-Oblique Helvetica-BoldOblique Times-Roman Times-Bold Times-Italic Times-BoldItalic".split(" "),s=0,-1!=n.indexOf("sans")?s=0:-1!=n.indexOf("serif")&&(s=4),r=-1!=n.indexOf("bold"),n=-1!=n.indexOf("italic")||-1!=n.indexOf("oblique")||n.endsWith("-it"),r&&n?s+=3:n?s+=2:r&&(s+=1),t="/"+(t=i[s]);var a=this._res["/Font"];for(o in a)if(a[o]["/BaseFont"]==t)return o;var o="/F"+(y(a)+1),h={"/Type":"/Font","/Subtype":"/Type1","/BaseFont":t,"/Encoding":"/WinAnsiEncoding"};if(null!=e){for(var l="/CIDInit /ProcSet findresource begin \t12 dict begin \tbegincmap \t/CIDSystemInfo \t<<  /Registry (Adobe) \t/Ordering (UCS) \t/Supplement 0 \t>> def \t/CMapName /Adobe-Identity-UCS def \t/CMapType 2 def \t1 begincodespacerange \t<0000> <FFFF> \tendcodespacerange \t1 beginbfchar \t<0001> <200B> \tendbfchar \tendcmap \tCMapName currentdict /CMap defineresource pop \tend \tend",f=new Uint8Array(l.length),u=0;u<l.length;u++)f[u]=l.charCodeAt(u);h["/Subtype"]="/TrueType",delete h["/Encoding"],h["/FirstChar"]=0,h["/Widths"]=[];for(u=0;u<256;u++)h["/Widths"].push(500);h["/LastChar"]=h["/Widths"].length-1,h["/FontDescriptor"]={"/Ascent":905,"/CapHeight":1010,"/Descent":211,"/Flags":4,"/FontBBox":[-627,-376,2e3,1011],"/FontName":t,"/ItalicAngle":0,"/StemV":80,"/Type":"/FontDescriptor","/FontFile2":{stream:new Uint8Array(e)}}}return a[o]=h,o},l.write=function(t,e){t.file.req(t.off,e.length);for(var r=0;r<e.length;r++)t.file.data[t.off+r]=e.charCodeAt(r);t.off+=e.length},l._tab="    ",l.spc=function(t){for(var e="",r=0;r<t;r++)e+=l._tab;return e},l.writeValue=function(t,e,r){var n=l.write;if(0,"string"==typeof e)n(t,e);else if("number"==typeof e)n(t,""+e);else if("boolean"==typeof e)n(t,""+e);else if(null!=e.typ)n(t,e.ind+" 0 R");else if(e instanceof Array)l.writeArray(t,e,r+1);else{if(!(e instanceof Object))throw console.log(e),"e";l.writeDict(t,e,r+1)}},l.writeDict=function(t,e,r){var n,i=l.write,s=l.spc,a=e.stream;if(a){if("string"==typeof a){for(var o=new Uint8Array(a.length),h=0;h<a.length;h++)o[h]=a.charCodeAt(h);a=o}null==e["/Filter"]&&(e["/Filter"]="/FlateDecode",a=pako.deflate(a))}for(n in i(t,"<<\n"),e)"/"==n.charAt(0)&&(i(t,s(r+1)+n+" "),l.writeValue(t,e[n],r),i(t,"\n"));if(a&&i(t,s(r+1)+"/Length "+a.length+"\n"),i(t,s(r)+">>"),a){i(t,s(r)+"\nstream\n"),t.file.req(t.off,a.length);for(h=0;h<a.length;h++)t.file.data[t.off+h]=a[h];t.off+=a.length,i(t,s(r)+"\nendstream")}},l.writeArray=function(t,e,r){var n=l.write;n(t,"[ ");for(var i=0;i<e.length;i++)l.writeValue(t,e[i],r+1),i!=e.length-1&&n(t," ");n(t," ]")};var o=function(){this.size=16,this.data=new Uint8Array(16)};return o.prototype.req=function(t,e){if(!(t+e<=this.size)){for(var r=this.size;t+e>this.size;)this.size*=2;for(var n=new Uint8Array(this.size),i=0;i<r;i++)n[i]=this.data[i];this.data=n}},l}();function ToEMF(){this._file={file:new ToEMF.MFile,off:0},this._lstw=0,this._curx=0,this._curh=0,this._recs=0,this._lenp=0,this._objs={},this._tabl=1,this._stkf=0,this._tclr=0,this._curt={p:-1,b:-1,t:-1},this._inited=!1}ToEMF.prototype.StartPage=function(t,e,r,n){this._check();var i=this._file,s=ToEMF.B.writeUint,a=ToEMF.B.writeInt;this._curh=Math.max(this._curh,10*n),this._inited?(this._curx+=this._lstw,ToEMF._writeHeadBox(i,[0,0,this._curx+r,Math.round(this._curh/10)])):(this._inited=!0,this._addRec("HEADER",88),ToEMF._writeHeadBox(i,[t,e,r,n]),i.off+=32,ToEMF.B.writeASCII(i.file,i.off," EMF"),i.off+=4,s(i.file,i.off,65536),i.off+=4,this._lenp=i.off,i.off+=12,i.off+=12,a(i.file,i.off,1440),i.off+=4,a(i.file,i.off,900),i.off+=4,a(i.file,i.off,508),i.off+=4,a(i.file,i.off,318),i.off+=4,this._trsf([.1,0,0,.1,0,0]),this._addRec("SETBKMODE",12),s(i.file,i.off,1),i.off+=4,this._addRec("SETTEXTALIGN",12),s(i.file,i.off,24),i.off+=4),this._lstw=r},ToEMF.prototype.Stroke=function(t){this._draw(t,1)},ToEMF.prototype.Fill=function(t,e){this._draw(t,2)},ToEMF.prototype.PutImage=function(t,e,r,n,i){var s=e.length;0!=(3&s)&&(s+=4-(3&s));var a=[1,0,0,-1,0,1];UDOC.M.concat(a,t.ctm),UDOC.M.scale(a,10,10),UDOC.M.scale(a,1,-1),UDOC.M.translate(a,this._curx,this._curh),this._trsf(a);var o=this._file,h=ToEMF.B.writeUint,l=ToEMF.B.writeInt,t=ToEMF.B.writeUshort;if(this._addRec("STRETCHDIBITS",120+s),o.off+=16,l(o.file,o.off,Math.round(0)),o.off+=4,l(o.file,o.off,Math.round(0)),o.off+=4,o.off+=8,l(o.file,o.off,r),o.off+=4,l(o.file,o.off,n),o.off+=4,h(o.file,o.off,80),o.off+=4,h(o.file,o.off,40),o.off+=4,h(o.file,o.off,120),o.off+=4,h(o.file,o.off,e.length),o.off+=4,o.off+=4,h(o.file,o.off,13369376),o.off+=4,l(o.file,o.off,Math.round(1)),o.off+=4,l(o.file,o.off,Math.round(1)),o.off+=4,l(o.file,o.off,40),o.off+=4,l(o.file,o.off,r),o.off+=4,l(o.file,o.off,n),o.off+=4,t(o.file,o.off,1),o.off+=2,t(o.file,o.off,32),o.off+=2,l(o.file,o.off,0),o.off+=4,l(o.file,o.off,e.length),o.off+=4,l(o.file,o.off,3800),o.off+=4,l(o.file,o.off,3800),o.off+=4,o.off+=8,o.file.req(o.off,e.length),e.length==r*n*4)for(var f=0;f<n;f++)for(var u=0;u<r;u++){var c=f*r+u<<2,p=o.off+((n-1-f)*r+u<<2);o.file.data[p]=e[2+c],o.file.data[p+1]=e[1+c],o.file.data[p+2]=e[c],o.file.data[p+3]=e[3+c]}else for(var d=0;d<e.length;d++)o.file.data[o.off+d]=e[d];o.off+=s,UDOC.M.invert(a),this._trsf(a)},ToEMF.prototype.PutText=function(t,e,r){var n,i=e.length;1==(1&i)&&i++,this._check();var s=this._file,a=ToEMF.B.writeUint,o=ToEMF.B.writeInt,h=ToEMF.B.writeUshort,l=ToEMF.B.writeFloat,f=ToEMF._color(t.colr);f!=this._tclr&&(this._addRec("SETTEXTCOLOR",12),a(s.file,s.off,f),s.off+=4,this._tclr=f),this._setTool("f",[t.font.Tf,Math.round(10*t.font.Tfs)]);var u=10*(t.ctm[4]+this._curx),c=this._curh-10*t.ctm[5],f=.05<Math.abs(t.ctm[1]);f&&((n=t.ctm.slice(0))[1]*=-1,n[2]*=-1,n[4]=u,n[5]=c,u=c=0,this._trsf(n));this._addRec("EXTTEXTOUTW",76+2*i),s.off+=16,a(s.file,s.off,2),s.off+=4,l(s.file,s.off,31.25),s.off+=4,l(s.file,s.off,31.25),s.off+=4,o(s.file,s.off,Math.round(u)),s.off+=4,o(s.file,s.off,Math.round(c)),s.off+=4,a(s.file,s.off,e.length),s.off+=4,a(s.file,s.off,76),s.off+=4,a(s.file,s.off,0),s.off+=4,s.off+=16,a(s.file,s.off,0),s.off+=4;for(var p=0;p<e.length;p++)h(s.file,s.off+2*p,e.charCodeAt(p));s.off+=2*i,f&&(UDOC.M.invert(n),this._trsf(n))},ToEMF.prototype.ShowPage=function(){this._check()},ToEMF.prototype.Done=function(){this._check();var t=this._file,e=ToEMF.B.writeUint;this._addRec("EOF",20),e(t.file,t.off,0),t.off+=4,e(t.file,t.off,16),t.off+=4,e(t.file,t.off,20),t.off+=4,e(t.file,this._lenp,t.off),e(t.file,this._lenp+4,this._recs),e(t.file,this._lenp+8,this._tabl),this.buffer=t.file.data.buffer.slice(0,t.off)},ToEMF.prototype._check=function(){var t=this._file,e=this._stkf;0!=e&&(1==e&&this._addRec("STROKEPATH",24),2==e&&this._addRec("FILLPATH",24),3==e&&this._addRec("STROKEANDFILLPATH",24),t.off+=16,this._stkf=0)},ToEMF.prototype._addRec=function(t,e){var r=this._file,n=ToEMF.B.writeUint;this._recs++,n(r.file,r.off,ToEMF.C["EMR_"+t]),r.off+=4,n(r.file,r.off,e),r.off+=4},ToEMF.prototype._trsf=function(t){var e=this._file,r=ToEMF.B.writeInt;this._addRec("MODIFYWORLDTRANSFORM",36);for(var n=0;n<t.length;n++)ToEMF.B.writeFloat(e.file,e.off,t[n]),e.off+=4;r(e.file,e.off,2),e.off+=4},ToEMF._writeHeadBox=function(t,e){var r=t.off;t.off=8,ToEMF._writeBox(t,e);var n=1/72*25.4*100;ToEMF._writeBox(t,[0,0,Math.round((e[2]-e[0])*n),Math.round((e[3]-e[1])*n)]),t.off=r},ToEMF._writeBox=function(t,e){for(var r=0;r<4;r++)ToEMF.B.writeInt(t.file,t.off,e[r]),t.off+=4},ToEMF.prototype._draw=function(t,e){var r=this._file,n=ToEMF.B.writeUint,i=ToEMF.B.writeInt,s=t.pth,a=JSON.stringify(s);if(this._cpth!=a&&this._check(),1==e?this._setTool("p",[t.COLR,t.lwidth,t.ljoin]):this._setTool("b",[t.colr]),this._cpth==a)this._stkf+=e;else{var o={M:["MOVETOEX",1],L:["LINETO",1],C:["POLYBEZIERTO",3],Z:["CLOSEFIGURE",0]},h=0,l=s.cmds.length;this._addRec("BEGINPATH",8);for(var f=0;f<l;f++){var u=s.cmds[f],c=o[u],p=1;if(null==c)throw u+" e";for(var d=2*c[1],g=c[0],v=8+4*d;;){if(!(f+p<l&&s.cmds[f+p]==u))break;p++}var m="C"==u||"L"==u&&1<p;m&&("L"==u&&(g="POLYLINETO"),v=28+4*(d*=p)),this._addRec(g,v),m&&(r.off+=16,n(r.file,r.off,p*c[1]),r.off+=4,f+=p-1);for(var _=0;_<d;_+=2)i(r.file,r.off,Math.round(10*(s.crds[h]+this._curx))),r.off+=4,h++,i(r.file,r.off,Math.round(this._curh-10*s.crds[h])),r.off+=4,h++}this._addRec("ENDPATH",8),this._cpth=a,this._stkf=e}},ToEMF.prototype._setTool=function(t,e){var r=this._file,n=ToEMF.B.writeUint,i=ToEMF.B.writeInt,s=t+JSON.stringify(e);if(null==(a=this._objs[s])){var a=this._objs[s]=this._tabl;if(this._tabl++,"b"==t&&this._addRec("CREATEBRUSHINDIRECT",24),"p"==t&&this._addRec("CREATEPEN",28),"f"==t&&this._addRec("EXTCREATEFONTINDIRECTW",104),n(r.file,r.off,a),r.off+=4,"b"!=t&&"p"!=t||("p"==t?(n(r.file,r.off,0),r.off+=4,h=Math.round(10*e[1]),n(r.file,r.off,h),r.off+=4,n(r.file,r.off,h)):n(r.file,r.off,0),r.off+=4,n(r.file,r.off,ToEMF._color(e[0])),r.off+=4,"b"==t&&(n(r.file,r.off,0),r.off+=4)),"f"==t){var o=e[0],h=-1!=o.toLowerCase().indexOf("bold");o.endsWith("-Bold")&&(o=o.slice(0,o.length-5)),i(r.file,r.off,-e[1]),r.off+=4,r.off+=12,n(r.file,r.off,h?700:400),r.off+=4,n(r.file,r.off,0),r.off+=4,n(r.file,r.off,262151),r.off+=4;for(var l=0;l<o.length;l++)ToEMF.B.writeUshort(r.file,r.off+2*l,o.charCodeAt(l));r.off+=64}}this._curt[t]!=a&&(this._addRec("SELECTOBJECT",12),n(r.file,r.off,a),r.off+=4,this._curt[t]=a)},ToEMF._color=function(t){var e=Math.round(255*t[0]),r=Math.round(255*t[1]);return Math.round(255*t[2])<<16|r<<8|e<<0},ToEMF.B=function(){var n=new Uint8Array(4),t=n.buffer,i=new Int16Array(t),s=new Uint16Array(t),a=new Int32Array(t),o=new Uint32Array(t),h=new Float32Array(t);return{writeShort:function(t,e,r){i[0]=r,t.req(e,2);t=t.data;t[e]=n[0],t[e+1]=n[1]},writeUshort:function(t,e,r){s[0]=r,t.req(e,2);t=t.data;t[e]=n[0],t[e+1]=n[1]},writeInt:function(t,e,r){a[0]=r,t.req(e,4);t=t.data;t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3]},writeUint:function(t,e,r){o[0]=r,t.req(e,4);t=t.data;t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3]},writeFloat:function(t,e,r){h[0]=r,t.req(e,4);t=t.data;t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3]},writeASCII:function(t,e,r){t.req(e,r.length);for(var n=0;n<r.length;n++)t.data[e+n]=r.charCodeAt(n)}}}(),ToEMF.MFile=function(){this.size=16,this.data=new Uint8Array(16)},ToEMF.MFile.prototype.req=function(t,e){if(!(t+e<=this.size)){for(var r=this.size;t+e>this.size;)this.size*=2;for(var n=new Uint8Array(this.size),i=0;i<r;i++)n[i]=this.data[i];this.data=n}},ToEMF.C={EMR_HEADER:1,EMR_POLYBEZIER:2,EMR_POLYGON:3,EMR_POLYLINE:4,EMR_POLYBEZIERTO:5,EMR_POLYLINETO:6,EMR_POLYPOLYLINE:7,EMR_POLYPOLYGON:8,EMR_SETWINDOWEXTEX:9,EMR_SETWINDOWORGEX:10,EMR_SETVIEWPORTEXTEX:11,EMR_SETVIEWPORTORGEX:12,EMR_SETBRUSHORGEX:13,EMR_EOF:14,EMR_SETPIXELV:15,EMR_SETMAPPERFLAGS:16,EMR_SETMAPMODE:17,EMR_SETBKMODE:18,EMR_SETPOLYFILLMODE:19,EMR_SETROP2:20,EMR_SETSTRETCHBLTMODE:21,EMR_SETTEXTALIGN:22,EMR_SETCOLORADJUSTMENT:23,EMR_SETTEXTCOLOR:24,EMR_SETBKCOLOR:25,EMR_OFFSETCLIPRGN:26,EMR_MOVETOEX:27,EMR_SETMETARGN:28,EMR_EXCLUDECLIPRECT:29,EMR_INTERSECTCLIPRECT:30,EMR_SCALEVIEWPORTEXTEX:31,EMR_SCALEWINDOWEXTEX:32,EMR_SAVEDC:33,EMR_RESTOREDC:34,EMR_SETWORLDTRANSFORM:35,EMR_MODIFYWORLDTRANSFORM:36,EMR_SELECTOBJECT:37,EMR_CREATEPEN:38,EMR_CREATEBRUSHINDIRECT:39,EMR_DELETEOBJECT:40,EMR_ANGLEARC:41,EMR_ELLIPSE:42,EMR_RECTANGLE:43,EMR_ROUNDRECT:44,EMR_ARC:45,EMR_CHORD:46,EMR_PIE:47,EMR_SELECTPALETTE:48,EMR_CREATEPALETTE:49,EMR_SETPALETTEENTRIES:50,EMR_RESIZEPALETTE:51,EMR_REALIZEPALETTE:52,EMR_EXTFLOODFILL:53,EMR_LINETO:54,EMR_ARCTO:55,EMR_POLYDRAW:56,EMR_SETARCDIRECTION:57,EMR_SETMITERLIMIT:58,EMR_BEGINPATH:59,EMR_ENDPATH:60,EMR_CLOSEFIGURE:61,EMR_FILLPATH:62,EMR_STROKEANDFILLPATH:63,EMR_STROKEPATH:64,EMR_FLATTENPATH:65,EMR_WIDENPATH:66,EMR_SELECTCLIPPATH:67,EMR_ABORTPATH:68,EMR_COMMENT:70,EMR_FILLRGN:71,EMR_FRAMERGN:72,EMR_INVERTRGN:73,EMR_PAINTRGN:74,EMR_EXTSELECTCLIPRGN:75,EMR_BITBLT:76,EMR_STRETCHBLT:77,EMR_MASKBLT:78,EMR_PLGBLT:79,EMR_SETDIBITSTODEVICE:80,EMR_STRETCHDIBITS:81,EMR_EXTCREATEFONTINDIRECTW:82,EMR_EXTTEXTOUTA:83,EMR_EXTTEXTOUTW:84,EMR_POLYBEZIER16:85,EMR_POLYGON16:86,EMR_POLYLINE16:87,EMR_POLYBEZIERTO16:88,EMR_POLYLINETO16:89,EMR_POLYPOLYLINE16:90,EMR_POLYPOLYGON16:91,EMR_POLYDRAW16:92,EMR_CREATEMONOBRUSH:93,EMR_CREATEDIBPATTERNBRUSHPT:94,EMR_EXTCREATEPEN:95,EMR_POLYTEXTOUTA:96,EMR_POLYTEXTOUTW:97,EMR_SETICMMODE:98,EMR_CREATECOLORSPACE:99,EMR_SETCOLORSPACE:100,EMR_DELETECOLORSPACE:101,EMR_GLSRECORD:102,EMR_GLSBOUNDEDRECORD:103,EMR_PIXELFORMAT:104,EMR_DRAWESCAPE:105,EMR_EXTESCAPE:106,EMR_SMALLTEXTOUT:108,EMR_FORCEUFIMAPPING:109,EMR_NAMEDESCAPE:110,EMR_COLORCORRECTPALETTE:111,EMR_SETICMPROFILEA:112,EMR_SETICMPROFILEW:113,EMR_ALPHABLEND:114,EMR_SETLAYOUT:115,EMR_TRANSPARENTBLT:116,EMR_GRADIENTFILL:118,EMR_SETLINKEDUFIS:119,EMR_SETTEXTJUSTIFICATION:120,EMR_COLORMATCHTOTARGETW:121,EMR_CREATECOLORSPACEW:122},ToEMF.K=[],function(){var t,e=ToEMF.C,r=ToEMF.K;for(t in e)r[e[t]]=t.slice(4)}();var ToDXF=function(){var u;function t(){this.buffer=null}return t.prototype.StartPage=function(){null==u&&(u=[0,"SECTION",2,"ENTITIES"])},t.prototype.ShowPage=function(){},t.prototype.Done=function(){u.push(0,"ENDSEC",0,"EOF","");var t=u.join("\n"),e=new Uint8Array(t.length);this.buffer=e.buffer;for(var r=0;r<t.length;r++)e[r]=t.charCodeAt(r);u=null},t.prototype.PutImage=function(){},t.prototype.PutText=function(t,e,r){for(;e.endsWith("\n");)e=e.slice(0,e.length-1);u.push(0,"MTEXT"),u.push(40,t.font.Tfs),u.push(10,t.ctm[4],20,t.ctm[5]),u.push(1,e)},t.prototype.Fill=function(t){this.Stroke(t)},t.prototype.Stroke=function(t){for(var e=t.pth.cmds,r=t.pth.crds,n=0,i=0,s=0,a=0,o=0,h=0;h<e.length;h++){var l=e[h];if("M"==l)n=s=r[o++],i=a=r[o++];else if("L"==l||"Z"==l)"Z"==l&&s==n&&a==i||(u.push(0,"LINE",10,s,20,a),a="L"==l?(s=r[o++],r[o++]):(s=n,i),u.push(11,s,21,a));else if("C"==l){u.push(0,"SPLINE"),u.push(210,0,220,0,230,0),u.push(70,8,71,3,72,8,73,4,74,0,42,0,43,0);for(var f=0;f<8;f++)u.push(40,f<4?0:1);u.push(10,s,20,a);for(f=0;f<3;f++)s=r[o++],a=r[o++],u.push(10,s,20,a)}}},t}(),PDFJS;!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=t()}(function(){return function n(i,s,a){function o(r,t){if(!s[r]){if(!i[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(h)return h(r,!0);e=new Error("Cannot find module '"+r+"'");throw e.code="MODULE_NOT_FOUND",e}e=s[r]={exports:{}};i[r][0].call(e.exports,function(t){var e=i[r][1][t];return o(e||t)},e,e.exports,n,i,s,a)}return s[r].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)o(a[t]);return o}({1:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;if(e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,(this.strm.avail_out=0)!==(t=a.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy)))throw new Error(s[t]);if(e.header&&a.deflateSetHeader(this.strm,e.header),e.dictionary){e="string"==typeof e.dictionary?h.string2buf(e.dictionary):"[object ArrayBuffer]"===f.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary;if(0!==(t=a.deflateSetDictionary(this.strm,e)))throw new Error(s[t]);this._dict_set=!0}}function i(t,e){e=new n(e);if(e.push(t,!0),e.err)throw e.msg||s[e.err];return e.result}var a=t("./zlib/deflate"),o=t("./utils/common"),h=t("./utils/strings"),s=t("./zlib/messages"),l=t("./zlib/zstream"),f=Object.prototype.toString;n.prototype.push=function(t,e){var r,n,i=this.strm,s=this.options.chunkSize;if(this.ended)return!1;n=e===~~e?e:!0===e?4:0,"string"==typeof t?i.input=h.string2buf(t):"[object ArrayBuffer]"===f.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new o.Buf8(s),i.next_out=0,i.avail_out=s),1!==(r=a.deflate(i,n))&&0!==r)return this.onEnd(r),!(this.ended=!0)}while(0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(h.buf2binstring(o.shrinkBuf(i.output,i.next_out))):this.onData(o.shrinkBuf(i.output,i.next_out))),(0<i.avail_in||0===i.avail_out)&&1!==r);return 4===n?(r=a.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==n||(this.onEnd(0),!(i.avail_out=0))},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=n,r.deflate=i,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,i(t,e)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,r){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=c.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;e=u.inflateInit2(this.strm,e.windowBits);if(e!==d.Z_OK)throw new Error(s[e]);this.header=new o,u.inflateGetHeader(this.strm,this.header)}function i(t,e){e=new n(e);if(e.push(t,!0),e.err)throw e.msg||s[e.err];return e.result}var u=t("./zlib/inflate"),c=t("./utils/common"),p=t("./utils/strings"),d=t("./zlib/constants"),s=t("./zlib/messages"),a=t("./zlib/zstream"),o=t("./zlib/gzheader"),g=Object.prototype.toString;n.prototype.push=function(t,e){var r,n,i,s,a,o=this.strm,h=this.options.chunkSize,l=this.options.dictionary,f=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?d.Z_FINISH:d.Z_NO_FLUSH,"string"==typeof t?o.input=p.binstring2buf(t):"[object ArrayBuffer]"===g.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new c.Buf8(h),o.next_out=0,o.avail_out=h),(r=u.inflate(o,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&l&&(a="string"==typeof l?p.string2buf(l):"[object ArrayBuffer]"===g.call(l)?new Uint8Array(l):l,r=u.inflateSetDictionary(this.strm,a)),r===d.Z_BUF_ERROR&&!0===f&&(r=d.Z_OK,f=!1),r!==d.Z_STREAM_END&&r!==d.Z_OK)return this.onEnd(r),!(this.ended=!0)}while(o.next_out&&(0!==o.avail_out&&r!==d.Z_STREAM_END&&(0!==o.avail_in||n!==d.Z_FINISH&&n!==d.Z_SYNC_FLUSH)||("string"===this.options.to?(i=p.utf8border(o.output,o.next_out),s=o.next_out-i,a=p.buf2string(o.output,i),o.next_out=s,o.avail_out=h-s,s&&c.arraySet(o.output,o.output,i,s,0),this.onData(a)):this.onData(c.shrinkBuf(o.output,o.next_out)))),0===o.avail_in&&0===o.avail_out&&(f=!0),(0<o.avail_in||0===o.avail_out)&&r!==d.Z_STREAM_END);return(n=r===d.Z_STREAM_END?d.Z_FINISH:n)===d.Z_FINISH?(r=u.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===d.Z_OK):n!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(o.avail_out=0))},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===d.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=n,r.inflate=i,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,i(t,e)},r.ungzip=i},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var s=0;s<n;s++)t[i+s]=e[r+s]},flattenChunks:function(t){for(var e,r,n,i=0,s=0,a=t.length;s<a;s++)i+=t[s].length;for(n=new Uint8Array(i),s=e=0,a=t.length;s<a;s++)r=t[s],n.set(r,e),e+=r.length;return n}},s={arraySet:function(t,e,r,n,i){for(var s=0;s<n;s++)t[i+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(n)},{}],4:[function(t,e,r){"use strict";function h(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&i))return String.fromCharCode.apply(null,l.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}var l=t("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var f=new l.Buf8(256),n=0;n<256;n++)f[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;f[254]=f[254]=1,r.string2buf=function(t){for(var e,r,n,i,s=t.length,a=0,o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&(56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new l.Buf8(a),o=i=0;i<a;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&(56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++)),r<128?e[i++]=r:(r<2048?e[i++]=192|r>>>6:(r<65536?e[i++]=224|r>>>12:(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63),e[i++]=128|r>>>6&63),e[i++]=128|63&r);return e},r.buf2binstring=function(t){return h(t,t.length)},r.binstring2buf=function(t){for(var e=new l.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){for(var r,n,i=e||t.length,s=new Array(2*i),a=0,o=0;o<i;)if((r=t[o++])<128)s[a++]=r;else if(4<(n=f[r]))s[a++]=65533,o+=n-1;else{for(r&=2===n?31:3===n?15:7;1<n&&o<i;)r=r<<6|63&t[o++],n--;1<n?s[a++]=65533:r<65536?s[a++]=r:(r-=65536,s[a++]=55296|r>>10&1023,s[a++]=56320|1023&r)}return h(s,a)},r.utf8border=function(t,e){for(var r=(e=(e=e||t.length)>t.length?t.length:e)-1;0<=r&&128==(192&t[r]);)r--;return!(r<0)&&0!==r&&r+f[t[r]]>e?r:e}},{"./common":3}],5:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,s=t>>>16&65535|0,a=0;0!==r;){for(r-=a=2e3<r?2e3:r;s=s+(i=i+e[n++]|0)|0,--a;);i%=65521,s%=65521}return i|s<<16|0}},{}],6:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,r){"use strict";var o=function(){for(var t=[],e=0;e<256;e++){for(var r=e,n=0;n<8;n++)r=1&r?3988292384^r>>>1:r>>>1;t[e]=r}return t}();e.exports=function(t,e,r,n){var i=o,s=n+r;t^=-1;for(var a=n;a<s;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}},{}],8:[function(t,e,r){"use strict";function h(t,e){return t.msg=S[e],e}function o(t){return(t<<1)-(4<t?9:0)}function f(t){for(var e=t.length;0<=--e;)t[e]=0}function l(t){var e=t.state,r=e.pending;0!==(r=r>t.avail_out?t.avail_out:r)&&(y.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function u(t,e){w._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,l(t.strm)}function c(t,e){t.pending_buf[t.pending++]=e}function p(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function s(t,e){var r,n,i=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-z?t.strstart-(t.w_size-z):0,l=t.window,f=t.w_mask,u=t.prev,c=t.strstart+B,p=l[s+a-1],d=l[s+a];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(l[(r=e)+a]===d&&l[r+a-1]===p&&l[r]===l[s]&&l[++r]===l[s+1]){for(s+=2,r++;l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&l[++s]===l[++r]&&s<c;);if(n=B-(c-s),s=c-B,a<n){if(t.match_start=e,o<=(a=n))break;p=l[s+a-1],d=l[s+a]}}}while((e=u[e&f])>h&&0!=--i);return a<=t.lookahead?a:t.lookahead}function d(t){var e,r,n,i,s,a,o,h,l,f=t.w_size;do{if(l=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-z)){for(y.arraySet(t.window,t.window,f,f,0),t.match_start-=f,t.strstart-=f,t.block_start-=f,e=r=t.hash_size;n=t.head[--e],t.head[e]=f<=n?n-f:0,--r;);for(e=r=f;n=t.prev[--e],t.prev[e]=f<=n?n-f:0,--r;);l+=f}if(0===t.strm.avail_in)break;if(s=t.strm,a=t.window,o=t.strstart+t.lookahead,h=l,l=void 0,l=s.avail_in,r=0===(l=h<l?h:l)?0:(s.avail_in-=l,y.arraySet(a,s.input,s.next_in,l,o),1===s.state.wrap?s.adler=b(s.adler,a,l,o):2===s.state.wrap&&(s.adler=x(s.adler,a,l,o)),s.next_in+=l,s.total_in+=l,l),t.lookahead+=r,t.lookahead+t.insert>=R)for(i=t.strstart-t.insert,t.ins_h=t.window[i],t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[i+R-1])&t.hash_mask,t.prev[i&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=i,i++,t.insert--,!(t.lookahead+t.insert<R)););}while(t.lookahead<z&&0!==t.strm.avail_in)}function n(t,e){for(var r,n;;){if(t.lookahead<z){if(d(t),t.lookahead<z&&e===C)return q;if(0===t.lookahead)break}if(r=0,t.lookahead>=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-z&&(t.match_length=s(t,r)),t.match_length>=R)if(n=w._tr_tally(t,t.strstart-t.match_start,t.match_length-R),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=R){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=w._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(u(t,!1),0===t.strm.avail_out))return q}return t.insert=t.strstart<R-1?t.strstart:R-1,e===P?(u(t,!0),0===t.strm.avail_out?H:V):t.last_lit&&(u(t,!1),0===t.strm.avail_out)?q:j}function i(t,e){for(var r,n,i;;){if(t.lookahead<z){if(d(t),t.lookahead<z&&e===C)return q;if(0===t.lookahead)break}if(r=0,t.lookahead>=R&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=R-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-z&&(t.match_length=s(t,r),t.match_length<=5&&(1===t.strategy||t.match_length===R&&4096<t.strstart-t.match_start)&&(t.match_length=R-1)),t.prev_length>=R&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-R,n=w._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-R),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+R-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=R-1,t.strstart++,n&&(u(t,!1),0===t.strm.avail_out))return q}else if(t.match_available){if((n=w._tr_tally(t,0,t.window[t.strstart-1]))&&u(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return q}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=w._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<R-1?t.strstart:R-1,e===P?(u(t,!0),0===t.strm.avail_out?H:V):t.last_lit&&(u(t,!1),0===t.strm.avail_out)?q:j}function a(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function g(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new y.Buf16(2*L),this.dyn_dtree=new y.Buf16(2*(2*O+1)),this.bl_tree=new y.Buf16(2*(2*D+1)),f(this.dyn_ltree),f(this.dyn_dtree),f(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new y.Buf16(N+1),this.heap=new y.Buf16(2*U+1),f(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new y.Buf16(2*U+1),f(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=F,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?G:Z,t.adler=2===e.wrap?0:1,e.last_flush=C,w._tr_init(e),k):h(t,T)}function m(t){var e=v(t);return e===k&&((t=t.state).window_size=2*t.w_size,f(t.head),t.max_lazy_match=W[t.level].max_lazy,t.good_match=W[t.level].good_length,t.nice_match=W[t.level].nice_length,t.max_chain_length=W[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=R-1,t.match_available=0,t.ins_h=0),e}function _(t,e,r,n,i,s){if(!t)return T;var a=1;if(e===I&&(e=6),n<0?(a=0,n=-n):15<n&&(a=2,n-=16),i<1||E<i||r!==A||n<8||15<n||e<0||9<e||s<0||M<s)return h(t,T);8===n&&(n=9);var o=new g;return(t.state=o).strm=t,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+R-1)/R),o.window=new y.Buf8(2*o.w_size),o.head=new y.Buf16(o.hash_size),o.prev=new y.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new y.Buf8(o.pending_buf_size),o.d_buf=+o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,m(t)}var y=t("../utils/common"),w=t("./trees"),b=t("./adler32"),x=t("./crc32"),S=t("./messages"),C=0,P=4,k=0,T=-2,I=-1,M=4,F=2,A=8,E=9,U=286,O=30,D=19,L=2*U+1,N=15,R=3,B=258,z=B+R+1,G=42,Z=113,q=1,j=2,H=3,V=4,W=[new a(0,0,0,0,function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(d(t),0===t.lookahead&&e===C)return q;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,u(t,!1),0===t.strm.avail_out))return q;if(t.strstart-t.block_start>=t.w_size-z&&(u(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===P?(u(t,!0),0===t.strm.avail_out?H:V):(t.strstart>t.block_start&&(u(t,!1),t.strm.avail_out),q)}),new a(4,4,8,4,n),new a(4,5,16,8,n),new a(4,6,32,32,n),new a(4,4,16,16,i),new a(8,16,32,32,i),new a(8,16,128,128,i),new a(8,32,128,256,i),new a(32,128,258,1024,i),new a(32,258,258,4096,i)];r.deflateInit=function(t,e){return _(t,e,A,15,8,0)},r.deflateInit2=_,r.deflateReset=m,r.deflateResetKeep=v,r.deflateSetHeader=function(t,e){return!t||!t.state||2!==t.state.wrap?T:(t.state.gzhead=e,k)},r.deflate=function(t,e){var r,n,i,s;if(!t||!t.state||5<e||e<0)return t?h(t,T):T;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==P)return h(t,0===t.avail_out?-5:T);if(r.strm=t,a=r.last_flush,r.last_flush=e,r.status===G&&(2===r.wrap?(t.adler=0,c(r,31),c(r,139),c(r,8),r.gzhead?(c(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),c(r,255&r.gzhead.time),c(r,r.gzhead.time>>8&255),c(r,r.gzhead.time>>16&255),c(r,r.gzhead.time>>24&255),c(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),c(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(c(r,255&r.gzhead.extra.length),c(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=x(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(c(r,0),c(r,0),c(r,0),c(r,0),c(r,0),c(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),c(r,3),r.status=Z)):(s=A+(r.w_bits-8<<4)<<8,s|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(s|=32),s+=31-s%31,r.status=Z,p(r,s),0!==r.strstart&&(p(r,t.adler>>>16),p(r,65535&t.adler)),t.adler=1)),69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(t.adler=x(t.adler,r.pending_buf,r.pending-n,n)),l(t),n=r.pending,r.pending!==r.pending_buf_size));)c(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(t.adler=x(t.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(t.adler=x(t.adler,r.pending_buf,r.pending-n,n)),l(t),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}}while(i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,c(r,i),0!==i);r.gzhead.hcrc&&r.pending>n&&(t.adler=x(t.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(t.adler=x(t.adler,r.pending_buf,r.pending-n,n)),l(t),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}}while(i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,c(r,i),0!==i);r.gzhead.hcrc&&r.pending>n&&(t.adler=x(t.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&l(t),r.pending+2<=r.pending_buf_size&&(c(r,255&t.adler),c(r,t.adler>>8&255),t.adler=0,r.status=Z)):r.status=Z),0!==r.pending){if(l(t),0===t.avail_out)return r.last_flush=-1,k}else if(0===t.avail_in&&o(e)<=o(a)&&e!==P)return h(t,-5);if(666===r.status&&0!==t.avail_in)return h(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==C&&666!==r.status){var a=2===r.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(d(t),0===t.lookahead)){if(e===C)return q;break}if(t.match_length=0,r=w._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(u(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===P?(u(t,!0),0===t.strm.avail_out?H:V):t.last_lit&&(u(t,!1),0===t.strm.avail_out)?q:j}(r,e):3===r.strategy?function(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=B){if(d(t),t.lookahead<=B&&e===C)return q;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=R&&0<t.strstart&&((n=a[i=t.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i])){for(s=t.strstart+B;n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s;);t.match_length=B-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=R?(r=w._tr_tally(t,1,t.match_length-R),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=w._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(u(t,!1),0===t.strm.avail_out))return q}return t.insert=0,e===P?(u(t,!0),0===t.strm.avail_out?H:V):t.last_lit&&(u(t,!1),0===t.strm.avail_out)?q:j}(r,e):W[r.level].func(r,e);if(a!==H&&a!==V||(r.status=666),a===q||a===H)return 0===t.avail_out&&(r.last_flush=-1),k;if(a===j&&(1===e?w._tr_align(r):5!==e&&(w._tr_stored_block(r,0,0,!1),3===e&&(f(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),l(t),0===t.avail_out))return r.last_flush=-1,k}return e!==P?k:r.wrap<=0?1:(2===r.wrap?(c(r,255&t.adler),c(r,t.adler>>8&255),c(r,t.adler>>16&255),c(r,t.adler>>24&255),c(r,255&t.total_in),c(r,t.total_in>>8&255),c(r,t.total_in>>16&255),c(r,t.total_in>>24&255)):(p(r,t.adler>>>16),p(r,65535&t.adler)),l(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?k:1)},r.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==G&&69!==e&&73!==e&&91!==e&&103!==e&&e!==Z&&666!==e?h(t,T):(t.state=null,e===Z?h(t,-3):k):T},r.deflateSetDictionary=function(t,e){var r,n,i,s,a,o,h,l=e.length;if(!t||!t.state)return T;if(2===(s=(r=t.state).wrap)||1===s&&r.status!==G||r.lookahead)return T;for(1===s&&(t.adler=b(t.adler,e,l,0)),r.wrap=0,l>=r.w_size&&(0===s&&(f(r.head),r.strstart=0,r.block_start=0,r.insert=0),h=new y.Buf8(r.w_size),y.arraySet(h,e,l-r.w_size,r.w_size,0),e=h,l=r.w_size),a=t.avail_in,o=t.next_in,h=t.input,t.avail_in=l,t.next_in=0,t.input=e,d(r);r.lookahead>=R;){for(n=r.strstart,i=r.lookahead-(R-1);r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+R-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++,--i;);r.strstart=n,r.lookahead=R-1,d(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=R-1,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=a,r.wrap=s,k},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,s,a,o,h=t.state,l=t.next_in,f=t.input,u=l+(t.avail_in-5),c=t.next_out,p=t.output,d=c-(e-t.avail_out),g=c+(t.avail_out-257),v=h.dmax,m=h.wsize,_=h.whave,y=h.wnext,w=h.window,b=h.hold,x=h.bits,S=h.lencode,C=h.distcode,P=(1<<h.lenbits)-1,k=(1<<h.distbits)-1;t:do{x<15&&(b+=f[l++]<<x,x+=8,b+=f[l++]<<x,x+=8),r=S[b&P];e:for(;;){if(b>>>=n=r>>>24,x-=n,0===(n=r>>>16&255))p[c++]=65535&r;else{if(!(16&n)){if(0==(64&n)){r=S[(65535&r)+(b&(1<<n)-1)];continue e}if(32&n){h.mode=12;break t}t.msg="invalid literal/length code",h.mode=30;break t}i=65535&r,(n&=15)&&(x<n&&(b+=f[l++]<<x,x+=8),i+=b&(1<<n)-1,b>>>=n,x-=n),x<15&&(b+=f[l++]<<x,x+=8,b+=f[l++]<<x,x+=8),r=C[b&k];r:for(;;){if(b>>>=n=r>>>24,x-=n,!(16&(n=r>>>16&255))){if(0==(64&n)){r=C[(65535&r)+(b&(1<<n)-1)];continue r}t.msg="invalid distance code",h.mode=30;break t}if(s=65535&r,x<(n&=15)&&(b+=f[l++]<<x,(x+=8)<n&&(b+=f[l++]<<x,x+=8)),v<(s+=b&(1<<n)-1)){t.msg="invalid distance too far back",h.mode=30;break t}if(b>>>=n,x-=n,(n=c-d)<s){if(_<(n=s-n)&&h.sane){t.msg="invalid distance too far back",h.mode=30;break t}if(o=w,(a=0)===y){if(a+=m-n,n<i){for(i-=n;p[c++]=w[a++],--n;);a=c-s,o=p}}else if(y<n){if(a+=m+y-n,(n-=y)<i){for(i-=n;p[c++]=w[a++],--n;);if(a=0,y<i){for(i-=n=y;p[c++]=w[a++],--n;);a=c-s,o=p}}}else if(a+=y-n,n<i){for(i-=n;p[c++]=w[a++],--n;);a=c-s,o=p}for(;2<i;)p[c++]=o[a++],p[c++]=o[a++],p[c++]=o[a++],i-=3;i&&(p[c++]=o[a++],1<i&&(p[c++]=o[a++]))}else{for(a=c-s;p[c++]=p[a++],p[c++]=p[a++],p[c++]=p[a++],2<(i-=3););i&&(p[c++]=p[a++],1<i&&(p[c++]=p[a++]))}break}}break}}while(l<u&&c<g);b&=(1<<(x-=(i=x>>3)<<3))-1,t.next_in=l-=i,t.next_out=c,t.avail_in=l<u?u-l+5:5-(l-u),t.avail_out=c<g?g-c+257:257-(c-g),h.hold=b,h.bits=x}},{}],11:[function(t,e,r){"use strict";function M(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new U.Buf16(320),this.work=new U.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=Z,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new U.Buf32(h),e.distcode=e.distdyn=new U.Buf32(l),e.sane=1,e.back=-1,z):G}function s(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,i(t)):G}function a(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?G:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,s(t))):G}function o(t,e){var r;return t?(r=new n,(t.state=r).window=null,(e=a(t,e))!==z&&(t.state=null),e):G}function F(t,e,r,n){var i=t.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new U.Buf8(i.wsize)),n>=i.wsize?(U.arraySet(i.window,e,r-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(n<(t=i.wsize-i.wnext)&&(t=n),U.arraySet(i.window,e,r-n,t,i.wnext),(n-=t)?(U.arraySet(i.window,e,r-n,n,0),i.wnext=n,i.whave=i.wsize):(i.wnext+=t,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=t))),0}var A,E,U=t("../utils/common"),O=t("./adler32"),D=t("./crc32"),L=t("./inffast"),N=t("./inftrees"),R=1,B=2,z=0,G=-2,Z=1,h=852,l=592,q=!0;r.inflateReset=s,r.inflateReset2=a,r.inflateResetKeep=i,r.inflateInit=function(t){return o(t,15)},r.inflateInit2=o,r.inflate=function(t,e){var r,n,i,s,a,o,h,l,f,u,c,p,d,g,v,m,_,y,w,b,x,S,C,P,k=0,T=new U.Buf8(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return G;12===(r=t.state).mode&&(r.mode=13),a=t.next_out,i=t.output,h=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,l=r.hold,f=r.bits,u=o,c=h,S=z;t:for(;;)switch(r.mode){case Z:if(0===r.wrap){r.mode=13;break}for(;f<16;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(2&r.wrap&&35615===l){T[r.check=0]=255&l,T[1]=l>>>8&255,r.check=D(r.check,T,2,0),f=l=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&l)<<8)+(l>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&l)){t.msg="unknown compression method",r.mode=30;break}if(f-=4,x=8+(15&(l>>>=4)),0===r.wbits)r.wbits=x;else if(x>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<x,t.adler=r.check=1,r.mode=512&l?10:12,f=l=0;break;case 2:for(;f<16;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(r.flags=l,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=l>>8&1),512&r.flags&&(T[0]=255&l,T[1]=l>>>8&255,r.check=D(r.check,T,2,0)),f=l=0,r.mode=3;case 3:for(;f<32;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}r.head&&(r.head.time=l),512&r.flags&&(T[0]=255&l,T[1]=l>>>8&255,T[2]=l>>>16&255,T[3]=l>>>24&255,r.check=D(r.check,T,4,0)),f=l=0,r.mode=4;case 4:for(;f<16;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}r.head&&(r.head.xflags=255&l,r.head.os=l>>8),512&r.flags&&(T[0]=255&l,T[1]=l>>>8&255,r.check=D(r.check,T,2,0)),f=l=0,r.mode=5;case 5:if(1024&r.flags){for(;f<16;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}r.length=l,r.head&&(r.head.extra_len=l),512&r.flags&&(T[0]=255&l,T[1]=l>>>8&255,r.check=D(r.check,T,2,0)),f=l=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((p=o<(p=r.length)?o:p)&&(r.head&&(x=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),U.arraySet(r.head.extra,n,s,p,x)),512&r.flags&&(r.check=D(r.check,n,p,s)),o-=p,s+=p,r.length-=p),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===o)break t;for(p=0;x=n[s+p++],r.head&&x&&r.length<65536&&(r.head.name+=String.fromCharCode(x)),x&&p<o;);if(512&r.flags&&(r.check=D(r.check,n,p,s)),o-=p,s+=p,x)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===o)break t;for(p=0;x=n[s+p++],r.head&&x&&r.length<65536&&(r.head.comment+=String.fromCharCode(x)),x&&p<o;);if(512&r.flags&&(r.check=D(r.check,n,p,s)),o-=p,s+=p,x)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;f<16;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(l!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}f=l=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;f<32;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}t.adler=r.check=M(l),f=l=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=f,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){l>>>=7&f,f-=7&f,r.mode=27;break}for(;f<3;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}switch(r.last=1&l,--f,3&(l>>>=1)){case 0:r.mode=14;break;case 1:if(function(t){if(q){var e;for(A=new U.Buf32(512),E=new U.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(N(R,t.lens,0,288,A,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;N(B,t.lens,0,32,E,0,t.work,{bits:5}),q=!1}t.lencode=A,t.lenbits=9,t.distcode=E,t.distbits=5}(r),r.mode=20,6!==e)break;l>>>=2,f-=2;break t;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}l>>>=2,f-=2;break;case 14:for(l>>>=7&f,f-=7&f;f<32;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if((65535&l)!=(l>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&l,f=l=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(p=r.length){if(0===(p=h<(p=o<p?o:p)?h:p))break t;U.arraySet(i,n,s,p,a),o-=p,s+=p,h-=p,a+=p,r.length-=p;break}r.mode=12;break;case 17:for(;f<14;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(r.nlen=257+(31&l),l>>>=5,f-=5,r.ndist=1+(31&l),l>>>=5,f-=5,r.ncode=4+(15&l),l>>>=4,f-=4,286<r.nlen||30<r.ndist){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;f<3;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}r.lens[I[r.have++]]=7&l,l>>>=3,f-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},S=N(0,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,S){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;m=(k=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,_=65535&k,!((v=k>>>24)<=f);){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(_<16)l>>>=v,f-=v,r.lens[r.have++]=_;else{if(16===_){for(P=v+2;f<P;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(l>>>=v,f-=v,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}x=r.lens[r.have-1],p=3+(3&l),l>>>=2,f-=2}else if(17===_){for(P=v+3;f<P;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}f-=v,x=0,p=3+(7&(l>>>=v)),l>>>=3,f-=3}else{for(P=v+7;f<P;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}f-=v,x=0,p=11+(127&(l>>>=v)),l>>>=7,f-=7}if(r.have+p>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;p--;)r.lens[r.have++]=x}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,C={bits:r.lenbits},S=N(R,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,S){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},S=N(B,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,S){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(6<=o&&258<=h){t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=f,L(t,c),a=t.next_out,i=t.output,h=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,l=r.hold,f=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;m=(k=r.lencode[l&(1<<r.lenbits)-1])>>>16&255,_=65535&k,!((v=k>>>24)<=f);){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(m&&0==(240&m)){for(y=v,w=m,b=_;m=(k=r.lencode[b+((l&(1<<y+w)-1)>>y)])>>>16&255,_=65535&k,!(y+(v=k>>>24)<=f);){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}l>>>=y,f-=y,r.back+=y}if(l>>>=v,f-=v,r.back+=v,r.length=_,0===m){r.mode=26;break}if(32&m){r.back=-1,r.mode=12;break}if(64&m){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&m,r.mode=22;case 22:if(r.extra){for(P=r.extra;f<P;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}r.length+=l&(1<<r.extra)-1,l>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;m=(k=r.distcode[l&(1<<r.distbits)-1])>>>16&255,_=65535&k,!((v=k>>>24)<=f);){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(0==(240&m)){for(y=v,w=m,b=_;m=(k=r.distcode[b+((l&(1<<y+w)-1)>>y)])>>>16&255,_=65535&k,!(y+(v=k>>>24)<=f);){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}l>>>=y,f-=y,r.back+=y}if(l>>>=v,f-=v,r.back+=v,64&m){t.msg="invalid distance code",r.mode=30;break}r.offset=_,r.extra=15&m,r.mode=24;case 24:if(r.extra){for(P=r.extra;f<P;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}r.offset+=l&(1<<r.extra)-1,l>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===h)break t;if(r.offset>(p=c-h)){if((p=r.offset-p)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}d=p>r.wnext?(p-=r.wnext,r.wsize-p):r.wnext-p,p>r.length&&(p=r.length),g=r.window}else g=i,d=a-r.offset,p=r.length;for(h-=p=h<p?h:p,r.length-=p;i[a++]=g[d++],--p;);0===r.length&&(r.mode=21);break;case 26:if(0===h)break t;i[a++]=r.length,h--,r.mode=21;break;case 27:if(r.wrap){for(;f<32;){if(0===o)break t;o--,l|=n[s++]<<f,f+=8}if(c-=h,t.total_out+=c,r.total+=c,c&&(t.adler=r.check=(r.flags?D:O)(r.check,i,c,a-c)),c=h,(r.flags?l:M(l))!==r.check){t.msg="incorrect data check",r.mode=30;break}f=l=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;f<32;){if(0===o)break t;o--,l+=n[s++]<<f,f+=8}if(l!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}f=l=0}r.mode=29;case 29:S=1;break t;case 30:S=-3;break t;case 31:return-4;default:return G}return t.next_out=a,t.avail_out=h,t.next_in=s,t.avail_in=o,r.hold=l,r.bits=f,(r.wsize||c!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&F(t,t.output,t.next_out,c-t.avail_out)?(r.mode=31,-4):(u-=t.avail_in,c-=t.avail_out,t.total_in+=u,t.total_out+=c,r.total+=c,r.wrap&&c&&(t.adler=r.check=(r.flags?D:O)(r.check,i,c,t.next_out-c)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),S=(0==u&&0===c||4===e)&&S===z?-5:S)},r.inflateEnd=function(t){if(!t||!t.state)return G;var e=t.state;return e.window&&(e.window=null),t.state=null,z},r.inflateGetHeader=function(t,e){return t&&t.state?0==(2&(t=t.state).wrap)?G:((t.head=e).done=!1,z):G},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?G:11===r.mode&&O(1,e,n,0)!==r.check?-3:F(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,z):G},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,r){"use strict";var O=t("../utils/common"),D=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],L=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],N=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],R=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,n,i,s,a,o){for(var h,l,f,u,c,p,d,g,v,m=o.bits,_=0,y=0,w=0,b=0,x=0,S=0,C=0,P=0,k=0,T=0,I=null,M=0,F=new O.Buf16(16),A=new O.Buf16(16),E=null,U=0,_=0;_<=15;_++)F[_]=0;for(y=0;y<n;y++)F[e[r+y]]++;for(x=m,b=15;1<=b&&0===F[b];b--);if(b<x&&(x=b),0===b)return i[s++]=20971520,i[s++]=20971520,o.bits=1,0;for(w=1;w<b&&0===F[w];w++);for(x<w&&(x=w),_=P=1;_<=15;_++)if(P<<=1,(P-=F[_])<0)return-1;if(0<P&&(0===t||1!==b))return-1;for(A[1]=0,_=1;_<15;_++)A[_+1]=A[_]+F[_];for(y=0;y<n;y++)0!==e[r+y]&&(a[A[e[r+y]]++]=y);if(p=0===t?(I=E=a,19):1===t?(I=D,M-=257,E=L,U-=257,256):(I=N,E=R,-1),_=w,c=s,C=y=T=0,f=-1,u=(k=1<<(S=x))-1,1===t&&852<k||2===t&&592<k)return 1;for(;;){for(v=a[y]<p?(g=0,a[y]):a[y]>p?(g=E[U+a[y]],I[M+a[y]]):(g=96,0),h=1<<(d=_-C),w=l=1<<S;i[c+(T>>C)+(l-=h)]=d<<24|g<<16|v|0,0!==l;);for(h=1<<_-1;T&h;)h>>=1;if(0!==h?(T&=h-1,T+=h):T=0,y++,0==--F[_]){if(_===b)break;_=e[r+a[y]]}if(x<_&&(T&u)!==f){for(c+=w,P=1<<(S=_-(C=0===C?x:C));S+C<b&&!((P-=F[S+C])<=0);)S++,P<<=1;if(k+=1<<S,1===t&&852<k||2===t&&592<k)return 1;i[f=T&u]=x<<24|S<<16|c-s|0}}return 0!==T&&(i[c+T]=_-C<<24|64<<16|0),o.bits=x,0}},{"../utils/common":3}],13:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,r){"use strict";function n(t){for(var e=t.length;0<=--e;)t[e]=0}function a(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function i(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function h(t){return t<256?q[t]:q[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function f(t,e,r){t.bi_valid>A-r?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>A-t.bi_valid,t.bi_valid+=r-A):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function u(t,e,r){f(t,r[2*e],r[2*e+1])}function l(t,e){for(var r=0;r|=1&t,t>>>=1,r<<=1,0<--e;);return r>>>1}function c(t,e,r){for(var n,i=new Array(F+1),s=0,a=1;a<=F;a++)i[a]=s=s+r[a-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=l(i[o]++,o))}}function o(t){for(var e=0;e<k;e++)t.dyn_ltree[2*e]=0;for(e=0;e<T;e++)t.dyn_dtree[2*e]=0;for(e=0;e<I;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*U]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){8<t.bi_valid?s(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function d(t,e,r,n){var i=2*e,s=2*r;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]}function g(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&d(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!d(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function v(t,e,r){var n,i,s,a,o=0;if(0!==t.last_lit)for(;n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0==n?u(t,i,e):(u(t,(s=j[i])+P+1,e),0!==(a=N[s])&&f(t,i-=H[s],a),u(t,s=h(--n),r),0!==(a=R[s])&&f(t,n-=V[s],a)),o<t.last_lit;);u(t,U,e)}function m(t,e){var r,n,i,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=M,r=0;r<h;r++)0!==s[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):s[2*r+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=a[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;1<=r;r--)g(t,s,r);for(i=h;r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],g(t,s,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,s[2*i]=s[2*r]+s[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,s[2*r+1]=s[2*n+1]=i,t.heap[1]=i++,g(t,s,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){for(var r,n,i,s,a,o=e.dyn_tree,h=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,u=e.stat_desc.extra_bits,c=e.stat_desc.extra_base,p=e.stat_desc.max_length,d=0,g=0;g<=F;g++)t.bl_count[g]=0;for(o[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<M;r++)p<(g=o[2*o[2*(n=t.heap[r])+1]+1]+1)&&(g=p,d++),o[2*n+1]=g,h<n||(t.bl_count[g]++,s=0,c<=n&&(s=u[n-c]),a=o[2*n],t.opt_len+=a*(g+s),f&&(t.static_len+=a*(l[2*n+1]+s)));if(0!==d){do{for(g=p-1;0===t.bl_count[g];)g--}while(t.bl_count[g]--,t.bl_count[g+1]+=2,t.bl_count[p]--,0<(d-=2));for(g=p;0!==g;g--)for(n=t.bl_count[g];0!==n;)h<(i=t.heap[--r])||(o[2*i+1]!==g&&(t.opt_len+=(g-o[2*i+1])*o[2*i],o[2*i+1]=g),n--)}}(t,e),c(s,l,t.bl_count)}function _(t,e,r){var n,i,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++o<h&&i===a||(o<l?t.bl_tree[2*i]+=o:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[2*O]++):o<=10?t.bl_tree[2*D]++:t.bl_tree[2*L]++,s=i,l=(o=0)===a?(h=138,3):i===a?(h=6,3):(h=7,4))}function y(t,e,r){var n,i,s=-1,a=e[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++o<h&&i===a)){if(o<l)for(;u(t,i,t.bl_tree),0!=--o;);else 0!==i?(i!==s&&(u(t,i,t.bl_tree),o--),u(t,O,t.bl_tree),f(t,o-3,2)):o<=10?(u(t,D,t.bl_tree),f(t,o-3,3)):(u(t,L,t.bl_tree),f(t,o-11,7));s=i,l=(o=0)===a?(h=138,3):i===a?(h=6,3):(h=7,4)}}function w(t,e,r,n){f(t,0+(n?1:0),3),n=e,e=r,r=!0,p(t=t),r&&(s(t,e),s(t,~e)),b.arraySet(t.pending_buf,t.window,n,e,t.pending),t.pending+=e}var b=t("../utils/common"),x=0,S=1,C=29,P=256,k=P+1+C,T=30,I=19,M=2*k+1,F=15,A=16,E=7,U=256,O=16,D=17,L=18,N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(k+2));n(G);var Z=new Array(2*T);n(Z);var q=new Array(512);n(q);var j=new Array(256);n(j);var H=new Array(C);n(H);var V=new Array(T);n(V);var W,X,J,Y=!1;r._tr_init=function(t){Y||(function(){for(var t,e,r,n=new Array(F+1),i=0,s=0;s<C-1;s++)for(H[s]=i,t=0;t<1<<N[s];t++)j[i++]=s;for(j[i-1]=s,s=r=0;s<16;s++)for(V[s]=r,t=0;t<1<<R[s];t++)q[r++]=s;for(r>>=7;s<T;s++)for(V[s]=r<<7,t=0;t<1<<R[s]-7;t++)q[256+r++]=s;for(e=0;e<=F;e++)n[e]=0;for(t=0;t<=143;)G[2*t+1]=8,t++,n[8]++;for(;t<=255;)G[2*t+1]=9,t++,n[9]++;for(;t<=279;)G[2*t+1]=7,t++,n[7]++;for(;t<=287;)G[2*t+1]=8,t++,n[8]++;for(c(G,k+1,n),t=0;t<T;t++)Z[2*t+1]=5,Z[2*t]=l(t,5);W=new a(G,N,P+1,k,F),X=new a(Z,R,0,T,F),J=new a(new Array(0),B,0,I,E)}(),Y=!0),t.l_desc=new i(t.dyn_ltree,W),t.d_desc=new i(t.dyn_dtree,X),t.bl_desc=new i(t.bl_tree,J),t.bi_buf=0,t.bi_valid=0,o(t)},r._tr_stored_block=w,r._tr_flush_block=function(t,e,r,n){var i,s,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){for(var e=4093624447,r=0;r<=31;r++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*r])return x;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return S;for(r=32;r<P;r++)if(0!==t.dyn_ltree[2*r])return S;return x}(t)),m(t,t.l_desc),m(t,t.d_desc),a=function(t){var e;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),m(t,t.bl_desc),e=I-1;3<=e&&0===t.bl_tree[2*z[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(s=t.static_len+3+7>>>3)<=i&&(i=s)):i=s=r+5,r+4<=i&&-1!==e?w(t,e,r,n):4===t.strategy||s===i?(f(t,2+(n?1:0),3),v(t,G,Z)):(f(t,4+(n?1:0),3),function(t,e,r,n){var i;for(f(t,e-257,5),f(t,r-1,5),f(t,n-4,4),i=0;i<n;i++)f(t,t.bl_tree[2*z[i]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),v(t,t.dyn_ltree,t.dyn_dtree)),o(t),n&&p(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(j[r]+P+1)]++,t.dyn_dtree[2*h(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){f(t,2,3),u(t,U,G),16===(t=t).bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":3}],15:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")}),function(t){"use strict";var H=((e.prototype=new Error).name="JpegError",e.constructor=e);function e(t){this.message="JPEG error: "+t}var V,C,P,k,T,I,M,F,A,r=(V=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),C=4017,P=799,k=3406,T=2276,I=1567,M=3784,F=5793,A=2896,n.prototype={parse(r,{dnlScanLines:t=null}={}){var e,n,i=0,s=null,a=null;let o=0;var h=[],l=[],f=[];let u=J(r,i);if(i+=2,65496!==u)throw new H("SOI not found");u=J(r,i),i+=2;t:for(;65497!==u;){switch(u){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var c=function(){var t=J(r,i);let e=(i+=2)+t-2;return(t=X(r,e,i))&&t.invalid&&(K("readDataBlock - incorrect length, current marker is: "+t.invalid),e=t.offset),t=r.subarray(i,e),i+=t.length,t}();65504===u&&74===c[0]&&70===c[1]&&73===c[2]&&70===c[3]&&0===c[4]&&(s={version:{major:c[5],minor:c[6]},densityUnits:c[7],xDensity:c[8]<<8|c[9],yDensity:c[10]<<8|c[11],thumbWidth:c[12],thumbHeight:c[13],thumbData:c.subarray(14,14+3*c[12]*c[13])}),65518===u&&65===c[0]&&100===c[1]&&111===c[2]&&98===c[3]&&101===c[4]&&(a={version:c[5]<<8|c[6],flags0:c[7]<<8|c[8],flags1:c[9]<<8|c[10],transformCode:c[11]});break;case 65499:for(var p=J(r,i)+(i+=2)-2;i<p;){var d=r[i++],g=new Uint16Array(64);if(d>>4==0)for(M=0;M<64;M++)g[V[M]]=r[i++];else{if(d>>4!=1)throw new H("DQT - invalid table spec");for(M=0;M<64;M++)g[V[M]]=J(r,i),i+=2}h[15&d]=g}break;case 65472:case 65473:case 65474:if(e)throw new H("Only single frame JPEGs supported");i+=2,(e={}).extended=65473===u,e.progressive=65474===u,e.precision=r[i++];var v=J(r,i);i+=2,e.scanLines=t||v,e.samplesPerLine=J(r,i),i+=2,e.components=[],e.componentIds={};for(var m=r[i++],_=0,y=0,w=0;w<m;w++){var b=r[i],x=r[i+1]>>4,S=15&r[i+1];_<x&&(_=x),y<S&&(y=S);var C=r[i+2],C=e.components.push({h:x,v:S,quantizationId:C,quantizationTable:null});e.componentIds[b]=C-1,i+=3}e.maxH=_,e.maxV=y,function(t){for(var e=Math.ceil(t.samplesPerLine/8/t.maxH),r=Math.ceil(t.scanLines/8/t.maxV),n=0;n<t.components.length;n++){O=t.components[n];var i=Math.ceil(Math.ceil(t.samplesPerLine/8)*O.h/t.maxH),s=Math.ceil(Math.ceil(t.scanLines/8)*O.v/t.maxV),a=e*O.h,o=r*O.v;O.blockData=new Int16Array(64*o*(1+a)),O.blocksPerLine=i,O.blocksPerColumn=s}t.mcusPerLine=e,t.mcusPerColumn=r}(e);break;case 65476:var P=J(r,i);for(i+=2,w=2;w<P;){for(var k=r[i++],T=new Uint8Array(16),I=0,M=0;M<16;M++,i++)I+=T[M]=r[i];var F=new Uint8Array(I);for(M=0;M<I;M++,i++)F[M]=r[i];w+=17+I,(k>>4==0?f:l)[15&k]=function(t,e){for(var r,n=0,i=[],s=16;0<s&&!t[s-1];)s--;i.push({children:[],index:0});for(var a,o=i[0],h=0;h<s;h++){for(r=0;r<t[h];r++){for((o=i.pop()).children[o.index]=e[n];0<o.index;)o=i.pop();for(o.index++,i.push(o);i.length<=h;)i.push(a={children:[],index:0}),o.children[o.index]=a.children,o=a;n++}h+1<s&&(i.push(a={children:[],index:0}),o.children[o.index]=a.children,o=a)}return i[0].children}(T,F)}break;case 65501:n=J(r,i+=2),i+=2;break;case 65498:var A=1==++o&&!t;i+=2;var E=r[i++],U=[];for(w=0;w<E;w++){var O,D=r[i++],L=e.componentIds[D];(O=e.components[L]).index=D;D=r[i++];O.huffmanTableDC=f[D>>4],O.huffmanTableAC=l[15&D],U.push(O)}var N=r[i++],c=r[i++],v=r[i++];try{var R=z(r,i,e,U,n,N,c,v>>4,15&v,A);i+=R}catch(t){if(t instanceof DNLMarkerError)return K(`${t.message} -- attempting to re-parse the JPEG image.`),this.parse(r,{dnlScanLines:t.scanLines});if(t instanceof EOIMarkerError){K(`${t.message} -- ignoring the rest of the image data.`);break t}throw t}break;case 65500:i+=4;break;case 65535:255!==r[i]&&i--;break;default:A=X(r,i-2,i-3);if(A&&A.invalid){K("JpegImage.parse - unexpected data, current marker is: "+A.invalid),i=A.offset;break}if(i>=r.length-1){K("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break t}throw new H("JpegImage.parse - unknown marker: "+u.toString(16))}u=J(r,i),i+=2}for(this.width=e.samplesPerLine,this.height=e.scanLines,this.jfif=s,this.adobe=a,this.components=[],w=0;w<e.components.length;w++){var B=h[(O=e.components[w]).quantizationId];B&&(O.quantizationTable=B),this.components.push({index:O.index,output:G(0,O),scaleX:O.h/e.maxH,scaleY:O.v/e.maxV,blocksPerLine:O.blocksPerLine,blocksPerColumn:O.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData(t,e,r=!1){var n,i,s,a,o,h,l,f,u,c,p,d=this.width/t,g=this.height/e,v=0,m=this.components.length,_=t*e*m,y=new Uint8ClampedArray(_),w=new Uint32Array(t),b=4294967288;let x;for(l=0;l<m;l++){if(i=(n=this.components[l]).scaleX*d,s=n.scaleY*g,v=l,p=n.output,a=n.blocksPerLine+1<<3,i!==x){for(o=0;o<t;o++)w[o]=((f=0|o*i)&b)<<3|7&f;x=i}for(h=0;h<e;h++)for(c=a*((f=0|h*s)&b)|(7&f)<<3,o=0;o<t;o++)y[v]=p[c+w[o]],v+=m}let S=this._decodeTransform;if(r||4!==m||S||(S=new Int32Array([-256,255,-256,255,-256,255,-256,255])),S)for(l=0;l<_;)for(u=f=0;f<m;f++,l++,u+=2)y[l]=(y[l]*S[u]>>8)+S[u+1];return y},get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform},_convertYccToRgb:function(t){for(var e,r,n,i=0,s=t.length;i<s;i+=3)e=t[i],r=t[i+1],n=t[i+2],t[i]=e-179.456+1.402*n,t[i+1]=e+135.459-.344*r-.714*n,t[i+2]=e-226.816+1.772*r;return t},_convertYcckToRgb:function(t){for(var e,r,n,i,s=0,a=0,o=t.length;a<o;a+=4)e=t[a],r=t[a+1],n=t[a+2],i=t[a+3],t[s++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*e+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*e-.00477271405408747*i+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),t[s++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*e+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*e+.000770482631801132*i-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),t[s++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*e-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*e+.000560833691242812*i-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return t.subarray(0,s)},_convertYcckToCmyk:function(t){for(var e,r,n,i=0,s=t.length;i<s;i+=4)e=t[i],r=t[i+1],n=t[i+2],t[i]=434.456-e-1.402*n,t[i+1]=119.541-e+.344*r+.714*n,t[i+2]=481.816-e-1.772*r;return t},_convertCmykToRgb:function(t){for(var e,r,n,i,s=0,a=0,o=t.length;a<o;a+=4)e=t[a],r=t[a+1],n=t[a+2],i=t[a+3],t[s++]=255+e*(-6747147073602441e-20*e+.0008379262121013727*r+.0002894718188643294*n+.003264231057537806*i-1.1185611867203937)+r*(26374107616089405e-21*r-8626949158638572e-20*n-.0002748769067499491*i-.02155688794978967)+n*(-3878099212869363e-20*n-.0003267808279485286*i+.0686742238595345)-i*(.0003361971776183937*i+.7430659151342254),t[s++]=255+e*(.00013596372813588848*e+.000924537132573585*r+.00010567359618683593*n+.0004791864687436512*i-.3109689587515875)+r*(-.00023545346108370344*r+.0002702845253534714*n+.0020200308977307156*i-.7488052167015494)+n*(6834815998235662e-20*n+.00015168452363460973*i-.09751927774728933)-i*(.0003189131175883281*i+.7364883807733168),t[s++]=255+e*(13598650411385307e-21*e+.00012423956175490851*r+.0004751985097583589*n-36729317476630422e-22*i-.05562186980264034)+r*(.00016141380598724676*r+.0009692239130725186*n+.0007782692450036253*i-.44015232367526463)+n*(5.068882914068769e-7*n+.0017778369011375071*i-.7591454649749609)-i*(.0003435319965105553*i+.7063770186160144);return t.subarray(0,s)},getData({width:t,height:e,forceRGB:r=!1,isSourcePDF:n=!1}){if(4<this.numComponents)throw new H("Unsupported color mode");var i=this._getLinearizedBlockData(t,e,n);if(1===this.numComponents&&r){for(var s=i.length,a=new Uint8ClampedArray(3*s),o=0,h=0;h<s;h++){var l=i[h];a[o++]=l,a[o++]=l,a[o++]=l}return a}if(3===this.numComponents&&this._isColorConversionNeeded)return this._convertYccToRgb(i);if(4===this.numComponents){if(this._isColorConversionNeeded)return r?this._convertYcckToRgb(i):this._convertYcckToCmyk(i);if(r)return this._convertCmykToRgb(i)}return i}},n);function n({decodeTransform:t=null,colorTransform:e=-1}={}){this._decodeTransform=t,this._colorTransform=e}function W(t,e,r){return 64*((t.blocksPerLine+1)*e+r)}function z(r,n,i,t,e,h,l,s,f,a=!1){var o=i.mcusPerLine,u=i.progressive,c=n;let p=0,d=0;function g(){if(0<d)return d--,p>>d&1;if(p=r[n++],255===p){var t=r[n++];if(t){if(220===t&&a){var e=J(r,n+=2);if(n+=2,0<e&&e!==i.scanLines)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",e)}else if(217===t){if(a){e=8*x;if(0<e&&e<i.scanLines/10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",e)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new H(`unexpected marker ${(p<<8|t).toString(16)}`)}}return d=7,p>>>7}function v(t){for(var e=t;;){switch(typeof(e=e[g()])){case"number":return e;case"object":continue}throw new H("invalid huffman sequence")}}function m(t){for(var e=0;0<t;)e=e<<1|g(),t--;return e}function _(t){if(1===t)return 1===g()?1:-1;var e=m(t);return 1<<t-1<=e?e:e+(-1<<t)+1}var y=0;var w,b=0;let x=0;for(var S,C,P,k,T,I,M,F,A,E,U,O,D,L,N,R,B,z=t.length,G=u?0===h?0===s?function(t,e){var r=0===(r=v(t.huffmanTableDC))?0:_(r)<<f;t.blockData[e]=t.pred+=r}:function(t,e){t.blockData[e]|=g()<<f}:0===s?function(t,e){if(0<y)y--;else for(var r=h,n=l;r<=n;){var i=v(t.huffmanTableAC),s=15&i,a=i>>4;if(0!=s){i=V[r+=a];t.blockData[e+i]=_(s)*(1<<f),r++}else{if(a<15){y=m(a)+(1<<a)-1;break}r+=16}}}:function(t,e){for(var r,n=h,i=l,s=0;n<=i;){var a=e+V[n],o=t.blockData[a]<0?-1:1;switch(b){case 0:if(s=(r=v(t.huffmanTableAC))>>4,0==(r=15&r))b=s<15?(y=m(s)+(1<<s),4):(s=16,1);else{if(1!=r)throw new H("invalid ACn encoding");w=_(r),b=s?2:3}continue;case 1:case 2:t.blockData[a]?t.blockData[a]+=o*(g()<<f):0===--s&&(b=2===b?3:0);break;case 3:t.blockData[a]?t.blockData[a]+=o*(g()<<f):(t.blockData[a]=w<<f,b=0);break;case 4:t.blockData[a]&&(t.blockData[a]+=o*(g()<<f))}n++}4===b&&0===--y&&(b=0)}:function(t,e){var r=0===(r=v(t.huffmanTableDC))?0:_(r);t.blockData[e]=t.pred+=r;for(var n=1;n<64;){var i=v(t.huffmanTableAC),s=15&i,a=i>>4;if(0!=s){i=V[n+=a];t.blockData[e+i]=_(s),n++}else{if(a<15)break;n+=16}}},Z=0,q=1===z?t[0].blocksPerLine*t[0].blocksPerColumn:o*i.mcusPerColumn;Z<=q;){var j=e?Math.min(q-Z,e):q;if(0<j){for(C=0;C<z;C++)t[C].pred=0;if(y=0,1===z)for(S=t[0],T=0;T<j;T++)N=S,R=G,B=Z,x=B/N.blocksPerLine|0,B%=N.blocksPerLine,R(N,W(N,x,B)),Z++;else for(T=0;T<j;T++){for(C=0;C<z;C++)for(M=(S=t[C]).h,F=S.v,P=0;P<F;P++)for(k=0;k<M;k++)A=S,E=G,O=P,D=k,L=void 0,L=(U=Z)/o|0,U%=o,x=L*A.v+O,D=U*A.h+D,E(A,W(A,x,D));Z++}}if(d=0,!(I=X(r,n)))break;if(I.invalid&&(K(`decodeScan - ${0<j?"unexpected":"excessive"} MCU data, current marker is: ${I.invalid}`),n=I.offset),!(65488<=I.marker&&I.marker<=65495))break;n+=2}return n-c}function G(t,e){for(var r=e.blocksPerLine,n=e.blocksPerColumn,i=new Int16Array(64),s=0;s<n;s++)for(var a=0;a<r;a++)!function(t,e,r){var n,i,s,a,o,h,l,f,u,c,p,d,g,v,m,_,y,w=t.quantizationTable,b=t.blockData;if(!w)throw new H("missing required Quantization Table.");for(var x=0;x<64;x+=8)u=b[e+x],c=b[e+x+1],p=b[e+x+2],d=b[e+x+3],g=b[e+x+4],v=b[e+x+5],m=b[e+x+6],_=b[e+x+7],u*=w[x],0!=(c|p|d|g|v|m|_)?(c*=w[x+1],p*=w[x+2],d*=w[x+3],g*=w[x+4],v*=w[x+5],m*=w[x+6],_*=w[x+7],i=(n=(n=F*u+128>>8)+(i=F*g+128>>8)+1>>1)-i,y=(s=p)*M+(a=m)*I+128>>8,s=s*I-a*M+128>>8,l=(o=(o=A*(c-_)+128>>8)+(l=v<<4)+1>>1)-l,h=(f=(f=A*(c+_)+128>>8)+(h=d<<4)+1>>1)-h,a=(n=n+(a=y)+1>>1)-a,s=(i=i+s+1>>1)-s,y=o*T+f*k+2048>>12,o=o*k-f*T+2048>>12,f=y,y=h*P+l*C+2048>>12,h=h*C-l*P+2048>>12,l=y,r[x]=n+f,r[x+7]=n-f,r[x+1]=i+l,r[x+6]=i-l,r[x+2]=s+h,r[x+5]=s-h,r[x+3]=a+o,r[x+4]=a-o):(r[x]=y=F*u+512>>10,r[x+1]=y,r[x+2]=y,r[x+3]=y,r[x+4]=y,r[x+5]=y,r[x+6]=y,r[x+7]=y);for(var S=0;S<8;++S)u=r[S],0!=((c=r[S+8])|(p=r[S+16])|(d=r[S+24])|(g=r[S+32])|(v=r[S+40])|(m=r[S+48])|(_=r[S+56]))?(i=(n=4112+((n=F*u+2048>>12)+(i=F*g+2048>>12)+1>>1))-i,y=(s=p)*M+(a=m)*I+2048>>12,s=s*I-a*M+2048>>12,a=y,l=(o=(o=A*(c-_)+2048>>12)+(l=v)+1>>1)-l,h=(f=(f=A*(c+_)+2048>>12)+(h=d)+1>>1)-h,y=o*T+f*k+2048>>12,o=o*k-f*T+2048>>12,f=y,y=h*P+l*C+2048>>12,h=h*C-l*P+2048>>12,(u=(n=n+a+1>>1)+f)<16?u=0:4080<=u?u=255:u>>=4,(c=(i=i+s+1>>1)+(l=y))<16?c=0:4080<=c?c=255:c>>=4,(p=(s=i-s)+h)<16?p=0:4080<=p?p=255:p>>=4,(d=(a=n-a)+o)<16?d=0:4080<=d?d=255:d>>=4,(g=a-o)<16?g=0:4080<=g?g=255:g>>=4,(v=s-h)<16?v=0:4080<=v?v=255:v>>=4,(m=i-l)<16?m=0:4080<=m?m=255:m>>=4,(_=n-f)<16?_=0:4080<=_?_=255:_>>=4,b[e+S]=u,b[e+S+8]=c,b[e+S+16]=p,b[e+S+24]=d,b[e+S+32]=g,b[e+S+40]=v,b[e+S+48]=m,b[e+S+56]=_):(b[e+S]=y=(y=F*u+8192>>14)<-2040?0:2024<=y?255:y+2056>>4,b[e+S+8]=y,b[e+S+16]=y,b[e+S+24]=y,b[e+S+32]=y,b[e+S+40]=y,b[e+S+48]=y,b[e+S+56]=y)}(e,W(e,s,a),i);return e.blockData}function X(t,e,r=e){var n=t.length-1,i=r<e?r:e;if(n<=e)return null;r=J(t,e);if(65472<=r&&r<=65534)return{invalid:null,marker:r,offset:e};for(var s=J(t,i);!(65472<=s&&s<=65534);){if(++i>=n)return null;s=J(t,i)}return{invalid:r.toString(16),marker:s,offset:i}}var h,q=(h=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}],i.prototype={byteIn:function(){var t=this.data,e=this.bp;255===t[e]?143<t[e+1]?(this.clow+=65280,this.ct=8):(this.clow+=t[++e]<<9,this.ct=7,this.bp=e):(this.clow+=++e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e),65535<this.clow&&(this.chigh+=this.clow>>16,this.clow&=65535)},readBit:function(t,e){var r,n=t[e]>>1,i=1&t[e],s=h[n],a=s.qe,o=this.a-a;if(this.chigh<a)n=o<a?(o=a,r=i,s.nmps):(o=a,r=1^i,1===s.switchFlag&&(i=r),s.nlps);else{if(this.chigh-=a,0!=(32768&o))return this.a=o,i;n=o<a?(r=1^i,1===s.switchFlag&&(i=r),s.nlps):(r=i,s.nmps)}for(;0===this.ct&&this.byteIn(),o<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--,0==(32768&o););return this.a=o,t[e]=n<<1|i,r}},i);function i(t,e,r){this.data=t,this.bp=e,this.dataEnd=r,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}var s=function(){var L={LL:0,LH:1,HL:1,HH:2};function t(){this.failOnCorruptedImage=!1}function A(t,e,r){for(var n,i,s=r.xcb_,a=r.ycb_,o=1<<s,h=1<<a,l=e.tbx0>>s,r=e.tby0>>a,f=e.tbx1+o-1>>s,u=e.tby1+h-1>>a,c=e.resolution.precinctParameters,p=[],d=[],g=r;g<u;g++)for(n=l;n<f;n++){(i={cbx:n,cby:g,tbx0:o*n,tby0:h*g,tbx1:o*(n+1),tby1:h*(g+1)}).tbx0_=Math.max(e.tbx0,i.tbx0),i.tby0_=Math.max(e.tby0,i.tby0),i.tbx1_=Math.min(e.tbx1,i.tbx1),i.tby1_=Math.min(e.tby1,i.tby1);var v,m=Math.floor((i.tbx0_-e.tbx0)/c.precinctWidthInSubband)+Math.floor((i.tby0_-e.tby0)/c.precinctHeightInSubband)*c.numprecinctswide;i.precinctNumber=m,i.subbandType=e.type,i.Lblock=3,i.tbx1_<=i.tbx0_||i.tby1_<=i.tby0_||(p.push(i),void 0!==(v=d[m])?(n<v.cbxMin?v.cbxMin=n:n>v.cbxMax&&(v.cbxMax=n),g<v.cbyMin?v.cbxMin=g:g>v.cbyMax&&(v.cbyMax=g)):d[m]=v={cbxMin:n,cbyMin:g,cbxMax:n,cbyMax:g},i.precinct=v)}e.codeblockParameters={codeblockWidth:s,codeblockHeight:a,numcodeblockwide:f-l+1,numcodeblockhigh:u-r+1},e.codeblocks=p,e.precincts=d}function v(t,e,r){for(var n=[],i=t.subbands,s=0,a=i.length;s<a;s++)for(var o=i[s].codeblocks,h=0,l=o.length;h<l;h++){var f=o[h];f.precinctNumber===e&&n.push(f)}return{layerNumber:r,codeblocks:n}}function E(t){for(var e=t.SIZ,r=t.currentTile.index,i=t.tiles[r],s=i.codingStyleDefaultParameters.layersCount,a=e.Csiz,o=0,n=0;n<a;n++)o=Math.max(o,i.components[n].codingStyleParameters.decompositionLevelsCount);var h=0,l=0,f=0,u=0;this.nextPacket=function(){for(;h<s;h++){for(;l<=o;l++){for(;f<a;f++){var t=i.components[f];if(!(l>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[l],r=e.precinctParameters.numprecincts;u<r;){var n=v(e,u,h);return u++,n}u=0}}f=0}l=0}Q("JPX Error: Out of packets")}}function U(t){for(var e=t.SIZ,r=t.currentTile.index,i=t.tiles[r],s=i.codingStyleDefaultParameters.layersCount,a=e.Csiz,o=0,n=0;n<a;n++)o=Math.max(o,i.components[n].codingStyleParameters.decompositionLevelsCount);var h=0,l=0,f=0,u=0;this.nextPacket=function(){for(;h<=o;h++){for(;l<s;l++){for(;f<a;f++){var t=i.components[f];if(!(h>t.codingStyleParameters.decompositionLevelsCount)){for(var e=t.resolutions[h],r=e.precinctParameters.numprecincts;u<r;){var n=v(e,u,l);return u++,n}u=0}}f=0}l=0}Q("JPX Error: Out of packets")}}function O(t){var n,i,e=t.SIZ,r=t.currentTile.index,s=t.tiles[r],a=s.codingStyleDefaultParameters.layersCount,o=e.Csiz,h=0;for(p=0;p<o;p++)var l=s.components[p],h=Math.max(h,l.codingStyleParameters.decompositionLevelsCount);for(var f=new Int32Array(h+1),u=0;u<=h;++u){for(var c=0,p=0;p<o;++p){var d=s.components[p].resolutions;u<d.length&&(c=Math.max(c,d[u].precinctParameters.numprecincts))}f[u]=c}i=p=u=n=0,this.nextPacket=function(){for(;u<=h;u++){for(;i<f[u];i++){for(;p<o;p++){var t=s.components[p];if(!(u>t.codingStyleParameters.decompositionLevelsCount)){var e=t.resolutions[u];if(!(e.precinctParameters.numprecincts<=i)){for(;n<a;){var r=v(e,i,n);return n++,r}n=0}}}p=0}i=0}Q("JPX Error: Out of packets")}}function D(t){var e=t.SIZ,r=t.currentTile.index,a=t.tiles[r],o=a.codingStyleDefaultParameters.layersCount,h=e.Csiz,l=n(a),f=l,u=0,c=0,p=0,d=0,g=0;this.nextPacket=function(){for(;g<f.maxNumHigh;g++){for(;d<f.maxNumWide;d++){for(;p<h;p++){for(var t=a.components[p],e=t.codingStyleParameters.decompositionLevelsCount;c<=e;c++){var r=t.resolutions[c],n=l.components[p].resolutions[c],i=m(d,g,n,f,r);if(null!==i){for(;u<o;){var s=v(r,i,u);return u++,s}u=0}}c=0}p=0}d=0}Q("JPX Error: Out of packets")}}function N(t){var e=t.SIZ,r=t.currentTile.index,o=t.tiles[r],h=o.codingStyleDefaultParameters.layersCount,l=e.Csiz,f=n(o),u=0,c=0,p=0,d=0,g=0;this.nextPacket=function(){for(;p<l;++p){for(var t=o.components[p],e=f.components[p],r=t.codingStyleParameters.decompositionLevelsCount;g<e.maxNumHigh;g++){for(;d<e.maxNumWide;d++){for(;c<=r;c++){var n=t.resolutions[c],i=e.resolutions[c],s=m(d,g,i,e,n);if(null!==s){for(;u<h;){var a=v(n,s,u);return u++,a}u=0}}c=0}d=0}g=0}Q("JPX Error: Out of packets")}}function m(t,e,r,n,i){t*=n.minWidth,n=e*n.minHeight;if(t%r.width!=0||n%r.height!=0)return null;i=n/r.width*i.precinctParameters.numprecinctswide;return t/r.height+i}function n(t){for(var e=t.components.length,r=Number.MAX_VALUE,n=Number.MAX_VALUE,i=0,s=0,a=new Array(e),o=0;o<e;o++){for(var h=t.components[o],l=h.codingStyleParameters.decompositionLevelsCount,f=new Array(l+1),u=Number.MAX_VALUE,c=Number.MAX_VALUE,p=0,d=0,g=1,v=l;0<=v;--v){var m=h.resolutions[v],_=g*m.precinctParameters.precinctWidth,y=g*m.precinctParameters.precinctHeight,u=Math.min(u,_),c=Math.min(c,y),p=Math.max(p,m.precinctParameters.numprecinctswide),d=Math.max(d,m.precinctParameters.numprecinctshigh);f[v]={width:_,height:y},g<<=1}r=Math.min(r,u),n=Math.min(n,c),i=Math.max(i,p),s=Math.max(s,d),a[o]={resolutions:f,minWidth:u,minHeight:c,maxNumWide:p,maxNumHigh:d}}return{components:a,minWidth:r,minHeight:n,maxNumWide:i,maxNumHigh:s}}t.prototype={parse:function(t){if(65359!==J(t,0))for(var e=0,r=t.length;e<r;){var n=8,i=Y(t,e),s=Y(t,e+4);e+=n,1===i&&(i=4294967296*Y(t,e)+Y(t,e+4),e+=8,n+=8),(i=0===i?r-e+n:i)<n&&Q("JPX Error: Invalid box field size");var a=i-n,o=!0;switch(s){case 1785737832:o=!1;break;case 1668246642:var h=t[e];if(1===h){var l=Y(t,e+3);switch(l){case 16:case 17:case 18:break;default:K("Unknown colorspace "+l)}}else 2===h&&c("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,e,e+a);break;case 1783636e3:218793738!==Y(t,e)&&K("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:h=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);K("Unsupported header type "+s+" ("+h+")")}o&&(e+=a)}else this.parseCodestream(t,0,t.length)},parseImageProperties:function(t){for(var e=t.getByte();0<=e;)if(65361==(e<<8|(e=t.getByte()))){t.skip(4);var r=t.getInt32()>>>0,n=t.getInt32()>>>0,i=t.getInt32()>>>0,s=t.getInt32()>>>0;t.skip(16);var a=t.getUint16();return this.width=r-i,this.height=n-s,this.componentsCount=a,void(this.bitsPerComponent=8)}Q("JPX Error: No size marker found in JPX stream")},parseCodestream:function(t,e,r){var n,i,s={},a=!1;try{for(var o=e;o+1<r;){var h=J(t,o);o+=2;var l,f,u,c,p,d=0;switch(h){case 65359:s.mainHeader=!0;break;case 65497:break;case 65361:var d=J(t,o),g={};g.Xsiz=Y(t,o+4),g.Ysiz=Y(t,o+8),g.XOsiz=Y(t,o+12),g.YOsiz=Y(t,o+16),g.XTsiz=Y(t,o+20),g.YTsiz=Y(t,o+24),g.XTOsiz=Y(t,o+28),g.YTOsiz=Y(t,o+32);var v=J(t,o+36);g.Csiz=v;for(var m=[],_=o+38,y=0;y<v;y++){var w={precision:1+(127&t[_]),isSigned:!!(128&t[_]),XRsiz:t[_+1],YRsiz:t[_+1]};i=g,(n=w).x0=Math.ceil(i.XOsiz/n.XRsiz),n.x1=Math.ceil(i.Xsiz/n.XRsiz),n.y0=Math.ceil(i.YOsiz/n.YRsiz),n.y1=Math.ceil(i.Ysiz/n.YRsiz),n.width=n.x1-n.x0,n.height=n.y1-n.y0,m.push(w)}s.SIZ=g,s.components=m,function(t,e){for(var r,n=t.SIZ,i=[],s=Math.ceil((n.Xsiz-n.XTOsiz)/n.XTsiz),a=Math.ceil((n.Ysiz-n.YTOsiz)/n.YTsiz),o=0;o<a;o++)for(var h=0;h<s;h++)(r={}).tx0=Math.max(n.XTOsiz+h*n.XTsiz,n.XOsiz),r.ty0=Math.max(n.YTOsiz+o*n.YTsiz,n.YOsiz),r.tx1=Math.min(n.XTOsiz+(h+1)*n.XTsiz,n.Xsiz),r.ty1=Math.min(n.YTOsiz+(o+1)*n.YTsiz,n.Ysiz),r.width=r.tx1-r.tx0,r.height=r.ty1-r.ty0,r.components=[],i.push(r);t.tiles=i;for(var t=n.Csiz,l=0,f=t;l<f;l++)for(var u=e[l],c=0,p=i.length;c<p;c++){var d={};r=i[c],d.tcx0=Math.ceil(r.tx0/u.XRsiz),d.tcy0=Math.ceil(r.ty0/u.YRsiz),d.tcx1=Math.ceil(r.tx1/u.XRsiz),d.tcy1=Math.ceil(r.ty1/u.YRsiz),d.width=d.tcx1-d.tcx0,d.height=d.tcy1-d.tcy0,r.components[l]=d}}(s,m),s.QCC=[],s.COC=[];break;case 65372:d=J(t,o);var b={};switch(_=o+2,31&(l=t[_++])){case 0:u=8,c=!0;break;case 1:c=!(u=16);break;case 2:u=16,c=!0;break;default:throw new Error("Invalid SQcd value "+l)}for(b.noQuantization=8===u,b.scalarExpounded=c,b.guardBits=l>>5,f=[];_<d+o;){var x={};8===u?(x.epsilon=t[_++]>>3,x.mu=0):(x.epsilon=t[_]>>3,x.mu=(7&t[_])<<8|t[_+1],_+=2),f.push(x)}b.SPqcds=f,s.mainHeader?s.QCD=b:(s.currentTile.QCD=b,s.currentTile.QCC=[]);break;case 65373:d=J(t,o);var S,C={};switch(_=o+2,s.SIZ.Csiz<257?S=t[_++]:(S=J(t,_),_+=2),31&(l=t[_++])){case 0:u=8,c=!0;break;case 1:c=!(u=16);break;case 2:u=16,c=!0;break;default:throw new Error("Invalid SQcd value "+l)}for(C.noQuantization=8===u,C.scalarExpounded=c,C.guardBits=l>>5,f=[];_<d+o;)x={},8===u?(x.epsilon=t[_++]>>3,x.mu=0):(x.epsilon=t[_]>>3,x.mu=(7&t[_])<<8|t[_+1],_+=2),f.push(x);C.SPqcds=f,s.mainHeader?s.QCC[S]=C:s.currentTile.QCC[S]=C;break;case 65362:d=J(t,o);var P={};_=o+2;var k=t[_++];P.entropyCoderWithCustomPrecincts=!!(1&k),P.sopMarkerUsed=!!(2&k),P.ephMarkerUsed=!!(4&k),P.progressionOrder=t[_++],P.layersCount=J(t,_),_+=2,P.multipleComponentTransform=t[_++],P.decompositionLevelsCount=t[_++],P.xcb=2+(15&t[_++]),P.ycb=2+(15&t[_++]);var T=t[_++];if(P.selectiveArithmeticCodingBypass=!!(1&T),P.resetContextProbabilities=!!(2&T),P.terminationOnEachCodingPass=!!(4&T),P.verticalyStripe=!!(8&T),P.predictableTermination=!!(16&T),P.segmentationSymbolUsed=!!(32&T),P.reversibleTransformation=t[_++],P.entropyCoderWithCustomPrecincts){for(var I=[];_<d+o;){var M=t[_++];I.push({PPx:15&M,PPy:M>>4})}P.precinctsSizes=I}var F=[];if(P.selectiveArithmeticCodingBypass&&F.push("selectiveArithmeticCodingBypass"),P.resetContextProbabilities&&F.push("resetContextProbabilities"),P.terminationOnEachCodingPass&&F.push("terminationOnEachCodingPass"),P.verticalyStripe&&F.push("verticalyStripe"),P.predictableTermination&&F.push("predictableTermination"),0<F.length)throw a=!0,new Error("Unsupported COD options ("+F.join(", ")+")");s.mainHeader?s.COD=P:(s.currentTile.COD=P,s.currentTile.COC=[]);break;case 65424:d=J(t,o),(p={}).index=J(t,o+2),p.length=Y(t,o+4),p.dataEnd=p.length+o-2,p.partIndex=t[o+8],p.partsCount=t[o+9],s.mainHeader=!1,0===p.partIndex&&(p.COD=s.COD,p.COC=s.COC.slice(0),p.QCD=s.QCD,p.QCC=s.QCC.slice(0)),s.currentTile=p;break;case 65427:0===(p=s.currentTile).partIndex&&(function(t,e){for(var r=t.SIZ.Csiz,n=t.tiles[e],i=0;i<r;i++){var s=n.components[i],a=void 0!==t.currentTile.QCC[i]?t.currentTile.QCC[i]:t.currentTile.QCD;s.quantizationParameters=a;a=void 0!==t.currentTile.COC[i]?t.currentTile.COC[i]:t.currentTile.COD;s.codingStyleParameters=a}n.codingStyleDefaultParameters=t.currentTile.COD}(s,p.index),function(t){for(var e,r=t.SIZ,n=t.currentTile.index,i=t.tiles[n],s=r.Csiz,a=0;a<s;a++){for(var o=i.components[a],h=o.codingStyleParameters.decompositionLevelsCount,l=[],f=[],u=0;u<=h;u++){var c,p=function(t,e){var r=t.codingStyleParameters,t={};r.entropyCoderWithCustomPrecincts?(t.PPx=r.precinctsSizes[e].PPx,t.PPy=r.precinctsSizes[e].PPy):(t.PPx=15,t.PPy=15);return t.xcb_=0<e?Math.min(r.xcb,t.PPx-1):Math.min(r.xcb,t.PPx),t.ycb_=0<e?Math.min(r.ycb,t.PPy-1):Math.min(r.ycb,t.PPy),t}(o,u),d={},g=1<<h-u;d.trx0=Math.ceil(o.tcx0/g),d.try0=Math.ceil(o.tcy0/g),d.trx1=Math.ceil(o.tcx1/g),d.try1=Math.ceil(o.tcy1/g),d.resLevel=u,function(t,e){var r=1<<e.PPx,n=1<<e.PPy,i=0===t.resLevel,s=1<<e.PPx+(i?0:-1),a=1<<e.PPy+(i?0:-1),o=t.trx1>t.trx0?Math.ceil(t.trx1/r)-Math.floor(t.trx0/r):0,e=t.try1>t.try0?Math.ceil(t.try1/n)-Math.floor(t.try0/n):0,i=o*e;t.precinctParameters={precinctWidth:r,precinctHeight:n,numprecinctswide:o,numprecinctshigh:e,numprecincts:i,precinctWidthInSubband:s,precinctHeightInSubband:a}}(d,p),l.push(d),0===u?((e={type:"LL"}).tbx0=Math.ceil(o.tcx0/g),e.tby0=Math.ceil(o.tcy0/g),e.tbx1=Math.ceil(o.tcx1/g),e.tby1=Math.ceil(o.tcy1/g),e.resolution=d,A(0,e,p),f.push(e),d.subbands=[e]):(c=1<<h-u+1,g=[],(e={type:"HL"}).tbx0=Math.ceil(o.tcx0/c-.5),e.tby0=Math.ceil(o.tcy0/c),e.tbx1=Math.ceil(o.tcx1/c-.5),e.tby1=Math.ceil(o.tcy1/c),e.resolution=d,A(0,e,p),f.push(e),g.push(e),(e={type:"LH"}).tbx0=Math.ceil(o.tcx0/c),e.tby0=Math.ceil(o.tcy0/c-.5),e.tbx1=Math.ceil(o.tcx1/c),e.tby1=Math.ceil(o.tcy1/c-.5),e.resolution=d,A(0,e,p),f.push(e),g.push(e),(e={type:"HH"}).tbx0=Math.ceil(o.tcx0/c-.5),e.tby0=Math.ceil(o.tcy0/c-.5),e.tbx1=Math.ceil(o.tcx1/c-.5),e.tby1=Math.ceil(o.tcy1/c-.5),e.resolution=d,A(0,e,p),f.push(e),g.push(e),d.subbands=g)}o.resolutions=l,o.subbands=f}var v=i.codingStyleDefaultParameters.progressionOrder;switch(v){case 0:i.packetsIterator=new E(t);break;case 1:i.packetsIterator=new U(t);break;case 2:i.packetsIterator=new O(t);break;case 3:i.packetsIterator=new D(t);break;case 4:i.packetsIterator=new N(t);break;default:Q("JPX Error: Unsupported progression order "+v)}}(s)),function(t,r,n,e){var i,s=0,a=0,o=!1;function h(t){for(;a<t;){var e=r[n+s];s++,o?(i=i<<7|e,a+=7,o=!1):(i=i<<8|e,a+=8),255===e&&(o=!0)}return i>>>(a-=t)&(1<<t)-1}function l(t){return 255===r[n+s-1]&&r[n+s]===t?(f(1),1):255===r[n+s]&&r[n+s+1]===t&&(f(2),1)}function f(t){s+=t}function u(){a=0,o&&(s++,o=!1)}var c,p,d=t.currentTile.index,d=t.tiles[d],g=t.COD.sopMarkerUsed,v=t.COD.ephMarkerUsed,m=d.packetsIterator;for(;s<e;){u(),g&&l(145)&&f(4);var _=m.nextPacket();if(h(1)){for(var y,w=_.layerNumber,b=[],x=0,S=_.codeblocks.length;x<S;x++){var C,P,k=(y=_.codeblocks[x]).precinct,T=y.cbx-k.cbxMin,I=y.cby-k.cbyMin,M=!1,F=!1;if(void 0!==y.included)M=!!h(1);else if(void 0!==(k=y.precinct).inclusionTree?c=k.inclusionTree:(C=k.cbxMax-k.cbxMin+1,P=k.cbyMax-k.cbyMin+1,c=new B(C,P,w),p=new R(C,P),k.inclusionTree=c,k.zeroBitPlanesTree=p),c.reset(T,I,w))for(;;){if(!h(1)){c.incrementValue(w);break}if(!c.nextLevel()){y.included=!0,M=F=!0;break}}if(M){if(F){for((p=k.zeroBitPlanesTree).reset(T,I);;)if(h(1)){if(!p.nextLevel())break}else p.incrementValue();y.zeroBitPlanes=p.value}for(T=function(){if(0===h(1))return 1;if(0===h(1))return 2;var t=h(2);return t<3?t+3:(t=h(5))<31?t+6:(t=h(7))+37}();h(1);)y.Lblock++;I=j(T),I=h((T<1<<I?I-1:I)+y.Lblock);b.push({codeblock:y,codingpasses:T,dataLength:I})}}for(u(),v&&l(146);0<b.length;){var A=b.shift();void 0===(y=A.codeblock).data&&(y.data=[]),y.data.push({data:r,start:n+s,end:n+s+A.dataLength,codingpasses:A.codingpasses}),s+=A.dataLength}}}}(s,t,o,d=p.dataEnd-o);break;case 65365:case 65367:case 65368:case 65380:d=J(t,o);break;case 65363:throw new Error("Codestream code 0xFF53 (COC) is not implemented");default:throw new Error("Unknown codestream code: "+h.toString(16))}o+=d}}catch(t){a||this.failOnCorruptedImage?Q("JPX Error: "+t.message):K("JPX: Trying to recover from: "+t.message)}this.tiles=function(t){for(var e,r,n,i,s,a,o=t.SIZ,h=t.components,l=o.Csiz,f=[],u=0,c=t.tiles.length;u<c;u++){var p=t.tiles[u],d=[];for(e=0;e<l;e++)d[e]=function(t,e,r){for(var n,i,s=e.components[r],a=s.codingStyleParameters,e=s.quantizationParameters,o=a.decompositionLevelsCount,h=e.SPqcds,l=e.scalarExpounded,f=e.guardBits,u=a.segmentationSymbolUsed,c=t.components[r].precision,p=a.reversibleTransformation,a=new(p?Z:G),d=[],g=0,v=0;v<=o;v++){for(var m=s.resolutions[v],_=m.trx1-m.trx0,y=m.try1-m.try0,w=new Float32Array(_*y),b=0,x=m.subbands.length;b<x;b++){l?(n=h[g].mu,i=h[g].epsilon,g++):(n=h[0].mu,i=h[0].epsilon+(0<v?1-v:0));var S=m.subbands[b],C=L[S.type],C=p?1:Math.pow(2,c+C-i)*(1+n/2048);!function(t,e,r,n,i,s,a){for(var o,h,l,f,u,c,p,d,g=r.tbx0,v=r.tby0,m=r.tbx1-r.tbx0,_=r.codeblocks,y="H"===r.type.charAt(0)?1:0,w="H"===r.type.charAt(1)?e:0,b=0,x=_.length;b<x;++b){var S=_[b],C=S.tbx1_-S.tbx0_,P=S.tby1_-S.tby0_;if(0!=C&&0!=P&&void 0!==S.data){o=new z(C,P,S.subbandType,S.zeroBitPlanes,i),h=2;var k=S.data,T=0,I=0;for(l=0,f=k.length;l<f;l++)u=k[l],T+=u.end-u.start,I+=u.codingpasses;var M=new Uint8Array(T),F=0;for(l=0,f=k.length;l<f;l++){var A=(u=k[l]).data.subarray(u.start,u.end);M.set(A,F),F+=A.length}var E=new q(M,0,T);for(o.setDecoder(E),l=0;l<I;l++){switch(h){case 0:o.runSignificancePropagationPass();break;case 1:o.runMagnitudeRefinementPass();break;case 2:o.runCleanupPass(),a&&o.checkSegmentationSymbol()}h=(h+1)%3}var U=S.tbx0_-g+(S.tby0_-v)*m,O=o.coefficentsSign,D=o.coefficentsMagnitude,L=o.bitsDecoded,N=s?0:.5;F=0;var R="LL"!==r.type;for(l=0;l<P;l++){var B=2*(U/m|0)*(e-m)+y+w;for(c=0;c<C;c++)0!==(p=D[F])&&(p=(p+N)*n,0!==O[F]&&(p=-p),d=L[F],t[R?B+(U<<1):U]=s&&i<=d?p:p*(1<<i-d)),U++,F++;U+=m-C}}}}(w,_,S,C,f+i-1,p,u)}d.push({width:_,height:y,items:w})}a=a.calculate(d,s.tcx0,s.tcy0);return{left:s.tcx0,top:s.tcy0,width:a.width,height:a.height,items:a.items}}(t,p,e);var g,v,m,_,y,w,b,x,S,C,P=d[0],k=new Uint8Array(P.items.length*l),T={left:P.left,top:P.top,width:P.width,height:P.height,items:k},I=0;if(p.codingStyleDefaultParameters.multipleComponentTransform){var M=4===l,F=d[0].items,A=d[1].items,E=d[2].items,U=M?d[3].items:null;r=h[0].precision-8,n=.5+(128<<r),s=-(a=.5*(i=255*(1<<r)));var P=p.components[0],O=l-3;if(v=F.length,P.codingStyleParameters.reversibleTransformation)for(g=0;g<v;g++,I+=O)m=F[g]+n,_=A[g],y=E[g],w=(b=m-(y+_>>2))+y,x=b+_,k[I++]=w<=0?0:i<=w?255:w>>r,k[I++]=b<=0?0:i<=b?255:b>>r,k[I++]=x<=0?0:i<=x?255:x>>r;else for(g=0;g<v;g++,I+=O)m=F[g]+n,_=A[g],y=E[g],w=m+1.402*y,b=m-.34413*_-.71414*y,x=m+1.772*_,k[I++]=w<=0?0:i<=w?255:w>>r,k[I++]=b<=0?0:i<=b?255:b>>r,k[I++]=x<=0?0:i<=x?255:x>>r;if(M)for(g=0,I=3;g<v;g++,I+=4)S=U[g],k[I]=S<=s?0:a<=S?255:S+n>>r}else for(e=0;e<l;e++){var D=d[e].items;for(r=h[e].precision-8,n=.5+(128<<r),s=-(i=127.5*(1<<r)),I=e,g=0,v=D.length;g<v;g++)C=D[g],k[I]=C<=s?0:i<=C?255:C+n>>r,I+=l}f.push(T)}return f}(s),this.width=s.SIZ.Xsiz-s.SIZ.XOsiz,this.height=s.SIZ.Ysiz-s.SIZ.YOsiz,this.componentsCount=s.SIZ.Csiz}};var R=(e.prototype={reset:function(t,e){for(var r=0,n=0;r<this.levels.length;){var i,s=t+e*(i=this.levels[r]).width;if(void 0!==i.items[s]){n=i.items[s];break}i.index=s,t>>=1,e>>=1,r++}(i=this.levels[--r]).items[i.index]=n,this.currentLevel=r,delete this.value},incrementValue:function(){var t=this.levels[this.currentLevel];t.items[t.index]++},nextLevel:function(){var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];return--t<0?(this.value=r,!1):(this.currentLevel=t,(e=this.levels[t]).items[e.index]=r,!0)}},e);function e(t,e){var r=j(Math.max(t,e))+1;this.levels=[];for(var n=0;n<r;n++)this.levels.push({width:t,height:e,items:[]}),t=Math.ceil(t/2),e=Math.ceil(e/2)}var B=(r.prototype={reset:function(t,e,r){for(var n=0;n<this.levels.length;){var i=this.levels[n],s=t+e*i.width;i.index=s;s=i.items[s];if(255===s)break;if(r<s)return this.currentLevel=n,this.propagateValues(),!1;t>>=1,e>>=1,n++}return this.currentLevel=n-1,!0},incrementValue:function(t){var e=this.levels[this.currentLevel];e.items[e.index]=t+1,this.propagateValues()},propagateValues:function(){for(var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];0<=--t;)(e=this.levels[t]).items[e.index]=r},nextLevel:function(){var t=this.currentLevel,e=this.levels[t],r=e.items[e.index];return e.items[e.index]=255,!(--t<0)&&(this.currentLevel=t,(e=this.levels[t]).items[e.index]=r,!0)}},r);function r(t,e,r){var n=j(Math.max(t,e))+1;this.levels=[];for(var i=0;i<n;i++){for(var s=new Uint8Array(t*e),a=0,o=s.length;a<o;a++)s[a]=r;this.levels.push({width:t,height:e,items:s}),t=Math.ceil(t/2),e=Math.ceil(e/2)}}var h,l,f,z=(h=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]),l=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]),f=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]),i.prototype={setDecoder:function(t){this.decoder=t},reset:function(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[17]=92,this.contexts[18]=6},setNeighborsSignificance:function(t,e,r){var n,i=this.neighborsSignificance,s=this.width,a=this.height,o=0<e,e=e+1<s;0<t&&(n=r-s,o&&(i[n-1]+=16),e&&(i[n+1]+=16),i[n]+=4),t+1<a&&(n=r+s,o&&(i[n-1]+=16),e&&(i[n+1]+=16),i[n]+=4),o&&(i[r-1]+=1),e&&(i[r+1]+=1),i[r]|=128},runSignificancePropagationPass:function(){for(var t=this.decoder,e=this.width,r=this.height,n=this.coefficentsMagnitude,i=this.coefficentsSign,s=this.neighborsSignificance,a=this.processingFlags,o=this.contexts,h=this.contextLabelTable,l=this.bitsDecoded,f=0;f<r;f+=4)for(var u=0;u<e;u++)for(var c=f*e+u,p=0;p<4;p++,c+=e){var d,g=f+p;if(r<=g)break;a[c]&=-2,!n[c]&&s[c]&&(d=h[s[c]],t.readBit(o,d)&&(d=this.decodeSignBit(g,u,c),i[c]=d,n[c]=1,this.setNeighborsSignificance(g,u,c),a[c]|=2),l[c]++,a[c]|=1)}},decodeSignBit:function(t,e,r){var n,i,s=this.width,a=this.height,o=this.coefficentsMagnitude,h=this.coefficentsSign,l=0<e&&0!==o[r-1],f=e+1<s&&0!==o[r+1]?(i=h[r+1],l?1-i-(n=h[r-1]):1-i-i):l?1-(n=h[r-1])-n:0,e=3*f;return l=0<t&&0!==o[r-s],0<=(f=t+1<a&&0!==o[r+s]?(i=h[r+s],l?1-i-(n=h[r-s])+e:1-i-i+e):l?1-(n=h[r-s])-n+e:e)?this.decoder.readBit(this.contexts,9+f):1^this.decoder.readBit(this.contexts,9-f)},runMagnitudeRefinementPass:function(){for(var t=this.decoder,e=this.width,r=this.height,n=this.coefficentsMagnitude,i=this.neighborsSignificance,s=this.contexts,a=this.bitsDecoded,o=this.processingFlags,h=e*r,l=4*e,f=0;f<h;f=u)for(var u=Math.min(h,f+l),c=0;c<e;c++)for(var p,d=f+c;d<u;d+=e)n[d]&&0==(1&o[d])&&(p=16,0!=(2&o[d])&&(o[d]^=2,p=0==(127&i[d])?15:14),p=t.readBit(s,p),n[d]=n[d]<<1|p,a[d]++,o[d]|=1)},runCleanupPass:function(){for(var t=this.decoder,e=this.width,r=this.height,n=this.neighborsSignificance,i=this.coefficentsMagnitude,s=this.coefficentsSign,a=this.contexts,o=this.contextLabelTable,h=this.bitsDecoded,l=this.processingFlags,f=e,u=2*e,c=3*e,p=0;p<r;p=d)for(var d=Math.min(p+4,r),g=p*e,v=p+3<r,m=0;m<e;m++){var _,y,w=g+m,b=0,x=w,S=p;if(v&&0===l[w]&&0===l[w+f]&&0===l[w+u]&&0===l[w+c]&&0===n[w]&&0===n[w+f]&&0===n[w+u]&&0===n[w+c]){if(!t.readBit(a,18)){h[w]++,h[w+f]++,h[w+u]++,h[w+c]++;continue}0!==(b=t.readBit(a,17)<<1|t.readBit(a,17))&&(S=p+b,x+=b*e),_=this.decodeSignBit(S,m,x),s[x]=_,i[x]=1,this.setNeighborsSignificance(S,m,x),l[x]|=2;for(var x=w,C=p;C<=S;C++,x+=e)h[x]++;b++}for(S=p+b;S<d;S++,x+=e)i[x]||0!=(1&l[x])||(y=o[n[x]],1===t.readBit(a,y)&&(_=this.decodeSignBit(S,m,x),s[x]=_,i[x]=1,this.setNeighborsSignificance(S,m,x),l[x]|=2),h[x]++)}},checkSegmentationSymbol:function(){var t=this.decoder,e=this.contexts;10!=(t.readBit(e,17)<<3|t.readBit(e,17)<<2|t.readBit(e,17)<<1|t.readBit(e,17))&&Q("JPX Error: Invalid segmentation symbol")}},i);function i(t,e,r,n,i){this.width=t,this.height=e,this.contextLabelTable="HH"===r?f:"HL"===r?l:h;var s=t*e;this.neighborsSignificance=new Uint8Array(s),this.coefficentsSign=new Uint8Array(s),this.coefficentsMagnitude=new(14<i?Uint32Array:6<i?Uint16Array:Uint8Array)(s),this.processingFlags=new Uint8Array(s);var a=new Uint8Array(s);if(0!==n)for(var o=0;o<s;o++)a[o]=n;this.bitsDecoded=a,this.reset()}var s=(a.prototype.calculate=function(t,e,r){for(var n=t[0],i=1,s=t.length;i<s;i++)n=this.iterate(n,t[i],e,r);return n},a.prototype.extend=function(t,e,r){var n=e-1,i=e+1,s=e+r-2,r=e+r;t[n--]=t[i++],t[r++]=t[s--],t[n--]=t[i++],t[r++]=t[s--],t[n--]=t[i++],t[r++]=t[s--],t[n]=t[i],t[r]=t[s]},a.prototype.iterate=function(t,e,r,n){for(var i,s,a,o,h=t.width,l=t.height,f=t.items,u=e.width,c=e.height,p=e.items,d=0,g=0;g<l;g++)for(s=2*g*u,i=0;i<h;i++,d++,s+=2)p[s]=f[d];var f=t.items=null,v=new Float32Array(u+8);if(1===u){if(0!=(1&r))for(d=o=0;o<c;o++,d+=u)p[d]*=.5}else for(d=o=0;o<c;o++,d+=u)v.set(p.subarray(d,d+u),4),this.extend(v,4,u),this.filter(v,4,u),p.set(v.subarray(4,4+u),d);var m=16,_=[];for(g=0;g<m;g++)_.push(new Float32Array(c+8));var y,w=0;if(t=4+c,1===c){if(0!=(1&n))for(a=0;a<u;a++)p[a]*=.5}else for(a=0;a<u;a++){if(0===w){for(m=Math.min(u-a,m),d=a,s=4;s<t;d+=u,s++)for(y=0;y<m;y++)_[y][s]=p[d+y];w=m}var b=_[--w];if(this.extend(b,4,c),this.filter(b,4,c),0===w)for(d=a-m+1,s=4;s<t;d+=u,s++)for(y=0;y<m;y++)p[d+y]=_[y][s]}return{width:u,height:c,items:p}},a);function a(){}var G=((o.prototype=Object.create(s.prototype)).filter=function(t,e,r){for(var n,i,r=r>>1,s=-1.586134342059924,a=-.052980118572961,o=.882911075530934,h=.443506852043971,l=1.230174104914001,f=(e|=0)-3,u=4+r;u--;f+=2)t[f]*=.8128930661159609;for(n=h*t[(f=e-2)-1],u=3+r;u--&&(i=h*t[f+1],t[f]=l*t[f]-n-i,u--);f+=2)n=h*t[(f+=2)+1],t[f]=l*t[f]-n-i;for(n=o*t[(f=e-1)-1],u=2+r;u--&&(i=o*t[f+1],t[f]-=n+i,u--);f+=2)n=o*t[(f+=2)+1],t[f]-=n+i;for(n=a*t[(f=e)-1],u=1+r;u--&&(i=a*t[f+1],t[f]-=n+i,u--);f+=2)n=a*t[(f+=2)+1],t[f]-=n+i;if(0!=r)for(n=s*t[(f=e+1)-1],u=r;u--&&(i=s*t[f+1],t[f]-=n+i,u--);f+=2)n=s*t[(f+=2)+1],t[f]-=n+i},o);function o(){s.call(this)}var Z=((u.prototype=Object.create(s.prototype)).filter=function(t,e,r){for(var r=r>>1,n=e|=0,i=1+r;i--;n+=2)t[n]-=t[n-1]+t[n+1]+2>>2;for(n=e+1,i=r;i--;n+=2)t[n]+=t[n-1]+t[n+1]>>1},u);function u(){s.call(this)}return t}(),a=function(){function t(){}function u(t,e,r){this.data=t,this.start=e,this.end=r}function R(t,e,i){var s=t.getContexts(e),a=1;function r(t){for(var e=0,r=0;r<t;r++){var n=i.readBit(s,a);a=a<256?a<<1|n:511&(a<<1|n)|256,e=e<<1|n}return e>>>0}t=r(1),e=r(1)?r(1)?r(1)?r(1)?r(1)?r(32)+4436:r(12)+340:r(8)+84:r(6)+20:r(4)+4:r(2);return 0===t?e:0<e?-e:null}function B(t,e,r){for(var n=t.getContexts("IAID"),i=1,s=0;s<r;s++)i=i<<1|e.readBit(n,i);return r<31?i&(1<<r)-1:2147483647&i}t.prototype={getContexts:function(t){return t in this?this[t]:this[t]=new Int8Array(65536)}},u.prototype={get decoder(){return l(this,"decoder",new q(this.data,this.start,this.end))},get contextCache(){return l(this,"contextCache",new t)}};var m=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"patternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],G=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],E=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],Z=[39717,1941,229,405],U=[32,8];function T(t,e,r,n,i,s,a,o){if(t&&Q("JBIG2 error: MMR encoding is not supported"),0===n&&!s&&!i&&4===a.length&&3===a[0].x&&-1===a[0].y&&-3===a[1].x&&-1===a[1].y&&2===a[2].x&&-2===a[2].y&&-2===a[3].x&&-2===a[3].y)return function(t,e,r){for(var n,i,s,a,o,h,l=r.decoder,f=r.contextCache.getContexts("GB"),u=[],c=0;c<e;c++)for(a=u[c]=new Uint8Array(t),o=c<1?a:u[c-1],n=(h=c<2?a:u[c-2])[0]<<13|h[1]<<12|h[2]<<11|o[0]<<7|o[1]<<6|o[2]<<5|o[3]<<4,i=0;i<t;i++)a[i]=s=l.readBit(f,n),n=(31735&n)<<1|(i+3<t?h[i+3]<<11:0)|(i+4<t?o[i+4]<<4:0)|s;return u}(e,r,o);var h=!!s,l=G[n].concat(a);l.sort(function(t,e){return t.y-e.y||t.x-e.x});for(var f=l.length,u=new Int8Array(f),c=new Int8Array(f),p=[],d=0,g=0,v=0,m=0,_=0;_<f;_++)u[_]=l[_].x,c[_]=l[_].y,g=Math.min(g,l[_].x),v=Math.max(v,l[_].x),m=Math.min(m,l[_].y),_<f-1&&l[_].y===l[_+1].y&&l[_].x===l[_+1].x-1?d|=1<<f-1-_:p.push(_);for(var y=p.length,w=new Int8Array(y),b=new Int8Array(y),x=new Uint16Array(y),S=0;S<y;S++)_=p[S],w[S]=l[_].x,b[S]=l[_].y,x[S]=1<<f-1-_;for(var C,P,k,T,I,M=-g,F=-m,A=e-v,E=Z[n],U=new Uint8Array(e),O=[],D=o.decoder,L=o.contextCache.getContexts("GB"),N=0,R=0,B=0;B<r;B++){if(i)if(N^=D.readBit(L,E)){O.push(U);continue}for(U=new Uint8Array(U),O.push(U),C=0;C<e;C++)if(h&&s[B][C])U[C]=0;else{if(M<=C&&C<A&&F<=B)for(R=R<<1&d,_=0;_<y;_++)P=B+b[_],k=C+w[_],(T=O[P][k])&&(R|=T=x[_]);else for(I=f-1,_=R=0;_<f;_++,I--)0<=(k=C+u[_])&&k<e&&0<=(P=B+c[_])&&(T=O[P][k])&&(R|=T<<I);var z=D.readBit(L,R);U[C]=z}}return O}function z(t,e,r,n,i,s,a,o,h){var l=E[r].coding,f=(l=0===r?l.concat([o[0]]):l).length,u=new Int32Array(f),c=new Int32Array(f);for(F=0;F<f;F++)u[F]=l[F].x,c[F]=l[F].y;var p=E[r].reference,d=(p=0===r?p.concat([o[1]]):p).length,g=new Int32Array(d),v=new Int32Array(d);for(F=0;F<d;F++)g[F]=p[F].x,v[F]=p[F].y;for(var m=n[0].length,_=n.length,y=U[r],w=[],b=h.decoder,x=h.contextCache.getContexts("GR"),S=0,C=0;C<e;C++){a&&(S^=b.readBit(x,y))&&Q("JBIG2 error: prediction is not supported");var P=new Uint8Array(t);w.push(P);for(var k=0;k<t;k++){for(var T,I,M=0,F=0;F<f;F++)T=C+c[F],I=k+u[F],T<0||I<0||t<=I?M<<=1:M=M<<1|w[T][I];for(F=0;F<d;F++)T=C+v[F]+s,I=k+g[F]+i,T<0||_<=T||I<0||m<=I?M<<=1:M=M<<1|n[T][I];var A=b.readBit(x,M);P[k]=A}}return w}function I(t,e,r,n,i,s,a,o,h,l,f,u,c,p,d,g,v){t&&Q("JBIG2 error: huffman is not supported");for(var m,_=[],y=0;y<n;y++){if(m=new Uint8Array(r),i)for(var w=0;w<r;w++)m[w]=i;_.push(m)}var b=v.decoder,x=v.contextCache,S=-R(x,"IADT",b),C=0;for(y=0;y<s;){S+=R(x,"IADT",b),C+=R(x,"IAFS",b);for(var P=C;;){var k=a*S+(1===a?0:R(x,"IAIT",b)),T=B(x,b,h),I=e&&R(x,"IARI",b),M=o[T],F=M[0].length,A=M.length;I&&(M=z(F+=T=R(x,"IARDW",b),A+=I=R(x,"IARDH",b),d,M,(T>>1)+R(x,"IARDX",b),(I>>1)+R(x,"IARDY",b),!1,g,v));var E,U,O=k-(1&u?0:A),D=P-(2&u?F:0);if(l){for(E=0;E<A;E++)if(m=_[D+E]){var L=M[E],N=Math.min(r-O,F);switch(c){case 0:for(U=0;U<N;U++)m[O+U]|=L[U];break;case 2:for(U=0;U<N;U++)m[O+U]^=L[U];break;default:Q("JBIG2 error: operator "+c+" is not supported")}}P+=A-1}else{for(U=0;U<A;U++)if(m=_[O+U])switch(L=M[U],c){case 0:for(E=0;E<F;E++)m[D+E]|=L[E];break;case 2:for(E=0;E<F;E++)m[D+E]^=L[E];break;default:Q("JBIG2 error: operator "+c+" is not supported")}P+=F-1}y++;k=R(x,"IADS",b);if(null===k)break;P+=k+f}}return _}function s(t,e,r,n){for(var i=[],s=r;s<n;){var a=function(t,e){var r={};r.number=Y(t,e);var n=t[e+4];m[d=63&n]||Q("JBIG2 error: invalid segment type: "+d),r.type=d,r.typeName=m[d],r.deferredNonRetain=!!(128&n);var i=!!(64&n),s=(n=t[e+5])>>5&7,a=[31&n],o=e+6;if(7===n){s=536870911&Y(t,o-1),o+=3;var h=s+7>>3;for(a[0]=t[o++];0<--h;)a.push(t[o++])}else 5!==n&&6!==n||Q("JBIG2 error: invalid referred-to flags");r.retainBits=a;for(var l,f=r.number<=256?1:r.number<=65536?2:4,u=[],c=0;c<s;c++){var p=1==f?t[o]:(2==f?J:Y)(t,o);u.push(p),o+=f}if(r.referredTo=u,i?(r.pageAssociation=Y(t,o),o+=4):r.pageAssociation=t[o++],r.length=Y(t,o),o+=4,4294967295===r.length)if(38==d){var i=_(t,o),d=!!(1&t[o+y]),g=new Uint8Array(6);for(d||(g[0]=255,g[1]=172),g[2]=i.height>>>24&255,g[3]=i.height>>16&255,g[4]=i.height>>8&255,g[5]=255&i.height,c=o,l=t.length;c<l;c++){for(var v=0;v<6&&g[v]===t[c+v];)v++;if(6===v){r.length=c+6;break}}4294967295===r.length&&Q("JBIG2 error: segment end was not found")}else Q("JBIG2 error: invalid unknown segment length");return r.headerEnd=o,r}(e,s),s=a.headerEnd,o={header:a,data:e};if(t.randomAccess||(o.start=s,s+=a.length,o.end=s),i.push(o),51===a.type)break}if(t.randomAccess)for(var h=0,l=i.length;h<l;h++)i[h].start=s,s+=i[h].header.length,i[h].end=s;return i}function _(t,e){return{width:Y(t,e),height:Y(t,e+4),x:Y(t,e+8),y:Y(t,e+12),combinationOperator:7&t[e+16]}}var y=17;function a(t,e){for(var r=0,n=t.length;r<n;r++)!function(t,e){var r,n,i,s,a=t.header,o=t.data,h=t.start,l=t.end;switch(a.type){case 0:var f={},u=J(o,h);if(f.huffman=!!(1&u),f.refinement=!!(2&u),f.huffmanDHSelector=u>>2&3,f.huffmanDWSelector=u>>4&3,f.bitmapSizeSelector=u>>6&1,f.aggregationInstancesSelector=u>>7&1,f.bitmapCodingContextUsed=!!(256&u),f.bitmapCodingContextRetained=!!(512&u),f.template=u>>10&3,f.refinementTemplate=u>>12&1,h+=2,!f.huffman){for(s=0===f.template?4:1,n=[],i=0;i<s;i++)n.push({x:d(o,h),y:d(o,h+1)}),h+=2;f.at=n}if(f.refinement&&!f.refinementTemplate){for(n=[],i=0;i<2;i++)n.push({x:d(o,h),y:d(o,h+1)}),h+=2;f.refinementAt=n}f.numberOfExportedSymbols=Y(o,h),f.numberOfNewSymbols=Y(o,h+=4),r=[f,a.number,a.referredTo,o,h+=4,l];break;case 6:case 7:u={};u.info=_(o,h);f=J(o,h+=y);if(h+=2,u.huffman=!!(1&f),u.refinement=!!(2&f),u.stripSize=1<<(f>>2&3),u.referenceCorner=f>>4&3,u.transposed=!!(64&f),u.combinationOperator=f>>7&3,u.defaultPixelValue=f>>9&1,u.dsOffset=f<<17>>27,u.refinementTemplate=f>>15&1,u.huffman&&(f=J(o,h),h+=2,u.huffmanFS=3&f,u.huffmanDS=f>>2&3,u.huffmanDT=f>>4&3,u.huffmanRefinementDW=f>>6&3,u.huffmanRefinementDH=f>>8&3,u.huffmanRefinementDX=f>>10&3,u.huffmanRefinementDY=f>>12&3,u.huffmanRefinementSizeSelector=!!(14&f)),u.refinement&&!u.refinementTemplate){for(n=[],i=0;i<2;i++)n.push({x:d(o,h),y:d(o,h+1)}),h+=2;u.refinementAt=n}u.numberOfSymbolInstances=Y(o,h),h+=4,u.huffman&&Q("JBIG2 error: huffman is not supported"),r=[u,a.referredTo,o,h,l];break;case 38:case 39:var c={};c.info=_(o,h),h+=y;var p=o[h++];if(c.mmr=!!(1&p),c.template=p>>1&3,c.prediction=!!(8&p),!c.mmr){for(s=0===c.template?4:1,n=[],i=0;i<s;i++)n.push({x:d(o,h),y:d(o,h+1)}),h+=2;c.at=n}r=[c,o,h,l];break;case 48:p={width:Y(o,h),height:Y(o,h+4),resolutionX:Y(o,h+8),resolutionY:Y(o,h+12)};4294967295===p.height&&delete p.height;c=o[h+16];J(o,h+17),p.lossless=!!(1&c),p.refinement=!!(2&c),p.defaultPixelValue=c>>2&1,p.combinationOperator=c>>3&3,p.requiresBuffer=!!(32&c),p.combinationOperatorOverride=!!(64&c),r=[p];break;case 49:case 50:case 51:case 62:break;default:Q("JBIG2 error: segment type "+a.typeName+"("+a.type+") is not implemented")}(t="on"+a.typeName)in e&&e[t].apply(e,r)}(t[r],e)}function o(){}function e(){}return o.prototype={onPageInformation:function(t){var e=(this.currentPageInfo=t).width+7>>3,r=new Uint8Array(e*t.height);if(t.defaultPixelValue)for(var n=0,i=r.length;n<i;n++)r[n]=255;this.buffer=r},drawBitmap:function(t,e){var r,n,i,s,a=this.currentPageInfo,o=t.width,h=t.height,l=a.width+7>>3,f=(a.combinationOperatorOverride?t:a).combinationOperator,u=this.buffer,c=128>>(7&t.x),p=t.y*l+(t.x>>3);switch(f){case 0:for(r=0;r<h;r++){for(i=c,s=p,n=0;n<o;n++)e[r][n]&&(u[s]|=i),(i>>=1)||(i=128,s++);p+=l}break;case 2:for(r=0;r<h;r++){for(i=c,s=p,n=0;n<o;n++)e[r][n]&&(u[s]^=i),(i>>=1)||(i=128,s++);p+=l}break;default:Q("JBIG2 error: operator "+f+" is not supported")}},onImmediateGenericRegion:function(t,e,r,n){var i=t.info,n=new u(e,r,n),n=T(t.mmr,i.width,i.height,t.template,t.prediction,null,t.at,n);this.drawBitmap(i,n)},onImmediateLosslessGenericRegion:function(){this.onImmediateGenericRegion.apply(this,arguments)},onSymbolDictionary:function(t,e,r,n,i,s){t.huffman&&Q("JBIG2 error: huffman is not supported");var a=this.symbols;a||(this.symbols=a={});for(var o=[],h=0,l=r.length;h<l;h++)o=o.concat(a[r[h]]);s=new u(n,i,s);a[e]=function(t,e,r,n,i,s,a,o,h,l){t&&Q("JBIG2 error: huffman is not supported");for(var f=[],u=0,c=j(r.length+n),p=l.decoder,d=l.contextCache;f.length<n;){u+=R(d,"IADH",p);for(var g=0;;){var v,m,_=R(d,"IADW",p);if(null===_)break;g+=_,m=e?1<(v=R(d,"IAAI",p))?I(t,e,g,u,0,v,1,r.concat(f),c,0,0,1,0,0,o,h,l):(_=B(d,p,c),v=R(d,"IARDX",p),m=R(d,"IARDY",p),z(g,u,o,_<r.length?r[_]:f[_-r.length],v,m,!1,h,l)):T(!1,g,u,s,!1,null,a,l),f.push(m)}}for(var y=[],w=[],b=!1,x=r.length+n;w.length<x;){for(var S=R(d,"IAEX",p);S--;)w.push(b);b=!b}for(var C=0,P=r.length;C<P;C++)w[C]&&y.push(r[C]);for(var k=0;k<n;C++,k++)w[C]&&y.push(f[k]);return y}(t.huffman,t.refinement,o,t.numberOfNewSymbols,(t.numberOfExportedSymbols,void 0),t.template,t.at,t.refinementTemplate,t.refinementAt,s)},onImmediateTextRegion:function(t,e,r,n,i){for(var s=t.info,a=this.symbols,o=[],h=0,l=e.length;h<l;h++)o=o.concat(a[e[h]]);var f=j(o.length),i=new u(r,n,i),i=I(t.huffman,t.refinement,s.width,s.height,t.defaultPixelValue,t.numberOfSymbolInstances,t.stripSize,o,f,t.transposed,t.dsOffset,t.referenceCorner,t.combinationOperator,0,t.refinementTemplate,t.refinementAt,i);this.drawBitmap(s,i)},onImmediateLosslessTextRegion:function(){this.onImmediateTextRegion.apply(this,arguments)}},e.prototype={parseChunks:function(t){for(var e=new o,r=0,n=t.length;r<n;r++){var i=t[r];a(s({},i.data,i.start,i.end),e)}return e.buffer}},e}();function j(t){for(var e=1,r=0;e<t;)e<<=1,r++;return r}function d(t,e){return t[e]<<24>>24}function J(t,e){return t[e]<<8|t[e+1]}function Y(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}var Q=function(){throw console.error.apply(console,arguments),new Error("PDFJS error: "+arguments[0])},K=function(){console.warn.apply(console,arguments)},c=function(){console.info.apply(console,arguments)};a.prototype.parse=function(t){var e=0,r=t.length;151===t[e]&&74===t[e+1]&&66===t[e+2]&&50===t[e+3]&&13===t[e+4]&&10===t[e+5]&&26===t[e+6]&&10===t[e+7]||Q("JBIG2 error: invalid header");var n={};e+=8;var i=t[e++];n.randomAccess=!(1&i),2&i||(n.numberOfPages=Y(t,e),e+=4);for(var r=this.parseChunks([{data:t,start:e,end:r}]),s=r.currentPageInfo.width,a=r.currentPageInfo.height,o=r.buffer,t=new Uint8Array(s*a),h=0,l=0,f=0;f<a;f++)for(var u,c=0,p=0;p<s;p++)c||(c=128,u=o[l++]),t[h++]=u&c?0:255,c>>=1;this.width=s,this.height=a,this.data=t},t.JpegImage=r,t.JpxImage=s,t.Jbig2Image=a}(PDFJS=PDFJS||{}),function(){var m=0,_=null,y=null,t=window.FFT={},u={o:function(t){if(0===t||0!=(t&t-1))throw new Error("init: radix-2 required");m=t,u.B(),u.q(),u.i()},X:function(t,e){u.G(t,e,1)},e:function(t,e){var r=1/m;u.G(t,e,-1);for(var n=0;n<m;n++)t[n]*=r,e[n]*=r},n:function(t,e){for(var r=[],n=[],i=0,s=0;s<m;s++){for(var i=s*m,a=0;a<m;a++)r[a]=t[a+i],n[a]=e[a+i];u.X(r,n);for(var o=0;o<m;o++)t[o+i]=r[o],e[o+i]=n[o]}for(var h=0;h<m;h++){for(var l=0;l<m;l++)i=h+l*m,r[l]=t[i],n[l]=e[i];u.X(r,n);for(var f=0;f<m;f++)t[i=h+f*m]=r[f],e[i]=n[f]}},f:function(t,e){for(var r=[],n=[],i=0,s=0;s<m;s++){for(var i=s*m,a=0;a<m;a++)r[a]=t[a+i],n[a]=e[a+i];u.e(r,n);for(var o=0;o<m;o++)t[o+i]=r[o],e[o+i]=n[o]}for(var h=0;h<m;h++){for(var l=0;l<m;l++)i=h+l*m,r[l]=t[i],n[l]=e[i];u.e(r,n);for(var f=0;f<m;f++)t[i=h+f*m]=r[f],e[i]=n[f]}},G:function(t,e,r){for(var n,i,s,a,o,h=m>>2,l=0;l<m;l++)l<(i=_[l])&&(s=t[l],t[l]=t[i],t[i]=s,s=e[l],e[l]=e[i],e[i]=s);for(var f=1;f<m;f<<=1)for(var u=0,c=m/(f<<1),p=0;p<f;p++){for(var d=y[u+h],g=r*y[u],v=p;v<m;v+=f<<1)a=d*t[n=v+f]+g*e[n],o=d*e[n]-g*t[n],t[n]=t[v]-a,t[v]+=a,e[n]=e[v]-o,e[v]+=o;u+=c}},B:function(){var t=Uint32Array;m<=256?t=Uint8Array:m<=65536&&(t=Uint16Array),_=new t(m),y=new Float64Array(1.25*m)},j:function(){},q:function(){var t=0,e=0,r=0;for(_[0]=0;++t<m;){for(r=m>>1;r<=e;)e-=r,r>>=1;e+=r,_[t]=e}},i:function(){for(var t=m>>1,e=m>>2,r=m>>3,n=t+e,i=2*(h=Math.sin(Math.PI/m))*h,s=Math.sqrt(i*(2-i)),a=y[e]=1,o=y[0]=0,h=2*i,l=1;l<r;l++)i+=h*(a-=i),s-=h*(o+=s),y[l]=o,y[e-l]=a;0!=r&&(y[r]=Math.sqrt(.5));for(var f=0;f<e;f++)y[t-f]=y[f];for(var u=0;u<n;u++)y[u+t]=-y[u]}};t.init=u.o,t.fft2d=u.n,t.ifft2d=u.f}.call(this),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).acorn=t()}(function(){return function n(i,s,a){function o(r,t){if(!s[r]){if(!i[r]){var e="function"==typeof require&&require;if(!t&&e)return e(r,!0);if(h)return h(r,!0);throw(e=Error("Cannot find module '"+r+"'")).code="MODULE_NOT_FOUND",e}e=s[r]={exports:{}},i[r][0].call(e.exports,function(t){var e=i[r][1][t];return o(e||t)},e,e.exports,n,i,s,a)}return s[r].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)o(a[t]);return o}({1:[function(t,e,r){var u=t("./tokentype");(t=t("./state").Parser.prototype).checkPropClash=function(t,e){if(!(6<=this.options.ecmaVersion&&(t.computed||t.method||t.shorthand))){var r=t.key;switch(r.type){case"Identifier":var n=r.name;break;case"Literal":n=String(r.value);break;default:return}var i=t.kind;6<=this.options.ecmaVersion?"__proto__"===n&&"init"===i&&(e.proto&&this.raiseRecoverable(r.start,"Redefinition of __proto__ property"),e.proto=!0):((t=e[n="$"+n])?(n="init"!==i,(!this.strict&&!n||!t[i])&&n^t.init||this.raiseRecoverable(r.start,"Redefinition of property")):t=e[n]={init:!1,get:!1,set:!1},t[i]=!0)}},t.parseExpression=function(t,e){var r=this.start,n=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type!==u.types.comma)return i;for((r=this.startNodeAt(r,n)).expressions=[i];this.eat(u.types.comma);)r.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(r,"SequenceExpression")},t.parseMaybeAssign=function(t,e,r){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var n=!1;e||(e={shorthandAssign:0,trailingComma:0},n=!0);var i=this.start,s=this.startLoc;this.type!=u.types.parenL&&this.type!=u.types.name||(this.potentialArrowAt=this.start);var a=this.parseMaybeConditional(t,e);return r&&(a=r.call(this,a,i,s)),this.type.isAssign?(n&&this.checkPatternErrors(e,!0),(r=this.startNodeAt(i,s)).operator=this.value,r.left=this.type===u.types.eq?this.toAssignable(a):a,e.shorthandAssign=0,this.checkLVal(a),this.next(),r.right=this.parseMaybeAssign(t),this.finishNode(r,"AssignmentExpression")):(n&&this.checkExpressionErrors(e,!0),a)},t.parseMaybeConditional=function(t,e){var r=this.start,n=this.startLoc,i=this.parseExprOps(t,e);return!this.checkExpressionErrors(e)&&this.eat(u.types.question)?((r=this.startNodeAt(r,n)).test=i,r.consequent=this.parseMaybeAssign(),this.expect(u.types.colon),r.alternate=this.parseMaybeAssign(t),this.finishNode(r,"ConditionalExpression")):i},t.parseExprOps=function(t,e){var r=this.start,n=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?i:this.parseExprOp(i,r,n,-1,t)},t.parseExprOp=function(t,e,r,n,i){if(null==(l=this.type.binop)||i&&this.type===u.types._in||!(n<l))return t;var s=this.type===u.types.logicalOR||this.type===u.types.logicalAND,a=this.value;this.next();var o=this.start,h=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),o,h,l,i);return t=this.buildBinary(e,r,t,l,a,s),this.parseExprOp(t,e,r,n,i)},t.buildBinary=function(t,e,r,n,i,s){return(t=this.startNodeAt(t,e)).left=r,t.operator=i,t.right=n,this.finishNode(t,s?"LogicalExpression":"BinaryExpression")},t.parseMaybeUnary=function(t,e){var r=this.start,n=this.startLoc;if(this.type.prefix){var i=this.startNode(),s=this.type===u.types.incDec;i.operator=this.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),s?this.checkLVal(i.argument):this.strict&&"delete"===i.operator&&"Identifier"===i.argument.type?this.raiseRecoverable(i.start,"Deleting local variable in strict mode"):e=!0,s=this.finishNode(i,s?"UpdateExpression":"UnaryExpression")}else{if(s=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return s;for(;this.type.postfix&&!this.canInsertSemicolon();)(i=this.startNodeAt(r,n)).operator=this.value,i.prefix=!1,i.argument=s,this.checkLVal(s),this.next(),s=this.finishNode(i,"UpdateExpression")}return!e&&this.eat(u.types.starstar)?this.buildBinary(r,n,s,this.parseMaybeUnary(null,!1),"**",!1):s},t.parseExprSubscripts=function(t){var e=this.start,r=this.startLoc,n=this.parseExprAtom(t),i="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);return this.checkExpressionErrors(t)||i?n:this.parseSubscripts(n,e,r)},t.parseSubscripts=function(t,e,r,n){for(var i;;)if(this.eat(u.types.dot))(i=this.startNodeAt(e,r)).object=t,i.property=this.parseIdent(!0),i.computed=!1,t=this.finishNode(i,"MemberExpression");else if(this.eat(u.types.bracketL))(i=this.startNodeAt(e,r)).object=t,i.property=this.parseExpression(),i.computed=!0,this.expect(u.types.bracketR),t=this.finishNode(i,"MemberExpression");else if(!n&&this.eat(u.types.parenL))(i=this.startNodeAt(e,r)).callee=t,i.arguments=this.parseExprList(u.types.parenR,!1),t=this.finishNode(i,"CallExpression");else{if(this.type!==u.types.backQuote)return t;(i=this.startNodeAt(e,r)).tag=t,i.quasi=this.parseTemplate(),t=this.finishNode(i,"TaggedTemplateExpression")}},t.parseExprAtom=function(t){var e=this.potentialArrowAt==this.start;switch(this.type){case u.types._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case u.types._this:return t=this.type===u.types._this?"ThisExpression":"Super",e=this.startNode(),this.next(),this.finishNode(e,t);case u.types.name:t=this.start;var r=this.startLoc,n=this.parseIdent(this.type!==u.types.name);return e&&!this.canInsertSemicolon()&&this.eat(u.types.arrow)?this.parseArrowExpression(this.startNodeAt(t,r),[n]):n;case u.types.regexp:return t=this.value,(e=this.parseLiteral(t.value)).regex={pattern:t.pattern,flags:t.flags},e;case u.types.num:case u.types.string:return this.parseLiteral(this.value);case u.types._null:case u.types._true:case u.types._false:return(e=this.startNode()).value=this.type===u.types._null?null:this.type===u.types._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case u.types.parenL:return this.parseParenAndDistinguishExpression(e);case u.types.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(u.types.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case u.types.braceL:return this.parseObj(!1,t);case u.types._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case u.types._class:return this.parseClass(this.startNode(),!1);case u.types._new:return this.parseNew();case u.types.backQuote:return this.parseTemplate();default:this.unexpected()}},t.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},t.parseParenExpression=function(){this.expect(u.types.parenL);var t=this.parseExpression();return this.expect(u.types.parenR),t},t.parseParenAndDistinguishExpression=function(t){var e=this.start,r=this.startLoc;if(6<=this.options.ecmaVersion){this.next();for(var n=this.start,i=this.startLoc,s=[],a=!0,o={shorthandAssign:0,trailingComma:0},h=void 0,l=void 0;this.type!==u.types.parenR;){if(a?a=!1:this.expect(u.types.comma),this.type===u.types.ellipsis){h=this.start,s.push(this.parseParenItem(this.parseRest()));break}this.type!==u.types.parenL||l||(l=this.start),s.push(this.parseMaybeAssign(!1,o,this.parseParenItem))}var a=this.start,f=this.startLoc;if(this.expect(u.types.parenR),t&&!this.canInsertSemicolon()&&this.eat(u.types.arrow))return this.checkPatternErrors(o,!0),l&&this.unexpected(l),this.parseParenArrowList(e,r,s);s.length||this.unexpected(this.lastTokStart),h&&this.unexpected(h),this.checkExpressionErrors(o,!0),1<s.length?((t=this.startNodeAt(n,i)).expressions=s,this.finishNodeAt(t,"SequenceExpression",a,f)):t=s[0]}else t=this.parseParenExpression();return this.options.preserveParens?((e=this.startNodeAt(e,r)).expression=t,this.finishNode(e,"ParenthesizedExpression")):t},t.parseParenItem=function(t){return t},t.parseParenArrowList=function(t,e,r){return this.parseArrowExpression(this.startNodeAt(t,e),r)};var n=[];t.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(u.types.dot))return t.meta=e,t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty");var e=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),e,r,!0),this.eat(u.types.parenL)?t.arguments=this.parseExprList(u.types.parenR,!1):t.arguments=n,this.finishNode(t,"NewExpression")},t.parseTemplateElement=function(){var t=this.startNode();return t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===u.types.backQuote,this.finishNode(t,"TemplateElement")},t.parseTemplate=function(){var t=this.startNode();this.next(),t.expressions=[];var e=this.parseTemplateElement();for(t.quasis=[e];!e.tail;)this.expect(u.types.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(u.types.braceR),t.quasis.push(e=this.parseTemplateElement());return this.next(),this.finishNode(t,"TemplateLiteral")},t.parseObj=function(t,e){var r=this.startNode(),n=!0,i={};for(r.properties=[],this.next();!this.eat(u.types.braceR);){if(n)n=!1;else if(this.expect(u.types.comma),this.afterTrailingComma(u.types.braceR))break;var s=this.startNode(),a=void 0,o=void 0,h=void 0;6<=this.options.ecmaVersion&&(s.method=!1,s.shorthand=!1,(t||e)&&(o=this.start,h=this.startLoc),t||(a=this.eat(u.types.star))),this.parsePropertyName(s),this.parsePropertyValue(s,t,a,o,h,e),this.checkPropClash(s,i),r.properties.push(this.finishNode(s,"Property"))}return this.finishNode(r,t?"ObjectPattern":"ObjectExpression")},t.parsePropertyValue=function(t,e,r,n,i,s){this.eat(u.types.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,s),t.kind="init"):6<=this.options.ecmaVersion&&this.type===u.types.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(r)):5<=this.options.ecmaVersion&&!t.computed&&"Identifier"===t.key.type&&("get"===t.key.name||"set"===t.key.name)&&this.type!=u.types.comma&&this.type!=u.types.braceR?((r||e)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1),t.value.params.length!==("get"===t.kind?0:1)&&(e=t.value.start,"get"===t.kind?this.raiseRecoverable(e,"getter should have no params"):this.raiseRecoverable(e,"setter should have exactly one param")),"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")):6<=this.options.ecmaVersion&&!t.computed&&"Identifier"===t.key.type?(t.kind="init",e?((this.keywords.test(t.key.name)||(this.strict?this.reservedWordsStrictBind:this.reservedWords).test(t.key.name)||this.inGenerator&&"yield"==t.key.name)&&this.raiseRecoverable(t.key.start,"Binding "+t.key.name),t.value=this.parseMaybeDefault(n,i,t.key)):this.type===u.types.eq&&s?(s.shorthandAssign||(s.shorthandAssign=this.start),t.value=this.parseMaybeDefault(n,i,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected()},t.parsePropertyName=function(t){if(6<=this.options.ecmaVersion){if(this.eat(u.types.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(u.types.bracketR),t.key;t.computed=!1}return t.key=this.type===u.types.num||this.type===u.types.string?this.parseExprAtom():this.parseIdent(!0)},t.initFunction=function(t){t.id=null,6<=this.options.ecmaVersion&&(t.generator=!1,t.expression=!1)},t.parseMethod=function(t){var e=this.startNode(),r=this.inGenerator;return this.inGenerator=t,this.initFunction(e),this.expect(u.types.parenL),e.params=this.parseBindingList(u.types.parenR,!1,!1),6<=this.options.ecmaVersion&&(e.generator=t),this.parseFunctionBody(e,!1),this.inGenerator=r,this.finishNode(e,"FunctionExpression")},t.parseArrowExpression=function(t,e){var r=this.inGenerator;return this.inGenerator=!1,this.initFunction(t),t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0),this.inGenerator=r,this.finishNode(t,"ArrowFunctionExpression")},t.parseFunctionBody=function(t,e){var r,n,i=e&&this.type!==u.types.braceL;i?(t.body=this.parseMaybeAssign(),t.expression=!0):(r=this.inFunction,n=this.labels,this.inFunction=!0,this.labels=[],t.body=this.parseBlock(!0),t.expression=!1,this.inFunction=r,this.labels=n),this.strict||!i&&t.body.body.length&&this.isUseStrict(t.body.body[0])?(i=this.strict,this.strict=!0,t.id&&this.checkLVal(t.id,!0),this.checkParams(t),this.strict=i):e&&this.checkParams(t)},t.checkParams=function(t){for(var e={},r=0;r<t.params.length;r++)this.checkLVal(t.params[r],!0,e)},t.parseExprList=function(t,e,r,n){for(var i,s=[],a=!0;!this.eat(t);){if(a)a=!1;else if(this.expect(u.types.comma),e&&this.afterTrailingComma(t))break;r&&this.type===u.types.comma?i=null:this.type===u.types.ellipsis?(i=this.parseSpread(n),this.type===u.types.comma&&n&&!n.trailingComma&&(n.trailingComma=this.lastTokStart)):i=this.parseMaybeAssign(!1,n),s.push(i)}return s},t.parseIdent=function(t){var e=this.startNode();return t&&"never"==this.options.allowReserved&&(t=!1),this.type===u.types.name?(!t&&(this.strict?this.reservedWordsStrict:this.reservedWords).test(this.value)&&(6<=this.options.ecmaVersion||-1==this.input.slice(this.start,this.end).indexOf("\\"))&&this.raiseRecoverable(this.start,"The keyword '"+this.value+"' is reserved"),!t&&this.inGenerator&&"yield"===this.value&&this.raiseRecoverable(this.start,"Can not use 'yield' as identifier inside a generator"),e.name=this.value):t&&this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"Identifier")},t.parseYield=function(){var t=this.startNode();return this.next(),this.type==u.types.semi||this.canInsertSemicolon()||this.type!=u.types.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(u.types.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")}},{"./state":10,"./tokentype":14}],2:[function(t,e,r){function n(t,e){for(var r=65536,n=0;n<e.length;n+=2){if(t<(r+=e[n]))return!1;if(t<=(r+=e[n+1]))return!0}}r.__esModule=!0,r.isIdentifierStart=function(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?170<=t&&i.test(String.fromCharCode(t)):!1!==e&&n(t,a)))},r.isIdentifierChar=function(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?170<=t&&s.test(String.fromCharCode(t)):!1!==e&&(n(t,a)||n(t,o)))))},r.reservedWords={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",7:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},r.keywords={5:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",6:"break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this const class extends export import super"};var i=new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),s=new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿]");var a=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,99,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,287,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,1288,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,16481,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,1340,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],o=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,168,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,316,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,20855,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,3617,6,792618,239]},{}],3:[function(t,e,r){r.__esModule=!0,r.parse=function(t,e){return new n.Parser(e,t).parse()},r.parseExpressionAt=function(t,e,r){return(t=new n.Parser(r,t,e)).nextToken(),t.parseExpression()},r.tokenizer=function(t,e){return new n.Parser(e,t)};var n=t("./state");t("./parseutil"),t("./statement"),t("./lval"),t("./expression"),t("./location"),r.Parser=n.Parser,r.plugins=n.plugins,e=t("./options"),r.defaultOptions=e.defaultOptions,e=t("./locutil"),r.Position=e.Position,r.SourceLocation=e.SourceLocation,r.getLineInfo=e.getLineInfo,e=t("./node"),r.Node=e.Node,e=t("./tokentype"),r.TokenType=e.TokenType,r.tokTypes=e.types,e=t("./tokencontext"),r.TokContext=e.TokContext,r.tokContexts=e.types,e=t("./identifier"),r.isIdentifierChar=e.isIdentifierChar,r.isIdentifierStart=e.isIdentifierStart,e=t("./tokenize"),r.Token=e.Token,t=t("./whitespace"),r.isNewLine=t.isNewLine,r.lineBreak=t.lineBreak,r.lineBreakG=t.lineBreakG,r.version="3.1.0"},{"./expression":1,"./identifier":2,"./location":4,"./locutil":5,"./lval":6,"./node":7,"./options":8,"./parseutil":9,"./state":10,"./statement":11,"./tokencontext":12,"./tokenize":13,"./tokentype":14,"./whitespace":16}],4:[function(t,e,r){e=t("./state");var n=t("./locutil");(t=e.Parser.prototype).raise=function(t,e){var r=n.getLineInfo(this.input,t);e+=" ("+r.line+":"+r.column+")";e=new SyntaxError(e);throw e.pos=t,e.loc=r,e.raisedAt=this.pos,e},t.raiseRecoverable=t.raise,t.curPosition=function(){if(this.options.locations)return new n.Position(this.curLine,this.pos-this.lineStart)}},{"./locutil":5,"./state":10}],5:[function(t,e,r){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0,r.getLineInfo=function(t,e){for(var r=1,n=0;;){s.lineBreakG.lastIndex=n;var i=s.lineBreakG.exec(t);if(!(i&&i.index<e))return new a(r,e-n);++r,n=i.index+i[0].length}};var s=t("./whitespace"),a=(n.prototype.offset=function(t){return new n(this.line,this.column+t)},n);function n(t,e){i(this,n),this.line=t,this.column=e}r.Position=a,r.SourceLocation=function t(e,r,n){i(this,t),this.start=r,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)}},{"./whitespace":16}],6:[function(t,e,r){var o=t("./tokentype");e=t("./state");var s=t("./util");(t=e.Parser.prototype).toAssignable=function(t,e){if(6<=this.options.ecmaVersion&&t)switch(t.type){case"Identifier":case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":t.type="ObjectPattern";for(var r=0;r<t.properties.length;r++){var n=t.properties[r];"init"!==n.kind&&this.raise(n.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(n.value,e)}break;case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,e);break;case"AssignmentExpression":if("="!==t.operator){this.raise(t.left.end,"Only '=' operator can be used for specifying default value.");break}t.type="AssignmentPattern",delete t.operator;case"AssignmentPattern":"YieldExpression"===t.right.type&&this.raise(t.right.start,"Yield expression cannot be a default value");break;case"ParenthesizedExpression":t.expression=this.toAssignable(t.expression,e);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}return t},t.toAssignableList=function(t,e){var r,n,i=t.length;for(i&&((r=t[i-1])&&"RestElement"==r.type?--i:r&&"SpreadElement"==r.type&&(r.type="RestElement",n=r.argument,this.toAssignable(n,e),"Identifier"!==n.type&&"MemberExpression"!==n.type&&"ArrayPattern"!==n.type&&this.unexpected(n.start),--i),e&&"RestElement"===r.type&&"Identifier"!==r.argument.type&&this.unexpected(r.argument.start)),r=0;r<i;r++)(n=t[r])&&this.toAssignable(n,e);return t},t.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(t),this.finishNode(e,"SpreadElement")},t.parseRest=function(t){var e=this.startNode();return this.next(),e.argument=t?this.type===o.types.name?this.parseIdent():this.unexpected():this.type===o.types.name||this.type===o.types.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(e,"RestElement")},t.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case o.types.name:return this.parseIdent();case o.types.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(o.types.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case o.types.braceL:return this.parseObj(!0);default:this.unexpected()}},t.parseBindingList=function(t,e,r,n){for(var i=[],s=!0;!this.eat(t);)if(s?s=!1:this.expect(o.types.comma),e&&this.type===o.types.comma)i.push(null);else{if(r&&this.afterTrailingComma(t))break;if(this.type===o.types.ellipsis){e=this.parseRest(n),this.parseBindingListItem(e),i.push(e),this.type===o.types.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}return i},t.parseBindingListItem=function(t){return t},t.parseMaybeDefault=function(t,e,r){return r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(o.types.eq)?r:((t=this.startNodeAt(t,e)).left=r,t.right=this.parseMaybeAssign(),this.finishNode(t,"AssignmentPattern"))},t.checkLVal=function(t,e,r){switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),r&&(s.has(r,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),r[t.name]=!0);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,(e?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var n=0;n<t.properties.length;n++)this.checkLVal(t.properties[n].value,e,r);break;case"ArrayPattern":for(n=0;n<t.elements.length;n++){var i=t.elements[n];i&&this.checkLVal(i,e,r)}break;case"AssignmentPattern":this.checkLVal(t.left,e,r);break;case"RestElement":this.checkLVal(t.argument,e,r);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,r);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}}},{"./state":10,"./tokentype":14,"./util":15}],7:[function(t,e,r){function i(t,e,r,n){return t.type=e,t.end=r,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=r),t}r.__esModule=!0,e=t("./state");function n(t,e,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new s.SourceLocation(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])}var s=t("./locutil");r.Node=n,(t=e.Parser.prototype).startNode=function(){return new n(this,this.start,this.startLoc)},t.startNodeAt=function(t,e){return new n(this,t,e)},t.finishNode=function(t,e){return i.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},t.finishNodeAt=function(t,e,r,n){return i.call(this,t,e,r,n)}},{"./locutil":5,"./state":10}],8:[function(t,e,r){r.__esModule=!0,r.getOptions=function(t){var e,r,a,o,n={};for(e in s)n[e]=(t&&i.has(t,e)?t:s)[e];return null==n.allowReserved&&(n.allowReserved=n.ecmaVersion<5),i.isArray(n.onToken)&&(r=n.onToken,n.onToken=function(t){return r.push(t)}),i.isArray(n.onComment)&&(n.onComment=(o=(a=n).onComment,function(t,e,r,n,i,s){t={type:t?"Block":"Line",value:e,start:r,end:n},a.locations&&(t.loc=new h.SourceLocation(this,i,s)),a.ranges&&(t.range=[r,n]),o.push(t)})),n};var i=t("./util"),h=t("./locutil"),s={ecmaVersion:6,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};r.defaultOptions=s},{"./locutil":5,"./util":15}],9:[function(t,e,r){var n=t("./tokentype");e=t("./state");var i=t("./whitespace");(t=e.Parser.prototype).isUseStrict=function(t){return 5<=this.options.ecmaVersion&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.raw.slice(1,-1)},t.eat=function(t){return this.type===t&&(this.next(),!0)},t.isContextual=function(t){return this.type===n.types.name&&this.value===t},t.eatContextual=function(t){return this.value===t&&this.eat(n.types.name)},t.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},t.canInsertSemicolon=function(){return this.type===n.types.eof||this.type===n.types.braceR||i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))},t.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},t.semicolon=function(){this.eat(n.types.semi)||this.insertSemicolon()||this.unexpected()},t.afterTrailingComma=function(t){if(this.type==t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),this.next(),!0},t.expect=function(t){this.eat(t)||this.unexpected()},t.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},t.checkPatternErrors=function(t,e){t=t&&t.trailingComma;if(!e)return!!t;t&&this.raise(t,"Comma is not permitted after the rest element")},t.checkExpressionErrors=function(t,e){t=t&&t.shorthandAssign;if(!e)return!!t;t&&this.raise(t,"Shorthand property assignments are valid only in destructuring patterns")}},{"./state":10,"./tokentype":14,"./whitespace":16}],10:[function(t,e,r){function i(t){return new RegExp("^("+t.replace(/ /g,"|")+")$")}r.__esModule=!0;var s=t("./identifier"),a=t("./tokentype"),o=t("./whitespace"),h=t("./options"),n={};function l(t,e,r){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.options=t=h.getOptions(t),this.sourceFile=t.sourceFile,this.keywords=i(s.keywords[6<=t.ecmaVersion?6:5]);var n=t.allowReserved?"":s.reservedWords[t.ecmaVersion]+("module"==t.sourceType?" await":"");this.reservedWords=i(n),n=(n?n+" ":"")+s.reservedWords.strict,this.reservedWordsStrict=i(n),this.reservedWordsStrictBind=i(n+" "+s.reservedWords.strictBind),this.input=String(e),this.containsEsc=!1,this.loadPlugins(t.plugins),r?(this.pos=r,this.lineStart=Math.max(0,this.input.lastIndexOf("\n",r)),this.curLine=this.input.slice(0,this.lineStart).split(o.lineBreak).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=a.types.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.strict=this.inModule="module"===t.sourceType,this.potentialArrowAt=-1,this.inFunction=this.inGenerator=!1,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)}r.plugins=n,l.prototype.isKeyword=function(t){return this.keywords.test(t)},l.prototype.isReservedWord=function(t){return this.reservedWords.test(t)},l.prototype.extend=function(t,e){this[t]=e(this[t])},l.prototype.loadPlugins=function(t){for(var e in t){var r=n[e];if(!r)throw Error("Plugin '"+e+"' not found");r(this,t[e])}},l.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},r.Parser=t=l},{"./identifier":2,"./options":8,"./tokentype":14,"./whitespace":16}],11:[function(t,e,r){var h=t("./tokentype");e=t("./state");var n=t("./whitespace"),i=t("./identifier");(t=e.Parser.prototype).parseTopLevel=function(t){var e=!0;for(t.body||(t.body=[]);this.type!==h.types.eof;){var r=this.parseStatement(!0,!0);t.body.push(r),e&&(this.isUseStrict(r)&&this.setStrict(!0),e=!1)}return this.next(),6<=this.options.ecmaVersion&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var s={kind:"loop"},a={kind:"switch"};t.isLet=function(){if(this.type!==h.types.name||this.options.ecmaVersion<6||"let"!=this.value)return!1;n.skipWhiteSpace.lastIndex=this.pos;var t=n.skipWhiteSpace.exec(this.input),t=this.pos+t[0].length,e=this.input.charCodeAt(t);if(91===e||123==e)return!0;if(i.isIdentifierStart(e,!0)){for(e=t+1;i.isIdentifierChar(this.input.charCodeAt(e,!0));++e);if(t=this.input.slice(t,e),!this.isKeyword(t))return!0}return!1},t.parseStatement=function(t,e){var r=this.type,n=this.startNode(),i=void 0;switch(this.isLet()&&(r=h.types._var,i="let"),r){case h.types._break:case h.types._continue:return this.parseBreakContinueStatement(n,r.keyword);case h.types._debugger:return this.parseDebuggerStatement(n);case h.types._do:return this.parseDoStatement(n);case h.types._for:return this.parseForStatement(n);case h.types._function:return!t&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(n);case h.types._class:return t||this.unexpected(),this.parseClass(n,!0);case h.types._if:return this.parseIfStatement(n);case h.types._return:return this.parseReturnStatement(n);case h.types._switch:return this.parseSwitchStatement(n);case h.types._throw:return this.parseThrowStatement(n);case h.types._try:return this.parseTryStatement(n);case h.types._const:case h.types._var:return i=i||this.value,t||"var"==i||this.unexpected(),this.parseVarStatement(n,i);case h.types._while:return this.parseWhileStatement(n);case h.types._with:return this.parseWithStatement(n);case h.types.braceL:return this.parseBlock();case h.types.semi:return this.parseEmptyStatement(n);case h.types._export:case h.types._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===h.types._import?this.parseImport(n):this.parseExport(n);default:var i=this.value,s=this.parseExpression();return r===h.types.name&&"Identifier"===s.type&&this.eat(h.types.colon)?this.parseLabeledStatement(n,i,s):this.parseExpressionStatement(n,s)}},t.parseBreakContinueStatement=function(t,e){var r="break"==e;this.next(),this.eat(h.types.semi)||this.insertSemicolon()?t.label=null:this.type!==h.types.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var i=this.labels[n];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(r||"loop"===i.kind))break;if(t.label&&r)break}}return n===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,r?"BreakStatement":"ContinueStatement")},t.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},t.parseDoStatement=function(t){return this.next(),this.labels.push(s),t.body=this.parseStatement(!1),this.labels.pop(),this.expect(h.types._while),t.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(h.types.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},t.parseForStatement=function(t){if(this.next(),this.labels.push(s),this.expect(h.types.parenL),this.type===h.types.semi)return this.parseFor(t,null);var e=this.isLet();if(this.type===h.types._var||this.type===h.types._const||e){var r=this.startNode(),e=e?"let":this.value;return this.next(),this.parseVar(r,!0,e),this.finishNode(r,"VariableDeclaration"),!(this.type===h.types._in||6<=this.options.ecmaVersion&&this.isContextual("of"))||1!==r.declarations.length||"var"!==e&&r.declarations[0].init?this.parseFor(t,r):this.parseForIn(t,r)}return e=this.parseExpression(!0,r={shorthandAssign:0,trailingComma:0}),this.type===h.types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?(this.checkPatternErrors(r,!0),this.toAssignable(e),this.checkLVal(e),this.parseForIn(t,e)):(this.checkExpressionErrors(r,!0),this.parseFor(t,e))},t.parseFunctionStatement=function(t){return this.next(),this.parseFunction(t,!0)},t.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(!1),t.alternate=this.eat(h.types._else)?this.parseStatement(!1):null,this.finishNode(t,"IfStatement")},t.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(h.types.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},t.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(h.types.braceL),this.labels.push(a);for(var e,r,n=!1;this.type!=h.types.braceR;)this.type===h.types._case||this.type===h.types._default?(r=this.type===h.types._case,e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(h.types.colon)):(e||this.unexpected(),e.consequent.push(this.parseStatement(!0)));return e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},t.parseThrowStatement=function(t){return this.next(),n.lineBreak.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var o=[];t.parseTryStatement=function(t){var e;return this.next(),t.block=this.parseBlock(),t.handler=null,this.type===h.types._catch&&(e=this.startNode(),this.next(),this.expect(h.types.parenL),e.param=this.parseBindingAtom(),this.checkLVal(e.param,!0),this.expect(h.types.parenR),e.body=this.parseBlock(),t.handler=this.finishNode(e,"CatchClause")),t.finalizer=this.eat(h.types._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},t.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},t.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(s),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"WhileStatement")},t.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(!1),this.finishNode(t,"WithStatement")},t.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},t.parseLabeledStatement=function(t,e,r){for(var n=0;n<this.labels.length;++n)this.labels[n].name===e&&this.raise(r.start,"Label '"+e+"' is already declared");for(var i=this.type.isLoop?"loop":this.type===h.types._switch?"switch":null,n=this.labels.length-1;0<=n;n--){var s=this.labels[n];if(s.statementStart!=t.start)break;s.statementStart=this.start,s.kind=i}return this.labels.push({name:e,kind:i,statementStart:this.start}),t.body=this.parseStatement(!0),this.labels.pop(),t.label=r,this.finishNode(t,"LabeledStatement")},t.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},t.parseBlock=function(t){var e=this.startNode(),r=!0,n=void 0;for(e.body=[],this.expect(h.types.braceL);!this.eat(h.types.braceR);){var i=this.parseStatement(!0);e.body.push(i),r&&t&&this.isUseStrict(i)&&(n=this.strict,this.setStrict(this.strict=!0)),r=!1}return!1===n&&this.setStrict(!1),this.finishNode(e,"BlockStatement")},t.parseFor=function(t,e){return t.init=e,this.expect(h.types.semi),t.test=this.type===h.types.semi?null:this.parseExpression(),this.expect(h.types.semi),t.update=this.type===h.types.parenR?null:this.parseExpression(),this.expect(h.types.parenR),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"ForStatement")},t.parseForIn=function(t,e){var r=this.type===h.types._in?"ForInStatement":"ForOfStatement";return this.next(),t.left=e,t.right=this.parseExpression(),this.expect(h.types.parenR),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,r)},t.parseVar=function(t,e,r){for(t.declarations=[],t.kind=r;;){var n=this.startNode();if(this.parseVarId(n),this.eat(h.types.eq)?n.init=this.parseMaybeAssign(e):"const"!==r||this.type===h.types._in||6<=this.options.ecmaVersion&&this.isContextual("of")?"Identifier"==n.id.type||e&&(this.type===h.types._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(h.types.comma))break}return t},t.parseVarId=function(t){t.id=this.parseBindingAtom(),this.checkLVal(t.id,!0)},t.parseFunction=function(t,e,r){this.initFunction(t),6<=this.options.ecmaVersion&&(t.generator=this.eat(h.types.star));var n=this.inGenerator;return this.inGenerator=t.generator,!e&&this.type!==h.types.name||(t.id=this.parseIdent()),this.parseFunctionParams(t),this.parseFunctionBody(t,r),this.inGenerator=n,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},t.parseFunctionParams=function(t){this.expect(h.types.parenL),t.params=this.parseBindingList(h.types.parenR,!1,!1,!0)},t.parseClass=function(t,e){this.next(),this.parseClassId(t,e),this.parseClassSuper(t);var r,n,i,s,a=this.startNode(),o=!1;for(a.body=[],this.expect(h.types.braceL);!this.eat(h.types.braceR);)this.eat(h.types.semi)||(r=this.startNode(),n=this.eat(h.types.star),i=this.type===h.types.name&&"static"===this.value,this.parsePropertyName(r),r.static=i&&this.type!==h.types.parenL,r.static&&(n&&this.unexpected(),n=this.eat(h.types.star),this.parsePropertyName(r)),i=!(r.kind="method"),r.computed||(s=r.key,n||"Identifier"!==s.type||this.type===h.types.parenL||"get"!==s.name&&"set"!==s.name||(i=!0,r.kind=s.name,s=this.parsePropertyName(r)),!r.static&&("Identifier"===s.type&&"constructor"===s.name||"Literal"===s.type&&"constructor"===s.value)&&(o&&this.raise(s.start,"Duplicate constructor in the same class"),i&&this.raise(s.start,"Constructor can't have get/set modifier"),n&&this.raise(s.start,"Constructor can't be a generator"),r.kind="constructor",o=!0)),this.parseClassMethod(a,r,n),i&&(r.value.params.length!==("get"===r.kind?0:1)&&(n=r.value.start,"get"===r.kind?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raise(r.value.params[0].start,"Setter cannot use rest params")));return t.body=this.finishNode(a,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},t.parseClassMethod=function(t,e,r){e.value=this.parseMethod(r),t.body.push(this.finishNode(e,"MethodDefinition"))},t.parseClassId=function(t,e){t.id=this.type===h.types.name?this.parseIdent():e?this.unexpected():null},t.parseClassSuper=function(t){t.superClass=this.eat(h.types._extends)?this.parseExprSubscripts():null},t.parseExport=function(t){if(this.next(),this.eat(h.types.star))return this.expectContextual("from"),t.source=this.type===h.types.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(h.types._default)){var e=this.type==h.types.parenL,r=this.parseMaybeAssign(),n=!0;return e||"FunctionExpression"!=r.type&&"ClassExpression"!=r.type||(n=!1,r.id&&(r.type="FunctionExpression"==r.type?"FunctionDeclaration":"ClassDeclaration")),t.declaration=r,n&&this.semicolon(),this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(!0),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(),this.eatContextual("from"))t.source=this.type===h.types.string?this.parseExprAtom():this.unexpected();else{for(e=0;e<t.specifiers.length;e++)(this.keywords.test(t.specifiers[e].local.name)||this.reservedWords.test(t.specifiers[e].local.name))&&this.unexpected(t.specifiers[e].local.start);t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},t.shouldParseExportStatement=function(){return this.type.keyword||this.isLet()},t.parseExportSpecifiers=function(){var t=[],e=!0;for(this.expect(h.types.braceL);!this.eat(h.types.braceR);){if(e)e=!1;else if(this.expect(h.types.comma),this.afterTrailingComma(h.types.braceR))break;var r=this.startNode();r.local=this.parseIdent(this.type===h.types._default),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,t.push(this.finishNode(r,"ExportSpecifier"))}return t},t.parseImport=function(t){return this.next(),this.type===h.types.string?(t.specifiers=o,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===h.types.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},t.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===h.types.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(h.types.comma))return t}if(this.type===h.types.star)return r=this.startNode(),this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t;for(this.expect(h.types.braceL);!this.eat(h.types.braceR);){if(e)e=!1;else if(this.expect(h.types.comma),this.afterTrailingComma(h.types.braceR))break;(r=this.startNode()).imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(r.local=r.imported,this.isKeyword(r.local.name)&&this.unexpected(r.local.start),this.reservedWordsStrict.test(r.local.name)&&this.raise(r.local.start,"The keyword '"+r.local.name+"' is reserved")),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportSpecifier"))}return t}},{"./identifier":2,"./state":10,"./tokentype":14,"./whitespace":16}],12:[function(t,e,r){r.__esModule=!0,e=t("./state");var n=t("./tokentype"),i=t("./whitespace"),s={b_stat:new(r.TokContext=t=function t(e,r,n,i){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");this.token=e,this.isExpr=!!r,this.preserveSpace=!!n,this.override=i})("{",!1),b_expr:new t("{",!0),b_tmpl:new t("${",!0),p_stat:new t("(",!1),p_expr:new t("(",!0),q_tmpl:new t("`",!0,!0,function(t){return t.readTmplToken()}),f_expr:new t("function",!0)};r.types=s,(r=e.Parser.prototype).initialContext=function(){return[s.b_stat]},r.braceIsBlock=function(t){if(t===n.types.colon){var e=this.curContext();if(e===s.b_stat||e===s.b_expr)return!e.isExpr}return t===n.types._return?i.lineBreak.test(this.input.slice(this.lastTokEnd,this.start)):t===n.types._else||t===n.types.semi||t===n.types.eof||t===n.types.parenR||(t==n.types.braceL?this.curContext()===s.b_stat:!this.exprAllowed)},r.updateContext=function(t){var e,r=this.type;r.keyword&&t==n.types.dot?this.exprAllowed=!1:(e=r.updateContext)?e.call(this,t):this.exprAllowed=r.beforeExpr},n.types.parenR.updateContext=n.types.braceR.updateContext=function(){var t;1==this.context.length?this.exprAllowed=!0:(t=this.context.pop())===s.b_stat&&this.curContext()===s.f_expr?(this.context.pop(),this.exprAllowed=!1):this.exprAllowed=t===s.b_tmpl||!t.isExpr},n.types.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?s.b_stat:s.b_expr),this.exprAllowed=!0},n.types.dollarBraceL.updateContext=function(){this.context.push(s.b_tmpl),this.exprAllowed=!0},n.types.parenL.updateContext=function(t){this.context.push(t===n.types._if||t===n.types._for||t===n.types._with||t===n.types._while?s.p_stat:s.p_expr),this.exprAllowed=!0},n.types.incDec.updateContext=function(){},n.types._function.updateContext=function(t){!t.beforeExpr||t===n.types.semi||t===n.types._else||t===n.types.colon&&this.curContext()===s.b_stat||this.context.push(s.f_expr),this.exprAllowed=!1},n.types.backQuote.updateContext=function(){this.curContext()===s.q_tmpl?this.context.pop():this.context.push(s.q_tmpl),this.exprAllowed=!1}},{"./state":10,"./tokentype":14,"./whitespace":16}],13:[function(t,e,r){function a(t,e,r,n){try{return new RegExp(t,e)}catch(t){if(void 0!==r)throw t instanceof SyntaxError&&n.raise(r,"Error parsing regular expression: "+t.message),t}}function s(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}r.__esModule=!0;var o=t("./identifier"),h=t("./tokentype");e=t("./state");function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new i.SourceLocation(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])}var i=t("./locutil"),l=t("./whitespace");r.Token=n,t=e.Parser.prototype;var f="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);t.next=function(){this.options.onToken&&this.options.onToken(new n(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},t.getToken=function(){return this.next(),new n(this)},"undefined"!=typeof Symbol&&(t[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===h.types.eof,value:t}}}}),t.setStrict=function(t){if(this.strict=t,this.type===h.types.num||this.type===h.types.string){if(this.pos=this.start,this.options.locations)for(;this.pos<this.lineStart;)this.lineStart=this.input.lastIndexOf("\n",this.lineStart-2)+1,--this.curLine;this.nextToken()}},t.curContext=function(){return this.context[this.context.length-1]},t.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(h.types.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},t.readToken=function(t){return o.isIdentifierStart(t,6<=this.options.ecmaVersion)||92===t?this.readWord():this.getTokenFromCode(t)},t.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||57344<=t?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},t.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations){l.lineBreakG.lastIndex=e;for(var n;(n=l.lineBreakG.exec(this.input))&&n.index<this.pos;)++this.curLine,this.lineStart=n.index+n[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,r),e,this.pos,t,this.curPosition())},t.skipLineComment=function(t){for(var e=this.pos,r=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&10!==n&&13!==n&&8232!==n&&8233!==n;)++this.pos,n=this.input.charCodeAt(this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,r,this.curPosition())},t.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(8<t&&t<14||5760<=t&&l.nonASCIIwhitespace.test(String.fromCharCode(t))))break t;++this.pos}}},t.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=t,this.value=e,this.updateContext(r)},t.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(48<=t&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return 6<=this.options.ecmaVersion&&46===t&&46===e?(this.pos+=3,this.finishToken(h.types.ellipsis)):(++this.pos,this.finishToken(h.types.dot))},t.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(h.types.assign,2):this.finishOp(h.types.slash,1)},t.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return t=42===t?h.types.star:h.types.modulo,7<=this.options.ecmaVersion&&42===e&&(++r,t=h.types.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(h.types.assign,r+1):this.finishOp(t,r)},t.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?h.types.logicalOR:h.types.logicalAND,2):61===e?this.finishOp(h.types.assign,2):this.finishOp(124===t?h.types.bitwiseOR:h.types.bitwiseAND,1)},t.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(h.types.assign,2):this.finishOp(h.types.bitwiseXOR,1)},t.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45==e&&62==this.input.charCodeAt(this.pos+2)&&l.lineBreak.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(h.types.incDec,2):61===e?this.finishOp(h.types.assign,2):this.finishOp(h.types.plusMin,1)},t.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),r=1;return e===t?(r=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(h.types.assign,r+1):this.finishOp(h.types.bitShift,r)):33==e&&60==t&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&this.unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):this.finishOp(h.types.relational,r=61===e?2:r)},t.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(h.types.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(h.types.arrow)):this.finishOp(61===t?h.types.eq:h.types.prefix,1)},t.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(h.types.parenL);case 41:return++this.pos,this.finishToken(h.types.parenR);case 59:return++this.pos,this.finishToken(h.types.semi);case 44:return++this.pos,this.finishToken(h.types.comma);case 91:return++this.pos,this.finishToken(h.types.bracketL);case 93:return++this.pos,this.finishToken(h.types.bracketR);case 123:return++this.pos,this.finishToken(h.types.braceL);case 125:return++this.pos,this.finishToken(h.types.braceR);case 58:return++this.pos,this.finishToken(h.types.colon);case 63:return++this.pos,this.finishToken(h.types.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(h.types.backQuote);case 48:if(120===(t=this.input.charCodeAt(this.pos+1))||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(h.types.prefix,1)}this.raise(this.pos,"Unexpected character '"+s(t)+"'")},t.finishOp=function(t,e){var r=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,r)};var u=!!a("￿","u");t.readRegexp=function(){for(var t,n=this,e=void 0,r=void 0,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var s=this.input.charAt(this.pos);if(l.lineBreak.test(s)&&this.raise(i,"Unterminated regular expression"),e)e=!1;else{if("["===s)r=!0;else if("]"===s&&r)r=!1;else if("/"===s&&!r)break;e="\\"===s}++this.pos}return e=this.input.slice(i,this.pos),++this.pos,s=e,(r=this.readWord1())&&(t=/^[gim]*$/,(t=6<=this.options.ecmaVersion?/^[gimuy]*$/:t).test(r)||this.raise(i,"Invalid regular expression flag"),0<=r.indexOf("u")&&!u&&(s=(s=s.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,e,r){return 1114111<(e=Number("0x"+e))&&n.raise(i+r+3,"Code point out of bounds"),"x"})).replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"))),t=null,f||(a(s,void 0,i,this),t=a(e,r)),this.finishToken(h.types.regexp,{pattern:e,flags:r,value:t})},t.readInt=function(t,e){for(var r=this.pos,n=0,i=0,s=null==e?1/0:e;i<s;++i){var a=this.input.charCodeAt(this.pos);if(t<=(a=97<=a?a-97+10:65<=a?a-65+10:48<=a&&a<=57?a-48:1/0))break;++this.pos,n=n*t+a}return this.pos===r||null!=e&&this.pos-r!==e?null:n},t.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),o.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(h.types.num,e)},t.readNumber=function(t){var e=this.pos,r=!1,n=48===this.input.charCodeAt(this.pos);t||null!==this.readInt(10)||this.raise(e,"Invalid number"),46===(t=this.input.charCodeAt(this.pos))&&(++this.pos,this.readInt(10),r=!0,t=this.input.charCodeAt(this.pos)),69!==t&&101!==t||(43!==(t=this.input.charCodeAt(++this.pos))&&45!==t||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number"),r=!0),o.isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),t=this.input.slice(e,this.pos);var i=void 0;return r?i=parseFloat(t):n&&1!==t.length?/[89]/.test(t)||this.strict?this.raise(e,"Invalid number"):i=parseInt(t,8):i=parseInt(t,10),this.finishToken(h.types.num,i)},t.readCodePoint=function(){var t,e;return 123===this.input.charCodeAt(this.pos)?(this.options.ecmaVersion<6&&this.unexpected(),t=++this.pos,e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,1114111<e&&this.raise(t,"Code point out of bounds")):e=this.readHexChar(4),e},t.readString=function(t){for(var e="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;92===n?(e+=this.input.slice(r,this.pos),e+=this.readEscapedChar(!1),r=this.pos):(l.isNewLine(n)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(r,this.pos++),this.finishToken(h.types.string,e)},t.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos===this.start&&this.type===h.types.template?36===r?(this.pos+=2,this.finishToken(h.types.dollarBraceL)):(++this.pos,this.finishToken(h.types.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(h.types.template,t));if(92===r)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(l.isNewLine(r)){switch(t+=this.input.slice(e,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},t.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return s(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(48<=e&&e<=55){var e=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(e,8);return 255<r&&(e=e.slice(0,-1),r=parseInt(e,8)),"0"!==e&&(this.strict||t)&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=e.length-1,String.fromCharCode(r)}return String.fromCharCode(e)}},t.readHexChar=function(t){var e=this.pos;return null===(t=this.readInt(16,t))&&this.raise(e,"Bad character escape sequence"),t},t.readWord1=function(){for(var t="",e=!(this.containsEsc=!1),r=this.pos,n=6<=this.options.ecmaVersion;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(o.isIdentifierChar(i,n))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(r,this.pos),r=this.pos,117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos,i=this.readCodePoint(),(e?o.isIdentifierStart:o.isIdentifierChar)(i,n)||this.raise(r,"Invalid Unicode escape"),t+=s(i),r=this.pos}e=!1}return t+this.input.slice(r,this.pos)},t.readWord=function(){var t=this.readWord1(),e=h.types.name;return(6<=this.options.ecmaVersion||!this.containsEsc)&&this.keywords.test(t)&&(e=h.keywords[t]),this.finishToken(e,t)}},{"./identifier":2,"./locutil":5,"./state":10,"./tokentype":14,"./whitespace":16}],14:[function(t,e,r){function n(t,e){return new s(t,{beforeExpr:!0,binop:e})}function i(t,e){var r=arguments.length<=1||void 0===e?{}:e;r.keyword=t,o[t]=a["_"+t]=new s(t,r)}r.__esModule=!0;function s(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null}t={beforeExpr:!0};var a={num:new(r.TokenType=s)("num",e={startsExpr:!0}),regexp:new s("regexp",e),string:new s("string",e),name:new s("name",e),eof:new s("eof"),bracketL:new s("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new s("]"),braceL:new s("{",{beforeExpr:!0,startsExpr:!0}),braceR:new s("}"),parenL:new s("(",{beforeExpr:!0,startsExpr:!0}),parenR:new s(")"),comma:new s(",",t),semi:new s(";",t),colon:new s(":",t),dot:new s("."),question:new s("?",t),arrow:new s("=>",t),template:new s("template"),ellipsis:new s("...",t),backQuote:new s("`",e),dollarBraceL:new s("${",{beforeExpr:!0,startsExpr:!0}),eq:new s("=",{beforeExpr:!0,isAssign:!0}),assign:new s("_=",{beforeExpr:!0,isAssign:!0}),incDec:new s("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new s("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:n("||",1),logicalAND:n("&&",2),bitwiseOR:n("|",3),bitwiseXOR:n("^",4),bitwiseAND:n("&",5),equality:n("==/!=",6),relational:n("</>",7),bitShift:n("<</>>",8),plusMin:new s("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:n("%",10),star:n("*",10),slash:n("/",10),starstar:new s("**",{beforeExpr:!0})};r.types=a;var o={};r.keywords=o,i("break"),i("case",t),i("catch"),i("continue"),i("debugger"),i("default",t),i("do",{isLoop:!0,beforeExpr:!0}),i("else",t),i("finally"),i("for",{isLoop:!0}),i("function",e),i("if"),i("return",t),i("switch"),i("throw",t),i("try"),i("var"),i("const"),i("while",{isLoop:!0}),i("with"),i("new",{beforeExpr:!0,startsExpr:!0}),i("this",e),i("super",e),i("class"),i("extends",t),i("export"),i("import"),i("null",e),i("true",e),i("false",e),i("in",{beforeExpr:!0,binop:7}),i("instanceof",{beforeExpr:!0,binop:7}),i("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),i("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),i("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},{}],15:[function(t,e,r){r.__esModule=!0,r.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.has=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},{}],16:[function(t,e,r){r.__esModule=!0,r.isNewLine=function(t){return 10===t||13===t||8232===t||8233==t},r.lineBreak=t=/\r\n?|\n|\u2028|\u2029/,r.lineBreakG=new RegExp(t.source,"g"),r.nonASCIIwhitespace=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,r.skipWhiteSpace=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g},{}]},{},[3])(3)});var UPNG={toRGBA8:function(t){var e=t.width,r=t.height;if(null==t.tabs.acTL)return[UPNG.toRGBA8.decodeImage(t.data,e,r,t).buffer];var n=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var i=e*r*4,s=new Uint8Array(i),a=new Uint8Array(i),o=new Uint8Array(i),h=0;h<t.frames.length;h++){var l=t.frames[h],f=l.rect.x,u=l.rect.y,c=l.rect.width,p=l.rect.height,d=UPNG.toRGBA8.decodeImage(l.data,c,p,t);if(0!=h)for(var g=0;g<i;g++)o[g]=s[g];if(0==l.blend?UPNG._copyTile(d,c,p,s,e,r,f,u,0):1==l.blend&&UPNG._copyTile(d,c,p,s,e,r,f,u,1),n.push(s.buffer.slice(0)),0!=l.dispose)if(1==l.dispose)UPNG._copyTile(a,c,p,s,e,r,f,u,0);else if(2==l.dispose)for(g=0;g<i;g++)s[g]=o[g]}return n}};UPNG.toRGBA8.decodeImage=function(t,e,r,n){var i=e*r,s=UPNG.decode._getBPP(n),a=Math.ceil(e*s/8),o=new Uint8Array(4*i),h=new Uint32Array(o.buffer),l=n.ctype,f=n.depth,u=UPNG._bin.readUshort;Date.now();if(6==l){var c=i<<2;if(8==f)for(var p=0;p<c;p+=4)o[p]=t[p],o[p+1]=t[p+1],o[p+2]=t[p+2],o[p+3]=t[p+3];if(16==f)for(p=0;p<c;p++)o[p]=t[p<<1]}else if(2==l){s=n.tabs.tRNS;if(null==s){if(8==f)for(p=0;p<i;p++){var d=3*p;h[p]=255<<24|t[d+2]<<16|t[d+1]<<8|t[d]}if(16==f)for(p=0;p<i;p++){d=6*p;h[p]=255<<24|t[d+4]<<16|t[d+2]<<8|t[d]}}else{var g=s[0],v=s[1],m=s[2];if(8==f)for(p=0;p<i;p++){var _=p<<2,d=3*p;h[p]=255<<24|t[d+2]<<16|t[d+1]<<8|t[d],t[d]==g&&t[d+1]==v&&t[d+2]==m&&(o[_+3]=0)}if(16==f)for(p=0;p<i;p++){_=p<<2,d=6*p;h[p]=255<<24|t[d+4]<<16|t[d+2]<<8|t[d],u(t,d)==g&&u(t,d+2)==v&&u(t,d+4)==m&&(o[_+3]=0)}}}else if(3==l){var y=n.tabs.PLTE,w=n.tabs.tRNS,b=w?w.length:0;if(1==f)for(var x=0;x<r;x++)for(var S=x*a,C=x*e,p=0;p<e;p++){var _=C+p<<2,P=3*(k=t[S+(p>>3)]>>7-((7&p)<<0)&1);o[_]=y[P],o[_+1]=y[P+1],o[_+2]=y[P+2],o[_+3]=k<b?w[k]:255}if(2==f)for(x=0;x<r;x++)for(S=x*a,C=x*e,p=0;p<e;p++){_=C+p<<2,P=3*(k=t[S+(p>>2)]>>6-((3&p)<<1)&3);o[_]=y[P],o[_+1]=y[P+1],o[_+2]=y[P+2],o[_+3]=k<b?w[k]:255}if(4==f)for(x=0;x<r;x++)for(S=x*a,C=x*e,p=0;p<e;p++){_=C+p<<2,P=3*(k=t[S+(p>>1)]>>4-((1&p)<<2)&15);o[_]=y[P],o[_+1]=y[P+1],o[_+2]=y[P+2],o[_+3]=k<b?w[k]:255}if(8==f)for(p=0;p<i;p++){var k,_=p<<2,P=3*(k=t[p]);o[_]=y[P],o[_+1]=y[P+1],o[_+2]=y[P+2],o[_+3]=k<b?w[k]:255}}else if(4==l){if(8==f)for(p=0;p<i;p++){var _=p<<2,T=t[I=p<<1];o[_]=T,o[_+1]=T,o[_+2]=T,o[_+3]=t[I+1]}if(16==f)for(p=0;p<i;p++){var I,_=p<<2,T=t[I=p<<2];o[_]=T,o[_+1]=T,o[_+2]=T,o[_+3]=t[I+2]}}else if(0==l)for(g=n.tabs.tRNS||-1,x=0;x<r;x++){var M=x*a,F=x*e;if(1==f)for(var A=0;A<e;A++){var E=(T=255*(t[M+(A>>>3)]>>>7-(7&A)&1))==255*g?0:255;h[F+A]=E<<24|T<<16|T<<8|T}else if(2==f)for(A=0;A<e;A++){E=(T=85*(t[M+(A>>>2)]>>>6-((3&A)<<1)&3))==85*g?0:255;h[F+A]=E<<24|T<<16|T<<8|T}else if(4==f)for(A=0;A<e;A++){E=(T=17*(t[M+(A>>>1)]>>>4-((1&A)<<2)&15))==17*g?0:255;h[F+A]=E<<24|T<<16|T<<8|T}else if(8==f)for(A=0;A<e;A++){E=(T=t[M+A])==g?0:255;h[F+A]=E<<24|T<<16|T<<8|T}else if(16==f)for(A=0;A<e;A++){T=t[M+(A<<1)],E=u(t,M+(A<<1))==g?0:255;h[F+A]=E<<24|T<<16|T<<8|T}}return o},UPNG.decode=function(t){for(var e,r=new Uint8Array(t),n=8,i=UPNG._bin,s=i.readUshort,a=i.readUint,o={tabs:{},frames:[]},h=new Uint8Array(r.length),l=0,f=0,u=[137,80,78,71,13,10,26,10],c=0;c<8;c++)if(r[c]!=u[c])throw"The input is not a PNG file!";for(;n<r.length;){var p=i.readUint(r,n);n+=4;var d,g=i.readASCII(r,n,4);if(n+=4,"IHDR"==g)UPNG.decode._IHDR(r,n,o);else if("iCCP"==g){for(var v=n;0!=r[v];)v++;i.readASCII(r,n,v-n),r[v+1];var m=r.slice(v+2,n+p);o.tabs[g]=UPNG.decode._inflate(m)}else if("CgBI"==g)o.tabs[g]=r.slice(n,n+4);else if("IDAT"==g){for(c=0;c<p;c++)h[l+c]=r[n+c];l+=p}else if("acTL"==g)o.tabs[g]={num_frames:a(r,n),num_plays:a(r,n+4)},e=new Uint8Array(r.length);else if("fcTL"==g){0!=f&&((d=o.frames[o.frames.length-1]).data=UPNG.decode._decompress(o,e.slice(0,f),d.rect.width,d.rect.height),f=0);var m={x:a(r,n+12),y:a(r,n+16),width:a(r,n+4),height:a(r,n+8)},_=s(r,n+22),_=s(r,n+20)/(0==_?100:_),_={rect:m,delay:Math.round(1e3*_),dispose:r[n+24],blend:r[n+25]};o.frames.push(_)}else if("fdAT"==g){for(c=0;c<p-4;c++)e[f+c]=r[n+c+4];f+=p-4}else if("pHYs"==g)o.tabs[g]=[i.readUint(r,n),i.readUint(r,n+4),r[n+8]];else if("cHRM"==g){o.tabs[g]=[];for(c=0;c<8;c++)o.tabs[g].push(i.readUint(r,n+4*c))}else if("tEXt"==g||"zTXt"==g){null==o.tabs[g]&&(o.tabs[g]={});var y=i.nextZero(r,n),w=i.readASCII(r,n,y-n),b=n+p-y-1;x="tEXt"==g?i.readASCII(r,y+1,b):(S=UPNG.decode._inflate(r.slice(y+2,y+2+b)),i.readUTF8(S,0,S.length)),o.tabs[g][w]=x}else if("iTXt"==g){null==o.tabs[g]&&(o.tabs[g]={});y=0,v=n;y=i.nextZero(r,v);w=i.readASCII(r,v,y-v),_=r[v=y+1],r[v+1];v+=2,y=i.nextZero(r,v);i.readASCII(r,v,y-v);y=i.nextZero(r,v=y+1);i.readUTF8(r,v,y-v);var x,S,b=p-((v=y+1)-n);x=0==_?i.readUTF8(r,v,b):(S=UPNG.decode._inflate(r.slice(v,v+b)),i.readUTF8(S,0,S.length)),o.tabs[g][w]=x}else if("PLTE"==g)o.tabs[g]=i.readBytes(r,n,p);else if("hIST"==g){var C=o.tabs.PLTE.length/3;o.tabs[g]=[];for(c=0;c<C;c++)o.tabs[g].push(s(r,n+2*c))}else if("tRNS"==g)3==o.ctype?o.tabs[g]=i.readBytes(r,n,p):0==o.ctype?o.tabs[g]=s(r,n):2==o.ctype&&(o.tabs[g]=[s(r,n),s(r,n+2),s(r,n+4)]);else if("gAMA"==g)o.tabs[g]=i.readUint(r,n)/1e5;else if("sRGB"==g)o.tabs[g]=r[n];else if("bKGD"==g)0==o.ctype||4==o.ctype?o.tabs[g]=[s(r,n)]:2==o.ctype||6==o.ctype?o.tabs[g]=[s(r,n),s(r,n+2),s(r,n+4)]:3==o.ctype&&(o.tabs[g]=r[n]);else if("IEND"==g)break;n+=p;i.readUint(r,n);n+=4}return 0!=f&&((d=o.frames[o.frames.length-1]).data=UPNG.decode._decompress(o,e.slice(0,f),d.rect.width,d.rect.height)),o.data=UPNG.decode._decompress(o,h,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o},UPNG.decode._decompress=function(t,e,r,n){Date.now();var i=UPNG.decode._getBPP(t),i=Math.ceil(r*i/8),i=new Uint8Array((i+1+t.interlace)*n);e=t.tabs.CgBI?UPNG.inflateRaw(e,i):UPNG.decode._inflate(e,i);Date.now();return 0==t.interlace?e=UPNG.decode._filterZero(e,t,0,r,n):1==t.interlace&&(e=UPNG.decode._readInterlace(e,t)),e},UPNG.decode._inflate=function(t,e){return UPNG.inflateRaw(new Uint8Array(t.buffer,2,t.length-6),e)},UPNG.inflateRaw=function(){var t,e,E={H:{}};return E.H.N=function(t,e){var r,n=Uint8Array,i=0,s=0,a=0,o=0,h=0;if(3==t[0]&&0==t[1])return e||new n(0);var l=E.H,f=l.b,u=l.e,c=l.R,p=l.n,d=l.A,g=l.Z,v=l.m,m=null==e;for(m&&(e=new n(t.length>>>2<<5));0==i;)if(i=f(t,h,1),r=f(t,h+1,2),h+=3,0!=r){if(m&&(e=E.H.W(e,o+(1<<17))),1==r&&(C=v.J,P=v.h,s=511,a=31),2==r){for(var _=u(t,h,5)+257,y=u(t,h+5,5)+1,w=u(t,h+10,4)+4,b=(h+=14,1),x=0;x<38;x+=2)v.Q[x]=0,v.Q[x+1]=0;for(x=0;x<w;x++){var S=u(t,h+3*x,3);b<(v.Q[1+(v.X[x]<<1)]=S)&&(b=S)}h+=3*w,p(v.Q,b),d(v.Q,b,v.u);var C=v.w,P=v.d,h=c(v.u,(1<<b)-1,_+y,t,h,v.v),k=l.V(v.v,0,_,v.C),s=(1<<k)-1,T=l.V(v.v,_,y,v.D),a=(1<<T)-1;p(v.C,k),d(v.C,k,C),p(v.D,T),d(v.D,T,P)}for(;;){var I=C[g(t,h)&s];h+=15&I;I=I>>>4;if(I>>>8==0)e[o++]=I;else{if(256==I)break;var M=o+I-254;264<I&&(M=o+((F=v.q[I-257])>>>3)+u(t,h,7&F),h+=7&F);var F=P[g(t,h)&a];h+=15&F;var F=v.c[F>>>4],A=(F>>>4)+f(t,h,15&F);for(h+=15&F;o<M;)e[o]=e[o++-A],e[o]=e[o++-A],e[o]=e[o++-A],e[o]=e[o++-A];o=M}}}else{0!=(7&h)&&(h+=8-(7&h));k=4+(h>>>3),T=t[k-4]|t[k-3]<<8;(e=m?E.H.W(e,o+T):e).set(new n(t.buffer,t.byteOffset+k,T),o),h=k+T<<3,o+=T}return e.length==o?e:e.slice(0,o)},E.H.W=function(t,e){var r=t.length;if(e<=r)return t;r=new Uint8Array(r<<1);return r.set(t,0),r},E.H.R=function(t,e,r,n,i,s){for(var a=E.H.e,o=E.H.Z,h=0;h<r;){var l=t[o(n,i)&e];i+=15&l;var f=l>>>4;if(f<=15)s[h]=f,h++;else{var u=0,l=0;16==f?(l=3+a(n,i,2),i+=2,u=s[h-1]):17==f?(l=3+a(n,i,3),i+=3):18==f&&(l=11+a(n,i,7),i+=7);for(var c=h+l;h<c;)s[h]=u,h++}}return i},E.H.V=function(t,e,r,n){for(var i=0,s=0,a=n.length>>>1;s<r;){var o=t[s+e];n[s<<1]=0,i<(n[1+(s<<1)]=o)&&(i=o),s++}for(;s<a;)n[s<<1]=0,n[1+(s<<1)]=0,s++;return i},E.H.n=function(t,e){for(var r,n,i,s=E.H.m,a=t.length,o=s.j,h=0;h<=e;h++)o[h]=0;for(h=1;h<a;h+=2)o[t[h]]++;var l=s.K,f=0;for(o[0]=0,r=1;r<=e;r++)f=f+o[r-1]<<1,l[r]=f;for(n=0;n<a;n+=2)0!=(i=t[n+1])&&(t[n]=l[i],l[i]++)},E.H.A=function(t,e,r){for(var n=t.length,i=E.H.m.r,s=0;s<n;s+=2)if(0!=t[s+1])for(var a=t[s+1],o=s>>1<<4|a,a=e-a,h=t[s]<<a,l=h+(1<<a);h!=l;)r[i[h]>>>15-e]=o,h++},E.H.l=function(t,e){for(var r=E.H.m.r,n=15-e,i=0;i<t.length;i+=2){var s=t[i]<<e-t[i+1];t[i]=r[s]>>>n}},E.H.M=function(t,e,r){var n=e>>>3;t[n]|=r<<=7&e,t[1+n]|=r>>>8},E.H.I=function(t,e,r){var n=e>>>3;t[n]|=r<<=7&e,t[1+n]|=r>>>8,t[2+n]|=r>>>16},E.H.e=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<r)-1},E.H.b=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<r)-1},E.H.Z=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},E.H.i=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},E.H.m=(t=Uint16Array,e=Uint32Array,{K:new t(16),j:new t(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new t(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new e(32),J:new t(512),_:[],h:new t(32),$:[],w:new t(32768),C:[],v:[],d:new t(32768),D:[],u:new t(512),Q:[],r:new t(32768),s:new e(286),Y:new e(30),a:new e(19),t:new e(15e3),k:new t(65536),g:new t(32768)}),function(){for(var t=E.H.m,e=0;e<32768;e++){var r=e;t.r[e]=((r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8)>>>16|r<<16)>>>17}function n(t,e,r){for(;0!=e--;)t.push(0,r)}for(e=0;e<32;e++)t.q[e]=t.S[e]<<3|t.T[e],t.c[e]=t.p[e]<<4|t.z[e];n(t._,144,8),n(t._,112,9),n(t._,24,7),n(t._,8,8),E.H.n(t._,9),E.H.A(t._,9,t.J),E.H.l(t._,9),n(t.$,32,5),E.H.n(t.$,5),E.H.A(t.$,5,t.h),E.H.l(t.$,5),n(t.Q,19,0),n(t.C,286,0),n(t.D,30,0),n(t.v,320,0)}(),E.H.N}(),UPNG.decode._readInterlace=function(t,e){for(var r=e.width,n=e.height,i=UPNG.decode._getBPP(e),s=i>>3,a=Math.ceil(r*i/8),o=new Uint8Array(n*a),h=0,l=[0,0,4,0,2,0,1],f=[0,4,0,2,0,1,0],u=[8,8,8,4,4,2,2],c=[8,8,4,4,2,2,1],p=0;p<7;){for(var d=u[p],g=c[p],v=0,m=0,_=l[p];_<n;)_+=d,m++;for(var y=f[p];y<r;)y+=g,v++;var w=Math.ceil(v*i/8);UPNG.decode._filterZero(t,e,h,v,m);for(var b=0,x=l[p];x<n;){for(var S,C=f[p],P=h+b*w<<3;C<r;){if(1==i&&(S=t[P>>3],o[x*a+(C>>3)]|=(S=S>>7-(7&P)&1)<<7-((7&C)<<0)),2==i&&(S=t[P>>3],o[x*a+(C>>2)]|=(S=S>>6-(7&P)&3)<<6-((3&C)<<1)),4==i&&(S=t[P>>3],o[x*a+(C>>1)]|=(S=S>>4-(7&P)&15)<<4-((1&C)<<2)),8<=i)for(var k=x*a+C*s,T=0;T<s;T++)o[k+T]=t[(P>>3)+T];P+=i,C+=g}b++,x+=d}v*m!=0&&(h+=m*(1+w)),p+=1}return o},UPNG.decode._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},UPNG.decode._filterZero=function(t,e,r,n,i){var s,a,o=UPNG.decode._getBPP(e),h=Math.ceil(n*o/8),l=UPNG.decode._paeth,o=Math.ceil(o/8),f=t[r],u=0;if(1<f&&(t[r]=[0,0,1][f-2]),3==f)for(u=o;u<h;u++)t[u+1]=t[u+1]+(t[u+1-o]>>>1)&255;for(var c=0;c<i;c++)if((u=0)==(f=t[(a=(s=r+c*h)+c+1)-1]))for(;u<h;u++)t[s+u]=t[a+u];else if(1==f){for(;u<o;u++)t[s+u]=t[a+u];for(;u<h;u++)t[s+u]=t[a+u]+t[s+u-o]}else if(2==f)for(;u<h;u++)t[s+u]=t[a+u]+t[s+u-h];else if(3==f){for(;u<o;u++)t[s+u]=t[a+u]+(t[s+u-h]>>>1);for(;u<h;u++)t[s+u]=t[a+u]+(t[s+u-h]+t[s+u-o]>>>1)}else{for(;u<o;u++)t[s+u]=t[a+u]+l(0,t[s+u-h],0);for(;u<h;u++)t[s+u]=t[a+u]+l(t[s+u-o],t[s+u-h],t[s+u-o-h])}return t},UPNG.decode._paeth=function(t,e,r){var n=t+e-r,i=n-t,s=n-e,n=n-r;return i*i<=s*s&&i*i<=n*n?t:s*s<=n*n?e:r},UPNG.decode._IHDR=function(t,e,r){var n=UPNG._bin;r.width=n.readUint(t,e),r.height=n.readUint(t,e+=4),r.depth=t[e+=4],r.ctype=t[++e],r.compress=t[++e],r.filter=t[++e],r.interlace=t[++e],e++},UPNG._bin={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},readUint:function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},readBytes:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(t[e+i]);return n},pad:function(t){return t.length<2?"0"+t:t},readUTF8:function(e,r,n){for(var t,i="",s=0;s<n;s++)i+="%"+UPNG._bin.pad(e[r+s].toString(16));try{t=decodeURIComponent(i)}catch(t){return UPNG._bin.readASCII(e,r,n)}return t}},UPNG._copyTile=function(t,e,r,n,i,s,a,o,h){for(var l=Math.min(e,i),f=Math.min(r,s),u=0,c=0,p=0;p<f;p++)for(var d=0;d<l;d++)if(c=0<=a&&0<=o?(u=p*e+d<<2,(o+p)*i+a+d<<2):(u=(-o+p)*e-a+d<<2,p*i+d<<2),0==h)n[c]=t[u],n[c+1]=t[u+1],n[c+2]=t[u+2],n[c+3]=t[u+3];else if(1==h){var g=t[u+3]*(1/255),v=t[u]*g,m=t[u+1]*g,_=t[u+2]*g,y=n[c+3]*(1/255),w=n[c]*y,b=n[c+1]*y,x=n[c+2]*y,S=1-g,C=g+y*S,P=0==C?0:1/C;n[c+3]=255*C,n[c+0]=(v+w*S)*P,n[c+1]=(m+b*S)*P,n[c+2]=(_+x*S)*P}else if(2==h){g=t[u+3],v=t[u],m=t[u+1],_=t[u+2],y=n[c+3],w=n[c],b=n[c+1],x=n[c+2];g==y&&v==w&&m==b&&_==x?(n[c]=0,n[c+1]=0,n[c+2]=0,n[c+3]=0):(n[c]=v,n[c+1]=m,n[c+2]=_,n[c+3]=g)}else if(3==h){g=t[u+3],v=t[u],m=t[u+1],_=t[u+2],y=n[c+3],w=n[c],b=n[c+1],x=n[c+2];if((g!=y||v!=w||m!=b||_!=x)&&(g<220&&20<y))return!1}return!0},UPNG.encode=function(t,e,r,n,i,s,a){a=UPNG.encode.compress(t,e,r,n=null==n?0:n,[!1,!1,!1,0,a=null==a?!1:a,!1]);return UPNG.encode.compressPNG(a,-1),UPNG.encode._main(a,e,r,i,s)},UPNG.encodeLL=function(t,e,r,n,i,s,a,o){for(var h={ctype:0+(1==n?0:2)+(0==i?0:4),depth:s,frames:[]},l=(Date.now(),(n+i)*s),f=l*e,u=0;u<t.length;u++)h.frames.push({rect:{x:0,y:0,width:e,height:r},img:new Uint8Array(t[u]),blend:0,dispose:1,bpp:Math.ceil(l/8),bpl:Math.ceil(f/8)});return UPNG.encode.compressPNG(h,0,!0),UPNG.encode._main(h,e,r,a,o)},UPNG.encode._main=function(t,e,r,n,i){var s,a=UPNG.crc.crc,o=UPNG._bin.writeUint,h=UPNG._bin.writeUshort,l=UPNG._bin.writeASCII,f=8,u=1<t.frames.length,c=!1,p=33+(u?20:0);if(null!=(i=null==i?{}:i).sRGB&&(p+=13),null!=i.pHYs&&(p+=21),null!=i.iCCP&&(p+=21+(s=pako.deflate(i.iCCP)).length+4),3==t.ctype){for(var d=t.plte.length,g=0;g<d;g++)t.plte[g]>>>24!=255&&(c=!0);p+=8+3*d+4+(c?+d+8+4:0)}for(var v=0;v<t.frames.length;v++)u&&(p+=38),p+=(C=t.frames[v]).cimg.length+12,0!=v&&(p+=4);p+=12;for(var m=new Uint8Array(p),_=[137,80,78,71,13,10,26,10],g=0;g<8;g++)m[g]=_[g];if(o(m,f,13),l(m,f+=4,"IHDR"),o(m,f+=4,e),o(m,f+=4,r),m[f+=4]=t.depth,m[++f]=t.ctype,m[++f]=0,m[++f]=0,m[++f]=0,o(m,++f,a(m,f-17,17)),f+=4,null!=i.sRGB&&(o(m,f,1),l(m,f+=4,"sRGB"),m[f+=4]=i.sRGB,o(m,++f,a(m,f-5,5)),f+=4),null!=i.iCCP&&(o(m,f,r=13+s.length),l(m,f+=4,"iCCP"),l(m,f+=4,"ICC profile"),f+=11,m.set(s,f+=2),o(m,f+=s.length,a(m,f-(r+4),r+4)),f+=4),null!=i.pHYs&&(o(m,f,9),l(m,f+=4,"pHYs"),o(m,f+=4,i.pHYs[0]),o(m,f+=4,i.pHYs[1]),m[f+=4]=i.pHYs[2],o(m,++f,a(m,f-13,13)),f+=4),u&&(o(m,f,8),l(m,f+=4,"acTL"),o(m,f+=4,t.frames.length),o(m,f+=4,null!=i.loop?i.loop:0),o(m,f+=4,a(m,f-12,12)),f+=4),3==t.ctype){o(m,f,3*(d=t.plte.length)),l(m,f+=4,"PLTE"),f+=4;for(g=0;g<d;g++){var y=3*g,w=t.plte[g],b=w>>>8&255,x=w>>>16&255;m[f+y+0]=255&w,m[f+y+1]=b,m[f+y+2]=x}if(o(m,f+=3*d,a(m,f-3*d-4,3*d+4)),f+=4,c){o(m,f,d),l(m,f+=4,"tRNS"),f+=4;for(g=0;g<d;g++)m[f+g]=t.plte[g]>>>24&255;o(m,f+=d,a(m,f-d-4,d+4)),f+=4}}for(var S=0,v=0;v<t.frames.length;v++){var C=t.frames[v];u&&(o(m,f,26),l(m,f+=4,"fcTL"),o(m,f+=4,S++),o(m,f+=4,C.rect.width),o(m,f+=4,C.rect.height),o(m,f+=4,C.rect.x),o(m,f+=4,C.rect.y),h(m,f+=4,n[v]),h(m,f+=2,1e3),m[f+=2]=C.dispose,m[++f]=C.blend,o(m,++f,a(m,f-30,30)),f+=4);var P=C.cimg;o(m,f,(d=P.length)+(0==v?0:4));var k=f+=4;l(m,f,0==v?"IDAT":"fdAT"),f+=4,0!=v&&(o(m,f,S++),f+=4),m.set(P,f),o(m,f+=d,a(m,k,f-k)),f+=4}return o(m,f,0),l(m,f+=4,"IEND"),o(m,f+=4,a(m,f-4,4)),f+=4,m.buffer},UPNG.encode.compressPNG=function(t,e,r){for(var n=0;n<t.frames.length;n++){var i=t.frames[n],s=(i.rect.width,i.rect.height),a=new Uint8Array(s*i.bpl+s);i.cimg=UPNG.encode._filterZero(i.img,s,i.bpp,i.bpl,a,e,r)}},UPNG.encode.compress=function(t,e,r,n,i){for(var s=i[0],a=i[1],o=i[2],h=i[3],l=i[4],f=i[5],u=6,c=8,p=255,d=0;d<t.length;d++)for(var g=new Uint8Array(t[d]),v=g.length,m=0;m<v;m+=4)p&=g[m+3];var _=255!=p,y=UPNG.encode.framize(t,e,r,s,a,o),w={},b=[],x=[];if(0!=n){for(var S=[],m=0;m<y.length;m++)S.push(y[m].img.buffer);for(var o=UPNG.encode.concatRGBA(S),C=UPNG.quantize(o,n),m=0;m<C.plte.length;m++)b.push(C.plte[m].est.rgba);for(var P=0,m=0;m<y.length;m++){var k=(M=y[m]).img.length,T=new Uint8Array(C.inds.buffer,P>>2,k>>2);x.push(T);var I=new Uint8Array(C.abuf,P,k);f&&UPNG.encode.dither(M.img,M.rect.width,M.rect.height,b,I,T),M.img.set(I),P+=k}}else for(d=0;d<y.length;d++){var M=y[d],F=new Uint32Array(M.img.buffer),A=M.rect.width,v=F.length,T=new Uint8Array(v);x.push(T);for(m=0;m<v;m++){var E=F[m];if(0!=m&&E==F[m-1])T[m]=T[m-1];else if(A<m&&E==F[m-A])T[m]=T[m-A];else{var U=w[E];if(null==U&&(w[E]=U=b.length,b.push(E),300<=b.length))break;T[m]=U}}}var O=b.length;O<=256&&0==l&&(c=O<=2?1:O<=4?2:O<=16?4:8,c=Math.max(c,h));for(d=0;d<y.length;d++){(M=y[d]).rect.x,M.rect.y;var A=M.rect.width,D=M.rect.height,L=M.img,N=(new Uint32Array(L.buffer),4*A),R=4;if(O<=256&&0==l){for(var N=Math.ceil(c*A/8),B=new Uint8Array(N*D),z=x[d],G=0;G<D;G++){var m=G*N,Z=G*A;if(8==c)for(var q=0;q<A;q++)B[m+q]=z[Z+q];else if(4==c)for(q=0;q<A;q++)B[m+(q>>1)]|=z[Z+q]<<4-4*(1&q);else if(2==c)for(q=0;q<A;q++)B[m+(q>>2)]|=z[Z+q]<<6-2*(3&q);else if(1==c)for(q=0;q<A;q++)B[m+(q>>3)]|=z[Z+q]<<7-(7&q)}L=B,u=3,R=1}else if(0==_&&1==y.length){for(var B=new Uint8Array(A*D*3),j=A*D,m=0;m<j;m++){var H=3*m,V=4*m;B[H]=L[V],B[1+H]=L[1+V],B[2+H]=L[2+V]}L=B,u=2,N=(R=3)*A}M.img=L,M.bpl=N,M.bpp=R}return{ctype:u,depth:c,plte:b,frames:y}},UPNG.encode.framize=function(t,e,r,n,i,s){for(var a,o,h,l,f=[],u=0;u<t.length;u++){var c,p=new Uint8Array(t[u]),d=new Uint32Array(p.buffer),g=0,v=0,m=e,_=r,y=n?1:0;if(0!=u){for(var w=s||n||1==u||0!=f[u-2].dispose?1:2,b=0,x=1e9,S=0;S<w;S++){for(var C=new Uint8Array(t[u-1-S]),P=new Uint32Array(t[u-1-S]),k=e,T=r,I=-1,M=-1,F=0;F<r;F++)for(var A=0;A<e;A++)d[O=F*e+A]!=P[O]&&(A<k&&(k=A),I<A&&(I=A),F<T&&(T=F),M<F&&(M=F));-1==I&&(k=T=I=M=0),i&&(1==(1&k)&&k--,1==(1&T)&&T--);var E=(I-k+1)*(M-T+1);E<x&&(x=E,b=S,m=I-(g=k)+1,_=M-(v=T)+1)}C=new Uint8Array(t[u-1-b]);1==b&&(f[u-1].dispose=2),c=new Uint8Array(m*_*4),UPNG._copyTile(C,e,r,c,m,_,-g,-v,0),1==(y=UPNG._copyTile(p,e,r,c,m,_,-g,-v,3)?1:0)?UPNG.encode._prepareDiff(p,e,r,c,{x:g,y:v,width:m,height:_}):UPNG._copyTile(p,e,r,c,m,_,-g,-v,0)}else c=p.slice(0);f.push({rect:{x:g,y:v,width:m,height:_},img:c,blend:y,dispose:0})}if(n)for(u=0;u<f.length;u++)1!=(U=f[u]).blend&&(a=U.rect,o=f[u-1].rect,l={x:h=Math.min(a.x,o.x),y:l=Math.min(a.y,o.y),width:Math.max(a.x+a.width,o.x+o.width)-h,height:Math.max(a.y+a.height,o.y+o.height)-l},u-(f[u-1].dispose=1)!=0&&UPNG.encode._updateFrame(t,e,r,f,u-1,l,i),UPNG.encode._updateFrame(t,e,r,f,u,l,i));var U;if(1!=t.length)for(var O=0;O<f.length;O++)(U=f[O]).rect.width,U.rect.height;return f},UPNG.encode._updateFrame=function(t,e,r,n,i,s,a){for(var o=Uint8Array,h=Uint32Array,l=new o(t[i-1]),f=new h(t[i-1]),u=i+1<t.length?new o(t[i+1]):null,t=new o(t[i]),c=new h(t.buffer),p=e,d=r,g=-1,v=-1,m=0;m<s.height;m++)for(var _=0;_<s.width;_++){var y=s.x+_,w=s.y+m,b=w*e+y,x=c[b];0==x||0==n[i-1].dispose&&f[b]==x&&(null==u||0!=u[4*b+3])||(y<p&&(p=y),g<y&&(g=y),w<d&&(d=w),v<w&&(v=w))}-1==g&&(p=d=g=v=0),a&&(1==(1&p)&&p--,1==(1&d)&&d--);a=n[i];a.rect=s={x:p,y:d,width:g-p+1,height:v-d+1},a.blend=1,a.img=new Uint8Array(s.width*s.height*4),0==n[i-1].dispose?(UPNG._copyTile(l,e,r,a.img,s.width,s.height,-s.x,-s.y,0),UPNG.encode._prepareDiff(t,e,r,a.img,s)):UPNG._copyTile(t,e,r,a.img,s.width,s.height,-s.x,-s.y,0)},UPNG.encode._prepareDiff=function(t,e,r,n,i){UPNG._copyTile(t,e,r,n,i.width,i.height,-i.x,-i.y,2)},UPNG.encode._filterZero=function(t,e,r,n,i,s,a){var o,h=[],l=[0,1,2,3,4];-1!=s?l=[s]:(5e5<e*n||1==r)&&(l=[0]),a&&(o={level:0});for(var f=1e7<i.length&&null!=UZIP?UZIP:pako,u=(Date.now(),0);u<l.length;u++){for(var c=0;c<e;c++)UPNG.encode._filterLine(i,t,c,n,r,l[u]);h.push(f.deflate(i,o))}for(var p,d=1e9,u=0;u<h.length;u++)h[u].length<d&&(d=h[p=u].length);return h[p]},UPNG.encode._filterLine=function(t,e,r,n,i,s){var a=r*n,o=a+r,h=UPNG.decode._paeth;if(t[o]=s,o++,0==s)if(n<500)for(var l=0;l<n;l++)t[o+l]=e[a+l];else t.set(new Uint8Array(e.buffer,a,n),o);else if(1==s){for(l=0;l<i;l++)t[o+l]=e[a+l];for(l=i;l<n;l++)t[o+l]=e[a+l]-e[a+l-i]+256&255}else if(0==r){for(l=0;l<i;l++)t[o+l]=e[a+l];if(2==s)for(l=i;l<n;l++)t[o+l]=e[a+l];if(3==s)for(l=i;l<n;l++)t[o+l]=e[a+l]-(e[a+l-i]>>1)+256&255;if(4==s)for(l=i;l<n;l++)t[o+l]=e[a+l]-h(e[a+l-i],0,0)+256&255}else{if(2==s)for(l=0;l<n;l++)t[o+l]=e[a+l]+256-e[a+l-n]&255;if(3==s){for(l=0;l<i;l++)t[o+l]=e[a+l]+256-(e[a+l-n]>>1)&255;for(l=i;l<n;l++)t[o+l]=e[a+l]+256-(e[a+l-n]+e[a+l-i]>>1)&255}if(4==s){for(l=0;l<i;l++)t[o+l]=e[a+l]+256-h(0,e[a+l-n],0)&255;for(l=i;l<n;l++)t[o+l]=e[a+l]+256-h(e[a+l-i],e[a+l-n],e[a+l-i-n])&255}}},UPNG.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=UPNG.crc.table[255&(t^e[r+i])]^t>>>8;return t},crc:function(t,e,r){return 4294967295^UPNG.crc.update(4294967295,t,e,r)}},UPNG.quantize=function(t,e){var r=new Uint8Array(t),t=r.slice(0),n=new Uint32Array(t.buffer),e=UPNG.quantize.getKDtree(t,e),i=e[0],e=e[1],s=UPNG.quantize.planeDst,a=r.length,o=new Uint8Array(a>>2);if(r.length<2e7)for(var h=0;h<a;h+=4){var l=r[h]*(1/255),f=r[h+1]*(1/255),u=r[h+2]*(1/255),c=r[h+3]*(1/255),p=UPNG.quantize.getNearest(i,l,f,u,c);o[h>>2]=p.ind,n[h>>2]=p.est.rgba}else for(h=0;h<a;h+=4){l=r[h]*(1/255),f=r[h+1]*(1/255),u=r[h+2]*(1/255),c=r[h+3]*(1/255);for(p=i;p.left;)p=s(p.est,l,f,u,c)<=0?p.left:p.right;o[h>>2]=p.ind,n[h>>2]=p.est.rgba}return{abuf:t.buffer,inds:o,plte:e}},UPNG.quantize.getKDtree=function(t,e,r){null==r&&(r=1e-4);var n=new Uint32Array(t.buffer),i={i0:0,i1:t.length,bst:null,est:null,tdst:0,left:null,right:null};i.bst=UPNG.quantize.stats(t,i.i0,i.i1),i.est=UPNG.quantize.estats(i.bst);for(var s=[i];s.length<e;){for(var a=0,o=0,h=0;h<s.length;h++)s[h].est.L>a&&(a=s[h].est.L,o=h);if(a<r)break;var l=s[o],f=UPNG.quantize.splitPixels(t,n,l.i0,l.i1,l.est.e,l.est.eMq255);if(l.i0>=f||l.i1<=f)l.est.L=0;else{var u={i0:l.i0,i1:f,bst:null,est:null,tdst:0,left:null,right:null};u.bst=UPNG.quantize.stats(t,u.i0,u.i1),u.est=UPNG.quantize.estats(u.bst);var c={i0:f,i1:l.i1,bst:null,est:null,tdst:0,left:null,right:null};c.bst={R:[],m:[],N:l.bst.N-u.bst.N};for(h=0;h<16;h++)c.bst.R[h]=l.bst.R[h]-u.bst.R[h];for(h=0;h<4;h++)c.bst.m[h]=l.bst.m[h]-u.bst.m[h];c.est=UPNG.quantize.estats(c.bst),l.left=u,l.right=c,s[o]=u,s.push(c)}}s.sort(function(t,e){return e.bst.N-t.bst.N});for(h=0;h<s.length;h++)s[h].ind=h;return[i,s]},UPNG.quantize.getNearest=function(t,e,r,n,i){if(null==t.left)return t.tdst=UPNG.quantize.dist(t.est.q,e,r,n,i),t;var s=UPNG.quantize.planeDst(t.est,e,r,n,i),a=t.left,o=t.right;0<s&&(a=t.right,o=t.left);a=UPNG.quantize.getNearest(a,e,r,n,i);if(a.tdst<=s*s)return a;i=UPNG.quantize.getNearest(o,e,r,n,i);return i.tdst<a.tdst?i:a},UPNG.quantize.planeDst=function(t,e,r,n,i){var s=t.e;return s[0]*e+s[1]*r+s[2]*n+s[3]*i-t.eMq},UPNG.quantize.dist=function(t,e,r,n,i){e-=t[0],r-=t[1],n-=t[2],t=i-t[3];return e*e+r*r+n*n+t*t},UPNG.quantize.splitPixels=function(t,e,r,n,i,s){var a=UPNG.quantize.vecDot;n-=4;for(;r<n;){for(;a(t,r,i)<=s;)r+=4;for(;a(t,n,i)>s;)n-=4;if(n<=r)break;var o=e[r>>2];e[r>>2]=e[n>>2],e[n>>2]=o,r+=4,n-=4}for(;a(t,r,i)>s;)r-=4;return r+4},UPNG.quantize.vecDot=function(t,e,r){return t[e]*r[0]+t[e+1]*r[1]+t[e+2]*r[2]+t[e+3]*r[3]},UPNG.quantize.stats=function(t,e,r){for(var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=[0,0,0,0],s=r-e>>2,a=e;a<r;a+=4){var o=t[a]*(1/255),h=t[a+1]*(1/255),l=t[a+2]*(1/255),f=t[a+3]*(1/255);i[0]+=o,i[1]+=h,i[2]+=l,i[3]+=f,n[0]+=o*o,n[1]+=o*h,n[2]+=o*l,n[3]+=o*f,n[5]+=h*h,n[6]+=h*l,n[7]+=h*f,n[10]+=l*l,n[11]+=l*f,n[15]+=f*f}return n[4]=n[1],n[8]=n[2],n[9]=n[6],n[12]=n[3],n[13]=n[7],n[14]=n[11],{R:n,m:i,N:s}},UPNG.quantize.estats=function(t){var e,r=t.R,n=t.m,i=t.N,s=n[0],a=n[1],o=n[2],t=n[3],n=0==i?0:1/i,r=[r[0]-s*s*n,r[1]-s*a*n,r[2]-s*o*n,r[3]-s*t*n,r[4]-a*s*n,r[5]-a*a*n,r[6]-a*o*n,r[7]-a*t*n,r[8]-o*s*n,r[9]-o*a*n,r[10]-o*o*n,r[11]-o*t*n,r[12]-t*s*n,r[13]-t*a*n,r[14]-t*o*n,r[15]-t*t*n],h=r,l=UPNG.M4,f=[Math.random(),Math.random(),Math.random(),Math.random()],u=0;if(0!=i)for(var c=0;c<16&&(f=l.multVec(h,f),e=Math.sqrt(l.dot(f,f)),f=l.sml(1/e,f),!(0!=c&&Math.abs(e-u)<1e-9));c++)u=e;n=[s*n,a*n,o*n,t*n];return{Cov:r,q:n,e:f,L:u,eMq255:l.dot(l.sml(255,n),f),eMq:l.dot(f,n),rgba:(Math.round(255*n[3])<<24|Math.round(255*n[2])<<16|Math.round(255*n[1])<<8|Math.round(255*n[0])<<0)>>>0}},UPNG.M4={multVec:function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3],t[12]*e[0]+t[13]*e[1]+t[14]*e[2]+t[15]*e[3]]},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},sml:function(t,e){return[t*e[0],t*e[1],t*e[2],t*e[3]]}},UPNG.encode.concatRGBA=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r].byteLength;for(var n=new Uint8Array(e),i=0,r=0;r<t.length;r++){for(var s=new Uint8Array(t[r]),a=s.length,o=0;o<a;o+=4){var h=s[o],l=s[o+1],f=s[o+2],u=s[o+3];0==u&&(h=l=f=0),n[i+o]=h,n[i+o+1]=l,n[i+o+2]=f,n[i+o+3]=u}i+=a}return n.buffer},UPNG.encode.dither=function(t,e,r,n,i,s){function a(t,e,r,n){e[r]+=t[0]*n>>4,e[r+1]+=t[1]*n>>4,e[r+2]+=t[2]*n>>4,e[r+3]+=t[3]*n>>4}function o(t){return Math.max(0,Math.min(255,t))}function h(t,e){var r=t[0]-e[0],n=t[1]-e[1],i=t[2]-e[2],e=t[3]-e[3];return r*r+n*n+i*i+e*e}for(var l=n.length,f=[],u=[],c=0;c<l;c++){var p=n[c];f.push([p>>>0&255,p>>>8&255,p>>>16&255,p>>>24&255])}for(c=0;c<l;c++){for(var d=4294967295,g=0,v=0;v<l;v++){var m=h(f[c],f[v]);v!=c&&m<d&&(d=m,g=v)}var _=Math.sqrt(d)/2;u[c]=~~(_*_)}for(var y=new Uint32Array(i.buffer),w=new Int16Array(e*r*4),b=0;b<r;b++)for(var x=0;x<e;x++){for(var S=[o(t[c=4*(b*e+x)]+w[c]),o(t[c+1]+w[c+1]),o(t[c+2]+w[c+2]),o(t[c+3]+w[c+3])],g=0,C=16777215,v=0;v<l;v++){var P=h(S,f[v]);P<C&&(C=P,g=v)}var k=f[g],k=[S[0]-k[0],S[1]-k[1],S[2]-k[2],S[3]-k[3]];x!=e-1&&a(k,w,c+4,7),b!=r-1&&(0!=x&&a(k,w,c+4*e-4,3),a(k,w,c+4*e,5),x!=e-1&&a(k,w,c+4*e+4,1)),s[c>>2]=g,y[c>>2]=n[g]}};var UTEX=function(){function w(t,e){var r=[t,e];return e<t?r.push(6/7*t+1/7*e,5/7*t+2/7*e,4/7*t+3/7*e,3/7*t+4/7*e,2/7*t+5/7*e,1/7*t+6/7*e):r.push(.8*t+.2*e,.6*t+.4*e,.4*t+.6*e,.2*t+.8*e,0,255),r}function l(t,e,r,n,i){var s=w(t[e],t[e+1]);r.V+=16;for(var a=0;a<64;a+=4){var o=j(t,r,3);n[a+i]=s[o]}}var d=new Uint8Array(16);function h(t,e,r){var n=t[e+1]<<8|t[e],i=t[e+3]<<8|t[e+2],s=255/31*(31&n),a=255/31*(n>>>5&31),o=255/31*(n>>10),h=255/31*(31&i),l=255/63*(i>>>5&63),n=255/31*(i>>11),i=d;i[0]=T(o),i[1]=T(a),i[2]=T(s),i[3]=255,i[12]=T(n),i[13]=T(l),i[14]=T(h),i[15]=255;i[4]=T(2/3*o+(1-2/3)*n),i[5]=T(2/3*a+(1-2/3)*l),i[6]=T(2/3*s+(1-2/3)*h),i[7]=255,i[8]=T(1/3*o+(1-1/3)*n),i[9]=T(1/3*a+(1-1/3)*l),i[10]=T(1/3*s+(1-1/3)*h),i[11]=255,g(t,r,i,e)}function u(t,e,r){var n,i,s=t[e+1]<<8|t[e],a=t[e+3]<<8|t[e+2],o=255/31*(31&s),h=255/63*(s>>>5&63),l=255/31*(s>>11),f=255/31*(31&a),u=255/63*(a>>>5&63),c=255/31*(a>>11),p=d;p[0]=T(l),p[1]=T(h),p[2]=T(o),p[3]=255,p[4]=T(c),p[5]=T(u),p[6]=T(f),p[7]=255,a<s?(i=1-(n=2/3),p[8]=T(n*l+i*c),p[9]=T(n*h+i*u),p[10]=T(n*o+i*f),p[11]=255,p[12]=T((n=1/3)*l+(i=1-n)*c),p[13]=T(n*h+i*u),p[14]=T(n*o+i*f),p[15]=255):(i=1-(n=.5),p[8]=T(n*l+i*c),p[9]=T(n*h+i*u),p[10]=T(n*o+i*f),p[11]=255,p[12]=0,p[13]=0,p[14]=0,p[15]=0),g(t,r,p,e)}function T(t){return~~(.5+t)}function I(t,e,r){return T(t*(31/255))<<11|~~(.45+e*(63/255))<<5|T(r*(31/255))}function b(t,e,r){var n=M,i=function(t){for(var e=M,r=0,n=0,i=0;i<64;i+=4)for(var s=t[i],a=t[i+1],o=t[i+2],h=i+4;h<64;h+=4){var l=e(s,a,o,t[h],t[h+1],t[h+2]);n<l&&(n=l,r=i<<8|h)}return r}(r),s=r[i>>8],a=r[1+(i>>8)],o=r[2+(i>>8)],h=r[255&i],l=r[1+(255&i)],f=r[2+(255&i)],u=I(s,a,o),c=I(h,l,f);u<c&&(i=u,u=c,c=i);o=T(255/31*(31&u)),a=T(255/63*(u>>>5&63)),s=T(255/31*(u>>11)),f=T(255/31*(31&c)),l=T(255/63*(c>>>5&63)),h=T(255/31*(c>>11));t[e+0]=255&u,t[e+1]=u>>8,t[e+2]=255&c,t[e+3]=c>>8;for(var p=T(2/3*s+(1-2/3)*h),d=T(2/3*a+(1-2/3)*l),g=T(2/3*o+(1-2/3)*f),v=T(1/3*s+(1-1/3)*h),m=T(1/3*a+(1-1/3)*l),_=T(1/3*o+(1-1/3)*f),y=8*e+32,w=0;w<64;w+=4){var b=r[w],x=r[w+1],S=r[w+2],C=n(b,x,S,s,a,o),P=n(b,x,S,h,l,f),k=n(b,x,S,p,d,g),x=n(b,x,S,v,m,_),S=Math.min(C,Math.min(P,Math.min(k,x))),C=0;S==P?C=1:S==k?C=2:S==x&&(C=3),t[y>>3]|=C<<(7&y),y+=2}}function g(t,e,r,n){for(var i=n+4<<3,s=0;s<64;s+=4){var a=t[i>>3]>>(7&i)&3;i+=2,a<<=2,e[s]=r[a],e[s+1]=r[1+a],e[s+2]=r[2+a],e[s+3]=r[3+a]}}function x(t,e,r,n,i,s){for(var a=0;a<4;a++){var o=(i+a)*e+n<<2,h=a<<4;s[h]=t[o],s[1+h]=t[1+o],s[2+h]=t[2+o],s[3+h]=t[3+o],s[4+h]=t[4+o],s[5+h]=t[5+o],s[6+h]=t[6+o],s[7+h]=t[7+o],s[8+h]=t[8+o],s[9+h]=t[9+o],s[10+h]=t[10+o],s[11+h]=t[11+o],s[12+h]=t[12+o],s[13+h]=t[13+o],s[14+h]=t[14+o],s[15+h]=t[15+o]}}function B(t,e,r,n,i,s){for(var a=0;a<4;a++){var o=(i+a)*e+n<<2,h=a<<4;t[o]=s[h],t[1+o]=s[1+h],t[2+o]=s[2+h],t[3+o]=s[3+h],t[4+o]=s[4+h],t[5+o]=s[5+h],t[6+o]=s[6+h],t[7+o]=s[7+h],t[8+o]=s[8+h],t[9+o]=s[9+h],t[10+o]=s[10+h],t[11+o]=s[11+h],t[12+o]=s[12+h],t[13+o]=s[13+h],t[14+o]=s[14+h],t[15+o]=s[15+h]}}var z="0011001100110011 0001000100010001 0111011101110111 0001001100110111 0000000100010011 0011011101111111 0001001101111111 0000000100110111 0000000000010011 0011011111111111 0000000101111111 0000000000010111 0001011111111111 0000000011111111 0000111111111111 0000000000001111 0000100011101111 0111000100000000 0000000010001110 0111001100010000 0011000100000000 0000100011001110 0000000010001100 0111001100110001 0011000100010000 0000100010001100 0110011001100110 0011011001101100 0001011111101000 0000111111110000 0111000110001110 0011100110011100 0101010101010101 0000111100001111 0101101001011010 0011001111001100 0011110000111100 0101010110101010 0110100101101001 0101101010100101 0111001111001110 0001001111001000 0011001001001100 0011101111011100 0110100110010110 0011110011000011 0110011010011001 0000011001100000 0100111001000000 0010011100100000 0000001001110010 0000010011100100 0110110010010011 0011011011001001 0110001110011100 0011100111000110 0110110011001001 0110001100111001 0111111010000001 0001100011100111 0000111100110011 0011001111110000 0010001011101110 0100010001110111".split(" "),G="0011001102212222 0001001122112221 0000200122112211 0222002200110111 0000000011221122 0011001100220022 0022002211111111 0011001122112211 0000000011112222 0000111111112222 0000111122222222 0012001200120012 0112011201120112 0122012201220122 0011011211221222 0011200122002220 0001001101121122 0111001120012200 0000112211221122 0022002200221111 0111011102220222 0001000122212221 0000001101220122 0000110022102210 0122012200110000 0012001211222222 0110122112210110 0000011012211221 0022110211020022 0110011020022222 0011012201220011 0000200022112221 0000000211221222 0222002200120011 0011001200220222 0120012001200120 0000111122220000 0120120120120120 0120201212010120 0011220011220011 0011112222000011 0101010122222222 0000000021212121 0022112200221122 0022001100220011 0220122102201221 0101222222220101 0000212121212121 0101010101012222 0222011102220111 0002111200021112 0000211221122112 0222011101110222 0002111211120002 0110011001102222 0000000021122112 0110011022222222 0022001100110022 0022112211220022 0000000000002112 0002000100020001 0222122202221222 0101222222222222 0111201122012220".split(" "),Z=[[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,8,0],[0,8,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,8,0],[0,8,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,6,0],[0,8,0],[0,2,0],[0,8,0],[0,15,0],[0,15,0],[0,2,0],[0,8,0],[0,2,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,6,0],[0,6,0],[0,2,0],[0,6,0],[0,8,0],[0,15,0],[0,15,0],[0,2,0],[0,2,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,15,0],[0,2,0],[0,2,0],[0,15,0]],q=[[0,3,15],[0,3,8],[0,15,8],[0,15,3],[0,8,15],[0,3,15],[0,15,3],[0,15,8],[0,8,15],[0,8,15],[0,6,15],[0,6,15],[0,6,15],[0,5,15],[0,3,15],[0,3,8],[0,3,15],[0,3,8],[0,8,15],[0,15,3],[0,3,15],[0,3,8],[0,6,15],[0,10,8],[0,5,3],[0,8,15],[0,8,6],[0,6,10],[0,8,15],[0,5,15],[0,15,10],[0,15,8],[0,8,15],[0,15,3],[0,3,15],[0,5,10],[0,6,10],[0,10,8],[0,8,9],[0,15,10],[0,15,6],[0,3,15],[0,15,8],[0,5,15],[0,15,3],[0,15,6],[0,15,6],[0,15,8],[0,3,15],[0,15,3],[0,5,15],[0,5,15],[0,5,15],[0,8,15],[0,5,15],[0,10,15],[0,5,15],[0,10,15],[0,8,15],[0,13,15],[0,15,3],[0,12,15],[0,3,15],[0,3,8]];function j(t,e,r){for(var n,i,s=0,a=r;0!=r;)s|=(n=t,i=void 0,i=e.V,e.V++,(n[i>>3]>>(7&i)&1)<<a-r),r--;return s}function M(t,e,r,n,i,s){return(t-n)*(t-n)+(e-i)*(e-i)+(r-s)*(r-s)}var t=new ArrayBuffer(4),n=new Uint8Array(t),i=new Uint32Array(t),r=new Uint16Array(t);return{r:function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<i;a+=4)for(var o=0;o<n;o+=4)u(t,e,s),B(r,n,0,o,a,s),e+=8;return e},T:function(t,e,r,n,i){for(var s={V:8*e},a=new Uint8Array(64),o=0;o<i;o+=4)for(var h=0;h<n;h+=4){u(t,e+8,a);for(var l=0;l<64;l+=4){var f=j(t,s,4);a[l+3]=f/15*255}B(r,n,0,h,o,a),e+=16,s.V+=64}return e},Y:function(t,e,r,n,i){for(var s={V:8*e},a=new Uint8Array(64),o=0;o<i;o+=4)for(var h=0;h<n;h+=4)u(t,e+8,a),l(t,e,s,a,3),s.V+=64,B(r,n,0,h,o,a),e+=16;return e},O:function(t,e,r,n,i){var s={V:8*e},a=new Uint8Array(64);a.fill(255);for(var o=0;o<i;o+=4)for(var h=0;h<n;h+=4)l(t,e,s,a,1),l(t,e+=8,s,a,0),e+=8,B(r,n,0,h,o,a);return e},R:function(t,e,r,n,i){for(var s=j,a={V:0},o=new Uint8Array(64),h=[null,null,[0,21,43,64],[0,9,18,27,37,46,55,64],[0,4,9,13,17,21,26,30,34,38,43,47,51,55,60,64]],l=[null,null,z,G],f=[null,null,Z,q],u=0;u<i;u+=4)for(var c=0;c<n;c+=4){for(var p=0,d="0000000000000000";1!=(t[e]>>p&1);)p++;a.V=(e<<3)+p+1;for(var g=4==p||5==p?s(t,a,2):0,v=4==p?s(t,a,1):0,m=s(t,a,[4,6,6,6,0,0,0,6][p]),_=[4,6,5,7,5,7,7,5][p],y=[0,0,0,0,6,8,7,5][p],w=[1,1,0,1,0,0,1,1][p],b=[6,4,6,4,2,2,2,4][p],x=[],S=0;S<4;S++)for(var C=3==S?y:_,P=0;P<b;P++)x[S*b+P]=s(t,a,C);for(P=0;P<b;P++){1==p&&1==(1&P)&&a.V--;for(var k=s(t,a,w),S=0;S<3;S++)x[S*b+P]=x[S*b+P]<<w|k;0!=y&&(x[3*b+P]=x[3*b+P]<<w|k)}_+=w,0!=y&&(y+=w);for(S=0;S<4;S++)for(var T=0==(C=3==S?y:_)?0:1/((1<<C)-1),P=0;P<b;P++)x[S*b+P]*=T;if(0==y)for(P=0;P<b;P++)x[3*b+P]=1;var I=[3,2,3,2,1,1,1,2][p],M=[3,3,2,2,2,2,4,2][p],F=[0,0,0,0,3,2,0,0][p],A=[0,0,0];1!=I&&(d=l[I][m],A=f[I][m]);m=a.V,I=m+16*M-I;1==v&&(v=m,m=I,I=v,v=M,M=F,F=v);var E=h[M];a.V=m;for(S=0;S<64;S+=4){var U=(1-(R=E[s(t,a,M-(A[N=d.charCodeAt(S>>2)-48]==S>>2?1:0))]/64))*x[0*b+2*N]+R*x[0*b+2*N+1],O=(1-R)*x[+b+2*N]+R*x[+b+2*N+1],D=(1-R)*x[2*b+2*N]+R*x[2*b+2*N+1],L=(1-R)*x[3*b+2*N]+R*x[3*b+2*N+1];o[S]=255*U,o[S+1]=255*O,o[S+2]=255*D,o[S+3]=255*L}if(E=h[F],a.V=I,0!=F)for(S=0;S<64;S+=4){var N,R,L=(1-(R=E[s(t,a,F-(A[N=d.charCodeAt(S>>2)-48]==S>>2?1:0))]/64))*x[3*b+2*N]+R*x[3*b+2*N+1];o[S+3]=255*L}!function(t,e){if(0!=e)for(var r=0;r<64;r+=4){var n,i=t[r],s=t[r+1],a=t[r+2],o=t[r+3];1==e&&(n=o,o=i,i=n),2==e&&(n=o,o=s,s=n),3==e&&(n=o,o=a,a=n),t[r]=i,t[r+1]=s,t[r+2]=a,t[r+3]=o}}(o,g),B(r,n,0,c,u,o),e+=16}return e},P:function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<i;a+=4)for(var o=0;o<n;o+=4)h(t,e,s),B(r,n,0,o,a,s),e+=8;return e},F:function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<i;a+=4)for(var o=0;o<n;o+=4)h(t,e+8,s),B(r,n,0,o,a,s),e+=16;return e},K:function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<r;a+=4)for(var o=0;o<e;o+=4)x(t,e,0,o,a,s),b(n,i,s),i+=8;return i},b:function(t,e,r,n,i){for(var s=new Uint8Array(64),a=0;a<r;a+=4)for(var o=0;o<e;o+=4){x(t,e,0,o,a,s);for(var h=s[3],l=s[3],f=7;f<64;f+=4)(m=s[f])<h?h=m:l<m&&(l=m);n[i]=l,n[i+1]=h,i+=2;for(var u=w(l,h),c=i+2<<3,f=0;f<64;f+=32){for(var p=0,c=0,d=0;d<32;d+=4){for(var g=0,v=500,m=s[f+d+3],_=0;_<8;_++){var y=Math.abs(u[_]-m);y<v&&(v=y,g=_)}p|=g<<c,c+=3}n[i]=p,n[i+1]=p>>8,n[i+2]=p>>16,i+=3}b(n,i,s),i+=8}return i},s:function(t,e,r){for(var n=e>>1,i=r>>1,s=new Uint8Array(n*i*4),a=0;a<i;a++)for(var o=0;o<n;o++){var h=a*n+o<<2,l=(a<<1)*e+(o<<1)<<2,f=t[3+l],u=t[7+l],c=t[l]*f+t[4+l]*u,p=t[1+l]*f+t[5+l]*u,d=t[2+l]*f+t[6+l]*u,g=t[3+(l+=e<<2)],v=t[7+l];c+=t[l]*g+t[4+l]*v,p+=t[1+l]*g+t[5+l]*v,d+=t[2+l]*g+t[6+l]*v;g=f+u+g+v+2>>2,v=0==g?0:.25/g;s[h]=~~(c*v+.5),s[1+h]=~~(p*v+.5),s[2+h]=~~(d*v+.5),s[3+h]=g}return s},p:{c:function(t,e){return n[0]=t[e+0],n[1]=t[e+1],r[0]},a:function(t,e){return n[0]=t[e+0],n[1]=t[e+1],n[2]=t[e+2],n[3]=t[e+3],i[0]},$:function(t,e,r){i[0]=r,t[e+0]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3]},f:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},X:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)}}}}();function GifWriter(m,t,e,r){var _=0,n=void 0===(r=void 0===r?{}:r).loop?null:r.loop,y=void 0===r.palette?null:r.palette;if(t<=0||e<=0||65535<t||65535<e)throw new Error("Width/Height invalid.");function w(t){t=t.length;if(t<2||256<t||t&t-1)throw new Error("Invalid code/color length, must be power of 2 and 2 .. 256.");return t}m[_++]=71,m[_++]=73,m[_++]=70,m[_++]=56,m[_++]=57,m[_++]=97;var i=0,s=0;if(null!==y){for(var a=w(y);a>>=1;)++i;if(a=1<<i,--i,void 0!==r.background){if(a<=(s=r.background))throw new Error("Background index out of range.");if(0===s)throw new Error("Background index explicitly passed as 0.")}}if(m[_++]=255&t,m[_++]=t>>8&255,m[_++]=255&e,m[_++]=e>>8&255,m[_++]=(null!==y?128:0)|i,m[_++]=s,m[_++]=0,null!==y)for(var o=0,h=y.length;o<h;++o){var l=y[o];m[_++]=l>>16&255,m[_++]=l>>8&255,m[_++]=255&l}if(null!==n){if(n<0||65535<n)throw new Error("Loop count invalid.");m[_++]=33,m[_++]=255,m[_++]=11,m[_++]=78,m[_++]=69,m[_++]=84,m[_++]=83,m[_++]=67,m[_++]=65,m[_++]=80,m[_++]=69,m[_++]=50,m[_++]=46,m[_++]=48,m[_++]=3,m[_++]=1,m[_++]=255&n,m[_++]=n>>8&255,m[_++]=0}var b=!1;this.addFrame=function(t,e,r,n,i,s){if(!0===b&&(--_,b=!1),s=void 0===s?{}:s,t<0||e<0||65535<t||65535<e)throw new Error("x/y invalid.");if(r<=0||n<=0||65535<r||65535<n)throw new Error("Width/Height invalid.");if(i.length<r*n)throw new Error("Not enough pixels for the frame size.");var a=!0,o=s.palette;if(null==o&&(a=!1,o=y),null==o)throw new Error("Must supply either a local or global palette.");for(var h=w(o),l=0;h>>=1;)++l;var h=1<<l,f=void 0===s.delay?0:s.delay,u=void 0===s.disposal?0:s.disposal;if(u<0||3<u)throw new Error("Disposal out of range.");var c=!1,p=0;if(void 0!==s.transparent&&null!==s.transparent&&(c=!0,(p=s.transparent)<0||h<=p))throw new Error("Transparent color index.");if(0===u&&!c&&0===f||(m[_++]=33,m[_++]=249,m[_++]=4,m[_++]=u<<2|(!0===c?1:0),m[_++]=255&f,m[_++]=f>>8&255,m[_++]=p,m[_++]=0),m[_++]=44,m[_++]=255&t,m[_++]=t>>8&255,m[_++]=255&e,m[_++]=e>>8&255,m[_++]=255&r,m[_++]=r>>8&255,m[_++]=255&n,m[_++]=n>>8&255,m[_++]=!0===a?128|l-1:0,!0===a)for(var d=0,g=o.length;d<g;++d){var v=o[d];m[_++]=v>>16&255,m[_++]=v>>8&255,m[_++]=255&v}return _=GifWriterOutputLZWCodeStream(m,_,l<2?2:l,i)},this.end=function(){return!1===b&&(m[_++]=59,b=!0),_},this.getOutputBuffer=function(){return m},this.setOutputBuffer=function(t){m=t},this.getOutputBufferPosition=function(){return _},this.setOutputBufferPosition=function(t){_=t}}function GifWriterOutputLZWCodeStream(e,r,t,n){e[r++]=t;var i=r++,s=1<<t,a=s-1,o=1+s,h=1+o,l=t+1,f=0,u=0;function c(t){for(;t<=f;)e[r++]=255&u,u>>=8,f-=8,r===i+256&&(e[i]=255,i=r++)}function p(t){u|=t<<f,f+=l,c(8)}var d=n[0]&a,g={};p(s);for(var v=1,m=n.length;v<m;++v){var _=n[v]&a,y=d<<8|_,w=g[y];if(void 0===w){for(u|=d<<f,f+=l;8<=f;)e[r++]=255&u,u>>=8,f-=8,r===i+256&&(e[i]=255,i=r++);4096===h?(p(s),h=1+o,l=t+1,g={}):(1<<l<=h&&++l,g[y]=h++),d=_}else d=w}return p(d),p(o),c(1),i+1===r?e[i]=0:(e[i]=r-i-1,e[r++]=0),r}UTEX.DDS=function(){var E={G:1,J:2,W:4,D:8,u:4096,i:131072,I:524288,o:8388608,h:1,M:2,_:4,N:64,Z:512,l:131072,j:8,L:4194304,q:4096};return{encode:function(t,e,r,n){null==n&&(n=[!0,!0]);for(var t=new Uint8Array(t),i=255,s=0,a=0,o=3;o<t.length;o+=4)i&=t[o];var h=i<250,l=n[0],f=n[1],u=new Uint8Array(124+e*r*6);for(UTEX.p.X(u,s,"DDS "),function(t,e,r,n,i,s,a){var o=UTEX.p.$,h=E.G|E.J|E.W|E.u;h|=E.i|(s?E.I:E.D);var l=(i?E.L:0)|E.q|(i?E.j:0),f=(e*r>>>1)*(n?2:1),i=n?1:0;s||(f=e*r*4);o(t,a,124),o(t,a+=4,h),o(t,a+=4,r),o(t,a+=4,e),o(t,a+=4,f),o(t,a+=4,i),o(t,a+=4,10),a+=4,function(t,e,r,n){var i=UTEX.p.$,s=r?E._:E.h|E.N;if(i(t,n,32),i(t,n+=4,s),n+=4,UTEX.p.X(t,n,r?e?"DXT5":"DXT1":"    "),n+=4,!r){i(t,n,32);for(var a=0;a<4;a++)i(t,n+4+4*a,255<<8*a)}n+=20}(t,n,s,a+=44),o(t,a+=32,l),a+=4,a+=16}(u,e,r,h,l,f,s+=4),s+=124;e*r!=0&&(f?s=h?UTEX.b(t,e,r,u,s):UTEX.K(t,e,r,u,s):(u.set(t,s),s+=t.length),t=UTEX.s(t,e,r),e>>=1,r>>=1,a++,l););return u[28]=a,u.buffer.slice(0,s)},decode:function(t){var e,r,n,i,s,a=new Uint8Array(t),o=0;UTEX.p.f(a,o,4),n=a,i=o+=4,s={},t=UTEX.p.a,i+=4,s.Q=t(n,i),i+=4,s.height=t(n,i),i+=4,s.width=t(n,i),i+=4,s.pitch=t(n,i),i+=4,s.depth=t(n,i),i+=4,s.S=t(n,i),i+=4,i+=44,s.g=function(t,e){var r={},n=UTEX.p.a;return e+=4,r.Q=n(t,e),e+=4,r.k=UTEX.p.f(t,e,4),e+=4,r.e=n(t,e),e+=4,r.w=n(t,e),e+=4,r.t=n(t,e),e+=4,r.d=n(t,e),e+=4,r.C=n(t,e),e+=4,r}(n,i),i+=32,s.A=t(n,i),i+=4,s.B=t(n,i),i+=4,s.a6=t(n,i),i+=4,s.a3=t(n,i),i+=4,i+=4,o+=124,(r=(e=s).g).Q&E._&&"DX10"==r.k&&(i=a,h=o,d={},s=UTEX.p.a,d.H=s(i,h),h+=4,d.a8=s(i,h),h+=4,d.a1=s(i,h),h+=4,d.a0=s(i,h),h+=4,d.a4=s(i,h),h+=4,h=d,o+=20);var h,l=e.width,f=e.height,u=[],c=r.k,p=r.e,d={DXT1:"BC1",DXT3:"BC2",DXT5:"BC3",DX10:"BC7",ATI2:"BC5"};d[c]&&(c=d[c]),h&&(70<=(h=h.H)&&h<=72?c="BC1":73<=h&&h<=75?c="BC2":76<=h&&h<=78?c="BC3":97<=h&&h<=99?c="BC7":console.log("Unknown DX10 format",h));for(var g=Math.max(1,e.S),v=0;v<g;v++){var m=l*f,_=4*m,y=new Uint8Array(_);if(0,"BC1"==c)o=UTEX.r(a,o,y,l,f);else if("BC2"==c)o=UTEX.T(a,o,y,l,f);else if("BC3"==c)o=UTEX.Y(a,o,y,l,f);else if("BC5"==c)o=UTEX.O(a,o,y,l,f);else if("BC7"==c)o=UTEX.R(a,o,y,l,f);else if("ATC "==c)o=UTEX.P(a,o,y,l,f);else if("ATCA"==c)o=UTEX.F(a,o,y,l,f);else if("ATCI"==c)o=UTEX.F(a,o,y,l,f);else if(r.Q&E.h&&r.Q&E.N){var w=r.w,b=255/w,x=r.t,S=255/x,C=r.d,P=255/C,k=r.C,T=255/k;if(32==p){for(var I=0;I<_;I+=4){var M=a[o+I+3]<<24|a[o+I+2]<<16|a[o+I+1]<<8|a[o+I];y[I+0]=(M&w)*b,y[I+1]=(M&x)*S,y[I+2]=(M&C)*P,y[I+3]=(M&k)*T}o+=_}else{if(16!=p)throw"unknown bit count "+p;for(I=0;I<_;I+=4){M=a[o+(I>>1)+1]<<8|a[o+(I>>1)];y[I+0]=(M&w)*b,y[I+1]=(M&x)*S,y[I+2]=(M&C)*P,y[I+3]=(M&k)*T}o+=_>>>1}}else if(r.Q&E.M||r.Q&E.h||r.Q&E.l){if(8!=p)throw"unknown bit count "+p;if(r.Q&E.M)for(I=0;I<_;I+=4)y[I+3]=a[o+(I>>2)];else{y.fill(255);for(I=0;I<_;I+=4)y[I]=y[I+1]=y[I+2]=a[o+(I>>2)]}o+=_>>>2}else{if(!(r.Q&E.N&&24==p))throw console.log("unknown texture format, head flags: ",e.Q.toString(2),"pixelFormat flags: ",r.Q.toString(2)),"e";for(I=0;I<m;I++){var F=4*I,A=3*I;y[0+F]=a[o+A],y[1+F]=a[o+A+1],y[2+F]=a[o+A+2],y[3+F]=255}}u.push({width:l,height:f,image:y.buffer}),l>>>=1,f>>>=1}return u}}}(),UTEX.VTF={decode:function(t){var e=new Uint8Array(t),r=0,n={};r=function(t,e,r){var n=UTEX.p.a,i=UTEX.p.c,s=(UTEX.p.f(t,e,4),n(t,e+=4),n(t,e+=4)),a=n(t,e+=4);e+=4,r.width=i(t,e),e+=2,r.height=i(t,e),e+=2,r.Q=n(t,e),e+=4,r.frames=i(t,e),e+=2,r.a2=i(t,e),e+=2,e+=4,e+=12,e+=4,e+=4,r.z=n(t,e),e+=4,r.v=t[e++],r.a5=n(t,e),e+=4,r.n=t[e++],r.m=t[e++],2<=s&&(r.depth=i(t,e),e+=2,3<=s&&(e+=3,r.a7=n(t,e),e+=4));return a}(e,r,n);var i=n.n;i*(t=n.m)!=0&&(c=new Uint8Array(i*t*4),r=UTEX.r(e,r,c,i,t));for(var s=n.z,a=n.v,o=[],h=0;h<a;h++)for(var l=n.width>>>a-1-h,f=n.height>>>a-1-h,u=0;u<n.frames;u++){var c=new Uint8Array(l*f*4);if(0==s||12==s){for(var p=r,d=0==s?[0,1,2,3]:[2,1,0,3],g=d[0],v=d[1],m=d[2],_=d[3],y=0;y<c.length;y+=4)c[y+g]=e[p++],c[y+v]=e[p++],c[y+m]=e[p++],c[y+_]=e[p++];r+=l*f*4}else if(2==s)for(y=0;y<c.length;y+=4)c[y]=e[r++],c[y+1]=e[r++],c[y+2]=e[r++],c[y+3]=255;else if(13==s)r=UTEX.r(e,r,c,l,f);else if(14==s)r=UTEX.T(e,r,c,l,f);else{if(15!=s)throw s;r=UTEX.Y(e,r,c,l,f)}o.push({width:l,height:f,image:c.buffer})}return o}},function(){var t={};"object"==typeof module?module.exports=t:self.UTIF=t;var st,S,at,ot,ht,lt,ft,e,r,n,i,s,l,f,u,c,p,a,d,g,v,m,_,y,w,b,x,C,P,k,T,I,M,F,A,E,U,O,D,L,N,R,o="function"==typeof require?require("pako"):self.pako;function B(){"undefined"!=typeof process&&"development"!=process.env.NODE_ENV||console.log.apply(console,arguments)}function ut(t){var e=t[1],e=t[0][e>>>3]>>>7-(7&e)&1;return t[1]++,e}function ct(t,e){for(var r=0;r<e;r++)1==(1&t)&&t++,t>>>=1;return t}function pt(t,e,r,n,i,s){e[r]=(11*t[i]-4*t[i+s]+t[i+s+s]+4>>3)+t[n]>>1,e[r+s]=(5*t[i]+4*t[i+s]-t[i+s+s]+4>>3)-t[n]>>1}function dt(t,e,r,n,i,s){var a=t[i-s]-t[i+s],i=t[i],n=t[n];e[r]=(4+a>>3)+i+n>>1,e[r+s]=(4-a>>3)+i-n>>1}function gt(t,e,r,n,i,s){e[r]=(5*t[i]+4*t[i-s]-t[i-s-s]+4>>3)+t[n]>>1,e[r+s]=(11*t[i]-4*t[i-s]+t[i-s-s]+4>>3)-t[n]>>1}function vt(t){return t=ht[t=t<0?0:4095<t?4095:t]>>>2}function h(t,e,r,n){for(var i=0;i<e.length;i++)t[e[i]]=r+i*n}function z(){var t=(f[t=l>>>3]<<16|f[1+t]<<8|f[2+t])>>>24-(7&l)-a&(1<<a)-1;return l+=a,t}function G(t){a=t+1,p=g+1}function Z(t){for(var e=t<<2,t=v[e+2],r=c+t-1;65535!=e;)u[r--]=v[e],e=v[e+1];c+=t}function q(t,e){var r=p<<2,t=t<<2;v[r]=v[3+(e<<2)],v[1+r]=t,v[2+r]=v[2+t]+1,v[3+r]=v[3+t],++p+1==1<<a&&12!=a&&a++}function j(){return _[y++]}function H(){return _[y++]<<8|_[y++]}function V(){for(var t=j(),e=[0,0,0,255],r=[],n=0;n<16;n++)r[n]=j();for(n=0;n<16;n++)for(var i=0;i<r[n];i++)e[function t(e,r,n,i){if(255!=e[r+3])return 0;if(0==n)return r;for(var s=0;s<2;s++){0==e[r+s]&&(e[r+s]=e.length,e.push(0,0,i,255));var a=t(e,e[r+s],n-1,i+1);if(0!=a)return a}return 0}(e,0,n+1,1)+3]=j();var s=new Uint8Array(256);T[t]=[new Uint8Array(e),s];for(n=0;n<256;n++){for(var a=8,o=n,h=0;255==e[h+3]&&0!=a;)h=e[h+(o>>--a&1)];s[n]=h}}function W(t){for(var e=t.e,r=t.c;e<25&&t.a<t.d;){var n=t.data[t.a++];t.b||(t.a+=n+1>>>8),r=r<<8|n,e+=8}t.e=e,t.c=r}function X(t,e){return e.e<t&&W(e),e.c>>(e.e-=t)&65535>>16-t}function J(t,e){var r=t[0],n=0,i=255;e.e<16&&W(e);var s=e.c>>e.e-8&255,i=r[(n=t[1][s])+3];for(e.e-=r[n+2];255==i;)i=r[(n=r[n+(e.c>>--e.e&1)])+3];return i}function Y(t,e){return t<32768>>16-e&&(t+=1-(1<<e)),t}function Q(t,e){t=J(t,e);return 0==t?0:16==t?-32768:Y(X(t,e),t)}function K(t,e){return Y(X(t,e),t)}function $(t,e,r){r=[e,3*e+18,5*e+67,7*e+276,r];t.k=e,t.i=(r[4]+2*e)/(2*e+1)+1|0,t.b=Math.ceil(Math.log2(t.i)),t.e=9,function(t,e){for(var r=-e[4],n=0;r<=e[4];n++,r++)t[n]=r<=-e[3]?-4:r<=-e[2]?-3:r<=-e[1]?-2:r<-e[0]?-1:r<=e[0]?0:r<e[1]?1:r<e[2]?2:r<e[3]?3:4}(t.u,r)}function tt(t){for(var e=[[],[],[]],r=Math.max(2,t.i+32>>>6),n=0;n<3;n++)for(var i=0;i<41;i++)e[n][i]=[r,1];return e}function et(t,e){var r=0,n=8-t.s;t.l,t.s;if(e){if(n<=e)for(;r<<=n,e-=n,r|=t[t.l]&(1<<n)-1,t.l++,(n=8)<=e;);e&&(r<<=e,r|=t[t.l]>>>(n-=e)&(1<<e)-1),t.s=8-n}return r}function rt(t,e,r,n,i,s,a,o){null==o&&(o=0);var h,l,f,u,c,p=s+1,d=p%2,g=0,v=n[i],m=n[i-1],_=n[i-2][p],y=m[p-1],w=m[p],s=m[p+1],n=v[p-1],i=v[p+1],m=Math.abs;if(d&&(l=m(s-w),f=m(_-w),u=m(y-w)),d){if(c=(c=u<l&&f<l?_+y:l<u&&f<u?_+s:s+y)+2*w>>>2,o)return void(v[p]=c);h=e.e*e.u[t.j+w-_]+e.u[t.j+y-w]}else c=y<w&&s<w||w<y&&w<s?i+n+2*w>>>2:n+i>>>1,h=e.e*e.u[t.j+w-y]+e.u[t.j+y-n];w=m(h),y=function(t){for(var e=-1,r=0;!r;e++)r=t[t.l]>>>7-t.s&1,t.s++,t.s&=7,t.s||t.l++;return e}(r);g=y<t.w-e.b-1?et(r,n=function(t,e){var r=0;if(e<t)for(;r<=14&&e<<++r<t;);return r}(a[w][0],a[w][1]))+(y<<n):et(r,e.b)+1,a[w][0]+=m(g=1&g?-1-(g>>>1):g>>>1),a[w][1]==t.q&&(a[w][0]>>>=1,a[w][1]>>>=1),a[w][1]++,c=h<0?c-g:c+g,t.f&&(c<0?c+=e.i:c>t.j&&(c-=e.i)),v[p]=0<=c?Math.min(c,t.j):0}function nt(t,e,r){for(var n=t[0].length,i=e;i<=r;i++)t[i][0]=t[i-1][1],t[i][n-1]=t[i-1][n-2]}function it(t){nt(t,U,O),nt(t,M,F),nt(t,N,R)}function mt(t,e,r,n,i,s,a,o,h,l,f,u,c){for(var p=0,d=1,g=i<D&&F<i;d<t.c;)p<t.c&&(rt(t,e,r,n,i,p,a[h],t.o&&(g&&l||!g&&(f||(p&u)==c))),rt(t,e,r,n,s,p,a[h],t.o&&(!g&&l||g&&(f||(p&u)==c))),p+=2),8<p&&(rt(t,e,r,n,i,d,o[h]),rt(t,e,r,n,s,d,o[h]),d+=2);it(n)}st=t,S=o,function(){"use strict";var j,C,P,k,T,I,M,F,A,H=((r.prototype=new Error).name="JpegError",r.constructor=r),t=(j=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),C=4017,P=799,k=3406,T=2276,I=1567,M=3784,F=5793,A=2896,e.prototype={parse(e,t){var r,n,i=(t=null==t?{}:t).F,s=0,a=null,o=null,h=0;var l,f,u=[],c=[],p=[],d=J(e,s);if(s+=2,65496!==d)throw new H("SOI not found");d=J(e,s),s+=2;t:for(;65497!==d;){switch(d){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var g=(f=l=void 0,l=J(e,s),f=(s+=2)+l-2,(l=X(e,f,s))&&l.u&&(f=l.offset),f=e.subarray(s,f),s+=f.length,f);65504===d&&74===g[0]&&70===g[1]&&73===g[2]&&70===g[3]&&0===g[4]&&(a={version:{d:g[5],T:g[6]},K:g[7],j:g[8]<<8|g[9],H:g[10]<<8|g[11],S:g[12],I:g[13],C:g.subarray(14,14+3*g[12]*g[13])}),65518===d&&65===g[0]&&100===g[1]&&111===g[2]&&98===g[3]&&101===g[4]&&(o={version:g[5]<<8|g[6],k:g[7]<<8|g[8],q:g[9]<<8|g[10],a:g[11]});break;case 65499:for(var v=J(e,s)+(s+=2)-2;s<v;){var m=e[s++],_=new Uint16Array(64);if(m>>4==0)for(E=0;E<64;E++)_[j[E]]=e[s++];else{if(m>>4!=1)throw new H("DQT - invalid table spec");for(E=0;E<64;E++)_[j[E]]=J(e,s),s+=2}u[15&m]=_}break;case 65472:case 65473:case 65474:if(r)throw new H("Only single frame JPEGs supported");s+=2,(r={}).G=65473===d,r.Z=65474===d,r.precision=e[s++];var y=J(e,s),w=0,b=0;s+=2,r.s=i||y,r.o=J(e,s),s+=2,r.W=[],r._={};for(var x=e[s++],S=0;S<x;S++){var C=e[s],P=e[s+1]>>4,k=15&e[s+1];w<P&&(w=P),b<k&&(b=k);var T=e[s+2],T=r.W.push({h:P,A:k,L:T,$:null});r._[C]=T-1,s+=3}r.X=w,r.B=b,function(t){for(var e=Math.ceil(t.o/8/t.X),r=Math.ceil(t.s/8/t.B),n=0;n<t.W.length;n++){N=t.W[n];var i=Math.ceil(Math.ceil(t.o/8)*N.h/t.X),s=Math.ceil(Math.ceil(t.s/8)*N.A/t.B),a=e*N.h,o=r*N.A;N.D=new Int16Array(64*o*(1+a)),N.P=i,N.c=s}t.m=e,t.R=r}(r);break;case 65476:var I=J(e,s);for(s+=2,S=2;S<I;){for(var M=e[s++],F=new Uint8Array(16),A=0,E=0;E<16;E++,s++)A+=F[E]=e[s];var U=new Uint8Array(A);for(E=0;E<A;E++,s++)U[E]=e[s];S+=17+A,(M>>4==0?p:c)[15&M]=function(t,e){for(var r,n,i=0,s=[],a=16;0<a&&!t[a-1];)a--;s.push({children:[],index:0});for(var o=s[0],h=0;h<a;h++){for(r=0;r<t[h];r++){for((o=s.pop()).children[o.index]=e[i];0<o.index;)o=s.pop();for(o.index++,s.push(o);s.length<=h;)s.push(n={children:[],index:0}),o.children[o.index]=n.children,o=n;i++}h+1<a&&(s.push(n={children:[],index:0}),o.children[o.index]=n.children,o=n)}return s[0].children}(F,U)}break;case 65501:n=J(e,s+=2),s+=2;break;case 65498:var O=1==++h&&!i;s+=2;var D=e[s++],L=[];for(S=0;S<D;S++){var N,R=e[s++],B=r._[R];(N=r.W[B]).index=R;R=e[s++];N.J=p[R>>4],N.i=c[15&R],L.push(N)}var z=e[s++],g=e[s++],y=e[s++];try{var G=q(e,s,r,L,n,z,g,y>>4,15&y,O);s+=G}catch(t){if(t instanceof DNLMarkerError)return this.parse(e,{F:t.s});if(t instanceof EOIMarkerError)break t;throw t}break;case 65500:s+=4;break;case 65535:255!==e[s]&&s--;break;default:O=X(e,s-2,s-3);if(O&&O.u){s=O.offset;break}if(s>=e.length-1)break t;throw new H("JpegImage.parse - unknown marker: "+d.toString(16))}d=J(e,s),s+=2}for(this.width=r.o,this.height=r.s,this.g=a,this.b=o,this.W=[],S=0;S<r.W.length;S++){var Z=u[(N=r.W[S]).L];Z&&(N.$=Z),this.W.push({index:N.index,e:W(0,N),l:N.h/r.X,t:N.A/r.B,P:N.P,c:N.c})}this.p=this.W.length},Y(t,e,r){null==r&&(r=!1);for(var n,i,s,a,o,h,l,f,u,c,p,d=this.width/t,g=this.height/e,v=0,m=this.W.length,_=t*e*m,y=new Uint8ClampedArray(_),w=new Uint32Array(t),b=0;b<m;b++){if(i=(n=this.W[b]).l*d,s=n.t*g,v=b,c=n.e,a=n.P+1<<3,i!==p){for(o=0;o<t;o++)w[o]=(4294967288&(l=0|o*i))<<3|7&l;p=i}for(h=0;h<e;h++)for(u=a*(4294967288&(l=0|h*s))|(7&l)<<3,o=0;o<t;o++)y[v]=c[u+w[o]],v+=m}var x=this.V;if(x=!r&&4===m&&!x?new Int32Array([-256,255,-256,255,-256,255,-256,255]):x)for(b=0;b<_;)for(f=l=0;l<m;l++,b++,f+=2)y[b]=(y[b]*x[f]>>8)+x[f+1];return y},get f(){return this.b?!!this.b.a:3===this.p?0!==this.N&&(82!==this.W[0].index||71!==this.W[1].index||66!==this.W[2].index):1===this.N},z:function(t){for(var e,r,n,i=0,s=t.length;i<s;i+=3)e=t[i],r=t[i+1],n=t[i+2],t[i]=e-179.456+1.402*n,t[i+1]=e+135.459-.344*r-.714*n,t[i+2]=e-226.816+1.772*r;return t},O:function(t){for(var e,r,n,i,s=0,a=0,o=t.length;a<o;a+=4)e=t[a],r=t[a+1],n=t[a+2],i=t[a+3],t[s++]=r*(-660635669420364e-19*r+.000437130475926232*n-54080610064599e-18*e+.00048449797120281*i-.154362151871126)-122.67195406894+n*(-.000957964378445773*n+.000817076911346625*e-.00477271405408747*i+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*i+.48357088451265)+i*(-.000336197177618394*i+.484791561490776),t[s++]=107.268039397724+r*(219927104525741e-19*r-.000640992018297945*n+.000659397001245577*e+.000426105652938837*i-.176491792462875)+n*(-.000778269941513683*n+.00130872261408275*e+.000770482631801132*i-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*i+.25802910206845)+i*(-.000318913117588328*i-.213742400323665),t[s++]=r*(-.000570115196973677*r-263409051004589e-19*n+.0020741088115012*e-.00288260236853442*i+.814272968359295)-20.810012546947+n*(-153496057440975e-19*n-.000132689043961446*e+.000560833691242812*i-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*i+.116935020465145)+i*(-.000343531996510555*i+.24165260232407);return t.subarray(0,s)},r:function(t){for(var e,r,n,i=0,s=t.length;i<s;i+=4)e=t[i],r=t[i+1],n=t[i+2],t[i]=434.456-e-1.402*n,t[i+1]=119.541-e+.344*r+.714*n,t[i+2]=481.816-e-1.772*r;return t},U:function(t){for(var e,r,n,i,s=0,a=0,o=t.length;a<o;a+=4)e=t[a],r=t[a+1],n=t[a+2],i=t[a+3],t[s++]=255+e*(-6747147073602441e-20*e+.0008379262121013727*r+.0002894718188643294*n+.003264231057537806*i-1.1185611867203937)+r*(26374107616089405e-21*r-8626949158638572e-20*n-.0002748769067499491*i-.02155688794978967)+n*(-3878099212869363e-20*n-.0003267808279485286*i+.0686742238595345)-i*(.0003361971776183937*i+.7430659151342254),t[s++]=255+e*(.00013596372813588848*e+.000924537132573585*r+.00010567359618683593*n+.0004791864687436512*i-.3109689587515875)+r*(-.00023545346108370344*r+.0002702845253534714*n+.0020200308977307156*i-.7488052167015494)+n*(6834815998235662e-20*n+.00015168452363460973*i-.09751927774728933)-i*(.0003189131175883281*i+.7364883807733168),t[s++]=255+e*(13598650411385307e-21*e+.00012423956175490851*r+.0004751985097583589*n-36729317476630422e-22*i-.05562186980264034)+r*(.00016141380598724676*r+.0009692239130725186*n+.0007782692450036253*i-.44015232367526463)+n*(5.068882914068769e-7*n+.0017778369011375071*i-.7591454649749609)-i*(.0003435319965105553*i+.7063770186160144);return t.subarray(0,s)},getData:function(t){var e=t.width,r=t.height,n=t.forceRGB,t=t.isSourcePDF;if(4<this.p)throw new H("Unsupported color mode");var i=this.Y(e,r,t);if(1===this.p&&n){for(var s=i.length,a=new Uint8ClampedArray(3*s),o=0,h=0;h<s;h++){var l=i[h];a[o++]=l,a[o++]=l,a[o++]=l}return a}if(3===this.p&&this.f)return this.z(i);if(4===this.p){if(this.f)return n?this.O(i):this.r(i);if(n)return this.U(i)}return i}},e);function e(t){null==(t=null==t?{}:t).w&&(t.w=-1),this.V=t.n,this.N=t.w}function V(t,e,r){return 64*((t.P+1)*e+r)}function q(r,n,i,t,e,h,l,s,f,a){null==a&&(a=!1);var u,o,c,p,d,g,v,m,_,y=i.m,w=i.Z,b=n,x=0,S=0,C=0,P=0,k=0,T=0;function I(){if(0<S)return x>>--S&1;if(255===(x=r[n++])){var t=r[n++];if(t){if(220===t&&a){var e=J(r,n+=2);if(n+=2,0<e&&e!==i.s)throw new DNLMarkerError("Found DNL marker (0xFFDC) while parsing scan data",e)}else if(217===t){if(a){t=8*k;if(0<t&&t<i.s/10)throw new DNLMarkerError("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",t)}throw new EOIMarkerError("Found EOI marker (0xFFD9) while parsing scan data")}throw new H("unexpected marker")}}return x>>>(S=7)}function M(t){for(var e=t;;){switch(typeof(e=e[I()])){case"number":return e;case"object":continue}throw new H("invalid huffman sequence")}}function F(t){for(var e=0;0<t;)e=e<<1|I(),t--;return e}function A(t){if(1===t)return 1===I()?1:-1;var e=F(t);return 1<<t-1<=e?e:e+(-1<<t)+1}for(var E,U,O,D,L,N,R,B,z=t.length,G=w?0===h?0===s?function(t,e){var r=0===(r=M(t.J))?0:A(r)<<f;t.D[e]=t.Q+=r}:function(t,e){t.D[e]|=I()<<f}:0===s?function(t,e){if(0<C)C--;else for(var r=h,n=l;r<=n;){var i=M(t.i),s=15&i,a=i>>4;if(0!=s){i=j[r+=a];t.D[e+i]=A(s)*(1<<f),r++}else{if(a<15){C=F(a)+(1<<a)-1;break}r+=16}}}:function(t,e){for(var r,n=h,i=l,s=0;n<=i;){var a=e+j[n],o=t.D[a]<0?-1:1;switch(P){case 0:if(s=(r=M(t.i))>>4,0==(r=15&r))P=s<15?(C=F(s)+(1<<s),4):(s=16,1);else{if(1!=r)throw new H("invalid ACn encoding");u=A(r),P=s?2:3}continue;case 1:case 2:t.D[a]?t.D[a]+=o*(I()<<f):0===--s&&(P=2===P?3:0);break;case 3:t.D[a]?t.D[a]+=o*(I()<<f):(t.D[a]=u<<f,P=0);break;case 4:t.D[a]&&(t.D[a]+=o*(I()<<f))}n++}4===P&&0===--C&&(P=0)}:function(t,e){var r=0===(r=M(t.J))?0:A(r),n=1;for(t.D[e]=t.Q+=r;n<64;){var i=M(t.i),s=15&i,a=i>>4;if(0!=s){i=j[n+=a];t.D[e+i]=A(s),n++}else{if(a<15)break;n+=16}}},Z=1===z?t[0].P*t[0].c:y*i.R;T<=Z;){var q=e?Math.min(Z-T,e):Z;if(0<q){for(c=0;c<z;c++)t[c].Q=0;if(C=0,1===z)for(o=t[0],g=0;g<q;g++)R=G,k=(B=T)/(N=o).P|0,B%=N.P,R(N,V(N,k,B)),T++;else for(g=0;g<q;g++){for(c=0;c<z;c++)for(m=(o=t[c]).h,_=o.A,p=0;p<_;p++)for(d=0;d<m;d++)U=G,D=p,L=d,k=((O=T)/y|0)*(E=o).A+D,L=O%y*E.h+L,U(E,V(E,k,L));T++}}if(S=0,!(v=X(r,n)))break;if(v.u&&(n=v.offset),!(65488<=v.M&&v.M<=65495))break;n+=2}return n-b}function W(t,e){for(var r=e.P,n=e.c,i=new Int16Array(64),s=0;s<n;s++)for(var a=0;a<r;a++)!function(t,e,r){var n,i,s,a,o,h,l,f,u,c,p,d,g,v,m,_,y,w=t.$,b=t.D;if(!w)throw new H("missing required Quantization Table.");for(var x=0;x<64;x+=8)u=b[e+x],c=b[e+x+1],p=b[e+x+2],d=b[e+x+3],g=b[e+x+4],v=b[e+x+5],m=b[e+x+6],_=b[e+x+7],u*=w[x],0!=(c|p|d|g|v|m|_)?(c*=w[x+1],p*=w[x+2],d*=w[x+3],g*=w[x+4],v*=w[x+5],m*=w[x+6],_*=w[x+7],i=(n=(n=F*u+128>>8)+(i=F*g+128>>8)+1>>1)-i,y=(s=p)*M+(a=m)*I+128>>8,s=s*I-a*M+128>>8,l=(o=(o=A*(c-_)+128>>8)+(l=v<<4)+1>>1)-l,h=(f=(f=A*(c+_)+128>>8)+(h=d<<4)+1>>1)-h,a=(n=n+(a=y)+1>>1)-a,s=(i=i+s+1>>1)-s,y=o*T+f*k+2048>>12,o=o*k-f*T+2048>>12,f=y,y=h*P+l*C+2048>>12,h=h*C-l*P+2048>>12,l=y,r[x]=n+f,r[x+7]=n-f,r[x+1]=i+l,r[x+6]=i-l,r[x+2]=s+h,r[x+5]=s-h,r[x+3]=a+o,r[x+4]=a-o):(r[x]=y=F*u+512>>10,r[x+1]=y,r[x+2]=y,r[x+3]=y,r[x+4]=y,r[x+5]=y,r[x+6]=y,r[x+7]=y);for(var S=0;S<8;++S)u=r[S],0!=((c=r[S+8])|(p=r[S+16])|(d=r[S+24])|(g=r[S+32])|(v=r[S+40])|(m=r[S+48])|(_=r[S+56]))?(i=(n=4112+((n=F*u+2048>>12)+(i=F*g+2048>>12)+1>>1))-i,y=(s=p)*M+(a=m)*I+2048>>12,s=s*I-a*M+2048>>12,a=y,l=(o=(o=A*(c-_)+2048>>12)+(l=v)+1>>1)-l,h=(f=(f=A*(c+_)+2048>>12)+(h=d)+1>>1)-h,y=o*T+f*k+2048>>12,o=o*k-f*T+2048>>12,f=y,y=h*P+l*C+2048>>12,h=h*C-l*P+2048>>12,(u=(n=n+a+1>>1)+f)<16?u=0:4080<=u?u=255:u>>=4,(c=(i=i+s+1>>1)+(l=y))<16?c=0:4080<=c?c=255:c>>=4,(p=(s=i-s)+h)<16?p=0:4080<=p?p=255:p>>=4,(d=(a=n-a)+o)<16?d=0:4080<=d?d=255:d>>=4,(g=a-o)<16?g=0:4080<=g?g=255:g>>=4,(v=s-h)<16?v=0:4080<=v?v=255:v>>=4,(m=i-l)<16?m=0:4080<=m?m=255:m>>=4,(_=n-f)<16?_=0:4080<=_?_=255:_>>=4,b[e+S]=u,b[e+S+8]=c,b[e+S+16]=p,b[e+S+24]=d,b[e+S+32]=g,b[e+S+40]=v,b[e+S+48]=m,b[e+S+56]=_):(b[e+S]=y=(y=F*u+8192>>14)<-2040?0:2024<=y?255:y+2056>>4,b[e+S+8]=y,b[e+S+16]=y,b[e+S+24]=y,b[e+S+32]=y,b[e+S+40]=y,b[e+S+48]=y,b[e+S+56]=y)}(e,V(e,s,a),i);return e.D}function X(t,e,r){var n=t.length-1,i=(r=null==r?e:r)<e?r:e;if(n<=e)return null;r=J(t,e);if(65472<=r&&r<=65534)return{u:null,M:r,offset:e};for(var s=J(t,i);!(65472<=s&&s<=65534);){if(++i>=n)return null;s=J(t,i)}return{u:r.toString(16),M:s,offset:i}}function r(t){this.message="JPEG error: "+t}function J(t,e){return t[e]<<8|t[e+1]}st.JpegDecoder=t}(),st.encodeImage=function(t,e,r,n){var i={t256:[e],t257:[r],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[r],t279:[e*r*4],t282:[[72,1]],t283:[[72,1]],t284:[1],t286:[[0,1]],t287:[[0,1]],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(n)for(var s in n)i[s]=n[s];for(var a=new Uint8Array(st.encode([i])),o=new Uint8Array(t),h=new Uint8Array(1e3+e*r*4),s=0;s<a.length;s++)h[s]=a[s];for(s=0;s<o.length;s++)h[1e3+s]=o[s];return h.buffer},st.encode=function(t){var e=new Uint8Array(2e4),r=st._binBE,n=8;e[0]=e[1]=77,r.writeUshort(e,2,42),r.writeUint(e,4,n);for(var i=0;i<t.length;i++){var s=st._writeIFD(r,st._types.basic,e,n,t[i]),n=s[1];i<t.length-1&&(0!=(3&n)&&(n+=4-(3&n)),r.writeUint(e,s[0],n))}return e.slice(0,n).buffer},st.decode=function(t,e){null==e&&(e={parseMN:!0,debug:!1});var r=new Uint8Array(t),t=0;t+=2;var n="II"==st._binBE.readASCII(r,0,2)?st._binLE:st._binBE;n.readUshort(r,2);t+=2;for(var i=n.readUint(r,4),s=[];;){var a=n.readUshort(r,i),o=n.readUshort(r,i+4);if(0!=a&&(o<1||13<o)){B("error in TIFF");break}if(st._readIFD(n,r,i,s,0,e),0==(i=n.readUint(r,i+2+12*a)))break}return s},st.decodeImage=function(t,e,r){if(!e.data){var n,i=new Uint8Array(t),t=st._binBE.readASCII(i,0,2),s=0;if(null!=e.t256){e.isLE="II"==t,e.width=e.t256[0],e.height=e.t257[0];var a=e.t259?e.t259[0]:1,o=e.t266?e.t266[0]:1;e.t284&&2==e.t284[0]&&B("PlanarConfiguration 2 should not be used!"),7==a&&e.t258&&3<e.t258.length&&(e.t258=e.t258.slice(0,3)),n=e.t258?Math.min(32,e.t258[0])*e.t258.length:e.t277?e.t277[0]:1,1==a&&null!=e.t279&&e.t278&&32803==e.t262[0]&&(n=Math.round(8*e.t279[0]/(e.width*e.t278[0])));var h=8*Math.ceil(e.width*n/8),l=e.t273;null==l&&(l=e.t324);var f=e.t279;null==(f=1==a&&1==l.length?[e.height*(h>>>3)]:f)&&(f=e.t325);var u=new Uint8Array(e.height*(h>>>3));if(null!=e.t322){for(var c=e.t322[0],p=e.t323[0],d=Math.floor((e.width+c-1)/c),g=Math.floor((e.height+p-1)/p),v=new Uint8Array(0|Math.ceil(c*p*n/8)),m=0;m<g;m++)for(var _=0;_<d;_++){for(var y=m*d+_,w=0;w<v.length;w++)v[w]=0;st.decode._decompress(e,r,i,l[y],f[y],a,v,0,o),6==a?u=v:st._copyTile(v,0|Math.ceil(c*n/8),p,u,0|Math.ceil(e.width*n/8),e.height,0|Math.ceil(_*c*n/8),m*p)}s=8*u.length}else{for(var b=e.t278?e.t278[0]:e.height,b=Math.min(b,e.height),y=0;y<l.length;y++)st.decode._decompress(e,r,i,l[y],f[y],a,u,0|Math.ceil(s/8),o),s+=h*b;s=Math.min(s,8*u.length)}e.data=new Uint8Array(u.buffer,0,0|Math.ceil(s/8))}}},st.decode._decompress=function(t,e,r,n,i,s,a,o,h){if(0,1==s)for(var l=0;l<i;l++)a[o+l]=r[n+l];else if(3==s)st.decode._decodeG3(r,n,i,a,o,t.width,h,!!t.t292&&1==(1&t.t292[0]));else if(4==s)st.decode._decodeG4(r,n,i,a,o,t.width,h);else if(5==s)st.decode._decodeLZW(r,n,i,a,o,8);else if(6==s)st.decode._decodeOldJPEG(t,r,n,i,a,o);else if(7==s||34892==s)st.decode._decodeNewJPEG(t,r,n,i,a,o);else if(8==s||32946==s)for(var h=new Uint8Array(r.buffer,n,i),f=S.inflate(h),u=0;u<f.length;u++)a[o+u]=f[u];else 9==s?st.decode._decodeVC5(r,n,i,a,o):32767==s?st.decode._decodeARW(t,r,n,i,a,o):32773==s?st.decode._decodePackBits(r,n,i,a,o):32809==s?st.decode._decodeThunder(r,n,i,a,o):34713==s?st.decode._decodeNikon(t,e,r,n,i,a,o):B("Unknown compression",s);var c=t.t258?Math.min(32,t.t258[0]):1,p=t.t277?t.t277[0]:1,d=c*p>>>3,g=t.t278?t.t278[0]:t.height,v=Math.ceil(c*p*t.width/8);if(16==c&&!t.isLE&&null==t.t33422)for(var m=0;m<g;m++)for(var _=o+m*v,y=1;y<v;y+=2){var w=a[_+y];a[_+y]=a[_+y-1],a[_+y-1]=w}if(t.t317&&2==t.t317[0])for(m=0;m<g;m++){var b=o+m*v;if(16==c)for(l=d;l<v;l+=2){var x=(a[b+l+1]<<8|a[b+l])+(a[b+l-d+1]<<8|a[b+l-d]);a[b+l]=255&x,a[b+l+1]=x>>>8&255}else if(3==p)for(l=3;l<v;l+=3)a[b+l]=a[b+l]+a[b+l-3]&255,a[b+l+1]=a[b+l+1]+a[b+l-2]&255,a[b+l+2]=a[b+l+2]+a[b+l-1]&255;else for(l=d;l<v;l++)a[b+l]=a[b+l]+a[b+l-d]&255}},st.decode._decodeVC5=st.decode._decodeVC5=(lt=[1,0,1,0,2,2,1,1,3,7,1,2,5,25,1,3,6,48,1,4,6,54,1,5,7,111,1,8,7,99,1,6,7,105,12,0,7,107,1,7,8,209,20,0,8,212,1,9,8,220,1,10,9,393,1,11,9,394,32,0,9,416,1,12,9,427,1,13,10,887,1,18,10,784,1,14,10,790,1,15,10,835,60,0,10,852,1,16,10,885,1,17,11,1571,1,19,11,1668,1,20,11,1669,100,0,11,1707,1,21,11,1772,1,22,12,3547,1,29,12,3164,1,24,12,3166,1,25,12,3140,1,23,12,3413,1,26,12,3537,1,27,12,3539,1,28,13,7093,1,35,13,6283,1,30,13,6331,1,31,13,6335,180,0,13,6824,1,32,13,7072,1,33,13,7077,320,0,13,7076,1,34,14,12565,1,36,14,12661,1,37,14,12669,1,38,14,13651,1,39,14,14184,1,40,15,28295,1,46,15,28371,1,47,15,25320,1,42,15,25336,1,43,15,25128,1,41,15,27300,1,44,15,28293,1,45,16,50259,1,48,16,50643,1,49,16,50675,1,50,16,56740,1,53,16,56584,1,51,16,56588,1,52,17,113483,1,61,17,113482,1,60,17,101285,1,55,17,101349,1,56,17,109205,1,57,17,109207,1,58,17,100516,1,54,17,113171,1,59,18,202568,1,62,18,202696,1,63,18,218408,1,64,18,218412,1,65,18,226340,1,66,18,226356,1,67,18,226358,1,68,19,402068,1,69,19,405138,1,70,19,405394,1,71,19,436818,1,72,19,436826,1,73,19,452714,1,75,19,452718,1,76,19,452682,1,74,20,804138,1,77,20,810279,1,78,20,810790,1,79,20,873638,1,80,20,873654,1,81,20,905366,1,82,20,905430,1,83,20,905438,1,84,21,1608278,1,85,21,1620557,1,86,21,1621582,1,87,21,1621583,1,88,21,1747310,1,89,21,1810734,1,90,21,1810735,1,91,21,1810863,1,92,21,1810879,1,93,22,3621725,1,99,22,3621757,1,100,22,3241112,1,94,22,3494556,1,95,22,3494557,1,96,22,3494622,1,97,22,3494623,1,98,23,6482227,1,102,23,6433117,1,101,23,6989117,1,103,23,6989119,1,105,23,6989118,1,104,23,7243449,1,106,23,7243512,1,107,24,13978233,1,111,24,12964453,1,109,24,12866232,1,108,24,14486897,1,113,24,13978232,1,110,24,14486896,1,112,24,14487026,1,114,24,14487027,1,115,25,25732598,1,225,25,25732597,1,189,25,25732596,1,188,25,25732595,1,203,25,25732594,1,202,25,25732593,1,197,25,25732592,1,207,25,25732591,1,169,25,25732590,1,223,25,25732589,1,159,25,25732522,1,235,25,25732579,1,152,25,25732575,1,192,25,25732489,1,179,25,25732573,1,201,25,25732472,1,172,25,25732576,1,149,25,25732488,1,178,25,25732566,1,120,25,25732571,1,219,25,25732577,1,150,25,25732487,1,127,25,25732506,1,211,25,25732548,1,125,25,25732588,1,158,25,25732486,1,247,25,25732467,1,238,25,25732508,1,163,25,25732552,1,228,25,25732603,1,183,25,25732513,1,217,25,25732587,1,168,25,25732520,1,122,25,25732484,1,128,25,25732562,1,249,25,25732505,1,187,25,25732504,1,186,25,25732483,1,136,25,25928905,1,181,25,25732560,1,255,25,25732500,1,230,25,25732482,1,135,25,25732555,1,233,25,25732568,1,222,25,25732583,1,145,25,25732481,1,134,25,25732586,1,167,25,25732521,1,248,25,25732518,1,209,25,25732480,1,243,25,25732512,1,216,25,25732509,1,164,25,25732547,1,140,25,25732479,1,157,25,25732544,1,239,25,25732574,1,191,25,25732564,1,251,25,25732478,1,156,25,25732546,1,139,25,25732498,1,242,25,25732557,1,133,25,25732477,1,162,25,25732515,1,213,25,25732584,1,165,25,25732514,1,212,25,25732476,1,227,25,25732494,1,198,25,25732531,1,236,25,25732530,1,234,25,25732529,1,117,25,25732528,1,215,25,25732527,1,124,25,25732526,1,123,25,25732525,1,254,25,25732524,1,253,25,25732523,1,148,25,25732570,1,218,25,25732580,1,146,25,25732581,1,147,25,25732569,1,224,25,25732533,1,143,25,25732540,1,184,25,25732541,1,185,25,25732585,1,166,25,25732556,1,132,25,25732485,1,129,25,25732563,1,250,25,25732578,1,151,25,25732501,1,119,25,25732502,1,193,25,25732536,1,176,25,25732496,1,245,25,25732553,1,229,25,25732516,1,206,25,25732582,1,144,25,25732517,1,208,25,25732558,1,137,25,25732543,1,241,25,25732466,1,237,25,25732507,1,190,25,25732542,1,240,25,25732551,1,131,25,25732554,1,232,25,25732565,1,252,25,25732475,1,171,25,25732493,1,205,25,25732492,1,204,25,25732491,1,118,25,25732490,1,214,25,25928904,1,180,25,25732549,1,126,25,25732602,1,182,25,25732539,1,175,25,25732545,1,141,25,25732559,1,138,25,25732537,1,177,25,25732534,1,153,25,25732503,1,194,25,25732606,1,160,25,25732567,1,121,25,25732538,1,174,25,25732497,1,246,25,25732550,1,130,25,25732572,1,200,25,25732474,1,170,25,25732511,1,221,25,25732601,1,196,25,25732532,1,142,25,25732519,1,210,25,25732495,1,199,25,25732605,1,155,25,25732535,1,154,25,25732499,1,244,25,25732510,1,220,25,25732600,1,195,25,25732607,1,161,25,25732604,1,231,25,25732473,1,173,25,25732599,1,226,26,51465122,1,116,26,51465123,0,1],ft=[3,3,3,3,2,2,2,1,1,1],function(t,e,r,n,i){n=new Uint16Array(n.buffer);var s,a,o,h,l,f,u=Date.now(),c=st._binBE,p=e+r;for(e+=4;e<p;){var d=c.readShort(t,e),g=c.readUshort(t,e+2);if(e+=4,12==d)S=g;else if(20==d)s=g;else if(21==d)a=g;else if(48==d)o=g;else if(53==d)h=g;else if(35==d)0;else if(62==d)l=g;else if(101==d)0;else if(109==d)f=g;else if(84==d)0;else if(106==d)0;else if(107==d)0;else if(108==d)0;else if(102==d)0;else if(104==d)G=g;else if(105==d)0;else{var v=d<0?-d:d,m=65280&v,_=0;if(24576&v&&(8192&v?(_=65535&g,_+=(255&v)<<16):_=65535&g),24576==(24576&v)){if(null==y){for(var y=[],w=0;w<4;w++)y[w]=new Int16Array((s>>>1)*(a>>>1));j=new Int16Array((s>>>1)*(a>>>1)),ot=new Int16Array(1024);for(w=0;w<1024;w++){var b=w-512,x=Math.abs(b),S=Math.floor(768*x*x*x/16581375)+x;ot[w]=Math.sign(b)*S}ht=new Uint16Array(4096);for(w=0;w<4096;w++){var C=w,C=65535*(Math.pow(113,C/4095)-1)/112;ht[w]=Math.min(C,65535)}}var P=y[l],k=ct(s,1+ft[o]),T=ct(a,1+ft[o]);if(0==o)for(var I=0;I<T;I++)for(var M=0;M<k;M++){var F=e+2*(I*k+M);P[I*(s>>>1)+M]=t[F]<<8|t[F+1]}else{for(var A=[t,8*e],E=[],U=0,O=k*T,D=[0,0],L=0,g=0;U<O;)for(!function(t,e){if(null==at){at={};for(var r=0;r<lt.length;r+=4)at[lt[r+1]]=lt.slice(r,r+4)}for(var n=ut(t),i=at[n];null==i;)n=n<<1|ut(t),i=at[n];var s=i[3];0!=s&&(s=0==ut(t)?s:-s),e[0]=i[2],e[1]=s}(A,D),L=D[0],g=D[1];0<L;)E[U++]=g,L--;for(var d=(o-1)%3,N=1!=d?k:0,R=0!=d?T:0,I=0;I<T;I++)for(var B=(I+R)*(s>>>1)+N,z=I*k,M=0;M<k;M++)P[B+M]=ot[E[z+M]+512]*h;if(2==d){for(var G=s>>>1,Z=2*k,q=2*T,I=0;I<T;I++)for(M=0;M<Z;M++)(0==I?pt:I==T-1?gt:dt)(P,j,w=2*I*G+M,T*G+(H=I*G+M),H,G);for(var d=P,P=j,j=d,I=0;I<q;I++)for(var H,M=0;M<k;M++)(0==M?pt:M==k-1?gt:dt)(P,j,w=I*G+2*M,k+(H=I*G+M),H,1);d=P;P=j,j=d;for(var V=[],d=2-~~((o-1)/3),W=0;W<3;W++)V[W]=f>>14-2*W&3;var X=V[d];if(0!=X)for(I=0;I<q;I++)for(M=0;M<Z;M++)P[w=I*G+M]=P[w]<<X}}if(9==o&&3==l)for(var J=y[0],Y=y[1],Q=y[2],K=y[3],I=0;I<a;I+=2)for(M=0;M<s;M+=2){var $=I*s+M,tt=J[F=(I>>>1)*(s>>>1)+(M>>>1)],et=Y[F]-2048,rt=Q[F]-2048,nt=K[F]-2048,it=(rt<<1)+tt,rt=tt+nt,nt=tt-nt;n[$]=vt((et<<1)+tt),n[$+1]=vt(rt),n[$+s]=vt(nt),n[$+s+1]=vt(it)}e+=4*_}else if(16388==v)e+=4*_;else if(8192!=m&&8448!=m&&9216!=m)throw v.toString(16)}}console.log(Date.now()-u)}),st.decode._ljpeg_diff=function(t,e,r){var n=st.decode._getbithuff,r=n(t,e,r[0],r),e=n(t,e,r,0);return 0==(e&1<<r-1)&&(e-=(1<<r)-1),e},st.decode._decodeARW=function(t,e,r,n,i,s){var a,o,h,l,f,u,c,p,d=t.t256[0],g=t.t257[0],v=t.t258[0],m=t.isLE?st._binLE:st._binBE;if(d*g==n||d*g*1.5==n)if(d*g*1.5!=n){var _=new Uint16Array(16),y=new Uint8Array(d+1);for(T=0;T<g;T++){for(var w=0;w<d;w++)y[w]=e[r++];for(k=p=0;k<d-30;p+=16){for(o=2047&(a=m.readUint(y,p)),h=2047&a>>>11,l=15&a>>>22,f=15&a>>>26,u=0;u<4&&128<<u<=o-h;u++);for(c=30,C=0;C<16;C++)C==l?_[C]=o:C==f?_[C]=h:(_[C]=((m.readUshort(y,p+(c>>3))>>>(7&c)&127)<<u)+h,2047<_[C]&&(_[C]=2047),c+=7);for(C=0;C<16;C++,k+=2){I=_[C]<<1;st.decode._putsF(i,(T*d+k)*v,I<<16-v)}k-=1&k?1:31}}}else for(C=0;C<n;C+=3){var b=e[r+C+0],x=e[r+C+1],S=e[r+C+2];i[s+C]=x<<4|b>>>4,i[s+C+1]=b<<4|S>>>4,i[s+C+2]=S<<4|x>>>4}else{g+=8;var C,P,k,T,I,M=[r,0,0,0],F=new Uint16Array(32770),A=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],E=0,U=st.decode._ljpeg_diff;for(F[0]=15,P=C=0;C<18;C++)for(var O=32768>>>(A[C]>>>8),D=0;D<O;D++)F[++P]=A[C];for(k=d;k--;)for(T=0;T<g+1;T+=2)T==g&&(T=1),E+=U(e,M,F),T<g&&st.decode._putsF(i,(T*d+k)*v,(I=4095&E)<<16-v)}},st.decode._decodeNikon=function(t,e,r,n,i,s,a){var o,h,l,f,u=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],c=t.t256[0],p=t.t257[0],d=t.t258[0],g=0,v=0,m=st.decode._make_decoder,_=st.decode._getbithuff,y=e[0].exifIFD.makerNote,w=y.t150||y.t140,b=0,x=w[b++],S=w[b++],e=0;73!=x&&88!=S||(b+=2110),70==x&&(g=2),14==d&&(g+=3);for(var C=[[0,0],[0,0]],P=t.isLE?st._binLE:st._binBE,k=0;k<2;k++)for(var T=0;T<2;T++)C[k][T]=P.readShort(w,b),b+=2;y=1<<d&32767,t=P.readShort(w,b);b+=2,1<t&&(e=Math.floor(y/(t-1))),68==x&&32==S&&0<e&&(v=P.readShort(w,562));var I=[0,0],M=m(u[g]),F=[n,0,0,0];for(o=0;o<p;o++)for(v&&o==v&&(M=m(u[g+1])),h=0;h<c;h++){k=_(r,F,M[0],M),0==((A=1+(_(r,F,(l=15&k)-(f=k>>>4),0)<<1)<<f>>>1)&1<<l-1)&&(A-=(1<<l)-(0==f?1:0)),h<2?I[h]=C[1&o][h]+=A:I[1&h]+=A;var A=Math.min(Math.max(I[1&h],0),(1<<d)-1);st.decode._putsF(s,(o*c+h)*d,A<<16-d)}},st.decode._putsF=function(t,e,r){var n=e>>>3;t[n]|=(r<<=8-(7&e))>>>16,t[1+n]|=r>>>8,t[2+n]|=r},st.decode._getbithuff=function(t,e,r,n){st.decode._get_byte;var i,s=e[0],a=e[1],o=e[2],h=e[3];if(0==r||o<0)return 0;for(;!h&&o<r&&-1!=(i=t[s++])&&!(h=0);)a=(a<<8)+i,o+=8;if(i=a<<32-o>>>32-r,n?(o-=n[i+1]>>>8,i=255&n[i+1]):o-=r,o<0)throw"e";return e[0]=s,e[1]=a,e[2]=o,e[3]=h,i},st.decode._make_decoder=function(t){for(var e,r,n,i,s=[],a=17,o=16;0!=o&&!t[o];o--);for(s[0]=o,r=e=1;e<=o;e++)for(n=0;n<t[e];n++,++a)for(i=0;i<1<<o-e;i++)r<=1<<o&&(s[r++]=e<<8|t[a]);return s},st.decode._decodeNewJPEG=function(t,e,r,n,i,s){n=Math.min(n,e.length-r);var a=t.t347,o=a?a.length:0,h=new Uint8Array(o+n);if(a){for(var l=0,f=0;f<o-1&&(255!=a[f]||217!=a[f+1]);f++)h[l++]=a[f];var u=e[r],c=e[r+1];255==u&&216==c||(h[l++]=u,h[l++]=c);for(f=2;f<n;f++)h[l++]=e[r+f]}else for(f=0;f<n;f++)h[f]=e[r+f];if(32803==t.t262[0]||7==t.t259[0]&&34892==t.t262[0]){var p=t.t258[0],d=st.LosslessJpegDecode(h),g=d.length;if(0,16==p)if(t.isLE)for(f=0;f<g;f++)i[s+(f<<1)]=255&d[f],i[s+(f<<1)+1]=d[f]>>>8;else for(f=0;f<g;f++)i[s+(f<<1)]=d[f]>>>8,i[s+(f<<1)+1]=255&d[f];else if(14==p||12==p)for(var v=16-p,f=0;f<g;f++)st.decode._putsF(i,f*p,d[f]<<v);else{if(8!=p)throw new Error("unsupported bit depth "+p);for(f=0;f<g;f++)i[s+f]=d[f]}}else{c=new st.JpegDecoder;c.parse(h);for(var m=c.getData({width:c.width,height:c.height,forceRGB:!0,isSourcePDF:!1}),f=0;f<m.length;f++)i[s+f]=m[f]}6==t.t262[0]&&(t.t262[0]=2)},st.decode._decodeOldJPEGInit=function(t,e,r,n){var i,s=0,a=0,o=!1,h=t.t513,l=h?h[0]:0,f=t.t514,u=f?f[0]:0,c=t.t324||t.t273||h,p=t.t530,d=0,g=0,v=t.t277?t.t277[0]:1,m=t.t515;if(c&&(a=c[0],o=1<c.length),!o){if(255==e[r]&&216==e[r+1])return{jpegOffset:r};if(null!=h&&(255==e[r+l]&&216==e[r+l+1]?s=r+l:B("JPEGInterchangeFormat does not point to SOI"),null==f?B("JPEGInterchangeFormatLength field is missing"):(a<=l||l+u<=a)&&B("JPEGInterchangeFormatLength field value is invalid"),null!=s))return{jpegOffset:s}}if(null!=p&&(d=p[0],g=p[1]),null!=h&&null!=f)if(2<=u&&l+u<=a){for(k=255==e[r+l+u-2]&&216==e[r+l+u-1]?new Uint8Array(u-2):new Uint8Array(u),P=0;P<k.length;P++)k[P]=e[r+l+P];B("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else B("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(null==k){var _=0,y=[];y[_++]=255,y[_++]=216;var w=t.t519;if(null==w)throw new Error("JPEGQTables tag is missing");for(P=0;P<w.length;P++)for(y[_++]=255,y[_++]=219,y[_++]=0,y[_++]=67,y[_++]=P,S=0;S<64;S++)y[_++]=e[r+w[P]+S];for(i=0;i<2;i++){var b=t[0==i?"t520":"t521"];if(null==b)throw new Error((0==i?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(P=0;P<b.length;P++){y[_++]=255,y[_++]=196;for(var x=19,S=0;S<16;S++)x+=e[r+b[P]+S];for(y[_++]=x>>>8,y[_++]=255&x,y[_++]=P|i<<4,S=0;S<16;S++)y[_++]=e[r+b[P]+S];for(S=0;S<x;S++)y[_++]=e[r+b[P]+16+S]}}if(y[_++]=255,y[_++]=192,y[_++]=0,y[_++]=8+3*v,y[_++]=8,y[_++]=t.height>>>8&255,y[_++]=255&t.height,y[_++]=t.width>>>8&255,y[_++]=255&t.width,1==(y[_++]=v))y[_++]=1,y[_++]=17,y[_++]=0;else for(P=0;P<3;P++)y[_++]=P+1,y[_++]=0!=P?17:(15&d)<<4|15&g,y[_++]=P;null!=m&&0!=m[0]&&(y[_++]=255,y[_++]=221,y[_++]=0,y[_++]=4,y[_++]=m[0]>>>8&255,y[_++]=255&m[0]),k=new Uint8Array(y)}for(var C=-1,P=0;P<k.length-1;){if(255==k[P]&&192==k[P+1]){C=P;break}P++}if(-1==C){m=new Uint8Array(k.length+10+3*v);m.set(k);var k,T=k.length,C=k.length;if((k=m)[T++]=255,k[T++]=192,k[T++]=0,k[T++]=8+3*v,k[T++]=8,k[T++]=t.height>>>8&255,k[T++]=255&t.height,k[T++]=t.width>>>8&255,k[T++]=255&t.width,1==(k[T++]=v))k[T++]=1,k[T++]=17,k[T++]=0;else for(P=0;P<3;P++)k[T++]=P+1,k[T++]=0!=P?17:(15&d)<<4|15&g,k[T++]=P}if(255==e[a]&&218==e[a+1]){var I,M=e[a+2]<<8|e[a+3];for((I=new Uint8Array(2+M))[0]=e[a],I[1]=e[a+1],I[2]=e[a+2],I[3]=e[a+3],P=0;P<M-2;P++)I[P+4]=e[a+P+4]}else{var F=0;if((I=new Uint8Array(8+2*v))[F++]=255,I[F++]=218,I[F++]=0,I[F++]=6+2*v,1==(I[F++]=v))I[F++]=1,I[F++]=0;else for(P=0;P<3;P++)I[F++]=P+1,I[F++]=P<<4|P;I[F++]=0,I[F++]=63,I[F++]=0}return{jpegOffset:r,tables:k,sosMarker:I,sofPosition:C}},st.decode._decodeOldJPEG=function(t,e,r,n,i,s){var a,o,h,l=st.decode._decodeOldJPEGInit(t,e,r,n);if(null!=l.jpegOffset)for(a=r+n-l.jpegOffset,o=new Uint8Array(a),c=0;c<a;c++)o[c]=e[l.jpegOffset+c];else{for(f=l.tables.length,(o=new Uint8Array(f+l.sosMarker.length+n+2)).set(l.tables),h=f,o[l.sofPosition+5]=t.height>>>8&255,o[l.sofPosition+6]=255&t.height,o[l.sofPosition+7]=t.width>>>8&255,o[l.sofPosition+8]=255&t.width,255==e[r]&&e[r+1]==SOS||(o.set(l.sosMarker,h),h+=sosMarker.length),c=0;c<n;c++)o[h++]=e[r+c];o[h++]=255,o[h++]=EOI}var f=new st.JpegDecoder;f.parse(o);for(var u=f.getData({width:f.width,height:f.height,forceRGB:!0,isSourcePDF:!1}),c=0;c<u.length;c++)i[s+c]=u[c];t.t262&&6==t.t262[0]&&(t.t262[0]=2)},st.decode._decodePackBits=function(t,e,r,n,i){for(var s=new Int8Array(t.buffer),a=new Int8Array(n.buffer),o=e+r;e<o;){var h=s[e];if(e++,0<=h&&h<128)for(var l=0;l<h+1;l++)a[i]=s[e],i++,e++;if(-127<=h&&h<0){for(l=0;l<1-h;l++)a[i]=s[e],i++;e++}}},st.decode._decodeThunder=function(t,e,r,n,i){for(var s=[0,1,0,-1],a=[0,1,2,3,0,-3,-2,-1],o=e+r,h=2*i,l=0;e<o;){var f,u=t[e],c=u>>>6,p=63&u;if(e++,3==c&&(n[h>>>1]|=(l=15&p)<<4*(1-h&1),h++),0==c)for(var d=0;d<p;d++)n[h>>>1]|=l<<4*(1-h&1),h++;if(2==c)for(d=0;d<2;d++)4!=(f=p>>>3*(1-d)&7)&&(l+=a[f],n[h>>>1]|=l<<4*(1-h&1),h++);if(1==c)for(d=0;d<3;d++)2!=(f=p>>>2*(2-d)&3)&&(l+=s[f],n[h>>>1]|=l<<4*(1-h&1),h++)}},st.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},st.decode._lens=(e="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",r="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",n="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",i=(i="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100").split(","),e=e.split(","),r=r.split(","),n=n.split(","),s="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111".split(","),t={},h(o={},i,0,1),h(o,r,64,64),h(o,s,1792,64),h(t,e,0,1),h(t,n,64,64),h(t,s,1792,64),[o,t]),st.decode._decodeG4=function(t,e,r,n,i,s,a){for(var o,h=st.decode,l=e<<3,f=0,u="",c=[],p=[],d=0,g=0,v=0,m="",_=0,y=0;y<s;y++)p.push(0);for(var p=h._makeDiff(p),w=8*Math.ceil(s/8);l>>>3<e+r;){var b=h._findDiff(p,d+(0==d?0:1),1-g),x=h._findDiff(p,b,g),S=0;1==a&&(S=t[l>>>3]>>>7-(7&l)&1),2==a&&(S=t[l>>>3]>>>(7&l)&1),l++,u+=S,"H"==m?null!=h._lens[g][u]&&(S=h._lens[g][u],u="",f+=S,S<64&&(h._addNtimes(c,f,g),d+=f,g=1-g,(f=0)==--_&&(m=""))):("0001"==u&&(u="",h._addNtimes(c,x-d,g),d=x),"001"==u&&(u="",m="H",_=2),null!=h._dmap[u]&&(o=b+h._dmap[u],h._addNtimes(c,o-d,g),d=o,u="",g=1-g)),c.length==s&&""==m&&(h._writeBits(c,n,8*i+v*w),v++,d=g=0,p=h._makeDiff(c),c=[])}},st.decode._findDiff=function(t,e,r){for(var n=0;n<t.length;n+=2)if(t[n]>=e&&t[n+1]==r)return t[n]},st.decode._makeDiff=function(t){var e=[];1==t[0]&&e.push(0,1);for(var r=1;r<t.length;r++)t[r-1]!=t[r]&&e.push(r,t[r]);return e.push(t.length,0,t.length,1),e},st.decode._decodeG3=function(t,e,r,n,i,s,a,o){for(var h,l=st.decode,f=e<<3,u=0,c="",p=[],d=[],g=0,v=0,m="",_=0,y=!0,w=0;w<s;w++)p.push(0);for(var b=-1,x=8*Math.ceil(s/8);f>>>3<e+r;){var S,C=l._findDiff(d,g+(0==g?0:1),1-v),P=l._findDiff(d,C,v),k=0;1==a&&(k=t[f>>>3]>>>7-(7&f)&1),2==a&&(k=t[f>>>3]>>>(7&f)&1),f++,c+=k,y?null!=l._lens[v][c]&&(S=l._lens[v][c],c="",u+=S,S<64&&(l._addNtimes(p,u,v),v=1-v,u=0)):"H"==m?null!=l._lens[v][c]&&(S=l._lens[v][c],c="",u+=S,S<64&&(l._addNtimes(p,u,v),g+=u,v=1-v,(u=0)==--_&&(m=""))):("0001"==c&&(c="",l._addNtimes(p,P-g,v),g=P),"001"==c&&(c="",m="H",_=2),null!=l._dmap[c]&&(h=C+l._dmap[c],l._addNtimes(p,h-g,v),g=h,c="",v=1-v)),c.endsWith("000000000001")&&(0<=b&&l._writeBits(p,n,8*i+b*x),o&&(1==a&&(y=1==(t[f>>>3]>>>7-(7&f)&1)),2==a&&(y=1==(t[f>>>3]>>>(7&f)&1)),f++),c="",b++,g=v=0,d=l._makeDiff(p),p=[])}p.length==s&&l._writeBits(p,n,8*i+b*x)},st.decode._addNtimes=function(t,e,r){for(var n=0;n<e;n++)t.push(r)},st.decode._writeBits=function(t,e,r){for(var n=0;n<t.length;n++)e[r+n>>>3]|=t[n]<<7-(r+n&7)},st.decode._decodeLZW=st.decode._decodeLZW=(g=d=a=p=0,v=new Uint32Array(16384),m=0,function(t,e,r,n,i,s){l=e<<3,f=t,u=n,c=i;var a=e+r<<3,o=0,h=0;for(!function(t){if(t!=m){g=(d=1<<(m=t))+1;for(var e=0;e<g+1;e++)v[4*e]=v[4*e+3]=e,v[4*e+1]=65535,v[4*e+2]=1}}(s),G(s);l<a&&(o=z())!=g;){if(o==d){if(G(s),(o=z())==g)break;Z(o)}else o<p?(Z(o),q(h,o)):(q(h,h),Z(p-1));h=o}return c}),st.tags={},st._types=function(){var t=new Array(250);t.fill(0);return{basic:{main:t=t.concat([0,0,0,0,4,3,3,3,3,3,0,0,3,0,0,0,3,0,0,2,2,2,2,4,3,0,0,3,4,4,3,3,5,5,3,2,5,5,0,0,0,0,4,4,0,0,3,3,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,2,2,3,5,5,3,0,3,3,4,4,4,3,4,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),rest:{33432:2,33434:5,33437:5,34665:4,34850:3,34853:4,34855:3,34864:3,34866:4,36864:7,36867:2,36868:2,37121:7,37377:10,37378:5,37380:10,37381:5,37383:3,37384:3,37385:3,37386:5,37510:7,37520:2,37521:2,37522:2,40960:7,40961:3,40962:4,40963:4,40965:4,41486:5,41487:5,41488:3,41985:3,41986:3,41987:3,41988:5,41989:3,41990:3,41993:3,41994:3,41995:7,41996:3,42032:2,42033:2,42034:5,42036:2,42037:2,59932:7}},gps:{main:[1,2,5,2,5,1,5,5,0,9],rest:{18:2,29:2}}}}(),st._readIFD=function(t,e,r,n,i,s){var a=t.readUshort(e,r);r+=2;var o={};s.debug&&B("   ".repeat(i),n.length-1,">>>----------------");for(var h=0;h<a;h++){var l=t.readUshort(e,r);r+=2;var f=t.readUshort(e,r);r+=2;var u=t.readUint(e,r);r+=4;var c=t.readUint(e,r);r+=4;var p,d,g,v=[];if(1!=f&&7!=f||(v=new Uint8Array(e.buffer,u<5?r-4:c,u)),2==f&&(d=e[p=u<5?r-4:c],g=Math.max(0,Math.min(u-1,e.length-p)),d<128||0==g?v.push(t.readASCII(e,p,g)):v=new Uint8Array(e.buffer,p,g)),3==f)for(var m=0;m<u;m++)v.push(t.readUshort(e,(u<3?r-4:c)+2*m));if(4==f||13==f)for(m=0;m<u;m++)v.push(t.readUint(e,(u<2?r-4:c)+4*m));if(5==f||10==f)for(var _=5==f?t.readUint:t.readInt,m=0;m<u;m++)v.push([_(e,c+8*m),_(e,c+8*m+4)]);if(8==f)for(m=0;m<u;m++)v.push(t.readShort(e,(u<3?r-4:c)+2*m));if(9==f)for(m=0;m<u;m++)v.push(t.readInt(e,(u<2?r-4:c)+4*m));if(11==f)for(m=0;m<u;m++)v.push(t.readFloat(e,c+4*m));if(12==f)for(m=0;m<u;m++)v.push(t.readDouble(e,c+8*m));if(0==u||0!=v.length){if(s.debug&&B("   ".repeat(i),l,f,st.tags[l],v),o["t"+l]=v,(330!=l||!o.t272||"DSLR-A100"!=o.t272[0])&&(330==l||34665==l||34853==l||50740==l&&t.readUshort(e,t.readUint(v,0))<300||61440==l)){for(var y=50740==l?[t.readUint(v,0)]:v,w=[],m=0;m<y.length;m++)st._readIFD(t,e,y[m],w,i+1,s);330==l&&(o.subIFD=w),34665==l&&(o.exifIFD=w[0]),34853==l&&(o.gpsiIFD=w[0]),50740==l&&(o.dngPrvt=w[0]),61440==l&&(o.fujiIFD=w[0])}37500==l&&s.parseMN&&(g=v,"Nikon"==t.readASCII(g,0,5)?o.makerNote=st.decode(g.slice(10).buffer)[0]:t.readUshort(e,c)<300&&t.readUshort(e,c+4)<=12&&(st._readIFD(t,e,c,g=[],i+1,s),o.makerNote=g[0]))}else if(B(l,"unknown TIFF tag type: ",f,"num:",u),0==h)return}return n.push(o),s.debug&&B("   ".repeat(i),"<<<---------------"),r},st._writeIFD=function(t,e,r,n,i){var s=Object.keys(i),a=s.length;i.exifIFD&&a--,i.gpsiIFD&&a--,t.writeUshort(r,n,a);for(var o=(n+=2)+12*a+4,h=0;h<s.length;h++){var l=s[h];if("t34665"!=l&&"t34853"!=l){"gpsiIFD"==(l="exifIFD"==l?"t34665":l)&&(l="t34853");var f=parseInt(l.slice(1)),u=e.main[f];if(null==(u=null==u?e.rest[f]:u)||0==u)throw new Error("unknown type of tag: "+f);var c=i[l];34665==f&&(c=[o],o=st._writeIFD(t,e,r,o,i.exifIFD)[1]),34853==f&&(c=[o],o=st._writeIFD(t,st._types.gps,r,o,i.gpsiIFD)[1]);var p=(c=2==u?c[0]+"\0":c).length;t.writeUshort(r,n,f),n+=2,t.writeUshort(r,n,u),n+=2,t.writeUint(r,n,p);var f=[-1,1,1,2,4,8,0,1,0,4,8,0,8][u]*p,d=n+=4;if(4<f&&(t.writeUint(r,n,o),d=o),1==u||7==u)for(var g=0;g<p;g++)r[d+g]=c[g];else if(2==u)t.writeASCII(r,d,c);else if(3==u)for(g=0;g<p;g++)t.writeUshort(r,d+2*g,c[g]);else if(4==u)for(g=0;g<p;g++)t.writeUint(r,d+4*g,c[g]);else if(5==u||10==u)for(var v=5==u?t.writeUint:t.writeInt,g=0;g<p;g++){var m=c[g],_=m[0],m=m[1];if(null==_)throw"e";v(r,d+8*g,_),v(r,d+8*g+4,m)}else if(9==u)for(g=0;g<p;g++)t.writeInt(r,d+4*g,c[g]);else{if(12!=u)throw u;for(g=0;g<p;g++)t.writeDouble(r,d+8*g,c[g])}4<f&&(o+=f+=1&f),n+=4}}return[n,o]},st.toRGBA8=function(t,e){var r=t.width,n=t.height,i=r*n,s=4*i,a=t.data,o=new Uint8Array(4*i),h=t.t262?t.t262[0]:2,l=t.t258?Math.min(32,t.t258[0]):1;if(0,0==(h=null==t.t262&&1==l?0:h))for(var f=Math.ceil(l*r/8),u=0;u<n;u++){var c=u*f,p=u*r;if(1==l)for(var d=0;d<r;d++){var g=p+d<<2,v=a[c+(d>>3)]>>7-(7&d)&1;o[g]=o[g+1]=o[g+2]=255*(1-v),o[g+3]=255}if(4==l)for(d=0;d<r;d++){g=p+d<<2,v=a[c+(d>>1)]>>4-4*(1&d)&15;o[g]=o[g+1]=o[g+2]=17*(15-v),o[g+3]=255}if(8==l)for(d=0;d<r;d++){g=p+d<<2,v=a[c+d];o[g]=o[g+1]=o[g+2]=255-v,o[g+3]=255}}else if(1==h){var m=t.t258?t.t258.length:1,f=Math.ceil(m*l*r/8);null==e&&(e=1/256);for(u=0;u<n;u++){c=u*f,p=u*r;if(1==l)for(d=0;d<r;d++){g=p+d<<2,v=a[c+(d>>3)]>>7-(7&d)&1;o[g]=o[g+1]=o[g+2]=255*v,o[g+3]=255}if(2==l)for(d=0;d<r;d++){g=p+d<<2,v=a[c+(d>>2)]>>6-2*(3&d)&3;o[g]=o[g+1]=o[g+2]=85*v,o[g+3]=255}if(8==l)for(d=0;d<r;d++){g=p+d<<2,v=a[c+d*m];o[g]=o[g+1]=o[g+2]=v,o[g+3]=255}if(16==l)for(d=0;d<r;d++){var g=p+d<<2,_=c+2*d,v=a[_+1]<<8|a[_];o[g]=o[g+1]=o[g+2]=Math.min(255,~~(v*e)),o[g+3]=255}}}else if(2==h){m=t.t258?t.t258.length:3;if(8==l){if(4==m)for(d=0;d<s;d++)o[d]=a[d];if(3==m)for(d=0;d<i;d++){var y=3*d;o[g=d<<2]=a[y],o[g+1]=a[y+1],o[g+2]=a[y+2],o[g+3]=255}}else{if(4==m)for(d=0;d<i;d++){y=8*d+1;o[g=d<<2]=a[y],o[g+1]=a[y+2],o[g+2]=a[y+4],o[g+3]=a[y+6]}if(3==m)for(d=0;d<i;d++){y=6*d+1;o[g=d<<2]=a[y],o[g+1]=a[y+2],o[g+2]=a[y+4],o[g+3]=255}}}else if(3==h)for(var w=t.t320,m=t.t258?t.t258.length:1,f=Math.ceil(m*l*r/8),b=1<<l,u=0;u<n;u++)for(var x=0;x<r;x++){var g=(d=u*r+x)<<2,S=0,C=u*f;if(0,1==l)S=a[C+(x>>>3)]>>>7-(7&x)&1;else if(2==l)S=a[C+(x>>>2)]>>>6-2*(3&x)&3;else if(4==l)S=a[C+(x>>>1)]>>>4-4*(1&x)&15;else{if(8!=l)throw l;S=a[C+x*m]}o[g]=w[S]>>8,o[g+1]=w[b+S]>>8,o[g+2]=w[b+b+S]>>8,o[g+3]=255}else if(5==h)for(var P=4<(m=t.t258?t.t258.length:4)?1:0,d=0;d<i;d++){var k,T,I,M,g=d<<2,F=d*m;UDOC?(T=a[F],I=a[F+1],O=a[F+2],M=a[F+3],k=UDOC.C.cmykToRgb([T*(1/255),I*(1/255),O*(1/255),M*(1/255)]),o[g]=~~(.5+255*k[0]),o[g+1]=~~(.5+255*k[1]),o[g+2]=~~(.5+255*k[2])):(T=255-a[F],I=255-a[F+1],O=255-a[F+2],M=(255-a[F+3])*(1/255),o[g]=~~(T*M+.5),o[g+1]=~~(I*M+.5),o[g+2]=~~(O*M+.5)),o[g+3]=255*(1-P)+a[F+4]*P}else if(6==h&&t.t278)for(var A=t.t278[0],u=0;u<n;u+=A)for(var d=u*r,E=A*r,U=0;U<E;U++){var g=4*(d+U),O=a[(F=3*d+4*(U>>>1))+(1&U)],D=a[F+2]-128,L=a[F+3]-128,N=O-((D>>2)+(D>>4)+(D>>5))-((L>>1)+(L>>3)+(L>>4)+(L>>5)),D=O+(D+(D>>1)+(D>>2)+(D>>6));o[g]=Math.max(0,Math.min(255,O+((L>>2)+(L>>3)+(L>>5)))),o[g+1]=Math.max(0,Math.min(255,N)),o[g+2]=Math.max(0,Math.min(255,D)),o[g+3]=255}else B("Unknown Photometric interpretation: "+h);return o},st.replaceIMG=function(t){null==t&&(t=document.getElementsByTagName("img"));for(var e=["tif","tiff","dng","cr2","nef"],r=0;r<t.length;r++){var n,i=t[r],s=i.getAttribute("src");null!=s&&(n=s.split(".").pop().toLowerCase(),-1!=e.indexOf(n)&&(n=new XMLHttpRequest,st._xhrs.push(n),st._imgs.push(i),n.open("GET",s),n.responseType="arraybuffer",n.onload=st._imgLoaded,n.send()))}},st._xhrs=[],st._imgs=[],st._imgLoaded=function(t){var e=st._xhrs.indexOf(t.target),r=st._imgs[e];st._xhrs.splice(e,1),st._imgs.splice(e,1),r.setAttribute("src",st.bufferToURI(t.target.response))},st.bufferToURI=function(t){var e=st.decode(t),r=e,n=0,i=r[0];e[0].subIFD&&(r=r.concat(e[0].subIFD));for(var s=0;s<r.length;s++){var a,o=r[s];null==o.t258||o.t258.length<3||n<(a=o.t256*o.t257)&&(n=a,i=o)}st.decodeImage(t,i,e);var h=st.toRGBA8(i),l=i.width,f=i.height,t=document.createElement("canvas");t.width=l,t.height=f;e=t.getContext("2d"),f=new ImageData(new Uint8ClampedArray(h.buffer),l,f);return e.putImageData(f,0,0),t.toDataURL()},st._binBE={nextZero:function(t,e){for(;0!=t[e];)e++;return e},readUshort:function(t,e){return t[e]<<8|t[e+1]},readShort:function(t,e){var r=st._binBE.ui8;return r[0]=t[e+1],r[1]=t[e+0],st._binBE.i16[0]},readInt:function(t,e){var r=st._binBE.ui8;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e+0],st._binBE.i32[0]},readUint:function(t,e){var r=st._binBE.ui8;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e+0],st._binBE.ui32[0]},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},readFloat:function(t,e){for(var r=st._binBE.ui8,n=0;n<4;n++)r[n]=t[e+3-n];return st._binBE.fl32[0]},readDouble:function(t,e){for(var r=st._binBE.ui8,n=0;n<8;n++)r[n]=t[e+7-n];return st._binBE.fl64[0]},writeUshort:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},writeInt:function(t,e,r){var n=st._binBE.ui8;st._binBE.i32[0]=r,t[e+3]=n[0],t[e+2]=n[1],t[e+1]=n[2],t[e+0]=n[3]},writeUint:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r>>0&255},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},writeDouble:function(t,e,r){st._binBE.fl64[0]=r;for(var n=0;n<8;n++)t[e+n]=st._binBE.ui8[7-n]}},st._binBE.ui8=new Uint8Array(8),st._binBE.i16=new Int16Array(st._binBE.ui8.buffer),st._binBE.i32=new Int32Array(st._binBE.ui8.buffer),st._binBE.ui32=new Uint32Array(st._binBE.ui8.buffer),st._binBE.fl32=new Float32Array(st._binBE.ui8.buffer),st._binBE.fl64=new Float64Array(st._binBE.ui8.buffer),st._binLE={nextZero:st._binBE.nextZero,readUshort:function(t,e){return t[e+1]<<8|t[e]},readShort:function(t,e){var r=st._binBE.ui8;return r[0]=t[e+0],r[1]=t[e+1],st._binBE.i16[0]},readInt:function(t,e){var r=st._binBE.ui8;return r[0]=t[e+0],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],st._binBE.i32[0]},readUint:function(t,e){var r=st._binBE.ui8;return r[0]=t[e+0],r[1]=t[e+1],r[2]=t[e+2],r[3]=t[e+3],st._binBE.ui32[0]},readASCII:st._binBE.readASCII,readFloat:function(t,e){for(var r=st._binBE.ui8,n=0;n<4;n++)r[n]=t[e+n];return st._binBE.fl32[0]},readDouble:function(t,e){for(var r=st._binBE.ui8,n=0;n<8;n++)r[n]=t[e+n];return st._binBE.fl64[0]},writeUshort:function(t,e,r){t[e]=255&r,t[e+1]=r>>8&255},writeInt:function(t,e,r){var n=st._binBE.ui8;st._binBE.i32[0]=r,t[e+0]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3]},writeUint:function(t,e,r){t[e]=r>>>0&255,t[e+1]=r>>>8&255,t[e+2]=r>>>16&255,t[e+3]=r>>>24&255},writeASCII:st._binBE.writeASCII},st._copyTile=function(t,e,r,n,i,s,a,o){for(var h=Math.min(e,i-a),l=Math.min(r,s-o),f=0;f<l;f++)for(var u=(o+f)*i+a,c=f*e,p=0;p<h;p++)n[u+p]=t[c+p]},st.LosslessJpegDecode=function(t){if(_=t,y=0,T=[],I=[],65496!=H())throw"e";for(;;){var e=H();if(65535!=e){var r=H();if(65475==e){w=j(),b=H(),x=H(),C=j(),k=[];for(var n=0;n<C;n++){var i=j();if(17!=j())throw"e";if(0!=j())throw"e";k[i]=n}}else if(65476==e)for(var s=y+r-2;y<s;)V();else{if(65498==e){y++;for(n=0;n<C;n++){var a=j();I[k[a]]=T[j()>>>4]}P=j(),y+=2;break}y+=r-2}}else y--}var o=8<w?Uint16Array:Uint8Array,h=x*C,t=new o(b*h);return((o={e:0,c:0,b:8==P,a:y,data:_,d:_.length}).b?function(t,e,r){for(var n=_.length-y,i=0;i<n;i+=4){var s=_[y+i];_[y+i]=_[y+i+3],_[y+i+3]=s;s=_[y+i+1];_[y+i+1]=_[y+i+2],_[y+i+2]=s}for(var a=I[0],o=0;o<b;o++)for(var h=32768,l=32768,f=0;f<e;f+=2){var u=J(a,r),c=J(a,r);0!=u&&(h+=K(u,r)),0!=c&&(l+=K(c,r)),t[o*e+f]=65535&h,t[o*e+f+1]=65535&l}}:function(t,e,r){for(var n=C,i=b,s=P,a=I,o=0;o<n;o++)t[o]=Q(a[o],r)+(1<<w-1);for(var h=n;h<e;h+=n)for(o=0;o<n;o++)t[h+o]=Q(a[o],r)+t[h+o-n];for(var l=e,f=1;f<i;f++){for(o=0;o<n;o++)t[l+o]=Q(a[o],r)+t[l+o-e];for(h=n;h<e;h+=n)for(o=0;o<n;o++){var u=l+h+o,c=t[u-n],p=0;if(0==s)p=0;else if(1==s)p=c;else if(2==s)p=t[u-e];else if(3==s)p=t[u-e-n];else if(4==s)p=c+(t[u-e]-t[u-e-n]);else if(5==s)p=c+(t[u-e]-t[u-e-n]>>>1);else if(6==s)p=t[u-e]+(c-t[u-e-n]>>>1);else{if(7!=s)throw s;p=c+t[u-e]>>>1}t[u]=p+Q(a[o],r)}l+=e}})(t,h,o),t},M=2,F=4,A=5,E=6,U=7,O=12,D=13,L=14,N=15,R=17,st._decompressRAF=function(t,e){var r,n=function(t){var e=st._binBE.readUshort;if(18771!=(t={m:e(t,0),f:t[2],r:t[3],a:t[4],d:e(t,5),t:e(t,7),h:e(t,9),n:e(t,11),v:t[13],p:e(t,14)}).m||1<t.f||t.d<6||t.d%6||t.h<768||t.h%24||768!=t.n||t.t<t.n||t.t%t.n||t.t-t.h>=t.n||16<t.v||t.v!=t.t/t.n||t.v!=Math.ceil(t.h/t.n)||t.p!=t.d/6||12!=t.a&&14!=t.a&&16!=t.a||16!=t.r&&0!=t.r)throw"Invalid data";if(0==t.f)throw"Not implemented. We need this file!";return t.o=16==t.r,t.c=0|(t.o?2*t.n/3:t.n>>>1),t.g=t.c+2,t.q=64,t.j=(1<<t.a)-1,t.w=4*t.a,t}(t),i=function(t,e){for(var r=new Array(e.v),n=16+4*e.v,i=0,s=16;i<e.v;s+=4){var a=st._binBE.readUint(t,s);r[i]=t.slice(n,n+a),r[i].l=0,r[i].s=0,n+=a,i++}if(n!=t.length)throw"Invalid data";return r}(t,n),s=(r=n,$(t={u:new Int8Array(2<<r.a)},0,r.j),t),a=new Int16Array(n.h*n.d);null==e&&(e=n.o?[[1,1,0,1,1,2],[1,1,2,1,1,0],[2,0,1,0,2,1],[1,1,2,1,1,0],[1,1,0,1,1,2],[0,2,1,2,0,1]]:[[0,1],[3,2]]);for(var o=[[0,3],[1,F],[A,11],[E,O],[D,16],[L,R]],h=[],l=0;l<18;l++)h[l]=new Uint16Array(n.g);for(var f,u,c,p,d,g,v=0;v<n.v;v++){for(var m=tt(s),_=tt(s),l=0;l<18;l++)for(var y=0;y<n.g;y++)h[l][y]=0;for(var w=0;w<n.p;w++){f=n,u=s,c=i[v],mt(f,u,c,p=h,M,U,d=m,g=_,0,0,1,0,8),mt(f,u,c,p,8,N,d,g,1,0,1,0,8),mt(f,u,c,p,3,9,d,g,2,1,0,3,0),mt(f,u,c,p,10,16,d,g,0,0,0,3,2),mt(f,u,c,p,F,11,d,g,1,0,0,3,2),mt(f,u,c,p,O,R,d,g,2,1,0,3,0);for(l=0;l<6;l++)for(y=0;y<n.g;y++)h[o[l][0]][y]=h[o[l][1]][y];!function(t,e,r,n,i,s){var a=s.length,o=t.n;i+1==t.v&&(o=t.h-i*t.n);for(var h=6*t.h*n+i*t.n,l=0;l<6;l++){for(var f=0;f<o;f++){var u=s[l%a][f%a],c=0==u?M+(l>>>1):2==u?N+(l>>>1):U+l,u=t.o?(2*f/3&2147483646|f%3&1)+(f%3>>>1):f>>>1;e[h+f]=r[c][1+u]}h+=t.h}}(n,a,h,w,v,e);for(l=M;l<18;l++)if(-1==[A,E,D,L].indexOf(l))for(y=0;y<n.g;y++)h[l][y]=0;it(h)}}return a}}();var UGIF=function(){function y(){return x[S++]}function w(){var t=x[S+1]<<8|x[S];return S+=2,t}function b(){for(;0!=x[S];)S+=1+x[S];S++}var x,S,l,f,u,c,p,n,d,g,v,m,C=(g=d=n=p=0,v=new Uint32Array(16384),m=0,function(t,e,r,n,i,s){l=e<<3,f=t,u=n,c=i;var a=e+r<<3,o=0,h=0;for(!function(t){if(t!=m){g=(d=1<<(m=t))+1;for(var e=0;e<g+1;e++)v[4*e]=v[4*e+3]=e,v[4*e+1]=65535,v[4*e+2]=1}}(s),k(s);l<a&&(o=_())!=g;){if(o==d){if(k(s),(o=_())==g)break;T(o)}else o<p?(T(o),I(h,o)):(I(h,h),T(p-1));h=o}return c}),P=new Uint8Array(128);function _(){var t=(f[2+(t=l>>>3)]<<16|f[1+t]<<8|f[t])>>>(7&l)&(1<<n)-1;return l+=n,t}function k(t){n=t+1,p=g+1}function T(t){for(var e=t<<2,t=v[e+2],r=c+t-1;65535!=e;)u[r--]=v[e],e=v[e+1];c+=t}function I(t,e){var r=p<<2,t=t<<2;v[r]=v[3+(e<<2)],v[1+r]=t,v[2+r]=v[2+t]+1,v[3+r]=v[3+t],++p==1<<n&&12!=n&&n++}return{decode:function(t){x=new Uint8Array(t),S=6;var e=w(),t=w(),r=y(),n=(y(),y(),r>>>0&7),i=S,s=0,a=0,o=0,h=260;1==r>>>7&&(S+=3*(1<<n+1));for(var l=[];S+1<x.length;){var f=y();if(33==f){var u=y();if(249==u){y();a=(r=y())>>>2&7,o=w(),h=y();0==(1&r)&&(h=260),y()}else if(254==u)b();else{if(255!=u)throw u;b()}}else if(44==f){var u=w(),c=w(),p=w(),d=w(),g=y();1==g>>>7&&(s=S,S+=3*(1<<(n=g>>>0&7)+1)),l.push(c={x:u,y:c,a:p,O:d,f:a,delay:o,B:h,A:0==s?i:s,U:g>>>6&1}),s=0}else{if(!(f<=8)){if(59==f)break;throw f}var g=(p=c.a)*(d=c.O),v=0;for(P.length<1.2*g&&(P=new Uint8Array(~~(1.3*g)));S<x.length&&0!=x[S];){for(var m=y(),_=0;_<m;_++)P[v+_]=x[S+_];v+=m,S+=m}if(S>=x.length){alert("Some frames are damaged."),l.pop();break}y(),c.d=new Uint8Array(g);C(P,0,v,c.d,0,f)}}return{width:e,height:t,data:x,frames:l}},toRGBA8:function(t){for(var e,r=t.frames,n=t.width,i=t.height,s=new Uint8Array(n*i*4),a=[],o=t.data,h=0;h<r.length;h++){var l=r[h],f=l.x,u=l.y,c=l.a,p=l.O,d=l.f;3==d&&(null==e?e=s.slice(0):e.set(s));var g=[];if(1==l.U){for(var v=0;v<p;v+=8)g.push(v);for(v=4;v<p;v+=8)g.push(v);for(v=2;v<p;v+=4)g.push(v);for(v=1;v<p;v+=2)g.push(v)}for(var m=l.d,_=l.A,y=l.B,w=l.U,v=0;v<p;v++)!function(t,e,r,n,i,s,a,o){for(var h=0;h<a;h++){var l,f=i[s+h];f!=o&&(t[l=e+h<<2]=r[f=n+3*f],t[1+l]=r[f+1],t[2+l]=r[f+2],t[3+l]=255)}}(s,((0==w?v:g[v])+u)*n+f,o,_,m,v*c,c,y);if(a.push(s.slice(0).buffer),!(d<2))if(2==d)for(v=0;v<p;v++){var b=4*((u+v)*n+f);s.fill(0,b,b+4*c)}else 3==d&&s.set(e)}return a}}}(),linear=function(){function s(t,e){this.data=new Array(t.length);for(var r=0,n=t[0].length;r<t.length;r++){this.data[r]=new Array(n);for(var i=0;i<n;i++)this.data[r][i]=t[r][i]}if(e){if("object"!=typeof e[0])for(r=0;r<e.length;r++)e[r]=[e[r]];this.mirror=new s(e)}}s.prototype.swap=function(t,e){this.mirror&&this.mirror.swap(t,e);var r=this.data[t];this.data[t]=this.data[e],this.data[e]=r},s.prototype.multline=function(t,e){this.mirror&&this.mirror.multline(t,e);for(var r=this.data[t],n=r.length-1;0<=n;n--)r[n]*=e},s.prototype.addmul=function(t,e,r){this.mirror&&this.mirror.addmul(t,e,r);for(var n=this.data[t],i=this.data[e],s=n.length-1;0<=s;s--)n[s]=n[s]+r*i[s]},s.prototype.hasNullLine=function(t){for(var e=0;e<this.data[t].length;e++)if(0!==this.data[t][e])return!1;return!0},s.prototype.gauss=function(){for(var t=0,e=this.data.length,r=this.data[0].length,n=[],i=0;i<r;i++){for(var s=0,a=0,o=t;o<e;o++){var h=this.data[o][i];Math.abs(h)>Math.abs(s)&&(a=o,s=h)}if(0===s)n.push(t);else{this.multline(a,1/s),this.swap(a,t);for(var l=0;l<e;l++)l!==t&&this.addmul(l,t,-this.data[l][i])}t++}for(l=0;l<n.length;l++)if(!this.mirror.hasNullLine(n[l]))throw new Error("singular matrix");return this.mirror.data};var t={};return t.solve=function(t,e){var r=new s(t,e).gauss();if(0<r.length&&1===r[0].length)for(var n=0;n<r.length;n++)r[n]=r[n][0];return r},t.invert=function(t){return new s(t,function(t){for(var e=new Array(t),r=0;r<t;r++){e[r]=new Array(t);for(var n=0;n<t;n++)e[r][n]=r===n?1:0}return e}(t.length)).gauss()},t}(),Typr=function(){var t,v,k,T,B={};function o(t,e,r){for(var n=[],i=0,s=0,a=0;;){var o=t.indexOf(e,s),h=t.indexOf(r,s);if(-1==o&&-1==h)break;-1==h||-1!=o&&o<h?(0==a&&(n.push(t.slice(i,o).trim()),i=o+1),a++,s=o+1):(-1==o||-1!=h&&h<o)&&(0==--a&&(n.push(t.slice(i,h).trim()),i=h+1),s=h+1)}return n}function m(t){for(var e=o(t,"(",")"),r=[1,0,0,1,0,0],n=0;n<e.length;n+=2){var i=r,r=function(t,e){for(var r=[1,0,0,1,0,0],n=!0,i=0;i<e.length;i++){var s=e.charAt(i);","==s||" "==s?n=!0:"."==s?(n||(e=e.slice(0,i)+","+e.slice(i),i++),n=!1):"-"==s&&0<i&&"e"!=e[i-1]&&(e=e.slice(0,i)+" "+e.slice(i),i++,n=!0)}{var a,o;e=e.split(/\s*[\s,]\s*/).map(parseFloat),"translate"==t?1==e.length?v.translate(r,e[0],0):v.translate(r,e[0],e[1]):"scale"==t?1==e.length?v.scale(r,e[0],e[0]):v.scale(r,e[0],e[1]):"rotate"==t?(o=a=0,1!=e.length&&(a=e[1],o=e[2]),v.translate(r,-a,-o),v.rotate(r,-Math.PI*e[0]/180),v.translate(r,a,o)):"matrix"==t?r=e:console.log("unknown transform: ",t)}return r}(e[n],e[n+1]);v.concat(r,i)}return r}function _(t,e){for(var r=function(t){for(var e=[],r=0,n=!1,i="",s="",a="",o=0;r<t.length;){var h=t.charCodeAt(r),l=t.charAt(r);r++;h=48<=h&&h<=57||"."==l||"-"==l||"+"==l||"e"==l||"E"==l;n?("+"==l||"-"==l)&&"e"!=s||"."==l&&-1!=i.indexOf(".")||h&&("a"==a||"A"==a)&&(o%7==3||o%7==4)?(e.push(parseFloat(i)),o++,i=l):h?i+=l:(e.push(parseFloat(i)),o++,","!=l&&" "!=l&&(e.push(l),a=l,o=0),n=!1):h?(i=l,n=!0):","!=l&&" "!=l&&(e.push(l),a=l,o=0),s=l}return n&&e.push(parseFloat(i)),e}(t),n=0,i=0,s=0,a=0,o=0,h=e.Q.length,l={M:2,L:2,H:1,V:1,T:2,S:4,A:7,Q:4,C:6},f=e.u,u=e.Q;n<r.length;){var c=r[n];n++;var p=c.toUpperCase();if("Z"==p)f.push("Z"),i=a,s=o;else for(var d=function(t,e,r){for(var n=e;n<t.length&&"string"!=typeof t[n];)n+=r;return(n-e)/r}(r,n,l[p]),g=0;g<d;g++){1==g&&"M"==p&&(c=c==p?"L":"l",p="L");var v,m,_,y,w,b,x,S,C,P,k,T,I,M,F,A,E,U,O,D,L=0,N=0;c!=p&&(L=i,N=s),"M"==p?(i=L+r[n++],s=N+r[n++],f.push("M"),u.push(i,s),a=i,o=s):"L"==p?(i=L+r[n++],s=N+r[n++],f.push("L"),u.push(i,s)):"H"==p?(i=L+r[n++],f.push("L"),u.push(i,s)):"V"==p?(s=N+r[n++],f.push("L"),u.push(i,s)):"Q"==p?(y=L+r[n++],w=N+r[n++],C=L+r[n++],P=N+r[n++],f.push("Q"),u.push(y,w,C,P),i=C,s=P):"T"==p?(y=i+i-u[v=Math.max(u.length-("Q"==f[f.length-1]?4:2),h)],w=s+s-u[v+1],C=L+r[n++],P=N+r[n++],f.push("Q"),u.push(y,w,C,P),i=C,s=P):"C"==p?(y=L+r[n++],w=N+r[n++],C=L+r[n++],P=N+r[n++],m=L+r[n++],_=N+r[n++],f.push("C"),u.push(y,w,C,P,m,_),i=m,s=_):"S"==p?(y=i+i-u[v=Math.max(u.length-("C"==f[f.length-1]?4:2),h)],w=s+s-u[v+1],C=L+r[n++],P=N+r[n++],m=L+r[n++],_=N+r[n++],f.push("C"),u.push(y,w,C,P,m,_),i=m,s=_):"A"==p?(y=i,w=s,b=r[n++],x=r[n++],O=r[n++]*(Math.PI/180),F=r[n++],S=r[n++],C=L+r[n++],P=N+r[n++],C==i&&P==s&&0==b&&0==x||(M=(y-C)/2,D=(w-P)/2,A=b*b,E=x*x,U=(I=(k=Math.cos(O))*M+(T=Math.sin(O))*D)*I,N=(L=-T*M+k*D)*L,F=k*(M=b*L*(O=(F!=S?1:-1)*Math.sqrt(Math.max((A*E-A*N-E*U)/(A*N+E*U),0)))/x)-T*(D=x*I*-O/b)+(y+C)/2,A=T*M+k*D+(w+P)/2,O=(N=function(t,e,r,n){var i=Math.sqrt(t*t+e*e),s=Math.sqrt(r*r+n*n);return(0<=t*n-e*r?1:-1)*Math.acos(Math.max(-1,Math.min(1,(t*r+e*n)/(i*s))))})(1,0,E=(I-M)/b,U=(L-D)/x),D=N(E,U,(-I-M)/b,(-L-D)/x),function(t,e,r,n,i,s,a){function o(t,e){var r=Math.sin(e),n=Math.cos(e),e=t[0],i=t[1],s=t[2],a=t[3];t[0]=e*n+i*r,t[1]=-e*r+i*n,t[2]=s*n+a*r,t[3]=-s*r+a*n}function h(t,e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];e[r]=t[0]*n+t[2]*i+t[4],e[r+1]=t[1]*n+t[3]*i+t[5]}}function l(t,e){for(var r=0;r<e.length;r++)t.push(e[r])}if(a)for(;i<s;)s-=2*Math.PI;else for(;s<i;)s+=2*Math.PI;var f=(s-i)/4,u=Math.cos(f/2),c=-Math.sin(f/2),p=(4-u)/3,a=0==c?c:(1-u)*(3-u)/(3*c),d=[p,a,p,-a,u,-c],g={u:["C","C","C","C"],Q:d.slice(0)},v=[1,0,0,1,0,0];o(v,-f);for(var m,_,y=0;y<3;y++)h(v,d),l(g.Q,d);o(v,f/2-i),v[0]*=n,v[1]*=n,v[2]*=n,v[3]*=n,v[4]=e,v[5]=r,h(v,g.Q),h(t.ay,g.Q),m=t.ax,_=g,l(m.u,_.u),l(m.Q,_.Q)}({ax:e,ay:[b*k,b*T,-x*T,x*k,F,A]},0,0,1,O,O+(D%=2*Math.PI),0==S),i=C,s=P)):console.log("Unknown SVG command "+c)}}}return B.parse=function(t){function e(t,e,r,n){B.B;var i,s=B.T,a={cmap:s.h,head:s.head,hhea:s.aV,maxp:s.aI,hmtx:s.aZ,name:s.name,"OS/2":s.D,post:s.aO,loca:s.a7,kern:s._,glyf:s.H,"CFF ":s.K,CBLC:s.ab,CBDT:s.aW,"SVG ":s.b3,COLR:s.a$,CPAL:s.b7,sbix:s.aR},o={_data:t,_index:e,_offset:r};for(i in a){var h,l,f=B.findTable(t,i,r);f&&(null==(l=n[h=f[0]])&&(l=a[i].W(t,h,f[1],o)),o[i]=n[h]=l)}return o}var r=B.B,n=new Uint8Array(t),i={};if("ttcf"!=r.A(n,0,4))return[e(n,0,0,i)];var s=4,a=(r.I(n,s),r.I(n,s+=2),r.b(n,s+=2));s+=4;for(var o=[],h=0;h<a;h++){var l=r.b(n,s);s+=4,o.push(e(n,h,l,i))}return o},B.findTable=function(t,e,r){for(var n=B.B,i=n.I(t,r+4),s=r+12,a=0;a<i;a++){var o=n.A(t,s,4),h=(n.b(t,s+4),n.b(t,s+8)),l=n.b(t,s+12);if(o==e)return[h,l];s+=16}return null},B.T={},B.B={J:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},B:function(t,e){return B.B.l(t,e)/16384},e:function(t,e){var r=B.B.Y.X;return r[0]=t[e+3],r[1]=t[e+2],r[2]=t[e+1],r[3]=t[e],B.B.Y.b4[0]},L:function(t,e){return B.B.Y.X[0]=t[e],B.B.Y.aQ[0]},l:function(t,e){var r=B.B.Y.X;return r[1]=t[e],r[0]=t[e+1],B.B.Y.a8[0]},I:function(t,e){return t[e]<<8|t[e+1]},aG:function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},ac:function(t,e,r){for(var n=[],i=0;i<r;i++){var s=B.B.I(t,e+2*i);n.push(s)}return n},b:function(t,e){var r=B.B.Y.X;return r[3]=t[e],r[2]=t[e+1],r[1]=t[e+2],r[0]=t[e+3],B.B.Y.a_[0]},a4:function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=r>>0&255},S:function(t,e){return 4294967296*B.B.b(t,e)+B.B.b(t,e+4)},A:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},am:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},F:function(t,e,r){for(var n="",i=0;i<r;i++){var s=t[e++]<<8|t[e++];n+=String.fromCharCode(s)}return n},aY:window.TextDecoder?new window.TextDecoder:null,ba:function(t,e,r){var n=B.B.aY;return n&&0==e&&r==t.length?n.decode(t):B.B.A(t,e,r)},P:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(t[e+i]);return n},az:function(t,e,r){for(var n=[],i=0;i<r;i++)n.push(String.fromCharCode(t[e+i]));return n},Y:{a6:t=new ArrayBuffer(8),aQ:new Int8Array(t),X:new Uint8Array(t),a8:new Int16Array(t),a3:new Uint16Array(t),b4:new Int32Array(t),a_:new Uint32Array(t)}},B.T.K={W:function(t,e,r){var n=B.B,i=B.T.K,s=((t=new Uint8Array(t.buffer,e,r))[e=0],t[++e],t[++e],t[++e],[]);e=i.N(t,++e,s);for(var a=[],o=0;o<s.length-1;o++)a.push(n.A(t,e+s[o],s[o+1]-s[o]));var h=[];e=i.N(t,e+=s[s.length-1],h);for(var l=[],o=0;o<h.length-1;o++)l.push(i.k(t,e+h[o],e+h[o+1]));var f=l[0],u=[];e=i.N(t,e+=h[h.length-1],u);for(var c=[],o=0;o<u.length-1;o++)c.push(n.A(t,e+u[o],u[o+1]-u[o]));if(i.T(t,e+=u[u.length-1],f),f.CharStrings&&(f.CharStrings=i.P(t,f.CharStrings)),f.ROS){e=f.FDArray;var p=[];e=i.N(t,e,p),f.FDArray=[];for(o=0;o<p.length-1;o++){var d=i.k(t,e+p[o],e+p[o+1]);i.G(t,d,c),f.FDArray.push(d)}e+=p[p.length-1],e=f.FDSelect,f.FDSelect=[];r=t[e];if(3!=r)throw r;var g=n.I(t,++e);e+=2;for(o=0;o<g+1;o++)f.FDSelect.push(n.I(t,e),t[e+2]),e+=3}return f.charset&&(f.charset=i.b6(t,f.charset,f.CharStrings.length)),i.G(t,f,c),f},G:function(t,e,r){var n,i,s=B.T.K;for(i in e.Private&&(n=e.Private[1],e.Private=s.k(t,n,n+e.Private[0]),e.Private.Subrs&&s.T(t,n+e.Private.Subrs,e.Private)),e)-1!="FamilyName FontName FullName Notice version Copyright".split(" ").indexOf(i)&&(e[i]=r[e[i]-426+35])},T:function(t,e,r){r.Subrs=B.T.K.P(t,e);var e=r.Subrs.length+1,e=e<1240?107:e<33900?1131:32768;r.Bias=e},P:function(t,e){B.B;var r=[];e=B.T.K.N(t,e,r);for(var n=[],i=r.length-1,s=t.byteOffset+e,a=0;a<i;a++){var o=r[a];n.push(new Uint8Array(t.buffer,s+o,r[a+1]-o))}return n},a5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],a9:function(t,e){for(var r=0;r<t.charset.length;r++)if(t.charset[r]==e)return r;return-1},d:function(t,e){return e<0||255<e?-1:B.T.K.a9(t,B.T.K.a5[e])},b6:function(t,e,r){var n=B.B,i=[".notdef"],s=t[e];if(e++,0==s)for(var a=0;a<r;a++){var o=n.I(t,e);e+=2,i.push(o)}else{if(1!=s&&2!=s)throw"error: format: "+s;for(;i.length<r;){var o=n.I(t,e),h=0;e+=2,1==s?(h=t[e],e++):(h=n.I(t,e),e+=2);for(a=0;a<=h;a++)i.push(o),o++}}return i},N:function(t,e,r){var n=B.B,i=n.I(t,e)+1,s=t[e+=2];if(e++,1==s)for(var a=0;a<i;a++)r.push(t[e+a]);else if(2==s)for(a=0;a<i;a++)r.push(n.I(t,e+2*a));else if(3==s)for(a=0;a<i;a++)r.push(16777215&n.b(t,e+3*a-1));else if(4==s)for(a=0;a<i;a++)r.push(n.b(t,e+4*a));else if(1!=i)throw"unsupported offset size: "+s+", count: "+i;return(e+=i*s)-1},ah:function(t,e,r){var n=B.B,i=t[e],s=t[e+1],a=(t[e+2],t[e+3],t[e+4],1),o=null,h=null;i<=20&&(o=i,a=1),12==i&&(o=100*i+s,a=2),21<=i&&i<=27&&(o=i,a=1),28==i&&(h=n.l(t,e+1),a=3),29<=i&&i<=31&&(o=i,a=1),32<=i&&i<=246&&(h=i-139,a=1),247<=i&&i<=250&&(h=256*(i-247)+s+108,a=2),251<=i&&i<=254&&(h=256*-(i-251)-s-108,a=2),255==i&&(h=n.e(t,e+1)/65535,a=5),r.aj=null!=h?h:"o"+o,r.size=a},ao:function(t,e,r){for(var n=e+r,i=B.B,s=[];e<n;){var a=t[e],o=t[e+1],h=(t[e+2],t[e+3],t[e+4],1),l=null,f=null;a<=20&&(l=a,h=1),12==a&&(l=100*a+o,h=2),19!=a&&20!=a||(l=a,h=2),21<=a&&a<=27&&(l=a,h=1),28==a&&(f=i.l(t,e+1),h=3),29<=a&&a<=31&&(l=a,h=1),32<=a&&a<=246&&(f=a-139,h=1),247<=a&&a<=250&&(f=256*(a-247)+o+108,h=2),251<=a&&a<=254&&(f=256*-(a-251)-o-108,h=2),255==a&&(f=i.e(t,e+1)/65535,h=5),s.push(null!=f?f:"o"+l),e+=h}return s},k:function(t,e,r){for(var n=B.B,i={},s=[];e<r;){var a=t[e],o=t[e+1],h=(t[e+2],t[e+3],t[e+4],1),l=null,f=null;if(28==a&&(f=n.l(t,e+1),h=3),29==a&&(f=n.e(t,e+1),h=5),32<=a&&a<=246&&(f=a-139,h=1),247<=a&&a<=250&&(f=256*(a-247)+o+108,h=2),251<=a&&a<=254&&(f=256*-(a-251)-o-108,h=2),255==a)throw f=n.e(t,e+1)/65535,h=5,"unknown number";if(30==a){for(var u=[],c="",h=1;;){var p=t[e+h];h++;var d=p>>4,p=15&p;if(15!=d&&u.push(d),15!=p&&u.push(p),15==p)break}for(var g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],v=0;v<u.length;v++)c+=g[u[v]];f=parseFloat(c)}a<=21&&(l="version Notice FullName FamilyName Weight FontBBox BlueValues OtherBlues FamilyBlues FamilyOtherBlues StdHW StdVW escape UniqueID XUID charset Encoding CharStrings Private Subrs defaultWidthX nominalWidthX".split(" ")[a],h=1,12==a&&(l="Copyright isFixedPitch ItalicAngle UnderlinePosition UnderlineThickness PaintType CharstringType FontMatrix StrokeWidth BlueScale BlueShift BlueFuzz StemSnapH StemSnapV ForceBold   LanguageGroup ExpansionFactor initialRandomSeed SyntheticBase PostScript BaseFontName BaseFontBlend       ROS CIDFontVersion CIDFontRevision CIDFontType CIDCount UIDBase FDArray FDSelect FontName".split(" ")[o],h=2)),null!=l?(i[l]=1==s.length?s[0]:s,s=[]):s.push(f),e+=h}return i}},B.T.h={W:function(t,e,r){var n={g:[],n:{},aw:e};t=new Uint8Array(t.buffer,e,r);e=0;var i=B.B,s=i.I,a=B.T.h,o=(s(t,e),s(t,e+=2));e+=2;for(var h=[],l=0;l<o;l++){var f=s(t,e),u=s(t,e+=2);e+=2;var c=i.b(t,e);e+=4;var p="p"+f+"e"+u,d=h.indexOf(c);-1==d&&(d=n.g.length,f={},h.push(c),0==(u=f.b1=s(t,c))?f=a.a0(t,c,f):4==u?f=a.a2(t,c,f):6==u?f=a.ad(t,c,f):12==u&&(f=a.aB(t,c,f)),n.g.push(f)),null!=n.n[p]&&console.log("multiple tables for one platform+encoding: "+p),n.n[p]=d}return n},a0:function(t,e,r){var n=B.B,i=n.I(t,e+=2);n.I(t,e+=2);e+=2,r.map=[];for(var s=0;s<i-6;s++)r.map.push(t[e+s]);return r},a2:function(t,e,r){var n=B.B,i=n.I,s=n.ac,a=e,o=i(t,e+=2),h=(i(t,e+=2),i(t,e+=2)>>>1);r.au=i(t,e+=2),r.af=i(t,e+=2),r.aS=i(t,e+=2),r.at=s(t,e+=2,h),e+=2*h,r.av=s(t,e+=2,h),e+=2*h,r.aa=[];for(var l=0;l<h;l++)r.aa.push(n.l(t,e)),e+=2;return r.V=s(t,e,h),r.C=s(t,e+=2*h,a+o-e>>>1),r},ad:function(t,e,r){var n=B.B;n.I(t,e+=2),n.I(t,e+=2);r.aL=n.I(t,e+=2);var i=n.I(t,e+=2);e+=2,r.C=[];for(var s=0;s<i;s++)r.C.push(n.I(t,e)),e+=2;return r},aB:function(t,e,r){var n=B.B.b,i=(n(t,e+=4),n(t,e+=4),3*n(t,e+=4));e+=4;for(var s=r.a1=new Uint32Array(i),a=0;a<i;a+=3)s[a]=n(t,e+(a<<2)),s[a+1]=n(t,e+(a<<2)+4),s[a+2]=n(t,e+(a<<2)+8);return r}},B.T.ab={W:function(t,e,r){var n=B.B,i=e,s=(n.I(t,e),n.I(t,e+=2),n.b(t,e+=2));e+=4;for(var a=[],o=0;o<s;o++){var h=n.b(t,e);e+=4;n.b(t,e);e+=4;n.b(t,e);e+=4,e+=4,e+=24;n.I(t,e);e+=2;n.I(t,e);e+=2,e+=4;for(var l=i+h,f=0;f<3;f++){var u=n.I(t,l);l+=2;var c=n.I(t,l);l+=2;var p=n.b(t,l);l+=4;var d=c-u+1,g=i+h+p,p=n.I(t,g);if(g+=2,1!=p)throw p;p=n.I(t,g);g+=2;var v=n.b(t,g);g+=4;for(var m=[],_=0;_<d;_++){var y=n.b(t,g+4*_);m.push(v+y)}a.push([u,c,p,m])}}return a}},B.T.aW={W:function(t,e,r){B.B;return new Uint8Array(t.buffer,t.byteOffset+e,r)}},B.T.H={W:function(t,e,r,n){for(var i=[],s=n.maxp.numGlyphs,a=0;a<s;a++)i.push(null);return i},aH:function(t,e){var r=B.B,n=t._data,i=t.loca;if(i[e]==i[e+1])return null;var s=B.findTable(n,"glyf",t._offset)[0]+i[e],a={};if(a.p=r.l(n,s),a.aK=r.l(n,s+=2),a.ag=r.l(n,s+=2),a.b5=r.l(n,s+=2),a.aM=r.l(n,s+=2),s+=2,a.aK>=a.b5||a.ag>=a.aM)return null;if(0<a.p){a.o=[];for(var o=0;o<a.p;o++)a.o.push(r.I(n,s)),s+=2;var e=r.I(n,s),h=0,l=0;if(n.length-(s+=2)<e)return null;a.as=r.P(n,s,e),s+=e;var f=a.o[a.p-1]+1;a.r=[];for(o=0;o<f;o++){var u=n[s];if(s++,a.r.push(u),0!=(8&u)){var c=n[s];s++;for(var p=0;p<c;p++)a.r.push(u),o++}}a.j=[];for(o=0;o<f;o++){var d=0!=(2&a.r[o]),g=0!=(16&a.r[o]);d?(a.j.push(g?n[s]:-n[s]),s++):g?a.j.push(0):(a.j.push(r.l(n,s)),s+=2)}a.Z=[];for(o=0;o<f;o++){d=0!=(4&a.r[o]),g=0!=(32&a.r[o]);d?(a.Z.push(g?n[s]:-n[s]),s++):g?a.Z.push(0):(a.Z.push(r.l(n,s)),s+=2)}for(o=0;o<f;o++)h+=a.j[o],l+=a.Z[o],a.j[o]=h,a.Z[o]=l}else{var v;a.M=[];do{v=r.I(n,s),s+=2;var m,_,y={q:{$:1,b8:0,aD:0,v:1,aE:0,b9:0},aA:-1,b2:-1}}while(a.M.push(y),y.aP=r.I(n,s),s+=2,1&v?(m=r.l(n,s),_=r.l(n,s+=2),s+=2):(m=r.L(n,s),_=r.L(n,++s),s++),2&v?(y.q.aE=m,y.q.b9=_):(y.aA=m,y.b2=_),8&v?(y.q.$=y.q.v=r.B(n,s),s+=2):64&v?(y.q.$=r.B(n,s),y.q.v=r.B(n,s+=2),s+=2):128&v&&(y.q.$=r.B(n,s),y.q.b8=r.B(n,s+=2),y.q.aD=r.B(n,s+=2),y.q.v=r.B(n,s+=2),s+=2),32&v);if(256&v){var w=r.I(n,s);s+=2,a.aF=[];for(o=0;o<w;o++)a.aF.push(n[s]),s++}}return a}},B.T.head={W:function(t,e,r){var n=B.B,i={};n.J(t,e);i.fontRevision=n.J(t,e+=4);n.b(t,e+=4),n.b(t,e+=4);return i.flags=n.I(t,e+=4),i.unitsPerEm=n.I(t,e+=2),i.created=n.S(t,e+=2),i.modified=n.S(t,e+=8),i.xMin=n.l(t,e+=8),i.yMin=n.l(t,e+=2),i.xMax=n.l(t,e+=2),i.yMax=n.l(t,e+=2),i.macStyle=n.I(t,e+=2),i.lowestRecPPEM=n.I(t,e+=2),i.fontDirectionHint=n.l(t,e+=2),i.indexToLocFormat=n.l(t,e+=2),i.glyphDataFormat=n.l(t,e+=2),e+=2,i}},B.T.aV={W:function(t,e,r){var n=B.B,i={};n.J(t,e);e+=4;for(var s="ascender descender lineGap advanceWidthMax minLeftSideBearing minRightSideBearing xMaxExtent caretSlopeRise caretSlopeRun caretOffset res0 res1 res2 res3 metricDataFormat numberOfHMetrics".split(" "),a=0;a<s.length;a++){var o=s[a],h="advanceWidthMax"==o||"numberOfHMetrics"==o?n.I:n.l;i[o]=h(t,e+2*a)}return i}},B.T.aZ={W:function(t,e,r,n){for(var i=B.B,s=[],a=[],o=n.maxp.numGlyphs,h=n.hhea.numberOfHMetrics,l=0,f=0,u=0;u<h;)l=i.I(t,e+(u<<2)),f=i.l(t,e+(u<<2)+2),s.push(l),a.push(f),u++;for(;u<o;)s.push(l),a.push(f),u++;return{ar:s,aC:a}}},B.T._={W:function(t,e,r,n){var i=B.B,s=B.T._;if(1==i.I(t,e))return s.aT(t,e,r,n);var a=i.I(t,e+2);e+=4;for(var o={s:[],f:[]},h=0;h<a;h++){e+=2;r=i.I(t,e);e+=2;var l=i.I(t,e);e+=2;l=l>>>8;0==(l&=15)&&(e=s.U(t,e,o))}return o},aT:function(t,e,r,n){var i=B.B,s=B.T._,a=(i.J(t,e),i.b(t,e+4));e+=8;for(var o={s:[],f:[]},h=0;h<a;h++){i.b(t,e);e+=4;var l=i.I(t,e);e+=2;i.I(t,e);e+=2,0==(255&l)&&(e=s.U(t,e,o))}return o},U:function(t,e,r){var n=B.B,i=n.I,s=-1,a=i(t,e);i(t,e+2),i(t,e+4),i(t,e+6);e+=8;for(var o=0;o<a;o++){var h=i(t,e),l=i(t,e+=2);e+=2;var f=n.l(t,e);e+=2,h!=s&&(r.s.push(h),r.f.push({ae:[],aN:[]}));var u=r.f[r.f.length-1];u.ae.push(l),u.aN.push(f),s=h}return e}},B.T.a7={W:function(t,e,r,n){var i=B.B,s=[],a=n.head.indexToLocFormat,o=n.maxp.numGlyphs+1;if(0==a)for(var h=0;h<o;h++)s.push(i.I(t,e+(h<<1))<<1);if(1==a)for(h=0;h<o;h++)s.push(i.b(t,e+(h<<2)));return s}},B.T.aI={W:function(t,e,r){var n=B.B,i=n.I,s={};n.b(t,e);return s.numGlyphs=i(t,e+=4),e+=2,s}},B.T.name={W:function(t,e,r){var n,i=B.B,s={},a=(i.I(t,e),"postScriptName"),o=i.I(t,e+=2);i.I(t,e+=2);e+=2;for(var h,l="copyright fontFamily fontSubfamily ID fullName version postScriptName trademark manufacturer designer description urlVendor urlDesigner licence licenceURL --- typoFamilyName typoSubfamilyName compatibleFull sampleText postScriptCID wwsFamilyName wwsSubfamilyName lightPalette darkPalette".split(" "),f=e,u=i.I,c=0;c<o;c++){var p,d=u(t,e),g=u(t,e+=2),v=u(t,e+=2),m=u(t,e+=2),_=u(t,e+=2),y=u(t,e+=2);e+=2;y=f+12*o+y;0==d||3==d&&0==g?p=i.F(t,y,_/2):0==g?p=i.A(t,y,_):1==g||3==g||4==g||5==g||10==g?p=i.F(t,y,_/2):1==d?(p=i.A(t,y,_),console.log("reading unknown MAC encoding "+g+" as ASCII")):(console.log("unknown encoding "+g+", platformID: "+d),p=i.A(t,y,_));d="p"+d+","+v.toString(16);null==s[d]&&(s[d]={}),s[d][l[m]]=p,s[d]._lang=v}for(h in s)if(null!=s[h][a]&&1033==s[h]._lang)return s[h];for(h in s)if(null!=s[h][a]&&0==s[h]._lang)return s[h];for(h in s)if(null!=s[h][a]&&3084==s[h]._lang)return s[h];for(h in s)if(null!=s[h][a])return s[h];for(h in s){n=s[h];break}return console.log("returning name table with languageID "+n.aX),null==n[a]&&null!=n.ID&&(n[a]=n.ID),n}},B.T.D={W:function(t,e,r){var n=B.B.I(t,e);e+=2;var i=B.T.D,s={};if(0==n)i.a(t,e,s);else if(1==n)i.m(t,e,s);else if(2==n||3==n||4==n)i.aJ(t,e,s);else{if(5!=n)throw"unknown OS/2 table version: "+n;i.an(t,e,s)}return s},a:function(t,e,r){var n=B.B;return r.xAvgCharWidth=n.l(t,e),r.usWeightClass=n.I(t,e+=2),r.usWidthClass=n.I(t,e+=2),r.fsType=n.I(t,e+=2),r.ySubscriptXSize=n.l(t,e+=2),r.ySubscriptYSize=n.l(t,e+=2),r.ySubscriptXOffset=n.l(t,e+=2),r.ySubscriptYOffset=n.l(t,e+=2),r.ySuperscriptXSize=n.l(t,e+=2),r.ySuperscriptYSize=n.l(t,e+=2),r.ySuperscriptXOffset=n.l(t,e+=2),r.ySuperscriptYOffset=n.l(t,e+=2),r.yStrikeoutSize=n.l(t,e+=2),r.yStrikeoutPosition=n.l(t,e+=2),r.sFamilyClass=n.l(t,e+=2),r.panose=n.P(t,e+=2,10),r.ulUnicodeRange1=n.b(t,e+=10),r.ulUnicodeRange2=n.b(t,e+=4),r.ulUnicodeRange3=n.b(t,e+=4),r.ulUnicodeRange4=n.b(t,e+=4),r.achVendID=n.A(t,e+=4,4),r.fsSelection=n.I(t,e+=4),r.usFirstCharIndex=n.I(t,e+=2),r.usLastCharIndex=n.I(t,e+=2),r.sTypoAscender=n.l(t,e+=2),r.sTypoDescender=n.l(t,e+=2),r.sTypoLineGap=n.l(t,e+=2),r.usWinAscent=n.I(t,e+=2),r.usWinDescent=n.I(t,e+=2),e+=2},m:function(t,e,r){var n=B.B;return e=B.T.D.a(t,e,r),r.ulCodePageRange1=n.b(t,e),r.ulCodePageRange2=n.b(t,e+=4),e+=4},aJ:function(t,e,r){var n=B.B,i=n.I;return e=B.T.D.m(t,e,r),r.sxHeight=n.l(t,e),r.sCapHeight=n.l(t,e+=2),r.usDefault=i(t,e+=2),r.usBreak=i(t,e+=2),r.usMaxContext=i(t,e+=2),e+=2},an:function(t,e,r){var n=B.B.I;return e=B.T.D.aJ(t,e,r),r.usLowerOpticalPointSize=n(t,e),r.usUpperOpticalPointSize=n(t,e+=2),e+=2}},B.T.aO={W:function(t,e,r){var n=B.B,i={};return i.version=n.J(t,e),i.italicAngle=n.J(t,e+=4),i.underlinePosition=n.l(t,e+=4),i.underlineThickness=n.l(t,e+=2),e+=2,i}},B.T.b3={W:function(t,e,r){var n=B.B,i={entries:[]},s=e,a=(n.I(t,e),n.b(t,e+=2));n.b(t,e+=4);e+=4;var o=n.I(t,e=a+s);e+=2;for(var h=0;h<o;h++){var l=n.I(t,e);e+=2;var f=n.I(t,e);e+=2;var u=n.b(t,e);e+=4;var c=n.b(t,e);e+=4;for(var c=new Uint8Array(t.buffer,s+u+a,c),p=n.ba(c,0,c.length),d=l;d<=f;d++)i.entries[d]=p}return i}},B.T.aR={W:function(t,e,r,n){for(var i=n.maxp.numGlyphs,s=e,a=B.B,o=a.b(t,e+4),h=[],l=o-1;l<o;l++)for(var f=s+a.b(t,e+8+4*l),u=0;u<i;u++){var c=a.b(t,f+4+4*u),p=a.b(t,f+4+4*u+4);if(c!=p){var d=f+c,g=a.A(t,d+4,4);if("png "!=g)throw g;h[u]=new Uint8Array(t.buffer,t.byteOffset+d+8,p-c-8)}else h[u]=null}return h}},B.T.a$={W:function(t,e,r){var n=B.B,i=e,s=n.I(t,e+=2),a=n.b(t,e+=2),o=n.b(t,e+=4),h=n.I(t,e+=4);e+=2;for(var l={},f=i+a,u=0;u<s;u++)l["g"+n.I(t,f)]=[n.I(t,f+2),n.I(t,f+4)],f+=6;for(var c=[],f=i+o,u=0;u<h;u++)c.push(n.I(t,f),n.I(t,f+2)),f+=4;return[l,c]}},B.T.b7={W:function(t,e,r){var n=B.B,i=e,s=n.I(t,e);if(0!=s)throw s;n.I(t,e+=2),n.I(t,e+=2);s=n.I(t,e+=2),n=n.b(t,e+=2);return e+=4,new Uint8Array(t.buffer,i+n,4*s)}},B.U={shape:function(t,e,r){for(var n=[],i=0;i<e.length;i++){var s=e.codePointAt(i);65535<s&&i++,n.push(B.U.codeToGlyph(t,s))}for(var a=[],i=0;i<n.length;i++){var o=function(t,e,r){var n=e[r],r=e[r+1],t=t.kern;if(t){n=t.s.indexOf(n);if(-1!=n){r=t.f[n].ae.indexOf(r);if(-1!=r)return[0,0,t.f[n].aN[r],0]}}return[0,0,0,0]}(t,n,i),h=n[i],o=t.hmtx.ar[h]+o[2];a.push({g:h,cl:i,dx:0,dy:0,ax:o,ay:0}),0}return a},shapeToPath:function(t,e,r){for(var n={u:[],Q:[]},i=0,s=0,a=0;a<e.length;a++){for(var o=e[a],h=B.U.glyphToPath(t,o.g),l=h.crds,f=0;f<l.length;f+=2)n.Q.push(l[f]+i+o.dx),n.Q.push(l[f+1]+s+o.dy);r&&n.u.push(r);for(f=0;f<h.cmds.length;f++)n.u.push(h.cmds[f]);var u=n.u.length;r&&0!=u&&"X"!=n.u[u-1]&&n.u.push("X"),i+=o.ax,s+=o.ay}return{cmds:n.u,crds:n.Q}},codeToGlyph:function(){function c(t,e,r){for(var n=0,i=~~(t.length/e);n+1!=i;){var s=n+(i-n>>>1);t[s*e]<=r?n=s:i=s}return n*e}for(var t=[9,10,11,12,13,32,133,160,5760,6158,8232,8233,8239,8288,12288,65279],p={},e=0;e<t.length;e++)p[t[e]]=1;for(e=8192;e<=8205;e++)p[e]=1;return function(t,e){if(null==t._ctab){for(var r=t.cmap,n=-1,i="p3e10 p0e4 p3e1 p1e0 p0e3 p0e1 p3e0 p3e5".split(" "),s=0;s<i.length;s++)if(null!=r.n[i[s]]){n=r.n[i[s]];break}if(-1==n)throw"no familiar platform and encoding!";t._ctab=r.g[n]}var a=t._ctab,o=a.b1,h=-1;if(0==o)h=e>=a.map.length?0:a.map[e];else if(4==o){var l=a.at;h=0,e<=l[l.length-1]&&(l[f=c(l,1,e)]<e&&f++,e>=a.av[f]&&(h=65535&(0!=a.V[f]?a.C[e-a.av[f]+(a.V[f]>>1)-(a.V.length-f)]:e+a.aa[f])))}else if(6==o){var l=e-a.aL,f=a.C;h=l<0||l>=f.length?0:f[l]}else{if(12!=o)throw"unknown cmap table format "+a.b1;var u=a.a1;h=0,e<=u[u.length-2]&&u[s=c(u,3,e)]<=e&&e<=u[s+1]&&(h=u[s+2]+(e-u[s]))}return a=t["SVG "],u=t.loca,h=0!=h&&null==t["CFF "]&&(null==a||null==a.entries[h])&&u&&u[h]==u[h+1]&&null==p[e]?0:h}}(),glyphToPath:function(t,e,r){var n={u:[],Q:[]},i=t["SVG "],s=t["CFF "],a=t.COLR,o=t.CBLC,h=t.CBDT,l=t.sbix,f=window.UPNG,u=B.U,c=null;if(o&&f)for(var p=0;p<o.length;p++)o[p][0]<=e&&e<=o[p][1]&&(c=o[p]);if(c||l&&l[e]){if(c&&17!=c[2])throw"not a PNG";null==t.__tmp&&(t.__tmp={});f=t.__tmp["g"+e];if(null==f){var d,g,v="";l?g=(d=l[e]).length:(g=h[(m=c[3][e-c[0]]+5)+1]<<16|h[m+2]<<8|h[m+3],m+=4,d=new Uint8Array(h.buffer,h.byteOffset+m,g));for(p=0;p<g;p++)v+=String.fromCharCode(d[p]);f=t.__tmp["g"+e]="data:image/png;base64,"+btoa(v)}n.u.push(f);var h=1.15*t.head.unitsPerEm,m=Math.round(h),f=Math.round(h),h=Math.round(.15*-f);n.Q.push(0,f+h,m,f+h,m,h,0,h)}else if(i&&i.entries[e]){var _=i.entries[e];null!=_&&("string"==typeof _&&(_=u.SVG.aq(_),i.entries[e]=_),n=_)}else if(1!=r&&a&&a[0]["g"+e]&&1<a[0]["g"+e][1]){function y(t){t=t.toString(16);return(1==t.length?"0":"")+t}for(var w=t.CPAL,b=a[0]["g"+e],p=0;p<b[1];p++){var x=b[0]+p,S=a[1][2*x],x=4*a[1][2*x+1],S=B.U.glyphToPath(t,S,S==e),x="#"+y(w[2+x])+y(w[1+x])+y(w[0+x]);n.u.push(x),n.u=n.u.concat(S.cmds),n.Q=n.Q.concat(S.crds),n.u.push("X")}}else if(s){_=s.Private,r={x:0,y:0,stack:[],i:0,O:!1,width:_?_.defaultWidthX:0,open:!1};if(s.ROS){for(var C=0;s.FDSelect[C+2]<=e;)C+=2;_=s.FDArray[s.FDSelect[C+1]].Private}u._drawCFF(s.CharStrings[e],r,s,_,n)}else t.glyf&&u._drawGlyf(e,t,n);return{cmds:n.u,crds:n.Q}},_drawGlyf:function(t,e,r){var n=e.glyf[t];null!=(n=null==n?e.glyf[t]=B.T.H.aH(e,t):n)&&(-1<n.p?B.U._simpleGlyph(n,r):B.U._compoGlyph(n,e,r))},_simpleGlyph:function(t,e){for(var r=B.U.P,n=0;n<t.p;n++){for(var i=0==n?0:t.o[n-1]+1,s=t.o[n],a=i;a<=s;a++){var o=a==i?s:a-1,h=a==s?i:a+1,l=1&t.r[a],f=1&t.r[o],u=1&t.r[h],c=t.j[a],p=t.Z[a];if(a==i)if(l){if(!f){r.w(e,c,p);continue}r.w(e,t.j[o],t.Z[o])}else f?r.w(e,t.j[o],t.Z[o]):r.w(e,Math.floor(.5*(t.j[o]+c)),Math.floor(.5*(t.Z[o]+p)));l?f&&r.c(e,c,p):u?r.aU(e,c,p,t.j[h],t.Z[h]):r.aU(e,c,p,Math.floor(.5*(c+t.j[h])),Math.floor(.5*(p+t.Z[h])))}r.R(e)}},_compoGlyph:function(t,e,r){for(var n=0;n<t.M.length;n++){var i={u:[],Q:[]},s=t.M[n];B.U._drawGlyf(s.aP,e,i);for(var a=s.q,o=0;o<i.Q.length;o+=2){var h=i.Q[o],l=i.Q[o+1];r.Q.push(h*a.$+l*a.aD+a.aE),r.Q.push(h*a.b8+l*a.v+a.b9)}for(o=0;o<i.u.length;o++)r.u.push(i.u[o])}},pathToSVG:function(t,e){var r=t.cmds,n=t.crds,i=0;null==e&&(e=5);for(var s=[],a={M:2,L:2,Q:4,C:6},o=0;o<r.length;o++){var h=r[o],l=i+(a[h]||0);for(s.push(h);i<l;){var f=n[i++];s.push(parseFloat(f.toFixed(e))+(i==l?"":" "))}}return s.join("")},SVGToPath:function(t){var e={u:[],Q:[]};return B.U.SVG.ap(t,e),{cmds:e.u,crds:e.Q}},pathToContext:function(t,e){for(var r=0,n=t.cmds,i=t.crds,s=0;s<n.length;s++){var a=n[s];if("M"==a)e.moveTo(i[r],i[r+1]),r+=2;else if("L"==a)e.lineTo(i[r],i[r+1]),r+=2;else if("C"==a)e.bezierCurveTo(i[r],i[r+1],i[r+2],i[r+3],i[r+4],i[r+5]),r+=6;else if("Q"==a)e.quadraticCurveTo(i[r],i[r+1],i[r+2],i[r+3]),r+=4;else if("d"==a[0]){var o=window.UPNG,h=i[r],l=i[r+1],f=i[r+2],u=i[r+3],c=i[r+4],p=i[r+5],d=i[r+6],g=i[r+7];if(r+=8,null!=o){e.save();for(var v=f-h,m=u-l,_=Math.sqrt(v*v+m*m),y=Math.atan2(m,v),w=d-h,b=g-l,x=Math.sqrt(w*w+b*b),v=Math.sign(v*b-m*w),S=atob(a.slice(22)),C=[],P=0;P<S.length;P++)C[P]=S.charCodeAt(P);b=o.decode(new Uint8Array(C)),m=b.width,w=b.height,b=new Uint8Array(o.toRGBA8(b)[0]);null==k&&(k=document.createElement("canvas"),T=k.getContext("2d")),k.width==m&&k.height==w||(k.width=m,k.height=w),T.putImageData(new ImageData(new Uint8ClampedArray(b.buffer),m,w),0,0),e.translate(h,l),e.rotate(y),e.scale(_*(m/w)/m,v*x/w),e.drawImage(k,0,0),e.restore()}else e.moveTo(h,l),e.lineTo(f,u),e.lineTo(c,p),e.lineTo(d,g),e.closePath()}else"#"==a.charAt(0)||"r"==a.charAt(0)?(e.beginPath(),e.fillStyle=a):"O"==a.charAt(0)&&"OX"!=a?(e.beginPath(),g=a.split("-"),e.lineWidth=parseFloat(g[2]),e.strokeStyle=g[1]):"Z"==a?e.closePath():"X"==a?e.fill():"OX"==a&&e.stroke()}},P:{w:function(t,e,r){t.u.push("M"),t.Q.push(e,r)},c:function(t,e,r){t.u.push("L"),t.Q.push(e,r)},z:function(t,e,r,n,i,s,a){t.u.push("C"),t.Q.push(e,r,n,i,s,a)},aU:function(t,e,r,n,i){t.u.push("Q"),t.Q.push(e,r,n,i)},R:function(t){t.u.push("Z")}},_drawCFF:function(t,e,r,n,i){for(var s=e.stack,a=e.i,o=e.O,h=e.width,l=e.open,f=0,u=e.x,c=e.y,p=0,d=0,g=0,v=0,m=0,_=0,y=0,w=0,b=0,x=0,S=B.T.K,C=B.U.P,P=n.nominalWidthX,k={aj:0,size:0};f<t.length;){S.ah(t,f,k);var T,I,M,F=k.aj;if(f+=k.size,"o1"==F||"o18"==F)s.length%2!=0&&!o&&(h=s.shift()+P),a+=s.length>>1,o=!(s.length=0);else if("o3"==F||"o23"==F)s.length%2!=0&&!o&&(h=s.shift()+P),a+=s.length>>1,o=!(s.length=0);else if("o4"==F)1<s.length&&!o&&(h=s.shift()+P,o=!0),l&&C.R(i),c+=s.pop(),C.w(i,u,c),l=!0;else if("o5"==F)for(;0<s.length;)u+=s.shift(),c+=s.shift(),C.c(i,u,c);else if("o6"==F||"o7"==F)for(var A=s.length,E="o6"==F,U=0;U<A;U++){var O=s.shift();E?u+=O:c+=O,E=!E,C.c(i,u,c)}else if("o8"==F||"o24"==F){for(var A=s.length,D=0;D+6<=A;)p=u+s.shift(),d=c+s.shift(),g=p+s.shift(),v=d+s.shift(),u=g+s.shift(),c=v+s.shift(),C.z(i,p,d,g,v,u,c),D+=6;"o24"==F&&(u+=s.shift(),c+=s.shift(),C.c(i,u,c))}else{if("o11"==F)break;if("o1234"==F||"o1235"==F||"o1236"==F||"o1237"==F)"o1234"==F&&(d=c,g=(p=u+s.shift())+s.shift(),_=x=v=d+s.shift(),w=c,u=(y=(m=(b=g+s.shift())+s.shift())+s.shift())+s.shift(),C.z(i,p,d,g,v,b,x),C.z(i,m,_,y,w,u,c)),"o1235"==F&&(p=u+s.shift(),d=c+s.shift(),g=p+s.shift(),v=d+s.shift(),b=g+s.shift(),x=v+s.shift(),m=b+s.shift(),_=x+s.shift(),y=m+s.shift(),w=_+s.shift(),u=y+s.shift(),c=w+s.shift(),s.shift(),C.z(i,p,d,g,v,b,x),C.z(i,m,_,y,w,u,c)),"o1236"==F&&(p=u+s.shift(),d=c+s.shift(),g=p+s.shift(),_=x=v=d+s.shift(),y=(m=(b=g+s.shift())+s.shift())+s.shift(),w=_+s.shift(),u=y+s.shift(),C.z(i,p,d,g,v,b,x),C.z(i,m,_,y,w,u,c)),"o1237"==F&&(p=u+s.shift(),d=c+s.shift(),g=p+s.shift(),v=d+s.shift(),b=g+s.shift(),x=v+s.shift(),m=b+s.shift(),_=x+s.shift(),y=m+s.shift(),w=_+s.shift(),Math.abs(y-u)>Math.abs(w-c)?u=y+s.shift():c=w+s.shift(),C.z(i,p,d,g,v,b,x),C.z(i,m,_,y,w,u,c));else if("o14"==F)0<s.length&&4!=s.length&&!o&&(h=s.shift()+r.nominalWidthX,o=!0),4==s.length&&(T=s.shift(),I=s.shift(),M=s.shift(),L=s.shift(),M=S.d(r,M),L=S.d(r,L),B.U._drawCFF(r.CharStrings[M],e,r,n,i),e.x=T,e.y=I,B.U._drawCFF(r.CharStrings[L],e,r,n,i)),l&&(C.R(i),l=!1);else if("o19"==F||"o20"==F)s.length%2!=0&&!o&&(h=s.shift()+P),a+=s.length>>1,o=!(s.length=0),f+=a+7>>3;else if("o21"==F)2<s.length&&!o&&(h=s.shift()+P,o=!0),c+=s.pop(),u+=s.pop(),l&&C.R(i),C.w(i,u,c),l=!0;else if("o22"==F)1<s.length&&!o&&(h=s.shift()+P,o=!0),u+=s.pop(),l&&C.R(i),C.w(i,u,c),l=!0;else if("o25"==F){for(;6<s.length;)u+=s.shift(),c+=s.shift(),C.c(i,u,c);p=u+s.shift(),d=c+s.shift(),g=p+s.shift(),v=d+s.shift(),u=g+s.shift(),c=v+s.shift(),C.z(i,p,d,g,v,u,c)}else if("o26"==F)for(s.length%2&&(u+=s.shift());0<s.length;)p=u,d=c+s.shift(),u=g=p+s.shift(),c=(v=d+s.shift())+s.shift(),C.z(i,p,d,g,v,u,c);else if("o27"==F)for(s.length%2&&(c+=s.shift());0<s.length;)d=c,g=(p=u+s.shift())+s.shift(),v=d+s.shift(),u=g+s.shift(),c=v,C.z(i,p,d,g,v,u,c);else if("o10"==F||"o29"==F){var L="o10"==F?n:r;0==s.length?console.log("error: empty stack"):(N=s.pop(),N=L.Subrs[N+L.Bias],e.x=u,e.y=c,e.i=a,e.O=o,e.width=h,e.open=l,B.U._drawCFF(N,e,r,n,i),u=e.x,c=e.y,a=e.i,o=e.O,h=e.width,l=e.open)}else if("o30"==F||"o31"==F){var N=s.length,D=0,R="o31"==F;for(D+=N-(A=-3&N);D<A;)R=R?(d=c,g=(p=u+s.shift())+s.shift(),c=(v=d+s.shift())+s.shift(),A-D==5?(u=g+s.shift(),D++):u=g,!1):(p=u,d=c+s.shift(),g=p+s.shift(),v=d+s.shift(),u=g+s.shift(),A-D==5?(c=v+s.shift(),D++):c=v,!0),C.z(i,p,d,g,v,u,c),D+=4}else{if("o"==(F+"").charAt(0))throw console.log("Unknown operation: "+F,t),F;s.push(F)}}}e.x=u,e.y=c,e.i=a,e.O=o,e.width=h,e.open=l},SVG:(v={b0:function(t){return Math.sqrt(Math.abs(t[0]*t[3]-t[1]*t[2]))},translate:function(t,e,r){v.concat(t,[1,0,0,1,e,r])},rotate:function(t,e){v.concat(t,[Math.cos(e),-Math.sin(e),Math.sin(e),Math.cos(e),0,0])},scale:function(t,e,r){v.concat(t,[e,0,0,r,0,0])},concat:function(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5];t[0]=r*e[0]+n*e[2],t[1]=r*e[1]+n*e[3],t[2]=i*e[0]+s*e[2],t[3]=i*e[1]+s*e[3],t[4]=a*e[0]+o*e[2]+e[4],t[5]=a*e[1]+o*e[3]+e[5]},al:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=e*i-r*n;t[0]=i/o,t[1]=-r/o,t[2]=-n/o,t[3]=e/o,t[4]=(n*a-i*s)/o,t[5]=(r*s-e*a)/o},ak:function(t,e){var r=e[0],e=e[1];return[r*t[0]+e*t[2]+t[4],r*t[1]+e*t[3]+t[5]]},ai:function(t,e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];e[r]=n*t[0]+i*t[2]+t[4],e[r+1]=n*t[1]+i*t[3]+t[5]}}},{cssMap:function(t){for(var e=o(t,"{","}"),r={},n=0;n<e.length;n+=2)for(var i=e[n].split(","),s=0;s<i.length;s++){var a=i[s].trim();null==r[a]&&(r[a]=""),r[a]+=e[n+1]}return r},readTrnf:m,ap:_,aq:function(t){var e={u:[],Q:[]};if(null==t)return e;var t=(new DOMParser).parseFromString(t,"image/svg+xml").getElementsByTagName("svg")[0],r=(r=t.getAttribute("viewBox"))?r.trim().split(" ").map(parseFloat):[0,0,1e3,1e3];(function t(e,r,n){for(var i=0;i<e.length;i++){var s,a=e[i],o=a.tagName,h=a.getAttribute("fill");if(null==h&&(h=n),"g"==o){var l={Q:[],u:[]};t(a.children,l,h);var f=a.getAttribute("transform");f&&(g=m(f),v.ai(g,l.Q)),r.Q=r.Q.concat(l.Q),r.u=r.u.concat(l.u)}else if("path"==o||"circle"==o||"ellipse"==o){if(r.u.push(h||"#000000"),"path"==o&&(s=a.getAttribute("d")),"circle"==o||"ellipse"==o){for(var u=[0,0,0,0],c=["cx","cy","rx","ry","r"],p=0;p<5;p++){var d=a.getAttribute(c[p]);d&&(d=parseFloat(d),p<4?u[p]=d:u[2]=u[3]=d)}var f=u[0],g=u[1],l=u[2],h=u[3];s=["M",f-l,g,"a",l,h,0,1,0,2*l,0,"a",l,h,0,1,0,2*-l,0].join(" ")}_(s,r),r.u.push("X")}else"defs"==o||console.log(o,a)}})(t.children,e);for(var n=0;n<e.Q.length;n+=2){var i=e.Q[n],s=e.Q[n+1];i-=r[0],s=-(s-=r[1]),e.Q[n]=i,e.Q[n+1]=s}return e}}),initHB:function(t,e){fetch(t).then(function(t){return t.arrayBuffer()}).then(function(t){return WebAssembly.instantiate(t)}).then(function(t){console.log("HB ready");var g,v,m,_,y,w,b,x,S,C=t.instance.exports,P=C.memory;B.U.shapeHB=function(t,e,r){var n=t._data,i=t.name.postScriptName,s=P.buffer.byteLength,t=2*n.length+16*e.length+4e6,a=0,o=0;if(s<t&&P.grow(4+(t-s>>>16)),g=new Uint8Array(P.buffer),v=new Uint32Array(P.buffer),m=new Int32Array(P.buffer),_!=i&&(null!=y&&(C.hb_blob_destroy(y),C.free(w),C.hb_face_destroy(b),C.hb_font_destroy(x)),w=C.malloc(n.byteLength),g.set(n,w),y=C.hb_blob_create(w,n.byteLength,2,0,0),b=C.hb_face_create(y,0),x=C.hb_font_create(b),_=i),null!=window.TextEncoder){null==S&&(S=new window.TextEncoder("utf8"));t=C.hb_buffer_create(),s=S.encode(e),n=s.length,i=C.malloc(n);g.set(s,i),C.hb_buffer_add_utf8(t,i,n,0,n),C.free(i),C.hb_buffer_set_direction(t,r?4:5),C.hb_buffer_guess_segment_properties(t),C.hb_shape(x,t,0,0);i=function(t){for(var e=C.hb_buffer_get_length(t),r=[],n=C.hb_buffer_get_glyph_infos(t,0)>>>2,i=C.hb_buffer_get_glyph_positions(t,0)>>>2,s=0;s<e;++s){var a=n+5*s,o=i+5*s;r.push({g:v[a],cl:v[2+a],ax:m[o],ay:m[1+o],dx:m[2+o],dy:m[3+o]})}return r}(t);C.hb_buffer_destroy(t);var h=i.slice(0);r||h.reverse();for(var l,f=1;f<h.length;f++){for(var u=h[f],c=u.cl;;){var p=e.codePointAt(a),d=(void 0,(d=0)==(4294967168&(l=p))?d=1:0==(4294965248&l)?d=2:0==(4294901760&l)?d=3:0==(4292870144&l)&&(d=4),d);if(!(o+d<=c))break;o+=d,a+=p<=65535?1:2}u.cl=a}return i}alert("Your browser is too old. Please, update it.")},e()})}},B}(),UZIP={};"object"==typeof module&&(module.exports=UZIP),UZIP.parse=function(t,e){for(var r=UZIP.bin.readUshort,n=UZIP.bin.readUint,i=0,s={},a=new Uint8Array(t),o=a.length-4;101010256!=n(a,o);)o--;i=o;i+=4;var h=r(a,i+=4),t=(r(a,i+=2),n(a,i+=2),n(a,i+=4));i+=4,i=t;for(var l=0;l<h;l++){n(a,i);i+=4,i+=4,i+=4;UZIP._readTime(a,i),n(a,i+=4);var f=n(a,i+=4),u=n(a,i+=4),c=r(a,i+=4),p=r(a,i+2),d=r(a,i+4);i+=6;var g=n(a,i+=8);i+=4,i+=c+p+d,UZIP._readLocal(a,g,s,f,u,e)}return s},UZIP._readTime=function(t,e){var r=UZIP.bin.readUshort(t,e),e=UZIP.bin.readUshort(t,e+2);return new Date(1980+(e>>>9),e>>>5&15,31&e,r>>>11,r>>>5&63,2*(31&r)).getTime()},UZIP._writeTime=function(t,e,r){var n=new Date(r),r=n.getFullYear()-1980<<9|n.getMonth()+1<<5|n.getDate(),n=n.getHours()<<11|n.getMinutes()<<5|n.getSeconds()>>>1;UZIP.bin.writeUshort(t,e,n),UZIP.bin.writeUshort(t,e+2,r)},UZIP._readLocal=function(t,e,r,n,i,s){var a=UZIP.bin.readUshort,o=UZIP.bin.readUint,h=(o(t,e),a(t,e+=4),a(t,e+=2)),l=a(t,e+=2);UZIP._readTime(t,e+=2),o(t,e+=4);e+=4;o=a(t,e+=8),a=a(t,e+=2);e+=2;h=0==(2048&h)?UZIP.bin.readIBM(t,e,o):UZIP.bin.readUTF8(t,e,o);if(e+=o,e+=a,s)r[h]={size:i,csize:n};else{t=new Uint8Array(t.buffer,e);if(0,0==l)r[h]=new Uint8Array(t.buffer.slice(e,e+n));else{if(8!=l)throw"unknown compression method: "+l;i=new Uint8Array(i);UZIP.inflateRaw(t,i),r[h]=i}}},UZIP.inflateRaw=function(t,e){return UZIP.F.inflate(t,e)},UZIP.inflate=function(t,e){t[0],t[1];return UZIP.inflateRaw(new Uint8Array(t.buffer,t.byteOffset+2,t.length-6),e)},UZIP.deflate=function(t,e){null==e&&(e={level:6});var r=new Uint8Array(50+Math.floor(1.1*t.length));r[0]=120,r[1]=156;var n=UZIP.F.deflateRaw(t,r,2,e.level),t=UZIP.adler(t,0,t.length);return r[n+0]=t>>>24&255,r[n+1]=t>>>16&255,r[n+2]=t>>>8&255,r[n+3]=t>>>0&255,new Uint8Array(r.buffer,0,n+4)},UZIP.deflateRaw=function(t,e){null==e&&(e={level:6});var r=new Uint8Array(50+Math.floor(1.1*t.length)),e=UZIP.F.deflateRaw(t,r,void 0,e.level);return new Uint8Array(r.buffer,0,e)},UZIP.encode=function(t,e){null==e&&(e=!1);var r=0,n=UZIP.bin.writeUint,i=UZIP.bin.writeUshort,s={};for(p in t){var a=!UZIP._noNeed(p)&&!e,o=t[p],h=UZIP.crc.crc(o,0,o.length);s[p]={cpr:a,usize:o.length,crc:h,file:a?UZIP.deflateRaw(o):o}}for(p in s)r+=s[p].file.length+30+46+2*UZIP.bin.sizeUTF8(p);r+=22;var l=new Uint8Array(r),f=0,u=[];for(p in s){var c=s[p];u.push(f),f=UZIP._writeHeader(l,f,p,c,0)}var p,d=0,g=f;for(p in s){c=s[p];u.push(f),f=UZIP._writeHeader(l,f,p,c,1,u[d++])}var v=f-g;return n(l,f,101010256),f+=4,i(l,f+=4,d),i(l,f+=2,d),n(l,f+=2,v),n(l,f+=4,g),f+=4,f+=2,l.buffer},UZIP._noNeed=function(t){t=t.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(t)},UZIP._writeHeader=function(t,e,r,n,i,s){var a=UZIP.bin.writeUint,o=UZIP.bin.writeUshort,h=n.file;return a(t,e,0==i?67324752:33639248),e+=4,1==i&&(e+=2),o(t,e,20),o(t,e+=2,2048),o(t,e+=2,n.cpr?8:0),UZIP._writeTime(t,e+=2,Date.now()),a(t,e+=4,n.crc),a(t,e+=4,h.length),a(t,e+=4,n.usize),o(t,e+=4,UZIP.bin.sizeUTF8(r)),o(t,e+=2,0),e+=2,1==i&&(e+=2,e+=2,a(t,e+=6,s),e+=4),e+=UZIP.bin.writeUTF8(t,e,r),0==i&&(t.set(h,e),e+=h.length),e},UZIP.crc={table:function(){for(var t=new Uint32Array(256),e=0;e<256;e++){for(var r=e,n=0;n<8;n++)1&r?r=3988292384^r>>>1:r>>>=1;t[e]=r}return t}(),update:function(t,e,r,n){for(var i=0;i<n;i++)t=UZIP.crc.table[255&(t^e[r+i])]^t>>>8;return t},crc:function(t,e,r){return 4294967295^UZIP.crc.update(4294967295,t,e,r)}},UZIP.adler=function(t,e,r){for(var n=1,i=0,s=e,a=e+r;s<a;){for(var o=Math.min(s+5552,a);s<o;)i+=n+=t[s++];n%=65521,i%=65521}return i<<16|n},UZIP.bin={readUshort:function(t,e){return t[e]|t[e+1]<<8},writeUshort:function(t,e,r){t[e]=255&r,t[e+1]=r>>8&255},readUint:function(t,e){return 16777216*t[e+3]+(t[e+2]<<16|t[e+1]<<8|t[e])},writeUint:function(t,e,r){t[e]=255&r,t[e+1]=r>>8&255,t[e+2]=r>>16&255,t[e+3]=r>>24&255},readASCII:function(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n},writeASCII:function(t,e,r){for(var n=0;n<r.length;n++)t[e+n]=r.charCodeAt(n)},pad:function(t){return t.length<2?"0"+t:t},readIBM:function(t,e,r){for(var n=[199,252,233,226,228,224,229,231,234,235,232,239,238,236,196,197,201,230,198,244,246,242,251,249,255,214,220,162,163,165,167,402,225,237,243,250,241,209,170,186,191,8976,172,189,188,161,171,187],i="",s=0;s<r;s++){var a=t[e+s];a<128||(a=a<176?n[a-128]:32),i+=String.fromCharCode(a)}return i},readUTF8:function(e,r,n){for(var t,i="",s=0;s<n;s++)i+="%"+UZIP.bin.pad(e[r+s].toString(16));try{t=decodeURIComponent(i)}catch(t){return UZIP.bin.readASCII(e,r,n)}return t},writeUTF8:function(t,e,r){for(var n=r.length,i=0,s=0;s<n;s++){var a=r.charCodeAt(s);if(0==(4294967168&a))t[e+i]=a,i++;else if(0==(4294965248&a))t[e+i]=192|a>>6,t[e+i+1]=128|a>>0&63,i+=2;else if(0==(4294901760&a))t[e+i]=224|a>>12,t[e+i+1]=128|a>>6&63,t[e+i+2]=128|a>>0&63,i+=3;else{if(0!=(4292870144&a))throw"e";t[e+i]=240|a>>18,t[e+i+1]=128|a>>12&63,t[e+i+2]=128|a>>6&63,t[e+i+3]=128|a>>0&63,i+=4}}return i},sizeUTF8:function(t){for(var e=t.length,r=0,n=0;n<e;n++){var i=t.charCodeAt(n);if(0==(4294967168&i))r++;else if(0==(4294965248&i))r+=2;else if(0==(4294901760&i))r+=3;else{if(0!=(4292870144&i))throw"e";r+=4}}return r}},UZIP.F={},UZIP.F.deflateRaw=function(t,e,r,n){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][n],s=UZIP.F.U,a=UZIP.F._goodIndex,o=(UZIP.F._hash,UZIP.F._putsE),h=0,l=r<<3,f=0,u=t.length;if(0==n){for(;h<u;)o(e,l,h+(w=Math.min(65535,u-h))==u?1:0),l=UZIP.F._copyExact(t,h,w,e,l+8),h+=w;return l>>>3}var c=s.lits,p=s.strt,d=s.prev,g=0,v=0,m=0,_=0,y=0;2<u&&(p[y=UZIP.F._hash(t,0)]=0);for(h=0;h<u;h++){var w,b,x,S,C=y;h+1<u-2&&(y=UZIP.F._hash(t,h+1),d[x=h+1&32767]=p[y],p[y]=x),f<=h&&((14e3<g||26697<v)&&100<u-h&&(f<h&&(c[g]=h-f,g+=2,f=h),l=UZIP.F._writeBlock(h==u-1||f==u?1:0,c,g,_,t,m,h-m,e,l),g=v=_=0,m=h),S=0,w=(S=h<u-2?UZIP.F._bestMatch(t,h,d,C,Math.min(i[2],u-h),i[3]):S)>>>16,b=65535&S,0!=S?(b=65535&S,x=a(w=S>>>16,s.of0),s.lhst[257+x]++,S=a(b,s.df0),s.dhst[S]++,_+=s.exb[x]+s.dxb[S],c[g]=w<<23|h-f,c[g+1]=b<<16|x<<8|S,g+=2,f=h+w):s.lhst[t[h]]++,v++)}for(m==h&&0!=t.length||(f<h&&(c[g]=h-f,g+=2,f=h),l=UZIP.F._writeBlock(1,c,g,_,t,m,h-m,e,l),g=v=_=v=g=0,m=h);0!=(7&l);)l++;return l>>>3},UZIP.F._bestMatch=function(t,e,r,n,i,s){var a=32767&e,o=r[a],h=a-o+32768&32767;if(o==a||n!=UZIP.F._hash(t,e-h))return 0;for(var l=0,f=0,u=Math.min(32767,e);h<=u&&0!=--s&&o!=a;){if(0==l||t[e+l]==t[e+l-h]){var c=UZIP.F._howLong(t,e,h);if(l<c){if(f=h,i<=(l=c))break;h+2<c&&(c=h+2);for(var p=0,d=0;d<c-2;d++){var g=e-h+d+32768&32767,v=g-r[g]+32768&32767;p<v&&(p=v,o=g)}}}h+=(a=o)-(o=r[a])+32768&32767}return l<<16|f},UZIP.F._howLong=function(t,e,r){if(t[e]!=t[e-r]||t[e+1]!=t[e+1-r]||t[e+2]!=t[e+2-r])return 0;var n=e,i=Math.min(t.length,e+258);for(e+=3;e<i&&t[e]==t[e-r];)e++;return e-n},UZIP.F._hash=function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<4)&65535},UZIP.saved=0,UZIP.F._writeBlock=function(t,e,r,n,i,s,a,o,h){var l=UZIP.F.U,f=UZIP.F._putsF,u=UZIP.F._putsE;l.lhst[256]++;var c=(b=UZIP.F.getTrees())[0],p=b[1],d=b[2],g=b[3],v=b[4],m=b[5],_=b[6],y=b[7],w=32+(0==(h+3&7)?0:8-(h+3&7))+(a<<3),b=n+UZIP.F.contSize(l.fltree,l.lhst)+UZIP.F.contSize(l.fdtree,l.dhst),n=n+UZIP.F.contSize(l.ltree,l.lhst)+UZIP.F.contSize(l.dtree,l.dhst);n+=14+3*m+UZIP.F.contSize(l.itree,l.ihst)+(2*l.ihst[16]+3*l.ihst[17]+7*l.ihst[18]);for(var x=0;x<286;x++)l.lhst[x]=0;for(x=0;x<30;x++)l.dhst[x]=0;for(x=0;x<19;x++)l.ihst[x]=0;n=w<b&&w<n?0:b<n?1:2;f(o,h,t),f(o,h+1,n);var S,C;h+=3;if(0==n){for(;0!=(7&h);)h++;h=UZIP.F._copyExact(i,s,a,o,h)}else{if(1==n&&(S=l.fltree,C=l.fdtree),2==n){UZIP.F.makeCodes(l.ltree,c),UZIP.F.revCodes(l.ltree,c),UZIP.F.makeCodes(l.dtree,p),UZIP.F.revCodes(l.dtree,p),UZIP.F.makeCodes(l.itree,d),UZIP.F.revCodes(l.itree,d),S=l.ltree,C=l.dtree,u(o,h,g-257),u(o,h+=5,v-1),u(o,h+=5,m-4),h+=4;for(var P=0;P<m;P++)u(o,h+3*P,l.itree[1+(l.ordr[P]<<1)]);h=UZIP.F._codeTiny(_,l.itree,o,h+=3*m),h=UZIP.F._codeTiny(y,l.itree,o,h)}for(var k=s,T=0;T<r;T+=2){for(var I,M,F=e[T],A=F>>>23,E=k+(8388607&F);k<E;)h=UZIP.F._writeLit(i[k++],S,o,h);0!=A&&(I=(M=e[T+1])>>16,F=255&M,u(o,h=UZIP.F._writeLit(257+(M=M>>8&255),S,o,h),A-l.of0[M]),h+=l.exb[M],f(o,h=UZIP.F._writeLit(F,C,o,h),I-l.df0[F]),h+=l.dxb[F],k+=A)}h=UZIP.F._writeLit(256,S,o,h)}return h},UZIP.F._copyExact=function(t,e,r,n,i){var s=i>>>3;return n[s]=r,n[1+s]=r>>>8,n[2+s]=255-n[s],n[3+s]=255-n[1+s],s+=4,n.set(new Uint8Array(t.buffer,e,r),s),i+(r+4<<3)},UZIP.F.getTrees=function(){for(var t=UZIP.F.U,e=UZIP.F._hufTree(t.lhst,t.ltree,15),r=UZIP.F._hufTree(t.dhst,t.dtree,15),n=[],i=UZIP.F._lenCodes(t.ltree,n),s=[],a=UZIP.F._lenCodes(t.dtree,s),o=0;o<n.length;o+=2)t.ihst[n[o]]++;for(o=0;o<s.length;o+=2)t.ihst[s[o]]++;for(var h=UZIP.F._hufTree(t.ihst,t.itree,7),l=19;4<l&&0==t.itree[1+(t.ordr[l-1]<<1)];)l--;return[e,r,h,i,a,l,n,s]},UZIP.F.getSecond=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(t[r+1]);return e},UZIP.F.nonZero=function(t){for(var e="",r=0;r<t.length;r+=2)0!=t[r+1]&&(e+=(r>>1)+",");return e},UZIP.F.contSize=function(t,e){for(var r=0,n=0;n<e.length;n++)r+=e[n]*t[1+(n<<1)];return r},UZIP.F._codeTiny=function(t,e,r,n){for(var i=0;i<t.length;i+=2){var s=t[i],a=t[i+1];n=UZIP.F._writeLit(s,e,r,n);var o=16==s?2:17==s?3:7;15<s&&(UZIP.F._putsE(r,n,a,o),n+=o)}return n},UZIP.F._lenCodes=function(t,e){for(var r=t.length;2!=r&&0==t[r-1];)r-=2;for(var n=0;n<r;n+=2){var i=t[n+1],s=n+3<r?t[n+3]:-1,a=n+5<r?t[n+5]:-1,o=0==n?-1:t[n-1];if(0==i&&s==i&&a==i){for(var h=n+5;h+2<r&&t[h+2]==i;)h+=2;(l=Math.min(h+1-n>>>1,138))<11?e.push(17,l-3):e.push(18,l-11),n+=2*l-2}else if(i==o&&s==i&&a==i){for(h=n+5;h+2<r&&t[h+2]==i;)h+=2;var l=Math.min(h+1-n>>>1,6);e.push(16,l-3),n+=2*l-2}else e.push(i,0)}return r>>>1},UZIP.F._hufTree=function(t,e,r){for(var n=[],i=t.length,s=e.length,a=0,a=0;a<s;a+=2)e[a]=0,e[a+1]=0;for(a=0;a<i;a++)0!=t[a]&&n.push({lit:a,f:t[a]});var o=n.length,h=n.slice(0);if(0==o)return 0;if(1==o){var l=n[0].lit,h=0==l?1:0;return e[1+(l<<1)]=1,e[1+(h<<1)]=1}n.sort(function(t,e){return t.f-e.f});var f=n[0],u=n[1],c=0,p=1,d=2;for(n[0]={lit:-1,f:f.f+u.f,l:f,r:u,d:0};p!=o-1;)f=c!=p&&(d==o||n[c].f<n[d].f)?n[c++]:n[d++],u=c!=p&&(d==o||n[c].f<n[d].f)?n[c++]:n[d++],n[p++]={lit:-1,f:f.f+u.f,l:f,r:u};l=UZIP.F.setDepth(n[p-1],0);for(r<l&&(UZIP.F.restrictDepth(h,r,l),l=r),a=0;a<o;a++)e[1+(h[a].lit<<1)]=h[a].d;return l},UZIP.F.setDepth=function(t,e){return-1!=t.lit?t.d=e:Math.max(UZIP.F.setDepth(t.l,e+1),UZIP.F.setDepth(t.r,e+1))},UZIP.F.restrictDepth=function(t,e,r){var n=0,i=1<<r-e,s=0;for(t.sort(function(t,e){return e.d==t.d?t.f-e.f:e.d-t.d}),n=0;n<t.length&&t[n].d>e;n++){var a=t[n].d;t[n].d=e,s+=i-(1<<r-a)}for(s>>>=r-e;0<s;)(a=t[n].d)<e?(t[n].d++,s-=1<<e-a-1):n++;for(;0<=n;n--)t[n].d==e&&s<0&&(t[n].d--,s++);0!=s&&console.log("debt left")},UZIP.F._goodIndex=function(t,e){var r=0;return e[16|r]<=t&&(r|=16),e[8|r]<=t&&(r|=8),e[4|r]<=t&&(r|=4),e[2|r]<=t&&(r|=2),e[1|r]<=t&&(r|=1),r},UZIP.F._writeLit=function(t,e,r,n){return UZIP.F._putsF(r,n,e[t<<1]),n+e[1+(t<<1)]},UZIP.F.inflate=function(t,e){var r=Uint8Array;if(3==t[0]&&0==t[1])return e||new r(0);var n=UZIP.F,i=n._bitsF,s=n._bitsE,a=n._decodeTiny,o=n.makeCodes,h=n.codes2map,l=n._get17,f=n.U,u=null==e;u&&(e=new r(t.length>>>2<<3));for(var c,p=0,d=0,g=0,v=0,m=0;0==p;)if(p=i(t,m,1),c=i(t,m+1,2),m+=3,0!=c){if(u&&(e=UZIP.F._check(e,v+(1<<17))),1==c&&(C=f.flmap,P=f.fdmap,d=511,g=31),2==c){for(var _=s(t,m,5)+257,y=s(t,m+5,5)+1,w=s(t,m+10,4)+4,b=(m+=14,0);b<38;b+=2)f.itree[b]=0,f.itree[b+1]=0;for(var x=1,b=0;b<w;b++){var S=s(t,m+3*b,3);x<(f.itree[1+(f.ordr[b]<<1)]=S)&&(x=S)}m+=3*w,o(f.itree,x),h(f.itree,x,f.imap);var C=f.lmap,P=f.dmap,m=a(f.imap,(1<<x)-1,_+y,t,m,f.ttree),k=n._copyOut(f.ttree,0,_,f.ltree),d=(1<<k)-1,T=n._copyOut(f.ttree,_,y,f.dtree),g=(1<<T)-1;o(f.ltree,k),h(f.ltree,k,C),o(f.dtree,T),h(f.dtree,T,P)}for(;;){var I=C[l(t,m)&d];m+=15&I;I=I>>>4;if(I>>>8==0)e[v++]=I;else{if(256==I)break;var M=v+I-254;264<I&&(M=v+((F=f.ldef[I-257])>>>3)+s(t,m,7&F),m+=7&F);var F=P[l(t,m)&g];m+=15&F;var F=f.ddef[F>>>4],A=(F>>>4)+i(t,m,15&F);for(m+=15&F,u&&(e=UZIP.F._check(e,v+(1<<17)));v<M;)e[v]=e[v++-A],e[v]=e[v++-A],e[v]=e[v++-A],e[v]=e[v++-A];v=M}}}else{0!=(7&m)&&(m+=8-(7&m));k=4+(m>>>3),T=t[k-4]|t[k-3]<<8;(e=u?UZIP.F._check(e,v+T):e).set(new r(t.buffer,t.byteOffset+k,T),v),m=k+T<<3,v+=T}return e.length==v?e:e.slice(0,v)},UZIP.F._check=function(t,e){var r=t.length;if(e<=r)return t;e=new Uint8Array(Math.max(r<<1,e));return e.set(t,0),e},UZIP.F._decodeTiny=function(t,e,r,n,i,s){for(var a=UZIP.F._bitsE,o=UZIP.F._get17,h=0;h<r;){var l=t[o(n,i)&e];i+=15&l;var f=l>>>4;if(f<=15)s[h]=f,h++;else{var u=0,l=0;16==f?(l=3+a(n,i,2),i+=2,u=s[h-1]):17==f?(l=3+a(n,i,3),i+=3):18==f&&(l=11+a(n,i,7),i+=7);for(var c=h+l;h<c;)s[h]=u,h++}}return i},UZIP.F._copyOut=function(t,e,r,n){for(var i=0,s=0,a=n.length>>>1;s<r;){var o=t[s+e];n[s<<1]=0,i<(n[1+(s<<1)]=o)&&(i=o),s++}for(;s<a;)n[s<<1]=0,n[1+(s<<1)]=0,s++;return i},UZIP.F.makeCodes=function(t,e){for(var r,n,i,s=UZIP.F.U,a=t.length,o=s.bl_count,h=0;h<=e;h++)o[h]=0;for(h=1;h<a;h+=2)o[t[h]]++;var l=s.next_code,f=0;for(o[0]=0,r=1;r<=e;r++)f=f+o[r-1]<<1,l[r]=f;for(n=0;n<a;n+=2)0!=(i=t[n+1])&&(t[n]=l[i],l[i]++)},UZIP.F.codes2map=function(t,e,r){for(var n=t.length,i=UZIP.F.U.rev15,s=0;s<n;s+=2)if(0!=t[s+1])for(var a=t[s+1],o=s>>1<<4|a,a=e-a,h=t[s]<<a,l=h+(1<<a);h!=l;)r[i[h]>>>15-e]=o,h++},UZIP.F.revCodes=function(t,e){for(var r=UZIP.F.U.rev15,n=15-e,i=0;i<t.length;i+=2){var s=t[i]<<e-t[i+1];t[i]=r[s]>>>n}},UZIP.F._putsE=function(t,e,r){var n=e>>>3;t[n]|=r<<=7&e,t[1+n]|=r>>>8},UZIP.F._putsF=function(t,e,r){var n=e>>>3;t[n]|=r<<=7&e,t[1+n]|=r>>>8,t[2+n]|=r>>>16},UZIP.F._bitsE=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8)>>>(7&e)&(1<<r)-1},UZIP.F._bitsF=function(t,e,r){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)&(1<<r)-1},UZIP.F._get17=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16)>>>(7&e)},UZIP.F._get25=function(t,e){return(t[e>>>3]|t[1+(e>>>3)]<<8|t[2+(e>>>3)]<<16|t[3+(e>>>3)]<<24)>>>(7&e)},UZIP.F.U=function(){var t=Uint16Array,e=Uint32Array;return{next_code:new t(16),bl_count:new t(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new t(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new e(32),flmap:new t(512),fltree:[],fdmap:new t(32),fdtree:[],lmap:new t(32768),ltree:[],ttree:[],dmap:new t(32768),dtree:[],imap:new t(512),itree:[],rev15:new t(32768),lhst:new e(286),dhst:new e(30),ihst:new e(19),lits:new e(15e3),strt:new t(65536),prev:new t(32768)}}(),function(){for(var t=UZIP.F.U,e=0;e<32768;e++){var r=e;t.rev15[e]=((r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8)>>>16|r<<16)>>>17}function n(t,e,r){for(;0!=e--;)t.push(0,r)}for(e=0;e<32;e++)t.ldef[e]=t.of0[e]<<3|t.exb[e],t.ddef[e]=t.df0[e]<<4|t.dxb[e];n(t.fltree,144,8),n(t.fltree,112,9),n(t.fltree,24,7),n(t.fltree,8,8),UZIP.F.makeCodes(t.fltree,9),UZIP.F.codes2map(t.fltree,9,t.flmap),UZIP.F.revCodes(t.fltree,9),n(t.fdtree,32,5),UZIP.F.makeCodes(t.fdtree,5),UZIP.F.codes2map(t.fdtree,5,t.fdmap),UZIP.F.revCodes(t.fdtree,5),n(t.itree,19,0),n(t.ltree,286,0),n(t.dtree,30,0),n(t.ttree,320,0)}();var paper=function(w,D){var I=(w=w||require("./node/self.js")).window,M=w.document,L=new function(){function a(a,o,h,l,f){function t(t,e){var r,n="function"==typeof(e="string"==typeof(e=e||(e=p(o,t))&&(e.get?e:e.value))&&"#"===e[0]?a[e.substring(1)]||e:e),i=e,s=f||n&&!e.base?e&&e.get?t in a:a[t]:null;f&&s||(n&&s&&(e.base=s),n&&!1!==l&&(r=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[r[3].toLowerCase()+r[4]]=r[2]),i&&!n&&i.get&&"function"==typeof i.get&&c.isPlainObject(i)||(i={value:i,writable:!0}),(p(a,t)||{configurable:!0}).configurable&&(i.configurable=!0,i.enumerable=null!=h?h:!r),d(a,t,i))}var u={};if(o){for(var e in o)o.hasOwnProperty(e)&&!s.test(e)&&t(e);for(var e in u){var r=u[e],n=a["set"+r],r=a["get"+r]||n&&a["is"+r];!r||!0!==l&&0!==r.length||t(e,{get:r,set:n})}}return a}function c(){for(var t=0,e=arguments.length;t<e;t++){var r=arguments[t];r&&l(this,r)}return this}function i(t,e){for(var r in this)this.hasOwnProperty(r)&&t.call(e,this[r],r,this)}function r(t,e,r){var n;return t&&((n=p(t,"length"))&&"number"==typeof n.value?h:i).call(t,e,r=r||t),r}var s=/^(statics|enumerable|beans|preserve)$/,t=[],n=t.slice,o=Object.create,p=Object.getOwnPropertyDescriptor,d=Object.defineProperty,h=t.forEach||function(t,e){for(var r=0,n=this.length;r<n;r++)t.call(e,this[r],r,this)},l=Object.assign||function(t){for(var e=1,r=arguments.length;e<r;e++){var n,i=arguments[e];for(n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}return t};return a(c,{inject:function(t){var e,r,n;t&&(e=!0===t.statics?t:t.statics,r=t.beans,n=t.preserve,e!==t&&a(this.prototype,t,t.enumerable,r,n),a(this,e,null,r,n));for(var i=1,s=arguments.length;i<s;i++)this.inject(arguments[i]);return this},extend:function(){for(var t,e,r,n=this,i=0,s=arguments.length;i<s&&(!t||!e);i++)r=arguments[i],t=t||r.initialize,e=e||r.prototype;return e=(t=t||function(){n.apply(this,arguments)}).prototype=e||o(this.prototype),d(e,"constructor",{value:t,writable:!0,configurable:!0}),a(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=n,t}}).inject({enumerable:!1,initialize:c,set:c,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var r=arguments[t];r&&a(this,r,r.enumerable,r.beans,r.preserve)}return this},extend:function(){var t=o(this);return t.inject.apply(t,arguments)},each:function(t,e){return r(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:l,each:r,create:o,define:d,describe:p,clone:function(t){return l(new t.constructor,t)},isPlainObject:function(t){t=null!=t&&t.constructor;return t&&(t===Object||t===c||"Object"===t.name)},pick:function(t,e){return t!==D?t:e},slice:function(t,e,r){return n.call(t,e,r)}}})};"undefined"!=typeof module&&(module.exports=L),L.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+L.each(this,function(t,e){/^_/.test(e)||this.push(e+": "+("number"==(e=typeof t)?b.instance.number(t):"string"==e?"'"+t+"'":t))},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return L.importJSON(t,this)},exportJSON:function(t){return L.exportJSON(this,t)},toJSON:function(){return L.serialize(this)},set:function(t,e){return t&&L.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),r=e.prototype._class;return r&&!L.exports[r]&&(L.exports[r]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!L.equals(t[n],e[n]))return!1}else{var r=Object.keys(t),n=r.length;if(n!==Object.keys(e).length)return!1;for(;n--;){var i=r[n];if(!e.hasOwnProperty(i)||!L.equals(t[i],e[i]))return!1}}return!0}return!1},read:function(t,e,r,n){if(this===L){var i=this.peek(t,e);return t.__index++,i}var s=this.prototype,a=s._readIndex,o=e||a&&t.__index||0,i=t.length;if(n=n||i-o,(e=t[o])instanceof this||r&&r.readNull&&null==e&&n<=1)return a&&(t.__index=o+1),e&&r&&r.clone?e.clone():e;e=L.create(s);return a&&(e.__read=!0),e=e.initialize.apply(e,0<o||o+n<i?L.slice(t,o,o+n):t)||e,a&&(t.__index=o+e.__read,(o=e.__filtered)&&(t.__filtered=o,e.__filtered=D),e.__read=D),e},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,r,n){for(var i,s=[],e=e||0,a=n?e+n:t.length,o=e;o<a;o++)s.push(Array.isArray(i=t[o])?this.read(i,0,r):this.read(t,o,r,1));return s},readNamed:function(t,e,r,n,i){var s,a=this.getNamed(t,e),o=a!==D;return o&&((s=t.__filtered)||((s=t.__filtered=L.create(t[0])).__unfiltered=t[0]),s[e]=D),this.read(o?[a]:t,r,n,i)},getNamed:function(t,e){var r=t[0];if(t._hasObject===D&&(t._hasObject=1===t.length&&L.isPlainObject(r)),t._hasObject)return e?r[e]:t.__filtered||r},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(r,n,i,t){function e(t){var e;i&&t in i||s&&t in s||(e=n[t])!==D&&(r[t]=e)}var s;if(t){for(var a,o={},h=0,l=t.length;h<l;h++)(a=t[h])in n&&(e(a),o[a]=!0);s=o}return Object.keys(n.__unfiltered||n).forEach(e),r},isPlainValue:function(t,e){return L.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,r,n){e=e||{};var i=!n;if(i&&(e.formatter=new b(e.precision),n={length:0,definitions:{},references:{},add:function(t,e){var r="#"+t._id,n=this.references[r];return n||(this.length++,e=e.call(t),(t=t._class)&&e[0]!==t&&e.unshift(t),this.definitions[r]=e,n=this.references[r]=[r]),n}}),t&&t._serialize){var s=t._serialize(e,n),a=t._class;!a||t._compactSerialize||!i&&r||s[0]===a||s.unshift(a)}else if(Array.isArray(t)){s=[];for(var o=0,h=t.length;o<h;o++)s[o]=L.serialize(t[o],e,r,n)}else if(L.isPlainObject(t)){s={};for(var l=Object.keys(t),o=0,h=l.length;o<h;o++){var f=l[o];s[f]=L.serialize(t[f],e,r,n)}}else s="number"==typeof t?e.formatter.number(t,e.precision):t;return i&&0<n.length?[["dictionary",n.definitions],s]:s},deserialize:function(t,e,r,n,i){var s=t,a=!r,o=a&&t&&t.length&&"dictionary"===t[0][0];if(r=r||{},Array.isArray(t)){var h=t[0],l="dictionary"===h;if(1==t.length&&/^#/.test(h))return r.dictionary[h];for(var f,s=[],u=(h=L.exports[h])?1:0,c=t.length;u<c;u++)s.push(L.deserialize(t[u],e,r,l,o));h&&(f=s,e?s=e(h,f,a||i):(s=L.create(h.prototype),h.apply(s,f)))}else if(L.isPlainObject(t))for(var p in s={},n&&(r.dictionary=s),t)s[p]=L.deserialize(t[p],e,r);return o?s[1]:s},exportJSON:function(t,e){t=L.serialize(t,e);return e&&0==e.asString?t:JSON.stringify(t)},importJSON:function(t,s){return L.deserialize("string"==typeof t?JSON.parse(t):t,function(t,e,r){var n=r&&s&&s.constructor===t,i=n?s:L.create(t.prototype);return!(1===e.length&&i instanceof T)||!n&&i instanceof a||(r=e[0],L.isPlainObject(r)&&(r.insert=!1)),(n?i.set:t).apply(i,e),n&&(s=null),i})},splice:function(t,e,r,n){var i=e&&e.length,s=r===D;for((r=s?t.length:r)>t.length&&(r=t.length),o=0;o<i;o++)e[o]._index=r+o;if(s)return t.push.apply(t,e),[];n=[r,n];e&&n.push.apply(n,e);for(var a=t.splice.apply(t,n),o=0,h=a.length;o<h;o++)a[o]._index=D;for(o=r+i,h=t.length;o<h;o++)t[o]._index=o;return a},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var t={on:function(t,e){var r,n;return"string"!=typeof t?L.each(t,function(t,e){this.on(e,t)},this):(r=(n=this._eventTypes)&&n[t],-1===(n=(n=this._callbacks=this._callbacks||{})[t]=n[t]||[]).indexOf(e)&&(n.push(e),r&&r.install&&1===n.length&&r.install.call(this,t))),this},off:function(t,e){if("string"==typeof t){var r,n=this._eventTypes,i=n&&n[t],n=this._callbacks&&this._callbacks[t];return n&&(!e||-1!==(r=n.indexOf(e))&&1===n.length?(i&&i.uninstall&&i.uninstall.call(this,t),delete this._callbacks[t]):-1!==r&&n.splice(r,1)),this}L.each(t,function(t,e){this.off(e,t)},this)},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){if(!(i=this._callbacks&&this._callbacks[t]))return!1;var r=L.slice(arguments,1),n=e&&e.target&&!e.currentTarget,i=i.slice();n&&(e.currentTarget=this);for(var s=0,a=i.length;s<a;s++)if(0==i[s].apply(this,r)){e&&e.stop&&e.stop();break}return n&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e,r=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(r)for(var s in n)0<n[s].length&&((e=(e=r[s])&&e[i])&&e.call(this,s))},statics:{inject:function t(s){var a,e=s._events;return e&&(a={},L.each(e,function(t,e){var r="string"==typeof t,n=r?t:e,e=L.capitalize(n),i=n.substring(2).toLowerCase();a[i]=r?{}:t,n="_"+n,s["get"+e]=function(){return this[n]},s["set"+e]=function(t){var e=this[n];e&&this.off(i,e),t&&this.on(i,t),this[n]=t}}),s._eventTypes=a),t.base.apply(this,arguments)}}},f=L.extend({_class:"PaperScope",initialize:function t(){(paper=this).settings=new L({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e,r,s,n=t.prototype;this.support||(r=tt.getContext(1,1)||{},n.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:y.nativeModes},tt.release(r)),this.agent||(e=w.navigator.userAgent.toLowerCase(),r=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(e)||[])[0],s=n.agent=n.browser={platform:r="darwin"===r?"mac":r},r&&(s[r]=!0),e.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,r,n,i){s.chrome||(r="opera"===e?n:/^(node|trident)$/.test(e)?i:r,s.version=r,s.versionNumber=parseFloat(r),s.name=e="trident"===e?"msie":e,s[e]=!0)}),s.chrome&&delete s.webkit,s.atom&&delete s.chrome)},version:"0.11.5",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){paper.PaperScript.execute(t,this,e),Y.updateFocus()},install:function(e){var t,r=this;for(t in L.each(["project","view","tool"],function(t){L.define(e,t,{configurable:!0,get:function(){return r[t]}})}),this)!/^_/.test(t)&&this[t]&&(e[t]=this[t])},setup:function(t){return(paper=this).project=new S(t),this},createCanvas:function(t,e){return tt.getCanvas(t,e)},activate:function(){paper=this},clear:function(){for(var t=this.projects,e=this.tools,r=t.length-1;0<=r;r--)t[r].remove();for(r=e.length-1;0<=r;r--)e[r].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(r){return r+="Attribute",function(t,e){return t[r](e)||t[r]("data-paper-"+e)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),e=L.extend(t,{initialize:function(t){this._scope=paper,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),(this._scope[this._reference]=this).emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(L.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),!(this._scope=null))},getView:function(){return this._scope.getView()}}),b=L.extend({initialize:function(t){this.precision=L.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,r){return this.number(t)+(r||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});b.instance=new b;var N=new function(){function _(t,e,r){return t<e?e:r<t?r:t}function c(t,e,r){function n(t){var e=134217729*t,e=t-e+e;return[e,t-e]}var i,s,a=e*e-t*r,o=e*e+t*r;return 3*w(a)<o&&(i=n(t),s=n(e),o=n(r),a=(e=e*e)-(r=t*r)+(s[0]*s[0]-e+2*s[0]*s[1]+s[1]*s[1]-(i[0]*o[0]-r+i[0]*o[1]+i[1]*o[0]+i[1]*o[1]))),a}function y(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||1e8<t)?x(2,-Math.round(e(t))):0}var p=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],d=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],w=Math.abs,b=Math.sqrt,x=Math.pow,e=Math.log2||function(t){return Math.log(t)*Math.LOG2E};return{EPSILON:1e-12,MACHINE_EPSILON:112e-18,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(b(2)-1)/3,isZero:function(t){return-1e-12<=t&&t<=1e-12},clamp:_,integrate:function(t,e,r,n){for(var i=p[n-2],s=d[n-2],a=.5*(r-e),o=a+e,h=0,l=n+1>>1,f=1&n?s[h++]*t(o):0;h<l;){var u=a*i[h];f+=s[h++]*(t(o+u)+t(o-u))}return a*f},findRoot:function(t,e,r,n,i,s,a){for(var o=0;o<s;o++){var h=t(r),l=h/e(r),f=r-l;if(w(l)<a){r=f;break}r=0<h?(i=r,f<=n?.5*(n+i):f):(n=r,i<=f?.5*(n+i):f)}return _(r,n,i)},solveQuadratic:function(t,e,r,n,i,s){var a,o=1/0;if(w(t)<1e-12){if(w(e)<1e-12)return w(r)<1e-12?-1:0;a=-r/e}else{var h,l=c(t,e*=-.5,r);l&&w(l)<112e-18&&((h=y(w(t),w(e),w(r)))&&(l=c(t*=h,e*=h,r*=h))),-112e-18<=l&&(f=l<0?0:b(l),o=0===(u=e+(e<0?-f:f))?-(a=r/t):(a=u/t,r/u))}var f=0,t=null==i,r=i-1e-12,u=s+1e-12;return isFinite(a)&&(t||r<a&&a<u)&&(n[f++]=t?a:_(a,i,s)),o!==a&&isFinite(o)&&(t||r<o&&o<u)&&(n[f++]=t?o:_(o,i,s)),f},solveCubic:function(e,r,n,i,t,s,a){function o(t){t=e*(h=t);u=(t+(l=t+r))*h+(f=l*h+n),c=f*h+i}var h,l,f,u,c,p=y(w(e),w(r),w(n),w(i));if(p&&(e*=p,r*=p,n*=p,i*=p),w(e)<1e-12)e=r,l=n,f=i,h=1/0;else if(w(i)<1e-12)l=r,f=n,h=0;else{o(-r/e/3);var d=c/e,g=x(w(d),1/3),v=d<0?-1:1,d=-u/e,d=0<d?1.324717957244746*Math.max(g,b(d)):g,m=h-v*d;if(m!==h){for(;o(m),v*h<v*(m=0===u?h:h-c/u/(1+112e-18)););w(e)*h*h>w(i/h)&&(l=((f=-i/h)-n)/h)}}g=N.solveQuadratic(e,l,f,t,s,a),d=null==s;return isFinite(h)&&(0===g||0<g&&h!==t[0]&&h!==t[1])&&(d||s-1e-12<h&&h<a+1e-12)&&(t[g++]=d?h:_(h,s,a)),g}}},p={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return(e=e||(this._pools[t]={_id:1}))._id++}return this._id++}},U=L.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var r,n=typeof t,i=this.__read,s=0;return"number"==n?(this._set(t,(r="number"==typeof e)?e:t),i&&(s=r?2:1)):"undefined"==n||null===t?(this._set(0,0),i&&(s=null===t?1:0)):(t="string"==n?t.split(/[\s,]+/)||[]:t,s=1,Array.isArray(t)?this._set(+t[0],+(1<t.length?t[1]:t[0])):"x"in t?this._set(t.x||0,t.y||0):"width"in t?this._set(t.width||0,t.height||0):"angle"in t?(this._set(t.length||0,0),this.setAngle(t.angle||0)):(this._set(0,0),s=0)),i&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new U(this.x,this.y)},toString:function(){var t=b.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){t=t.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){var e;this.isZero()?(e=this._angle||0,this._set(Math.cos(e)*t,Math.sin(e)*t)):(t=t/this.getLength(),N.isZero(t)&&this.getAngle(),this._set(this.x*t,this.y*t))},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=U.read(arguments),e=this.getLength()*t.getLength();if(N.isZero(e))return NaN;e=this.dot(t)/e;return Math.acos(e<-1?-1:1<e?1:e)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){var e;this._angle=t,this.isZero()||(e=this.getLength(),this._set(Math.cos(t)*e,Math.sin(t)*e))},getQuadrant:function(){return 0<=this.x?0<=this.y?1:4:0<=this.y?2:3}},{beans:!1,getDirectedAngle:function(){var t=U.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=U.read(arguments),e=t.x-this.x,t=t.y-this.y,t=e*e+t*t;return L.read(arguments)?t:Math.sqrt(t)},normalize:function(t){t===D&&(t=1);var e=this.getLength(),t=0!==e?t/e:0,e=new U(this.x*t,this.y*t);return 0<=t&&(e._angle=this._angle),e},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var r=e?this.subtract(e):this,n=Math.sin(t),t=Math.cos(t),r=new U(r.x*t-r.y*n,r.x*n+r.y*t);return e?r.add(e):r},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=U.read(arguments);return new U(this.x+t.x,this.y+t.y)},subtract:function(){var t=U.read(arguments);return new U(this.x-t.x,this.y-t.y)},multiply:function(){var t=U.read(arguments);return new U(this.x*t.x,this.y*t.y)},divide:function(){var t=U.read(arguments);return new U(this.x/t.x,this.y/t.y)},modulo:function(){var t=U.read(arguments);return new U(this.x%t.x,this.y%t.y)},negate:function(){return new U(-this.x,-this.y)},isInside:function(){return x.read(arguments).contains(this)},isClose:function(){var t=U.read(arguments),e=L.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=U.read(arguments);return U.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=U.read(arguments);return U.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=N.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return 0<=this.x*(1<t&&t<4?-1:1)&&0<=this.y*(2<t?-1:1)},dot:function(){var t=U.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=U.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=U.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new U(t.x*e,t.y*e)},statics:{min:function(){var t=U.read(arguments),e=U.read(arguments);return new U(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=U.read(arguments),e=U.read(arguments);return new U(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new U(Math.random(),Math.random())},isCollinear:function(t,e,r,n){return Math.abs(t*n-e*r)<=1e-8*Math.sqrt((t*t+e*e)*(r*r+n*n))},isOrthogonal:function(t,e,r,n){return Math.abs(t*r+e*n)<=1e-8*Math.sqrt((t*t+e*e)*(r*r+n*n))}}},L.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new U(e(this.x),e(this.y))}},{})),l=U.extend({initialize:function(t,e,r,n){this._x=t,this._y=e,this._owner=r,this._setter=n},_set:function(t,e,r){return this._x=t,this._y=e,r||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),A=L.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var r,n=typeof t,i=this.__read,s=0;return"number"==n?(this._set(t,(r="number"==typeof e)?e:t),i&&(s=r?2:1)):"undefined"==n||null===t?(this._set(0,0),i&&(s=null===t?1:0)):(t="string"==n?t.split(/[\s,]+/)||[]:t,s=1,Array.isArray(t)?this._set(+t[0],+(1<t.length?t[1]:t[0])):"width"in t?this._set(t.width||0,t.height||0):"x"in t?this._set(t.x||0,t.y||0):(this._set(0,0),s=0)),i&&(this.__read=s),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new A(this.width,this.height)},toString:function(){var t=b.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){t=t.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var t=A.read(arguments);return new A(this.width+t.width,this.height+t.height)},subtract:function(){var t=A.read(arguments);return new A(this.width-t.width,this.height-t.height)},multiply:function(){var t=A.read(arguments);return new A(this.width*t.width,this.height*t.height)},divide:function(){var t=A.read(arguments);return new A(this.width/t.width,this.height/t.height)},modulo:function(){var t=A.read(arguments);return new A(this.width%t.width,this.height%t.height)},negate:function(){return new A(-this.width,-this.height)},isZero:function(){var t=N.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new A(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new A(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new A(Math.random(),Math.random())}}},L.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new A(e(this.width),e(this.height))}},{})),r=A.extend({initialize:function(t,e,r,n){this._width=t,this._height=e,this._owner=r,this._setter=n},_set:function(t,e,r){return this._width=t,this._height=e,r||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),x=L.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,r,n){var i,s,a,o,h,l,f=typeof t;return"number"==f?(this._set(t,e,r,n),h=4):"undefined"==f||null===t?(this._set(0,0,0,0),h=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),h=1):t.x!==D||t.width!==D?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),h=1):t.from===D&&t.to===D&&(this._set(0,0,0,0),L.filter(this,t),h=1)),h===D&&(s=U.readNamed(arguments,"from"),i=L.peek(arguments),f=s.x,s=s.y,i&&i.x!==D||L.hasNamed(arguments,"to")?(a=(o=U.readNamed(arguments,"to")).x-f,l=o.y-s,a<0&&(f=o.x,a=-a),l<0&&(s=o.y,l=-l)):(a=(o=A.read(arguments)).width,l=o.height),this._set(f,s,a,l),h=arguments.__index,(l=arguments.__filtered)&&(this.__filtered=l)),this.__read&&(this.__read=h),this},set:"#initialize",_set:function(t,e,r,n){return this.x=t,this.y=e,this.width=r,this.height=n,this},clone:function(){return new x(this.x,this.y,this.width,this.height)},equals:function(t){var e=L.isPlainValue(t)?x.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=b.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){t=t.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(t){return new(t?U:l)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=U.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?A:r)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=A.read(arguments),e=this._sx,r=this._sy,n=t.width,t=t.height;e&&(this.x+=(this.width-n)*e),r&&(this.y+=(this.height-t)*r),this.width=n,this.height=t,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){var e;this._fw||(e=t-this.x,this.width-=.5===this._sx?2*e:e),this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){var e;this._fh||(e=t-this.y,this.height-=.5===this._sy?2*e:e),this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){var e;this._fw||(e=t-this.x,this.width=.5===this._sx?2*e:e),this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){var e;this._fh||(e=t-this.y,this.height=.5===this._sy?2*e:e),this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?U:l)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=U.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==D||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(x.read(arguments)):this._containsPoint(U.read(arguments))},_containsPoint:function(t){var e=t.x,t=t.y;return e>=this.x&&t>=this.y&&e<=this.x+this.width&&t<=this.y+this.height},_containsRectangle:function(t){var e=t.x,r=t.y;return e>=this.x&&r>=this.y&&e+t.width<=this.x+this.width&&r+t.height<=this.y+this.height},intersects:function(){var t=x.read(arguments),e=L.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=x.read(arguments),e=Math.max(this.x,t.x),r=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),t=Math.min(this.y+this.height,t.y+t.height);return new x(e,r,n-e,t-r)},unite:function(){var t=x.read(arguments),e=Math.min(this.x,t.x),r=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x+t.width),t=Math.max(this.y+this.height,t.y+t.height);return new x(e,r,n-e,t-r)},include:function(){var t=U.read(arguments),e=Math.min(this.x,t.x),r=Math.min(this.y,t.y),n=Math.max(this.x+this.width,t.x),t=Math.max(this.y+this.height,t.y);return new x(e,r,n-e,t-r)},expand:function(){var t=A.read(arguments),e=t.width,t=t.height;return new x(this.x-e/2,this.y-t/2,this.width+e,this.height+t)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===D?t:e)-this.height)}},L.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var r=t.join(""),n=/^[RL]/.test(r);4<=e&&(t[1]+=n?"Y":"X");var e=t[n?0:1],n=t[n?1:0],i="get"+e,s="get"+n,a="set"+e,o="set"+n,h="set"+r;this["get"+r]=function(t){return new(t?U:l)(this[i](),this[s](),this,h)},this[h]=function(){var t=U.read(arguments);this[a](t.x),this[o](t.y)}},{beans:!0})),i=x.extend({initialize:function(t,e,r,n,i,s){this._set(t,e,r,n,!0),this._owner=i,this._setter=s},_set:function(t,e,r,n,i){return this._x=t,this._y=e,this._width=r,this._height=n,i||this._owner[this._setter](this),this}},new function(){var r=x.prototype;return L.each(["x","y","width","height"],function(t){var e=L.capitalize(t),r="_"+t;this["get"+e]=function(){return this[r]},this["set"+e]=function(t){this[r]=t,this._dontNotify||this._owner[this._setter](this)}},L.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var e="set"+t;this[e]=function(){this._dontNotify=!0,r[e].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),E=L.extend({_class:"Matrix",initialize:function t(e,r){var n=arguments.length,i=!0;if(6<=n?this._set.apply(this,arguments):1===n||2===n?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,r):Array.isArray(e)?this._set.apply(this,r?e.concat([r]):e):i=!1:n?i=!1:this.reset(),!i)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,r,n,i,s,a){return this._a=t,this._b=e,this._c=r,this._d=n,this._tx=i,this._ty=s,a||this._changed(),this},_serialize:function(t,e){return L.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new E(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=b.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var r=this._owner;return!!r&&(r.transform(null,!0,L.pick(t,!0),e),this.isIdentity())},translate:function(){var t=U.read(arguments),e=t.x,t=t.y;return this._tx+=e*this._a+t*this._c,this._ty+=e*this._b+t*this._d,this._changed(),this},scale:function(){var t=U.read(arguments),e=U.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=U.read(arguments,1),r=e.x,n=e.y,i=Math.cos(t),s=Math.sin(t),a=r-r*i+n*s,o=n-r*s-n*i,h=this._a,e=this._b,r=this._c,n=this._d;return this._a=i*h+s*r,this._b=i*e+s*n,this._c=-s*h+i*r,this._d=-s*e+i*n,this._tx+=a*h+o*r,this._ty+=a*e+o*n,this._changed(),this},shear:function(){var t=U.read(arguments),e=U.read(arguments,0,{readNull:!0});e&&this.translate(e);var r=this._a,n=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*r,this._d+=t.x*n,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=U.read(arguments),e=U.read(arguments,0,{readNull:!0}),r=Math.PI/180,r=new U(Math.tan(t.x*r),Math.tan(t.y*r));return this.shear(r,e)},append:function(t,e){var r,n,i,s,a,o,h,l,f;return t&&(r=this._a,n=this._b,i=this._c,s=this._d,a=t._a,o=t._c,h=t._b,l=t._d,f=t._tx,t=t._ty,this._a=a*r+h*i,this._c=o*r+l*i,this._b=a*n+h*s,this._d=o*n+l*s,this._tx+=f*r+t*i,this._ty+=f*n+t*s,e||this._changed()),this},prepend:function(t,e){var r,n,i,s,a,o,h,l,f,u,c;return t&&(r=this._a,n=this._b,i=this._c,s=this._d,a=this._tx,o=this._ty,h=t._a,l=t._c,f=t._b,u=t._d,c=t._tx,t=t._ty,this._a=h*r+l*n,this._c=h*i+l*s,this._b=f*r+u*n,this._d=f*i+u*s,this._tx=h*a+l*o+c,this._ty=f*a+u*o+t,e||this._changed()),this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,r=this._c,n=this._d,i=this._tx,s=this._ty,a=t*n-e*r,o=null;return a&&!isNaN(a)&&isFinite(i)&&isFinite(s)&&(this._a=n/a,this._b=-e/a,this._c=-r/a,this._d=t/a,this._tx=(r*s-n*i)/a,this._ty=(e*i-t*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new E(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,r){return arguments.length<3?this._transformPoint(U.read(arguments)):this._transformCoordinates(t,e,r)},_transformPoint:function(t,e,r){var n=t.x,t=t.y;return(e=e||new U)._set(n*this._a+t*this._c+this._tx,n*this._b+t*this._d+this._ty,r)},_transformCoordinates:function(t,e,r){for(var n=0,i=2*r;n<i;n+=2){var s=t[n],a=t[n+1];e[n]=s*this._a+a*this._c+this._tx,e[n+1]=s*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,r=t.y,n=e+t.width,t=r+t.height,t=[e,r,n,r,n,t,e,t];return this._transformCoordinates(t,t,4)},_transformBounds:function(t,e,r){for(var n=this._transformCorners(t),i=n.slice(0,2),s=i.slice(),a=2;a<8;a++){var o=n[a],h=1&a;o<i[h]?i[h]=o:o>s[h]&&(s[h]=o)}return(e=e||new x)._set(i[0],i[1],s[0]-i[0],s[1]-i[1],r)},inverseTransform:function(){return this._inverseTransform(U.read(arguments))},_inverseTransform:function(t,e,r){var n=this._a,i=this._b,s=this._c,a=this._d,o=this._tx,h=this._ty,l=n*a-i*s,f=null;return l&&!isNaN(l)&&isFinite(o)&&isFinite(h)&&(h=t.x-this._tx,t=t.y-this._ty,f=(e=e||new U)._set((h*a-t*s)/l,(t*n-h*i)/l,r)),f},decompose:function(){var t,e,r,n,i=this._a,s=this._b,a=this._c,o=this._d,h=i*o-s*a,l=Math.sqrt,f=Math.atan2,u=180/Math.PI;return n=0!==i||0!==s?(t=l(i*i+s*s),e=Math.acos(i/t)*(0<s?1:-1),r=[t,h/t],[f(i*a+s*o,t*t),0]):0!==a||0!==o?(n=l(a*a+o*o),e=Math.asin(a/n)*(0<o?1:-1),r=[h/n,n],[0,f(i*a+s*o,n*n)]):r=[e=0,0],{translation:this.getTranslation(),rotation:e*u,scaling:new U(r),skewing:new U(n[0]*u,n[1]*u)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new U(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},L.each(["a","b","c","d","tx","ty"],function(t){var e=L.capitalize(t),r="_"+t;this["get"+e]=function(){return this[r]},this["set"+e]=function(t){this[r]=t,this._changed()}},{})),O=L.extend({_class:"Line",initialize:function(t,e,r,n,i){(4<=arguments.length?(this._px=t,this._py=e,this._vx=r,this._vy=n,i):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,r))||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new U(this._px,this._py)},getVector:function(){return new U(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return O.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return O.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return O.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return U.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return U.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,r,n,i,s,a,o,h,l){h||(r-=t,n-=e,a-=i,o-=s);h=r*o-n*a;if(!N.isZero(h)){i=t-i,s=e-s,o=(a*s-o*i)/h,h=(r*s-n*i)/h;if(l||-1e-12<o&&o<1+1e-12&&-1e-12<h&&h<1+1e-12)return new U(t+(o=!l?o<=0?0:1<=o?1:o:o)*r,e+o*n)}},getSide:function(t,e,r,n,i,s,a,o){a||(r-=t,n-=e);t=i-t,e=t*n-(s-e)*r;return(e=!o&&N.isZero(e)&&0<=(e=(t*r+t*r)/(r*r+n*n))&&e<=1?0:e)<0?-1:0<e?1:0},getSignedDistance:function(t,e,r,n,i,s,a){return a||(r-=t,n-=e),0===r?0<n?i-t:t-i:0===n?r<0?s-e:e-s:((i-t)*n-(s-e)*r)/Math.sqrt(r*r+n*n)},getDistance:function(t,e,r,n,i,s,a){return Math.abs(O.getSignedDistance(t,e,r,n,i,s,a))}}}),S=e.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){e.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new h(null,null,this),this._view=Y.create(this,t||tt.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return L.serialize(this._children,t,!0,e)},_changed:function(t,e){1&t&&((i=this._view)&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate()));var r,n,i,s=this._changes;s&&e&&((i=(r=this._changesById)[n=e._id])?i.flags|=t:s.push(r[n]={item:e,flags:t}))},clear:function(){for(var t=this._children,e=t.length-1;0<=e;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new a({project:this,insert:!0})},getSymbolDefinitions:function(){var r=[],n={};return this.getItems({class:s,match:function(t){var e=t._definition,t=e._id;return n[t]||(n[t]=!0,r.push(e)),!1}}),r},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t,e=this._selectionItems,r=[];for(t in e){var n=e[t],i=n._selection;1&i&&n.isInserted()?r.push(n):i||this._updateSelection(n)}return r},_updateSelection:function(t){var e=t._id,r=this._selectionItems;t._selection?r[e]!==t&&(this._selectionCount++,r[e]=t):r[e]===t&&(this._selectionCount--,delete r[e])},selectAll:function(){for(var t=this._children,e=0,r=t.length;e<r;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t,e=this._selectionItems;for(t in e)e[t].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(D,t)},insertLayer:function(t,e){return e instanceof a?(e._remove(!1,!0),L.splice(this._children,[e],t,0),e._setProject(this,!0),(t=e._name)&&e.setName(t),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)):e=null,e},_insertItem:function(t,e,r){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(D,new a(T.NO_INSERT),!0)).insertChild(t,e),r&&e.activate&&e.activate(),e},getItems:function(t){return T._getItems(this,t)},getItem:function(t){return T._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return L.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var r=e[t];if(r){for(var n in r){var i,s=r[n];for(i in e){var a=e[i];a&&a!=r&&delete a[s._id]}s.remove()}e[t]=null}}},draw:function(t,e,r){this._updateVersion++,t.save(),e.applyToContext(t);for(var n=this._children,i=new L({offset:new U(0,0),pixelRatio:r,viewMatrix:e.isIdentity()?null:e,matrices:[new E],updateMatrix:!0}),s=0,a=n.length;s<a;s++)n[s].draw(t,i);if(t.restore(),0<this._selectionCount){t.save(),t.strokeWidth=1;var o,h=this._selectionItems,l=this._scope.settings.handleSize,f=this._updateVersion;for(o in h)h[o]._drawSelection(t,e,l,h,f);t.restore()}}}),T=L.extend(t,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=L.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new E,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return L.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var r=t&&L.isPlainObject(t),n=r&&!0===t.internal,i=this._matrix=new E,s=r&&t.project||paper.project,a=paper.settings;return this._id=n?null:p.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&a.applyMatrix,e&&i.translate(e),(i._owner=this)._style=new h(s._currentStyle,this,s),n||r&&0==t.insert||!a.insertItems&&(!r||!0!==t.insert)?this._setProject(s):(r&&t.parent||s)._insertItem(D,this,!0),r&&t!==T.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),r},_serialize:function(n,i){function t(t){for(var e in t){var r=a[e];L.equals(r,"leading"===e?1.2*t.fontSize:t[e])||(s[e]=L.serialize(r,n,"data"!==e,i))}}var s={},a=this;return t(this._serializeFields),this instanceof C||t(this._style._defaults),[this._class,s]},_changed:function(t){var e=this._symbol,r=this._parent||e,n=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=D),r&&40&t&&T._clearBoundsCache(r),2&t&&T._clearBoundsCache(this),n&&n._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e,r=this._getOwner();t&&r&&(e=r._children,((r=r._namedChildren)[t]=r[t]||[]).push(this),t in e||(e[t]=this)),this._name=t||D,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},L.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=L.capitalize(e),r="_"+e,n={locked:128,visible:137};this["get"+t]=function(){return this[r]},this["set"+t]=function(t){t!=this[r]&&(this[r]=t,this._changed(n[e]||129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){t!==this._selection&&(this._selection=t,(t=this._project)&&(t._updateSelection(this),this._changed(129)))},_changeSelection:function(t,e){var r=this._selection;this.setSelection(e?r|t:r&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,r=t.length;e<r;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var r=0,n=t.length;r<n;r++)if(!t[r].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var r=0,n=e.length;r<n;r++)e[r].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&((this._clipMask=t)&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,r=t?U:l;return e||(t=this._pivot,e=this._position=t?this._matrix._transformPoint(t):this.getBounds().getCenter(!0)),new r(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(U.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new l(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=U.read(arguments,0,{clone:!0,readNull:!0}),this._position=D}},L.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(t){return this.getBounds(t,e)}},{beans:!0,getBounds:function(t,e){var r=e||t instanceof E,n=L.set({},r?e:t,this._boundsOptions);n.stroke&&!this.getStrokeScaling()||(n.cacheItem=this);n=this._getCachedBounds(r&&t,n).rect;return arguments.length?n:new i(n.x,n.y,n.width,n.height,this,"setBounds")},setBounds:function(){var t=x.read(arguments),e=this.getBounds(),r=this._matrix,n=new E,i=t.getCenter();n.translate(i),t.width==e.width&&t.height==e.height||(r.isInvertible()||(r.set(r._backup||(new E).translate(r.getTranslation())),e=this.getBounds()),n.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),i=e.getCenter(),n.translate(-i.x,-i.y),this.transform(n)},_getBounds:function(t,e){var r=this._children;return r&&r.length?(T._updateBoundsCache(this,e.cacheItem),T._getBounds(r,t,e)):new x},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,r){t=t&&t._orNullIfIdentity();var n=e.internal&&!r,i=e.cacheItem,s=n?null:this._matrix._orNullIfIdentity(),a=i&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,n),r=this._bounds;if(T._updateBoundsCache(this._parent||this._symbol,i),a&&r&&a in r)return{rect:(o=r[a]).rect.clone(),nonscaling:o.nonscaling};var o,t=this._getBounds(t||s,e),s=t.rect||t,e=this._style,e=t.nonscaling||e.hasStroke()&&!e.getStrokeScaling();return a&&(r||(this._bounds=r={}),o=r[a]={rect:s.clone(),nonscaling:e,internal:n}),{rect:s,nonscaling:e}},_getStrokeMatrix:function(t,e){e=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,t=e?e.getViewMatrix().invert():t;return t&&t._shiftless()},statics:{_updateBoundsCache:function(t,e){var r;t&&e&&(r=e._id,(t=t._boundsCache=t._boundsCache||{ids:{},list:[]}).ids[r]||(t.list.push(e),t.ids[r]=e))},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=D;for(var r=0,n=e.list,i=n.length;r<i;r++){var s=n[r];s!==t&&(s._bounds=s._position=D,s._boundsCache&&T._clearBoundsCache(s))}}},_getBounds:function(t,e,r){var n=l=1/0,i=f=-l,s=!1;r=r||{};for(var a=0,o=t.length;a<o;a++){var h,l,f,u=t[a];u._visible&&!u.isEmpty()&&(u=(h=u._getCachedBounds(e&&e.appended(u._matrix),r,!0)).rect,l=Math.min(u.x,l),n=Math.min(u.y,n),f=Math.max(u.x+u.width,f),i=Math.max(u.y+u.height,i),h.nonscaling&&(s=!0))}return{rect:isFinite(l)?new x(l,n,f-l,i-n):new x,nonscaling:s}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e,r=this.getRotation();null!=r&&null!=t&&(e=this._decomposed,this.rotate(t-r),e&&(e.rotation=t,this._decomposed=e))},getScaling:function(){var t=this._decompose(),t=t&&t.scaling;return new l(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var t,e,r,n,i=this.getScaling(),s=U.read(arguments,0,{clone:!0,readNull:!0});i&&s&&!i.equals(s)&&(t=this.getRotation(),e=this._decomposed,r=new E,n=this.getPosition(!0),r.translate(n),t&&r.rotate(t),r.scale(s.x/i.x,s.y/i.y),t&&r.rotate(-t),r.translate(n.negate()),this.transform(r),e&&(e.scaling=s,this._decomposed=e))},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e,r=this._globalMatrix,n=this._project._updateVersion;return(r=r&&r._updateVersion!==n?null:r)||(r=this._globalMatrix=this._matrix.clone(),(e=this._parent)&&r.prepend(e.getGlobalMatrix(!0)),r._updateVersion=n),t?r:r.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var r=this._children,n=0,i=r&&r.length;n<i;n++)r[n]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var r=this._children,n=0,i=r&&r.length;n<i;n++)r[n]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof a)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return L.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(T.NO_INSERT),r=this._children,n=L.pick(t?t.insert:D,t===D||!0===t),t=L.pick(t?t.deep:D,!0);r&&e.copyAttributes(this),r&&!t||e.copyContent(this),r||e.copyAttributes(this),n&&e.insertAbove(this);var i=this._name,n=this._parent;if(i&&n){for(var r=n._children,s=i,a=1;r[i];)i=s+" "+a++;i!==s&&e.setName(i)}return e},copyContent:function(t){for(var e=t._children,r=0,n=e&&e.length;r<n;r++)this.addChild(e[r].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],n=0,i=r.length;n<i;n++){var s=r[n];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var a=t._data,e=t._name;this._data=a?L.clone(a):null,e&&this.setName(e)},rasterize:function(t,e){var r=this.getStrokeBounds(),n=(t||this.getView().getResolution())/72,i=r.getTopLeft().floor(),s=r.getBottomRight().ceil(),a=new A(s.subtract(i)),o=new u(T.NO_INSERT);return a.isZero()||(r=(t=tt.getCanvas(a.multiply(n))).getContext("2d"),s=(new E).scale(n).translate(i.negate()),r.save(),s.applyToContext(r),this.draw(r,new L({matrices:[s]})),r.restore(),o.setCanvas(t)),o.transform((new E).translate(i.add(a.divide(2))).scale(1/n)),e!==D&&!e||o.insertAbove(this),o},contains:function(){return!!this._contains(this._matrix._inverseTransform(U.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var r=e.length-1;0<=r;r--)if(e[r].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return x.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Z.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof T&&0<this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length}},new function(){function t(){return this._hitTest(U.read(arguments),F.getOptions(arguments))}function e(){var t=U.read(arguments),e=F.getOptions(arguments),r=[];return this._hitTest(t,L.set({all:r},e)),r}function r(t,e,r,n){var i=this._children;if(i)for(var s=i.length-1;0<=s;s--){var a=i[s],a=a!==n&&a._hitTest(t,e,r);if(a&&!e.all)return a}return null}return S.inject({hitTest:t,hitTestAll:e,_hitTest:r}),{hitTest:t,hitTestAll:e,_hitTestChildren:r}},{_hitTest:function(n,e,t){function r(t){return(t=t&&c&&!c(t)?null:t)&&e.all&&e.all.push(t),t}function i(t,e){var r=e?l["get"+e]():p.getPosition();if(n.subtract(r).divide(h).length<=1)return new F(t,p,{name:e?L.hyphenate(e):t,point:r})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var s=this._matrix,a=t?t.appended(s):this.getGlobalMatrix().prepend(this.getView()._matrix),o=Math.max(e.tolerance,1e-12),h=e._tolerancePadding=new A(Z._getStrokePadding(o,s._shiftless().invert()));if(!(n=s._inverseTransform(n))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(n))return null;var l,f,u=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==L.hyphenate(this._class)||e.class&&!(this instanceof e.class)),c=e.match,p=this,d=e.position,t=e.center,o=e.bounds;if(u&&this._parent&&(d||t||o)){if((t||o)&&(l=this.getInternalBounds()),!(f=d&&i("position")||t&&i("center","Center"))&&o)for(var g=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],v=0;v<8&&!f;v++)f=i("bounds",g[v]);f=r(f)}return(f=f||(this._hitTestChildren(n,e,a)||u&&r(this._hitTestSelf(n,e,a,this.getStrokeScaling()?null:a._shiftless().invert()))||null))&&f.point&&(f.point=s.transform(f.point)),f},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new F("fill",this)},matches:function(t,e){var r=typeof t;if("object"==r){for(var n in t)if(t.hasOwnProperty(n)&&!this.matches(n,t[n]))return!1;return!0}if("function"==r)return t(this);if("match"===t)return e(this);r=/^(empty|editable)$/.test(t)?this["is"+L.capitalize(t)]():"type"===t?L.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;r=this._class}if("function"==typeof e)return!!e(r);if(e){if(e.test)return e.test(r);if(L.isPlainObject(e))return function t(e,r){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],n=r[n];if(L.isPlainObject(i)&&L.isPlainObject(n)){if(!t(i,n))return!1}else if(!L.equals(i,n))return!1}return!0}(e,r)}return L.equals(r,e)},getItems:function(t){return T._getItems(this,t,this._matrix)},getItem:function(t){return T._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,r,n,i,s){var a,o,h,l;i||(o=(a="object"==typeof r&&r)&&a.overlapping,h=a&&a.inside,l=(m=o||h)&&x.read([m]),i={items:[],recursive:a&&!1!==a.recursive,inside:!!h,overlapping:!!o,rect:l,path:o&&new Z.Rectangle({rectangle:l,insert:!1})},a&&(r=L.filter({},r,{recursive:!0,inside:!0,overlapping:!0})));var f=e._children,u=i.items;n=(l=i.rect)&&(n||new E);for(var c=0,p=f&&f.length;c<p;c++){var d=f[c],g=n&&n.appended(d._matrix),v=!0;if(l){var m=d.getBounds(g);if(!l.intersects(m))continue;l.contains(m)||i.overlapping&&(m.contains(l)||i.path.intersects(d,g))||(v=!1)}if(v&&d.matches(r)&&(u.push(d),s))break;if(!1!==i.recursive&&t(d,r,g,i,s),s&&0<u.length)break}return u}}},{importJSON:function(t){t=L.importJSON(t,this);return t!==this?this.addChild(t):t},addChild:function(t){return this.insertChild(D,t)},insertChild:function(t,e){e=e?this.insertChildren(t,[e]):null;return e&&e[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var r=this._children;if(r&&e&&0<e.length){for(var n={},i=(e=L.slice(e)).length-1;0<=i;i--){var s=(l=e[i])&&l._id;!l||n[s]?e.splice(i,1):(l._remove(!1,!0),n[s]=!0)}L.splice(r,e,t,0);for(var a=this._project,o=a._changes,i=0,h=e.length;i<h;i++){var l=e[i],f=l._name;l._parent=this,l._setProject(a,!0),f&&l.setName(f),o&&l._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var r=t&&t._getOwner(),n=t!==this&&r?this:null;return n&&(n._remove(!1,!0),r._insertItem(t._index+e,n)),n},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(D,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(D,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){t=e[0].reduce(t);return this._parent?(t.insertAbove(this),this.remove()):t.remove(),t}return this},_removeNamed:function(){var t,e,r,n,i=this._getOwner();i&&(t=i._children,-1!==(i=(n=(e=i._namedChildren)[r=this._name])?n.indexOf(this):-1)&&(t[r]==this&&delete t[r],n.splice(i,1),n.length?t[r]=n[0]:delete e[r]))},_remove:function(t,e){var r=this._getOwner(),n=this._project,i=this._index;return!!r&&(this._name&&this._removeNamed(),null!=i&&(n._activeLayer===this&&(n._activeLayer=this.getNextSibling()||this.getPreviousSibling()),L.splice(r._children,null,i,1)),this._installEvents(!1),t&&n._changes&&this._changed(5),e&&r._changed(11,this),!(this._parent=null))},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){t=t&&t.insertBelow(this);return t&&this.remove(),t},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=L.pick(e,this._children.length);for(var r=L.splice(this._children,null,t,e-t),n=r.length-1;0<=n;n--)r[n]._remove(!0,!1);return 0<r.length&&this._changed(11),r},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){for(var e=[];e.unshift(t),t=t._parent;);return e}for(var r=e(this),n=e(t),i=0,s=Math.min(r.length,n.length);i<s;i++)if(r[i]!=n[i])return r[i]._index<n[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&0<this._children.length},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},L.each(["rotate","scale","shear","skew"],function(r){var n="rotate"===r;this[r]=function(){var t=(n?L:U).read(arguments),e=U.read(arguments,0,{readNull:!0});return this.transform((new E)[r](t,e||this.getPosition(!0)))}},{translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,r,n){var i,s=this._matrix,a=t&&!t.isIdentity(),o=(e||this._applyMatrix)&&(!s.isIdentity()||a||e&&r&&this._children);if(!a&&!o)return this;a&&(!t.isInvertible()&&s.isInvertible()&&(s._backup=s.getValues()),s.prepend(t,!0),e=(i=this._style).getFillColor(!0),i=i.getStrokeColor(!0),e&&e.transform(t),i&&i.transform(t)),(o=o&&this._transformContent(s,r,n))&&((r=this._pivot)&&s._transformPoint(r,r,!0),s.reset(!0),n&&this._canApplyMatrix&&(this._applyMatrix=!0));var h=this._bounds,s=this._position;(a||o)&&this._changed(9);n=a&&h&&t.decompose();if(n&&n.skewing.isZero()&&n.rotation%90==0){for(var l in h){var f=h[l];f.nonscaling?delete h[l]:!o&&f.internal||(f=f.rect,t._transformBounds(f,f))}n=(this._bounds=h)[this._getBoundsCacheKey(this._boundsOptions||{})];n&&(this._position=n.rect.getCenter(!0))}else a&&s&&this._pivot&&(this._position=t._transformPoint(s,s));return this},_transformContent:function(t,e,r){var n=this._children;if(n){for(var i=0,s=n.length;i<s;i++)n[i].transform(t,!0,e,r);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(U.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(U.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(U.read(arguments))},localToParent:function(){return this._matrix._transformPoint(U.read(arguments))},fitBounds:function(t,e){t=x.read(arguments);var r=this.getBounds(),n=r.height/r.width,i=t.height/t.width,i=(e?i<n:n<i)?t.width/r.width:t.height/r.height,i=new x(new U,new A(r.width*i,r.height*i));i.setCenter(t.getCenter()),this.setBounds(i)}}),{_setStyles:function(t,e,r){var n,i,s=this._style,a=this._matrix;s.hasFill()&&(t.fillStyle=s.getFillColor().toCanvasStyle(t,a)),s.hasStroke()&&(t.strokeStyle=s.getStrokeColor().toCanvasStyle(t,a),t.lineWidth=s.getStrokeWidth(),n=s.getStrokeJoin(),i=s.getStrokeCap(),a=s.getMiterLimit(),n&&(t.lineJoin=n),i&&(t.lineCap=i),a&&(t.miterLimit=a),paper.support.nativeDash&&(i=s.getDashArray(),a=s.getDashOffset(),i&&i.length&&("setLineDash"in t?(t.setLineDash(i),t.lineDashOffset=a):(t.mozDash=i,t.mozDashOffset=a)))),s.hasShadow()&&(e=e.pixelRatio||1,e=(r=r._shiftless().prepend((new E).scale(e,e))).transform(new U(s.getShadowBlur(),0)),r=r.transform(this.getShadowOffset()),t.shadowColor=s.getShadowColor().toCanvasStyle(t),t.shadowBlur=e.getLength(),t.shadowOffsetX=r.x,t.shadowOffsetY=r.y)},draw:function(t,e,r){var n=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var i=e.matrices,s=e.viewMatrix,a=this._matrix,o=i[i.length-1].appended(a);if(o.isInvertible()){s=s?s.appended(o):o,i.push(o),e.updateMatrix&&(o._updateVersion=n,this._globalMatrix=o);var h,l,f,u=this._blendMode,c=this._opacity,p="normal"===u,d=y.nativeModes[u],n=p&&1===c||e.dontStart||e.clip||(d||p&&c<1)&&this._canComposite(),o=e.pixelRatio||1;if(!n){var g=this.getStrokeBounds(s);if(!g.width||!g.height)return;f=e.offset,l=e.offset=g.getTopLeft().floor(),h=t,t=tt.getContext(g.getSize().ceil().add(1).multiply(o)),1!==o&&t.scale(o,o)}t.save();p=r?r.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,g=!n&&e.clipItem,r=!p||g;n?(t.globalAlpha=c,d&&(t.globalCompositeOperation=u)):r&&t.translate(-l.x,-l.y),r&&(n?a:s).applyToContext(t),g&&e.clipItem.draw(t,e.extend({clip:!0})),p&&(t.setTransform(o,0,0,o,0,0),(g=e.offset)&&t.translate(-g.x,-g.y)),this._draw(t,e,s,p),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(),n||(y.process(u,t,h,c,l.subtract(f).multiply(o)),tt.release(t),e.offset=f)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof q)return e._isUpdated(t);var r=this._updateVersion===t;return!r&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,r=!0),r},_drawSelection:function(t,e,r,n,i){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,s=4&s;if(((a=!this._drawSelected?!1:a)||o||s)&&this._isUpdated(i)){var h=this.getSelectedColor(!0)||(h=this.getLayer())&&h.getSelectedColor(!0),e=e.appended(this.getGlobalMatrix(!0)),l=r/2;if(t.strokeStyle=t.fillStyle=h?h.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,e,n),s){var s=this.getPosition(!0),f=s.x,u=s.y;t.beginPath(),t.arc(f,u,l,0,2*Math.PI,!0),t.stroke();for(var c=[[0,-1],[1,0],[0,1],[-1,0]],p=l,d=r+1,g=0;g<4;g++){var v=c[g],m=v[0],v=v[1];t.moveTo(f+m*p,u+v*p),t.lineTo(f+m*d,u+v*d),t.stroke()}}if(o){var _=e._transformCorners(this.getInternalBounds());for(t.beginPath(),g=0;g<8;g++)t[g?"lineTo":"moveTo"](_[g],_[++g]);for(t.closePath(),t.stroke(),g=0;g<8;g++)t.fillRect(_[g]-l,_[++g]-l,r,r)}}},_canComposite:function(){return!1}},L.each(["down","drag","up","move"],function(e){this["removeOn"+L.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(t){for(var e in t){var r;t[e]&&(r="mouse"+e,(e=(e=this._project)._removeSets=e._removeSets||{})[r]=e[r]||{},e[r][this._id]=this)}return this}})),C=T.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),1026&e&&(this._clipItem=D)},_getClipItem:function(){if((t=this._clipItem)===D){for(var t=null,e=this._children,r=0,n=e.length;r<n;r++)if(e[r]._clipMask){t=e[r];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,r){var n=this._getClipItem();return n?n._getCachedBounds(e&&e.appended(n._matrix),L.set({},r,{stroke:!1})):t.base.call(this,e,r)},_hitTestChildren:function t(e,r,n){var i=this._getClipItem();return(!i||i.contains(e))&&t.base.call(this,e,r,n,i)},_draw:function(t,e){var r=e.clip,n=!r&&this._getClipItem();e=e.extend({clipItem:n,clip:!1}),r?(t.beginPath(),e.dontStart=e.dontFinish=!0):n&&n.draw(t,e.extend({clip:!0}));for(var i=this._children,s=0,a=i.length;s<a;s++){var o=i[s];o!==n&&o.draw(t,e)}}}),a=C.extend({_class:"Layer",initialize:function(){C.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),P=T.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&L.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new r(t.width,t.height,this,"setSize")},setSize:function(){var t,e,r,n=A.read(arguments);this._size?this._size.equals(n)||(t=this._type,e=n.width,r=n.height,"rectangle"===t?this._radius.set(A.min(this._radius,n.divide(2))):"circle"===t?(e=r=(e+r)/2,this._radius=e/2):"ellipse"===t&&this._radius._set(e/2,r/2),this._size._set(e,r),this._changed(9)):this._size=n.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new r(t.width,t.height,this,"setRadius")},setRadius:function(t){var e,r=this._type;if("circle"===r){if(t===this._radius)return;e=2*t,this._radius=t,this._size._set(e,e)}else if(t=A.read(arguments),this._radius){if(this._radius.equals(t))return;this._radius.set(t),"rectangle"===r?(e=A.max(this._size,t.multiply(2)),this._size.set(e)):"ellipse"===r&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new Z[L.capitalize(this._type)]({center:new U,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),paper.settings.applyMatrix&&e.setApplyMatrix(!0),t!==D&&!t||e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,r,n){var i,s,a,o,h,l=this._style,f=l.hasFill(),u=l.hasStroke(),c=e.dontFinish||e.clip,p=!n;(f||u||c)&&(a=this._type,o=this._radius,h="circle"===a,e.dontStart||t.beginPath(),p&&h?t.arc(0,0,o,0,2*Math.PI,!0):(i=h?o:o.width,s=h?o:o.height,o=(h=this._size).width,h=h.height,p&&"rectangle"===a&&0===i&&0===s?t.rect(-o/2,-h/2,o,h):(h=[-(p=o/2),-(a=h/2)+s,-p,(h=s*(o=.44771525016920644))-a,(o=i*o)-p,-a,-p+i,-a,p-i,-a,p-o,-a,p,h-a,p,-a+s,p,a-s,p,a-h,p-o,a,p-i,a,-p+i,a,o-p,a,-p,a-h,-p,a-s],n&&n.transform(h,h,32),t.moveTo(h[0],h[1]),t.bezierCurveTo(h[2],h[3],h[4],h[5],h[6],h[7]),p!==i&&t.lineTo(h[8],h[9]),t.bezierCurveTo(h[10],h[11],h[12],h[13],h[14],h[15]),a!==s&&t.lineTo(h[16],h[17]),t.bezierCurveTo(h[18],h[19],h[20],h[21],h[22],h[23]),p!==i&&t.lineTo(h[24],h[25]),t.bezierCurveTo(h[26],h[27],h[28],h[29],h[30],h[31]))),t.closePath()),c||!f&&!u||(this._setStyles(t,e,r),f&&(t.fill(l.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),u&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var r=new x(this._size).setCenter(0,0),n=this._style,n=e.stroke&&n.hasStroke()&&n.getStrokeWidth();return t&&(r=t._transformBounds(r)),n?r.expand(Z._getStrokePadding(n,this._getStrokeMatrix(t,e))):r}},new function(){function c(t,e,r){var n=t._radius;if(!n.isZero())for(var i=t._size.divide(2),s=1;s<=4;s++){var a=new U(1<s&&s<4?-1:1,2<s?-1:1),o=a.multiply(i),h=o.subtract(a.multiply(n));if(new x(r?o.add(a.multiply(r)):o,h).contains(e))return{point:h,quadrant:s}}}function p(t,e,r,n){t=t.divide(e);return(!n||t.isInQuadrant(n))&&t.subtract(t.normalize()).multiply(e).divide(r).length<=1}return{_contains:function t(e){if("rectangle"!==this._type)return e.divide(this.size).getLength()<=.5;var r=c(this,e);return r?e.subtract(r.point).divide(this._radius).getLength()<=1:t.base.call(this,e)},_hitTestSelf:function t(e,r,n,i){var s,a,o,h=!1,l=this._style,f=r.stroke&&l.hasStroke(),u=r.fill&&l.hasFill();return(f||u)&&(a=this._type,s=this._radius,o=f?l.getStrokeWidth()/2:0,u=r._tolerancePadding.add(Z._getStrokePadding(o,!l.getStrokeScaling()&&i)),h="rectangle"===a?(l=c(this,e,o=u.multiply(2)))?p(e.subtract(l.point),s,u,l.quadrant):(l=(a=new x(this._size).setCenter(0,0)).expand(o),o=a.expand(o.negate()),l._containsPoint(e)&&!o._containsPoint(e)):p(e,s,u)),h?new F(f?"stroke":"fill",this):t.base.apply(this,arguments)}}},{statics:new function(){function r(t,e,r,n,i){e=new P(L.getNamed(i),e);return e._type=t,e._size=r,e._radius=n,e}return{Circle:function(){var t=U.readNamed(arguments,"center"),e=L.readNamed(arguments,"radius");return r("circle",t,new A(2*e),e,arguments)},Rectangle:function(){var t=x.readNamed(arguments,"rectangle"),e=A.min(A.readNamed(arguments,"radius"),t.getSize(!0).divide(2));return r("rectangle",t.getCenter(!0),t.getSize(!0),e,arguments)},Ellipse:function(){var t=P._readEllipse(arguments),e=t.radius;return r("ellipse",t.center,e.multiply(2),e,arguments)},_readEllipse:function(t){var e,r;return r=L.hasNamed(t,"radius")?(e=U.readNamed(t,"center"),A.readNamed(t,"radius")):(e=(r=x.readNamed(t,"rectangle")).getCenter(!0),r.getSize(!0).divide(2)),{center:e,radius:r}}}}}),u=T.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,e){var r;this._initialize(t,e!==D&&U.read(arguments,1))||((r="string"==typeof t?M.getElementById(t):t)?this.setImage(r):this.setSource(t)),this._size||(this._size=new A,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,r=t._canvas;e?this._setImage(e):r&&((e=tt.getCanvas(t._size)).getContext("2d").drawImage(r,0,0),this._setImage(e)),this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new r(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t,e=A.read(arguments);e.equals(this._size)||(0<e.width&&0<e.height?(t=this.getElement(),this._setImage(tt.getCanvas(e)),t&&this.getContext(!0).drawImage(t,0,0,e.width,e.height)):(this._canvas&&tt.release(this._canvas),this._size=e.clone()))},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new U(0,0).transform(t),r=new U(1,0).transform(t).subtract(e),e=new U(0,1).transform(t).subtract(e);return new A(72/r.getLength(),72/e.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){function r(t){var e=n.getView(),r=t&&t.type||"load";e&&n.responds(r)&&(paper=e._scope,n.emit(r,new g(t)))}var n=this;this._setImage(e),this._loaded?setTimeout(r,0):e&&J.add(e,{load:function(t){n._setImage(e),r(t)},error:r})},_setImage:function(t){this._canvas&&tt.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new A(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var e=tt.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch(t){tt.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new w.Image,r=this._crossOrigin;r&&(e.crossOrigin=r),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=x.read(arguments),e=tt.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=x.read(arguments),e=new u(T.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,t=t&&t.src;if(/^data:/.test(t))return t;t=this.getCanvas();return t?t.toDataURL.apply(t,arguments):null},drawImage:function(t){var e=U.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){if(t?t instanceof G?n=(i=t).getBounds():"object"==typeof t&&("width"in t?n=new x(t):"x"in t&&(n=new x(t.x-.5,t.y-.5,1,1))):n=this.getBounds(),!n)return null;var e=Math.min(n.width,32),r=Math.min(n.height,32),t=u._sampleContext;t?t.clearRect(0,0,33,33):t=u._sampleContext=tt.getContext(new A(32)),t.save();var n=(new E).scale(e/n.width,r/n.height).translate(-n.x,-n.y);n.applyToContext(t),i&&i.draw(t,new L({clip:!0,matrices:[n]})),this._matrix.applyToContext(t);var i=this.getElement(),n=this._size;i&&t.drawImage(i,-n.width/2,-n.height/2),t.restore();for(var s=t.getImageData(.5,.5,Math.ceil(e),Math.ceil(r)).data,a=[0,0,0],o=0,h=0,l=s.length;h<l;h+=4){var f=s[h+3];o+=f,f/=255,a[0]+=s[h]*f,a[1]+=s[h+1]*f,a[2]+=s[h+2]*f}for(h=0;h<3;h++)a[h]/=o;return o?H.read(a):null},getPixel:function(){var t=U.read(arguments),t=this.getContext().getImageData(t.x,t.y,1,1).data;return new H("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var t=U.read(arguments),e=H.read(arguments),r=e._convert("rgb"),n=e._alpha,i=this.getContext(!0),s=i.createImageData(1,1),e=s.data;e[0]=255*r[0],e[1]=255*r[1],e[2]=255*r[2],e[3]=null!=n?255*n:255,i.putImageData(s,t.x,t.y)},createImageData:function(){var t=A.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=x.read(arguments);return t.isEmpty()&&(t=new x(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=U.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var r=new x(this._size).setCenter(0,0);return t?t._transformBounds(r):r},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new F("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),s=T.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==D&&U.read(arguments,1))||this.setDefinition(t instanceof k?t:new k(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var r=this._definition._item;return r._getCachedBounds(r._matrix.prepended(t),e)},_hitTestSelf:function(t,e,r){r=this._definition._item._hitTest(t,e,r);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),k=L.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=p.get(),this.project=paper.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return L.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&T._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),(this._item=t).remove(),t.setSelected(!1),e||t.setPosition(new U),(t._symbol=this)._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new s(this,t)},clone:function(){return new k(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),F=L.extend({_class:"HitResult",initialize:function(t,e,r){this.type=t,this.item=e,r&&this.inject(r)},statics:{getOptions:function(t){t=t&&L.read(t);return L.set({type:null,tolerance:paper.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),R=L.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,r,n,i,s){var a,o,h,l,f=arguments.length;0<f&&(null==t||"object"==typeof t?l=1===f&&t&&"point"in t?(a=t.point,o=t.handleIn,h=t.handleOut,t.selection):(a=t,o=e,h=r,n):(a=[t,e],o=r!==D?[r,n]:null,h=i!==D?[i,s]:null)),new c(a,this,"_point"),new c(o,this,"_handleIn"),new c(h,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(t,e){var r=this._point,n=this._selection,r=n||this.hasHandles()?[r,this._handleIn,this._handleOut]:r;return n&&r.push(n),L.serialize(r,t,!0,e)},_changed:function(t){var e,r,n,i=this._path;i&&(r=i._curves,n=this._index,r&&(t&&t!==this._point&&t!==this._handleIn||!(e=0<n?r[n-1]:i._closed?r[r.length-1]:null)||e._changed(),t&&t!==this._point&&t!==this._handleOut||!(e=r[n])||e._changed()),i._changed(25))},getPoint:function(){return this._point},setPoint:function(){this._point.set(U.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(U.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(U.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,r=this._path;this._selection=t=t||0,r&&t!==e&&(r._updateSelection(this,e,t),r._changed(129))},_changeSelection:function(t,e){var r=this._selection;this.setSelection(e?r|t:r&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==D?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(0<e&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new z(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,r){var n=t||{},i=n.type,s=n.factor,a=this.getPrevious(),o=this.getNext(),h=(a||this)._point,l=this._point,f=(o||this)._point,u=h.getDistance(l),t=l.getDistance(f);if(i&&"catmull-rom"!==i){if("geometric"!==i)throw new Error("Smoothing method '"+i+"' not supported.");a&&o&&(n=h.subtract(f),i=(d=s===D?.4:s)*u/(u+t),e||this.setHandleIn(n.multiply(i)),r||this.setHandleOut(n.multiply(i-d)))}else{var c,p,d=s===D?.5:s,s=Math.pow(u,d),u=s*s,t=Math.pow(t,d),d=t*t;!e&&a&&(c=2*d+3*t*s+u,this.setHandleIn(0!==(p=3*t*(t+s))?new U((d*h._x+c*l._x-u*f._x)/p-l._x,(d*h._y+c*l._y-u*f._y)/p-l._y):new U)),!r&&o&&(c=2*u+3*s*t+d,this.setHandleOut(0!==(p=3*s*(s+t))?new U((u*f._x+c*l._x-d*h._x)/p-l._x,(u*f._y+c*l._y-d*h._y)/p-l._y):new U))}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,r=t.clone();t.set(e),e.set(r)},reversed:function(){return new R(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new R(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,r){var n=1-r,i=r,s=t._point,a=e._point,o=t._handleIn,r=e._handleIn,e=e._handleOut,t=t._handleOut;this._point._set(n*s._x+i*a._x,n*s._y+i*a._y,!0),this._handleIn._set(n*o._x+i*r._x,n*o._y+i*r._y,!0),this._handleOut._set(n*t._x+i*e._x,n*t._y+i*e._y,!0),this._changed()},_transformCoordinates:function(t,e,r){var n=this._point,i=r&&this._handleIn.isZero()?null:this._handleIn,s=r&&this._handleOut.isZero()?null:this._handleOut,a=n._x,o=n._y,h=2;return e[0]=a,e[1]=o,i&&(e[h++]=i._x+a,e[h++]=i._y+o),s&&(e[h++]=s._x+a,e[h++]=s._y+o),t&&(t._transformCoordinates(e,e,h/2),a=e[0],o=e[1],r?(n._x=a,n._y=o,h=2,i&&(i._x=e[h++]-a,i._y=e[h++]-o),s&&(s._x=e[h++]-a,s._y=e[h++]-o)):(i||(e[h++]=a,e[h++]=o),s||(e[h++]=a,e[h++]=o))),e}}),c=U.extend({initialize:function(t,e,r){var n,i,s;t?(n=t[0])!==D?i=t[1]:((n=(s=t).x)===D&&(n=(s=U.read(arguments)).x),i=s.y,s=s.selected):n=i=0,this._x=n,this._y=i,(this._owner=e)[r]=this,s&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=N.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),B=L.extend({_class:"Curve",beans:!0,initialize:function(t,e,r,n,i,s,a,o){var h,l,f,u,c,p,d=arguments.length;3===d?(this._path=t,h=e,l=r):d?1===d?"segment1"in t?(h=new R(t.segment1),l=new R(t.segment2)):"point1"in t?(f=t.point1,c=t.handle1,p=t.handle2,u=t.point2):Array.isArray(t)&&(f=[t[0],t[1]],u=[t[6],t[7]],c=[t[2]-t[0],t[3]-t[1]],p=[t[4]-t[6],t[5]-t[7]]):2===d?(h=new R(t),l=new R(e)):4===d?(f=t,c=e,p=r,u=n):8===d&&(f=[t,e],u=[a,o],c=[r-t,n-e],p=[i-a,s-o]):(h=new R,l=new R),this._segment1=h||new R(f,null,c),this._segment2=l||new R(u,p,null)},_serialize:function(t,e){return L.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=D},clone:function(){return new B(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return B.classify(this.getValues())},remove:function(){var t,e,r=!1;return this._path&&(e=(t=this._segment2)._handleOut,(r=t.remove())&&this._segment1._handleOut.set(e)),r},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(U.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(U.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(U.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(U.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return B.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],r=0;r<8;r+=2)e.push(new U(t[r],t[r+1]));return e}},{getLength:function(){return null==this._length&&(this._length=B.getLength(this.getValues(),0,1)),this._length},getArea:function(){return B.getArea(this.getValues())},getLine:function(){return new O(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new B(B.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return B.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var r,n,i,s,a,o,h=null;return 1e-8<=t&&t<=1-1e-8&&(r=(o=B.subdivide(this.getValues(),t))[0],n=o[1],i=e||this.hasHandles(),s=this._segment1,a=this._segment2,t=this._path,i&&(s._handleOut._set(r[2]-r[0],r[3]-r[1]),a._handleIn._set(n[4]-n[6],n[5]-n[7])),o=r[6],e=r[7],e=new R(new U(o,e),i&&new U(r[4]-o,r[5]-e),i&&new U(n[2]-o,n[3]-e)),h=t?(t.insert(s._index+1,e),this.getNext()):(this._segment2=e,this._changed(),new B(e,a))),h},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===D?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===D?.5:e?t:this.getTimeAt(t))},reversed:function(){return new B(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,r,n){var i=t._point,s=t._handleOut,a=e._handleIn,o=e._point,t=i.x,e=i.y,i=o.x,o=o.y,o=n?[t,e,t,e,i,o,i,o]:[t,e,t+s._x,e+s._y,i+a._x,o+a._y,i,o];return r&&r._transformCoordinates(o,o,4),o},subdivide:function(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],l=t[7],f=1-(e=e===D?.5:e),u=f*r+e*i,c=f*n+e*s,p=f*i+e*a,d=f*s+e*o,t=f*a+e*h,i=f*o+e*l,s=f*u+e*p,a=f*c+e*d,o=f*p+e*t,p=f*d+e*i,d=f*s+e*o,e=f*a+e*p;return[[r,n,u,c,s,a,d,e],[d,e,o,p,t,i,h,l]]},getMonoCurves:function(t,e){var r,n,i=[],s=e?0:1,a=t[0+s],o=t[2+s],e=t[4+s],s=t[6+s];return!(o<=a==e<=o&&e<=o==s<=e||B.isStraight(t))&&(n=N.solveQuadratic(3*(o-e)-a+s,2*(a+e)-4*o,o-a,r=[],1e-8,1-1e-8))?(r.sort(),o=r[0],a=B.subdivide(t,o),i.push(a[0]),1<n&&(o=(r[1]-o)/(1-o),a=B.subdivide(a[1],o),i.push(a[0])),i.push(a[1])):i.push(t),i},solveCubic:function(t,e,r,n,i,s){var a=t[e],o=t[e+2],h=t[e+4],t=t[e+6],e=0;return e=!(a<r&&t<r&&o<r&&h<r||r<a&&r<t&&r<o&&r<h)?N.solveCubic(t-a-(t=3*(o-a))-(o=3*(h-o)-t),o,t,a-r,n,i,s):e},getTimeOf:function(t,e){var r=new U(t[0],t[1]),n=new U(t[6],t[7]);if(null===(e.isClose(r,1e-12)?0:e.isClose(n,1e-12)?1:null))for(var i=[e.x,e.y],s=[],a=0;a<2;a++)for(var o=B.solveCubic(t,a,i[a],s,0,1),h=0;h<o;h++){var l=s[h];if(e.isClose(B.getPoint(t,l),1e-7))return l}return e.isClose(r,1e-7)?0:e.isClose(n,1e-7)?1:null},getNearestTime:function(r,n){function t(t){if(0<=t&&t<=1){var e=n.getDistance(B.getPoint(r,t),!0);return e<h?(h=e,l=t,1):void 0}}if(B.isStraight(r)){var e=r[0],i=r[1],s=r[6]-e,a=r[7]-i,o=s*s+a*a;if(0==o)return 0;o=((n.x-e)*s+(n.y-i)*a)/o;return o<1e-12?0:.999999999999<o?1:B.getTimeOf(r,new U(e+o*s,i+o*a))}for(var h=1/0,l=0,f=0;f<=100;f++)t(f/100);for(var u=.005;1e-8<u;)t(l-u)||t(l+u)||(u/=2);return l},getPart:function(t,e,r){var n,i=r<e;return i&&(n=e,e=r,r=n),0<e&&(t=B.subdivide(t,e)[1]),r<1&&(t=B.subdivide(t,(r-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],t=t[7],i=3*i-2*r-h,s=3*s-2*n-t,r=3*a-2*h-r,n=3*o-2*t-n;return Math.max(i*i,r*r)+Math.max(s*s,n*n)<=16*e*e},getArea:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],t=t[7];return 3*((t-r)*(n+s)-(o-e)*(i+a)+i*(e-s)-n*(r-a)+t*(s+e/3)-o*(a+r/3))/20},getBounds:function(t){for(var e=t.slice(0,2),r=e.slice(),n=[0,0],i=0;i<2;i++)B._addBounds(t[i],t[i+2],t[i+4],t[i+6],i,0,e,r,n);return new x(e[0],e[1],r[0]-e[0],r[1]-e[1])},_addBounds:function(t,e,r,n,i,s,a,o,h){function l(t,e){var r=t-e,e=t+e;r<a[i]&&(a[i]=r),e>o[i]&&(o[i]=e)}var f=a[i]-(s/=2),u=o[i]+s;if(t<f||e<f||r<f||n<f||u<t||u<e||u<r||u<n)if(e<t!=e<n&&r<t!=r<n)l(t,s),l(n,s);else{var c=N.solveQuadratic(3*(e-r)-t+n,2*(t+r)-4*e,e-t,h);l(n,0);for(var p=0;p<c;p++){var d=h[p],g=1-d;1e-8<=d&&d<=1-1e-8&&l(g*g*g*t+3*g*g*d*e+3*g*d*d*r+d*d*d*n,s)}}}}},L.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){return this._bounds||(this._bounds={}),(this._bounds[t]||(this._bounds[t]=Z[t]([this._segment1,this._segment2],!1,this._path))).clone()}},{}),L.each({isStraight:function(t,e,r,n){if(e.isZero()&&r.isZero())return!0;var i=n.subtract(t);if(i.isZero())return!1;if(i.isCollinear(e)&&i.isCollinear(r)){var s=new O(t,n);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(n.add(r))<1e-7){n=i.dot(i),e=i.dot(e)/n,n=i.dot(r)/n;return 0<=e&&e<=1&&n<=0&&-1<=n}}return!1},isLinear:function(t,e,r,n){t=n.subtract(t).divide(3);return e.equals(t)&&r.negate().equals(t)}},function(a,t){this[t]=function(t){var e=this._segment1,r=this._segment2;return a(e._point,e._handleOut,r._handleIn,r._point,t)},this.statics[t]=function(t,e){var r=t[0],n=t[1],i=t[6],s=t[7];return a(new U(r,n),new U(t[2]-r,t[3]-n),new U(t[4]-i,t[5]-s),new U(i,s),e)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&0<=t&&t<=1?new z(this,t):null},getTimeAt:function(t,e){return B.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(U.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return B.getTimeOf(this.getValues(),U.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=U.read(arguments),e=this.getValues(),r=B.getNearestTime(e,t),e=B.getPoint(e,r);return new z(this,r,e,null,t.getDistance(e))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return L.each(t,function(n){this[n+"At"]=function(t,e){var r=this.getValues();return B[n](r,e?t:B.getTimeAt(r,t))},this[n+"AtTime"]=function(t){return B[n](this.getValues(),t)}},{statics:{_evaluateMethods:t}})},new function(){function f(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=9*(n-s)+3*(t[6]-e),h=6*(e+s)-12*n,l=3*(n-e),f=9*(i-a)+3*(t[7]-r),u=6*(r+a)-12*i,c=3*(i-r);return function(t){var e=(o*t+h)*t+l,t=(f*t+u)*t+c;return Math.sqrt(e*e+t*t)}}function u(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function r(t,e,r,n){if(null==e||e<0||1<e)return null;var i=t[0],s=t[1],a=t[2],o=t[3],h=t[4],l=t[5],f=t[6],u=t[7],c=N.isZero;c(a-i)&&c(o-s)&&(a=i,o=s),c(h-f)&&c(l-u)&&(h=f,l=u);var p,d,g=3*(a-i),v=3*(h-a)-g,m=f-i-g-v,_=3*(o-s),t=3*(l-o)-_,c=u-s-_-t;return 0===r?(d=0===e?i:1===e?f:((m*e+v)*e+g)*e+i,p=0===e?s:1===e?u:((c*e+t)*e+_)*e+s):(p=e<1e-8?(d=g,_):1-1e-8<e?(d=3*(f-h),3*(u-l)):(d=(3*m*e+2*v)*e+g,(3*c*e+2*t)*e+_),n&&(0===d&&0===p&&(e<1e-8||1-1e-8<e)&&(d=h-a,p=l-o),(o=Math.sqrt(d*d+p*p))&&(d/=o,p/=o)),3===r&&(h=6*m*e+2*v,l=6*c*e+2*t,d=0!==(t=Math.pow(d*d+p*p,1.5))?(d*l-p*h)/t:0,p=0)),2===r?new U(p,-d):new U(d,p)}return{statics:{classify:function(t){function e(t,e,r){var n=e!==D,i=n&&0<e&&e<1,s=n&&0<r&&r<1;return!n||(i||s)&&("loop"!==t||i&&s)||(i=s=!(t="arch")),{type:t,roots:i||s?i&&s?e<r?[e,r]:[r,e]:[i?e:r]:null}}var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],h=t[6],l=t[7],t=i*(n-l)+s*(h-r)+r*l-n*h,i=3*(a*(s-n)+o*(r-i)+i*n-s*r),s=i-t,o=s-t+(r*(l-o)+n*(a-h)+h*o-l*a),l=Math.sqrt(o*o+s*s+i*i),a=0!==l?1/l:0,l=N.isZero;if(s*=a,i*=a,l(o*=a))return l(s)?e(l(i)?"line":"quadratic"):e("serpentine",i/(3*s));i=3*s*s-4*o*i;if(l(i))return e("cusp",s/(2*o));l=0<i?Math.sqrt(i/3):Math.sqrt(-i),o*=2;return e(0<i?"serpentine":"loop",(s+l)/o,(s-l)/o)},getLength:function(t,e,r,n){if(e===D&&(e=0),r===D&&(r=1),B.isStraight(t)){var i=t;r<1&&(i=B.subdivide(i,r)[0],e/=r);var s=(i=0<e?B.subdivide(i,e)[1]:i)[6]-i[0],i=i[7]-i[1];return Math.sqrt(s*s+i*i)}return N.integrate(n||f(t),e,r,u(e,r))},getTimeAt:function(t,e,r){if(r===D&&(r=e<0?1:0),0===e)return r;var n=Math.abs,i=0<e,s=i?r:0,a=i?1:r,o=f(t),h=B.getLength(t,s,a,o),t=n(e)-h;if(n(t)<1e-12)return i?a:s;if(1e-12<t)return null;var l=0;return N.findRoot(function(t){return l+=N.integrate(o,r,t,u(r,t)),r=t,l-e},o,r+e/h,s,a,32,1e-12)},getPoint:function(t,e){return r(t,e,0,!1)},getTangent:function(t,e){return r(t,e,1,!0)},getWeightedTangent:function(t,e){return r(t,e,1,!1)},getNormal:function(t,e){return r(t,e,2,!0)},getWeightedNormal:function(t,e){return r(t,e,2,!1)},getCurvature:function(t,e){return r(t,e,3,!1).x},getPeaks:function(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=3*n-e-3*s+t[6],s=3*e-6*n+3*s,n=-3*e+3*n,t=3*i-r-3*a+t[7],a=3*r-6*i+3*a,r=-3*r+3*i,i=[];return N.solveCubic(9*(o*o+t*t),9*(o*s+a*t),2*(s*s+a*a)+3*(n*o+r*t),n*s+a*r,i,1e-8,1-1e-8),i.sort()}}}},new function(){function F(t,e,r,n,i,s,a){var o=!a&&r.getPrevious()===i,h=!a&&r!==i&&r.getNext()===i;null!==n&&(o?1e-8:0)<=n&&n<=(h?1-1e-8:1)&&null!==s&&(h?1e-8:0)<=s&&s<=(o?1-1e-8:1)&&(n=new z(r,n,null,a),a=new z(i,s,null,a),(n._intersection=a)._intersection=n,e&&!e(n)||z.insert(t,n,!0))}function A(t,e,r,n,i,s,a,o,h,l,f,u,c){if(4096<=++h||40<=++o)return h;var p,d,g=e[0],v=e[1],m=e[6],_=e[7],y=O.getSignedDistance,w=y(g,v,m,_,e[2],e[3]),b=y(g,v,m,_,e[4],e[5]),x=0<w*b?.75:4/9,S=x*Math.min(0,w,b),C=x*Math.max(0,w,b),P=y(g,v,m,_,t[0],t[1]),k=y(g,v,m,_,t[2],t[3]),x=y(g,v,m,_,t[4],t[5]),v=y(g,v,m,_,t[6],t[7]),m=function(t,e,r,n){var i=[0,t],s=[1/3,e],a=[2/3,r],o=[1,n],e=e-(2*t+n)/3,t=r-(t+2*n)/3;o=e*t<0?[[i,s,o],[i,a,o]]:[2<=(n=e/t)?[i,s,o]:n<=.5?[i,a,o]:[i,s,a,o],[i,o]];return(e||t)<0?o.reverse():o}(P,k,x,v),_=m[0],m=m[1];if(0===w&&0===b&&0===P&&0===k&&0===x&&0===v||null==(p=E(_,m,S,C))||null==(d=E(_.reverse(),m.reverse(),S,C)))return h;var T,I,M,C=l+(f-l)*p,l=l+(f-l)*d;return Math.max(c-u,l-C)<1e-9?(T=(C+l)/2,M=(u+c)/2,F(i,s,a?n:r,a?M:T,a?r:n,a?T:M)):(t=B.getPart(t,p,d),h=.8<d-p?c-u<l-C?(T=(C+l)/2,h=A(e,(I=B.subdivide(t,.5))[0],n,r,i,s,!a,o,h,u,c,C,T),A(e,I[1],n,r,i,s,!a,o,h,u,c,T,l)):(h=A((I=B.subdivide(e,.5))[0],t,n,r,i,s,!a,o,h,u,M=(u+c)/2,C,l),A(I[1],t,n,r,i,s,!a,o,h,M,c,C,l)):1e-9<=c-u?A(e,t,n,r,i,s,!a,o,h,u,c,C,l):A(t,e,r,n,i,s,a,o,h,C,l,u,c)),h}function E(t,e,r,n){return t[0][1]<r?i(t,!0,r):e[0][1]>n?i(e,!1,n):t[0][0]}function i(t,e,r){for(var n=t[0][0],i=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],h=t[s][1];if(e?r<=h:h<=r)return h===r?o:n+(r-i)*(o-n)/(h-i);n=o,i=h}return null}function d(t,e,r,n,i){var s=N.isZero;if(s(n)&&s(i)){s=B.getTimeOf(t,new U(e,r));return null===s?[]:[s]}for(var n=Math.atan2(-i,n),a=Math.sin(n),o=Math.cos(n),h=[],n=[],l=0;l<8;l+=2){var f=t[l]-e,u=t[l+1]-r;h.push(f*o-u*a,f*a+u*o)}return B.solveCubic(h,1,0,n,0,1),n}function _(t,e,r,n,i,s,a){for(var o=e[0],h=e[1],l=d(t,o,h,e[6]-o,e[7]-h),f=0,u=l.length;f<u;f++){var c=l[f],p=B.getPoint(t,c),p=B.getTimeOf(e,p);null!==p&&F(i,s,a?n:r,a?p:c,a?r:n,a?c:p)}}function y(t,e,r,n,i,s){var a=O.intersect(t[0],t[1],t[6],t[7],e[0],e[1],e[6],e[7]);a&&F(i,s,r,B.getTimeOf(t,a),n,B.getTimeOf(e,a))}function w(t,e,r,n,i,s){var a=Math.min,o=Math.max;if(o(t[0],t[2],t[4],t[6])+1e-12>a(e[0],e[2],e[4],e[6])&&a(t[0],t[2],t[4],t[6])-1e-12<o(e[0],e[2],e[4],e[6])&&o(t[1],t[3],t[5],t[7])+1e-12>a(e[1],e[3],e[5],e[7])&&a(t[1],t[3],t[5],t[7])-1e-12<o(e[1],e[3],e[5],e[7])){var h=x(t,e);if(h)for(p=0;p<2;p++){var l=h[p];F(i,s,r,l[0],n,l[1],!0)}else{var f=B.isStraight(t),u=B.isStraight(e),c=f&&u,a=f&&!u,o=i.length;if((c?y:f||u?_:A)(a?e:t,a?t:e,a?n:r,a?r:n,i,s,a,0,0,0,1,0,1),!c||i.length===o)for(var p=0;p<4;p++){var d=p>>1,g=1&p,v=6*d,m=6*g,v=new U(t[v],t[1+v]),m=new U(e[m],e[1+m]);v.isClose(m,1e-12)&&F(i,s,r,d,n,g)}}}return i}function b(t,e,r,n){t=B.classify(t);return"loop"===t.type&&F(r,n,e,(t=t.roots)[0],e,t[1]),r}function x(t,e){function r(t){var e=t[6]-t[0],t=t[7]-t[1];return e*e+t*t}var n=Math.abs,i=O.getDistance,s=B.isStraight(t),a=B.isStraight(e),o=s&&a,h=r(t)<r(e),l=h?e:t,f=h?t:e,u=l[0],c=l[1],p=l[6]-u,h=l[7]-c;if(i(u,c,p,h,f[0],f[1],!0)<1e-7&&i(u,c,p,h,f[6],f[7],!0)<1e-7)!o&&i(u,c,p,h,l[2],l[3],!0)<1e-7&&i(u,c,p,h,l[4],l[5],!0)<1e-7&&i(u,c,p,h,f[2],f[3],!0)<1e-7&&i(u,c,p,h,f[4],f[5],!0)<1e-7&&(s=a=o=!0);else if(o)return null;if(s^a)return null;for(var d=[t,e],g=[],v=0;v<4&&g.length<2;v++){var m=1&v,_=1^m,y=v>>1,_=B.getTimeOf(d[m],new U(d[_][y?6:0],d[_][y?7:1]));if(null!=_&&(y=m?[y,_]:[_,y],(!g.length||1e-8<n(y[0]-g[0][0])&&1e-8<n(y[1]-g[0][1]))&&g.push(y)),2<v&&!g.length)break}return 2!==g.length?g=null:o||(t=B.getPart(t,g[0][0],g[1][0]),(1e-7<n((e=B.getPart(e,g[0][1],g[1][1]))[2]-t[2])||1e-7<n(e[3]-t[3])||1e-7<n(e[4]-t[4])||1e-7<n(e[5]-t[5]))&&(g=null)),g}return{getIntersections:function(t){var e=this.getValues(),r=t&&t!==this&&t.getValues();return r?w(e,r,this,t,[]):b(e,this,[])},statics:{getOverlaps:x,getIntersections:function(t,e,r,n,i,s){for(var a,o=!e,h=t.length,l=(e=o?t:e).length,f=[],u=[],c=0;c<l;c++)f[c]=e[c].getValues(i);for(c=0;c<h;c++){var p=t[c],d=o?f[c]:p.getValues(n),g=p.getPath();g!==a&&(a=g,u.push(m=[])),o&&b(d,p,m,r);for(var v=o?c+1:0;v<l;v++){if(s&&m.length)return m;w(d,f[v],p,e[v],m,r)}}for(var m=[],c=0,_=u.length;c<_;c++)m.push.apply(m,u[c]);return m},getCurveLineIntersections:d}}}),z=L.extend({_class:"CurveLocation",initialize:function(t,e,r,n,i){var s;.99999999<=e&&((s=t.getNext())&&(e=0,t=s)),this._setCurve(t),this._time=e,this._point=r||t.getPointAtTime(e),this._overlap=n,this._distance=i,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t,e,r=this._segment;return r||(t=this.getCurve(),0===(e=this.getTime())?r=t._segment1:1===e?r=t._segment2:null!=e&&(r=t.getPartLength(0,e)<t.getPartLength(e,1)?t._segment1:t._segment2),this._segment=r),r},getCurve:function(){function t(t){t=t&&t.getCurve();if(t&&null!=(r._time=t.getTimeOf(r._point)))return r._setCurve(t),t}var e=this._path,r=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){if(null==(t=this._offset)){var t=0,e=this.getPath(),r=this.getIndex();if(e&&null!=r)for(var n=e.getCurves(),i=0;i<r;i++)t+=n[i].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t,e,r=this._curveOffset;return null==r&&(t=this.getCurve(),e=this.getTime(),this._curveOffset=r=null!=e&&t&&t.getPartLength(0,e)),r},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),t=t&&t.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var t=this.getCurve(),e=t._path,t=t&&t.splitAtTime(this.getTime());return t&&this._setSegment(e.getLastSegment()),t},equals:function(t,e){var r,n,i,s,a=this===t;return!a&&t instanceof z&&(i=this.getCurve(),s=t.getCurve(),(r=i._path)===s._path&&(i=(n=Math.abs)(this.getOffset()-t.getOffset()),s=!e&&this._intersection,t=!e&&t._intersection,a=(i<1e-7||r&&n(r.getLength()-i)<1e-7)&&(!s&&!t||s&&t&&s.equals(t,!0)))),a},toString:function(){var t=[],e=this.getPoint(),r=b.instance;e&&t.push("point: "+e);e=this.getIndex();null!=e&&t.push("index: "+e);e=this.getTime();return null!=e&&t.push("time: "+r.number(e)),null!=this._distance&&t.push("distance: "+r.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),t=t.getCurve();return!(e.isStraight()&&t.isStraight()&&e.getLine().intersect(t.getLine()))}return!1},isCrossing:function(){function t(t,e){var r=t.getValues(),n=B.classify(r).roots||B.getPeaks(r),t=n.length,n=e&&1<t?n[t-1]:0<t?n[0]:.5;u.push(B.getLength(r,e?n:0,e?1:n)/2)}function e(t,e,r){return e<r?e<t&&t<r:e<t||t<r}var r=this._intersection;if(!r)return!1;var n=this.getTime(),i=r.getTime(),s=1e-8<=n&&n<=1-1e-8,a=1e-8<=i&&i<=1-1e-8;if(s&&a)return!this.isTouching();var o=this.getCurve(),h=n<1e-8?o.getPrevious():o,l=r.getCurve(),f=i<1e-8?l.getPrevious():l;if(1-1e-8<n&&(o=o.getNext()),1-1e-8<i&&(l=l.getNext()),!(h&&o&&f&&l))return!1;var u=[];s||(t(h,!0),t(o,!1)),a||(t(f,!0),t(l,!1));var c=this.getPoint(),r=Math.min.apply(Math,u),o=s?o.getTangentAtTime(n):o.getPointAt(r).subtract(c),h=s?o.negate():h.getPointAt(-r).subtract(c),l=a?l.getTangentAtTime(i):l.getPointAt(r).subtract(c),c=a?l.negate():f.getPointAt(-r).subtract(c),h=h.getAngle(),o=o.getAngle(),c=c.getAngle(),l=l.getAngle();return!!(s?e(h,c,l)^e(o,c,l)&&e(h,l,c)^e(o,l,c):e(c,h,o)^e(l,h,o)&&e(c,o,h)^e(l,o,h))},hasOverlap:function(){return!!this._overlap}},L.each(B._evaluateMethods,function(t){var r=t+"At";this[t]=function(){var t=this.getCurve(),e=this.getTime();return null!=e&&t&&t[r](e,!0)}},{preserve:!0}),new function(){function n(i,s,t){function e(t,e){for(var r=t+e;-1<=r&&r<=a;r+=e){var n=i[(r%a+a)%a];if(!s.getPoint().isClose(n.getPoint(),1e-7))break;if(s.equals(n))return n}return null}for(var a=i.length,r=0,n=a-1;r<=n;){var o,h=r+n>>>1,l=i[h];if(t&&(o=s.equals(l)?l:e(h,-1)||e(h,1)))return s._overlap&&(o._overlap=o._intersection._overlap=!0),o;var f=s.getPath(),u=l.getPath();(f!==u?f._id-u._id:s.getIndex()+s.getTime()-(l.getIndex()+l.getTime()))<0?n=h-1:r=1+h}return i.splice(r,0,s),s}return{statics:{insert:n,expand:function(t){for(var e=t.slice(),r=t.length-1;0<=r;r--)n(e,t[r]._intersection,!1);return e}}}}),G=T.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,r,n;return L.isPlainObject(t)?(r=t.segments,e=t.pathData):Array.isArray(t)?r=t:"string"==typeof t&&(e=t),r?n=(n=r[0])&&Array.isArray(n[0]):e&&(n=1<(e.match(/m/gi)||[]).length||/z\s*\S+/i.test(e)),new(n?q:Z)(t)}},_asPathItem:function(){return this},isClockwise:function(){return 0<=this.getArea()},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){t=+n[t];return o&&(t+=h[e]),t}function r(t){return new U(e(t,"x"),e(t+1,"y"))}var n,i,s,a=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,h=new U,l=new U;this.clear();for(var f=0,u=a&&a.length;f<u;f++){var c=a[f],p=c[0],d=p.toLowerCase(),g=(n=c.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&n.length,o=p===d;switch("z"!==i||/[mz]/.test(d)||this.moveTo(h),d){case"m":case"l":for(var v="m"===d,m=0;m<g;m+=2)this[v?"moveTo":"lineTo"](h=r(m)),v&&(l=h,v=!1);s=h;break;case"h":case"v":for(var _="h"===d?"x":"y",h=h.clone(),m=0;m<g;m++)h[_]=e(m,_),this.lineTo(h);s=h;break;case"c":for(m=0;m<g;m+=6)this.cubicCurveTo(r(m),s=r(m+2),h=r(m+4));break;case"s":for(m=0;m<g;m+=4)this.cubicCurveTo(/[cs]/.test(i)?h.multiply(2).subtract(s):h,s=r(m),h=r(m+2)),i=d;break;case"q":for(m=0;m<g;m+=4)this.quadraticCurveTo(s=r(m),h=r(m+2));break;case"t":for(m=0;m<g;m+=2)this.quadraticCurveTo(s=/[qt]/.test(i)?h.multiply(2).subtract(s):h,h=r(m)),i=d;break;case"a":for(m=0;m<g;m+=7)this.arcTo(h=r(m+5),new A(+n[m],+n[m+1]),+n[m+2],+n[m+4],+n[m+3]);break;case"z":this.closePath(1e-12),h=l}i=d}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){t=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return t.onPath||!!("evenodd"===this.getFillRule()?1&t.windingL||1&t.windingR:t.winding)},getIntersections:function(t,e,r,n){var i=this===t||!t,s=this._matrix._orNullIfIdentity(),r=i?s:(r||t._matrix)._orNullIfIdentity();return i||this.getBounds(s).intersects(t.getBounds(r),1e-12)?B.getIntersections(this.getCurves(),!i&&t.getCurves(),e,s,r,n):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=U.read(arguments),e=this.getCurves(),r=1/0,n=null,i=0,s=e.length;i<s;i++){var a=e[i].getNearestLocation(t);a._distance<r&&(r=a._distance,n=a)}return n},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t&&t.getPoint()},interpolate:function(t,e,r){var n=!this._children,i=n?"_segments":"_children",s=t[i],a=e[i],o=this[i];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var e=o.length,h=a.length;if(e<h)for(var l=n?R:Z,f=e;f<h;f++)this.add(new l);else h<e&&this[n?"removeSegments":"removeChildren"](h,e);for(f=0;f<h;f++)o[f].interpolate(s[f],a[f],r);n&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var r=this._children||[this],n=t._children?t._children.slice():[t],t=r.length,i=n.length,s=[],a=0;e=!0;for(var o=t-1;0<=o&&e;o--)for(var h=r[o],e=!1,l=i-1;0<=l&&!e;l--)h.compare(n[l])&&(s[l]||(s[l]=!0,a++),e=!0);e=e&&a===i}return e}}),Z=G.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==D||t.x===D&&t.point===D?null:arguments;e&&0<e.length?this.setSegments(e):(this._curves=D,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&L.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=D,16&e)this._version++;else if(this._curves)for(var r=0,n=this._curves.length;r<n;r++)this._curves[r]._changed()}else 32&e&&(this._bounds=D)},getStyle:function(){var t=this._parent;return(t instanceof q?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e,r=this.isFullySelected(),n=t&&t.length;this._segments.length=0,this._segmentSelection=0,this._curves=D,n&&("boolean"==typeof(e=t[n-1])&&(this.setClosed(e),n--),this._add(R.readList(t,0,{},n))),r&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t)for(var r=this._countCurves(),t=this._curves=new Array(r),n=0;n<r;n++)t[n]=new B(this,e[n],e[n+1]||e[0]);return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){var e;this._closed!=(t=!!t)&&(this._closed=t,this._curves&&(e=this._curves.length=this._countCurves(),t&&(this._curves[e-1]=new B(this,this._segments[e-1],this._segments[0]))),this._changed(25))}},{beans:!0,getPathData:function(r,t){function e(t,e){t._transformCoordinates(r,d),n=d[0],i=d[1],g?(v.push("M"+p.pair(n,i)),g=!1):(o=d[2],h=d[3],o===n&&h===i&&l===s&&f===a?e||(t=n-s,e=i-a,v.push(0==t?"v"+p.number(e):0==e?"h"+p.number(t):"l"+p.pair(t,e))):v.push("c"+p.pair(l-s,f-a)+" "+p.pair(o-s,h-a)+" "+p.pair(n-s,i-a))),s=n,a=i,l=d[4],f=d[5]}var n,i,s,a,o,h,l,f,u=this._segments,c=u.length,p=new b(t),d=new Array(6),g=!0,v=[];if(!c)return"";for(var m=0;m<c;m++)e(u[m]);return this._closed&&0<c&&(e(u[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,r=new Array(6),n=0,i=e.length;n<i;n++)e[n]._transformCoordinates(t,r,!0);return!0},_add:function(t,e){for(var r=this._segments,n=this._curves,i=t.length,s=null==e,e=s?r.length:e,a=0;a<i;a++){var o=t[a];(o=o._path?t[a]=o.clone():o)._path=this,o._index=e+a,o._selection&&this._updateSelection(o,0,o._selection)}if(s)r.push.apply(r,t);else{r.splice.apply(r,[e,0].concat(t));for(var a=e+i,h=r.length;a<h;a++)r[a]._index=a}if(n){var l=this._countCurves(),f=0<e&&e+i-1===l?e-1:e,s=f,u=Math.min(f+i,l);for(t._curves&&(n.splice.apply(n,[f,0].concat(t._curves)),s+=t._curves.length),a=s;a<u;a++)n.splice(a,0,new B(this,null,null));this._adjustCurves(f,u)}return this._changed(25),t},_adjustCurves:function(t,e){for(var r,n=this._segments,i=this._curves,s=t;s<e;s++)(r=i[s])._path=this,r._segment1=n[s],r._segment2=n[s+1]||n[0],r._changed();(r=i[this._closed&&!t?n.length-1:t-1])&&(r._segment2=n[t]||n[0],r._changed()),(r=i[e])&&(r._segment1=n[e],r._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&0<t?t-1:t},add:function(t){return 1<arguments.length&&"number"!=typeof t?this._add(R.readList(arguments)):this._add([R.read(arguments)])[0]},insert:function(t,e){return 2<arguments.length&&"number"!=typeof e?this._add(R.readList(arguments,1),t):this._add([R.read(arguments,1)],t)[0]},addSegment:function(){return this._add([R.read(arguments)])[0]},insertSegment:function(t){return this._add([R.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(R.readList(t))},insertSegments:function(t,e){return this._add(R.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,r){t=t||0,e=L.pick(e,this._segments.length);var n=this._segments,i=this._curves,s=n.length,a=n.splice(t,e-t),o=a.length;if(!o)return a;for(l=0;l<o;l++){var h=a[l];h._selection&&this._updateSelection(h,h._selection,0),h._index=h._path=null}for(var l=t,f=n.length;l<f;l++)n[l]._index=l;if(i){for(t=0<t&&e===s+(this._closed?1:0)?t-1:t,l=(i=i.splice(t,o)).length-1;0<=l;l--)i[l]._path=null;r&&(a._curves=i.slice(1)),this._adjustCurves(t,t)}return this._changed(25),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,r=t.length;e<r;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,r=t.length;e<r;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,r=0,n=t.length;r<n;r++)e+=t[r].getLength();this._length=e}return this._length},getArea:function(){if(null==(r=this._area)){for(var t=this._segments,e=this._closed,r=0,n=0,i=t.length;n<i;n++){var s=n+1===i;r+=B.getArea(B.getValues(t[n],t[s?0:n+1],null,s&&!e))}this._area=r}return r},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&0<t&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,r=e.length,n=t?7:0;this._segmentSelection=n*r;for(var i=0;i<r;i++)e[i]._selection=n},_updateSelection:function(t,e,r){t._selection=r,0<(this._segmentSelection+=r-e)&&this.setSelected(!0)},divideAt:function(t){var e,t=this.getLocationAt(t);return t&&(e=t.getCurve().divideAt(t.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),r=e&&e.index,t=e&&e.time;1-1e-8<t&&(r++,t=0);e=this.getCurves();if(0<=r&&r<e.length){1e-8<=t&&e[r++].divideAtTime(t);var n,r=this.removeSegments(r,this._segments.length,!0);return this._closed?(this.setClosed(!1),n=this):((n=new Z(T.NO_INSERT)).insertAbove(this),n.copyAttributes(this)),n._add(r,0),this.addSegment(r[0]),n}return null},split:function(t,e){e=e===D?t:(t=this.getCurves()[t])&&t.getLocationAtTime(e);return null!=e?this.splitAt(e):null},join:function(t,e){var r=e||0;if(t&&t!==this){var n=t._segments,i=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;i&&i._point.isClose(s._point,r)&&t.reverse();e=t.getFirstSegment();i&&i._point.isClose(e._point,r)?(i.setHandleOut(e._handleOut),this._add(n.slice(1))):((i=this.getFirstSegment())&&i._point.isClose(e._point,r)&&t.reverse(),s=t.getLastSegment(),i&&i._point.isClose(s._point,r)?(i.setHandleIn(s._handleIn),this._add(n.slice(0,n.length-1),0)):this._add(n.slice())),t._closed&&this._add([n[0]]),t.remove()}n=this.getFirstSegment(),t=this.getLastSegment();return n!==t&&n._point.isClose(t._point,r)&&(n.setHandleIn(t._handleIn),t.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),r=t&&t.simplify,n=r?1e-7:0,i=e.length-1;0<=i;i--){var s=e[i];!s.hasHandles()&&(!s.hasLength(n)||r&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var r=this._segments[t],n=r._handleIn;r._handleIn=r._handleOut,r._handleOut=n,r._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new _(this,t||.25,256,!0).parts,r=e.length,n=[],i=0;i<r;i++)n.push(new R(e[i].curve.slice(0,2)));!this._closed&&0<r&&n.push(new R(e[r-1].curve.slice(6))),this.setSegments(n)},simplify:function(t){t=new n(this).fit(t||2.5);return t&&this.setSegments(t),!!t},smooth:function(t){function e(t,e){var r=t&&t.index;if(null!=r){var n=t.path;if(n&&n!==i)throw new Error(t._class+" "+r+" of "+n+" is not part of "+i);e&&t instanceof B&&r++}else r="number"==typeof t?t:e;return Math.min(r<0&&a?r%s:r<0?r+s:r,s-1)}var i=this,r=t||{},t=r.type||"asymmetric",n=this._segments,s=n.length,a=this._closed,o=a&&r.from===D&&r.to===D,h=e(r.from,0),l=e(r.to,s-1);if(l<h&&(a?h-=s:(u=h,h=l,l=u)),/^(?:asymmetric|continuous)$/.test(t)){var f="asymmetric"===t,u=Math.min,t=l-h+1,c=t-1,t=o?u(t,4):1,p=t,t=t,d=[];if(a||(p=u(1,h),t=u(1,s-l-1)),!((c+=p+t)<=1)){for(var g=0,v=h-p;g<=c;g++,v++)d[g]=n[(v<0?v+s:v)%s]._point;for(var m=c-1,_=[I=d[0]._x+2*d[1]._x],y=[M=d[0]._y+2*d[1]._y],w=[T=2],b=[],x=[],g=1;g<c;g++)var S=g<m,C=S?4:f?3:8,P=S?2:f?0:1,k=(S||f?1:2)/T,T=w[g]=(S?4:f?2:7)-k,I=_[g]=C*d[g]._x+P*d[g+1]._x-k*I,M=y[g]=C*d[g]._y+P*d[g+1]._y-k*M;for(b[m]=_[m]/w[m],x[m]=y[m]/w[m],g=c-2;0<=g;g--)b[g]=(_[g]-b[g+1])/w[g],x[g]=(y[g]-x[g+1])/w[g];b[c]=(3*d[c]._x-b[m])/2,x[c]=(3*d[c]._y-x[m])/2;for(var g=p,F=c-t,v=h;g<=F;g++,v++){var A=n[v<0?v+s:v],E=A._point,U=b[g]-E._x,E=x[g]-E._y;(o||g<F)&&A.setHandleOut(U,E),(o||p<g)&&A.setHandleIn(-U,-E)}}}else for(g=h;g<=l;g++)n[g<0?g+s:g].smooth(r,!o&&g===h,!o&&g===l)},toShape:function(t){function e(t,e){var r=l[t],n=r.getNext(),t=l[e],e=t.getNext();return r._handleOut.isZero()&&n._handleIn.isZero()&&t._handleOut.isZero()&&e._handleIn.isZero()&&n._point.subtract(r._point).isCollinear(e._point.subtract(t._point))}function r(t){var e=l[t],r=e.getNext(),n=e._handleOut,i=r._handleIn;if(n.isOrthogonal(i)){t=e._point,e=r._point,r=new O(t,n,!0).intersect(new O(e,i,!0),!0);return r&&N.isZero(n.getLength()/r.subtract(t).getLength()-.5522847498307936)&&N.isZero(i.getLength()/r.subtract(e).getLength()-.5522847498307936)}}function n(t,e){return l[t]._point.getDistance(l[e]._point)}if(!this._closed)return null;var i,s,a,o,h,l=this._segments;if(!this.hasHandles()&&4===l.length&&e(0,2)&&e(1,3)&&(f=l[1],o=f.getPrevious(),h=f.getNext(),o._handleOut.isZero()&&f._handleIn.isZero()&&f._handleOut.isZero()&&h._handleIn.isZero()&&f._point.subtract(o._point).isOrthogonal(h._point.subtract(f._point)))?(i=P.Rectangle,s=new A(n(0,3),n(0,1)),a=l[1]._point.add(l[2]._point).divide(2)):8===l.length&&r(0)&&r(2)&&r(4)&&r(6)&&e(1,5)&&e(3,7)?(i=P.Rectangle,u=(s=new A(n(1,6),n(0,3))).subtract(new A(n(0,7),n(1,2))).divide(2),a=l[3]._point.add(l[4]._point).divide(2)):4===l.length&&r(0)&&r(1)&&r(2)&&r(3)&&(u=N.isZero(n(0,2)-n(1,3))?(i=P.Circle,n(0,2)/2):(i=P.Ellipse,new A(n(2,0)/2,n(3,1)/2)),a=l[1]._point),i){var f=this.getPosition(!0),u=new i({center:f,size:s,radius:u,insert:!1});return u.copyAttributes(this,!0),u._matrix.prepend(this._matrix),u.rotate(a.subtract(f).getAngle()+90),t!==D&&!t||u.insertAbove(this),u}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof q)return t.base.call(this,e);var r=this.getCurves(),n=e.getCurves(),i=r.length,s=n.length;if(!i||!s)return i==s;for(var a,o,h=r[0].getValues(),l=[],f=0,u=0,c=0;c<s;c++)if(g=n[c].getValues(),l.push(g),v=B.getOverlaps(h,g)){a=!c&&0<v[0][0]?s-1:c,o=v[0][1];break}for(var p,d=Math.abs,g=l[a];h&&g;){var v=B.getOverlaps(h,g);if(v&&d(v[0][0]-u)<1e-8){1===(u=v[1][0])&&(h=++f<i?r[f].getValues():null,u=0);var m=v[0][1];if(d(m-o)<1e-8){if(p=p||[a,m],1===(o=v[1][1])&&(g=l[a=++a>=s?0:a]||n[a].getValues(),o=0),!h)return p[0]===a&&p[1]===o;continue}}break}return!1},_hitTestSelf:function(r,i,t,n){function s(t,e){return r.subtract(t).divide(e).length<=1}function a(t,e,r){if(!i.selected||e.isSelected()){var n=t._point;if(s(e=e!==n?e.add(n):e,b))return new F(r,g,{segment:t,point:e})}}function e(t,e){return(e||i.segments)&&a(t,t._point,"segment")||!e&&i.handles&&(a(t,t._handleIn,"handle-in")||a(t,t._handleOut,"handle-out"))}function o(t){c.add(t)}function h(t){var e=y||0<t._index&&t._index<_-1;return"round"===(e?l:f)?s(t._point,b):(c=new Z({internal:!0,closed:!0}),e?t.isSmooth()||Z._addBevelJoin(t,l,P,u,null,n,o,!0):"square"===f&&Z._addSquareCap(t,f,P,null,n,o,!0),!c.isEmpty()&&(c.contains(r)||(t=c.getNearestLocation(r))&&s(t.getPoint(),w)))}var l,f,u,c,p,d,g=this,v=this.getStyle(),m=this._segments,_=m.length,y=this._closed,w=i._tolerancePadding,b=w,x=i.stroke&&v.hasStroke(),S=i.fill&&v.hasFill(),C=i.curves,P=x?v.getStrokeWidth()/2:S&&0<i.tolerance||C?0:null;if(null!==P&&(0<P?(l=v.getStrokeJoin(),f=v.getStrokeCap(),u=v.getMiterLimit(),b=b.add(Z._getStrokePadding(P,n))):l=f="round"),!i.ends||i.segments||y){if(i.segments||i.handles)for(k=0;k<_;k++)if(d=e(m[k]))return d}else if(d=e(m[0],!0)||e(m[_-1],!0))return d;if(null!==P&&((p=this.getNearestLocation(r))&&(0===(v=p.getTime())||1===v&&1<_?h(p.getSegment())||(p=null):s(p.getPoint(),b)||(p=null)),!p&&"miter"===l&&1<_))for(var k=0;k<_;k++){var T=m[k];if(r.getDistance(T._point)<=u*P&&h(T)){p=T.getLocation();break}}return!p&&S&&this._contains(r)||p&&!x&&!C?new F("fill",this):p?new F(x?"stroke":"curve",this,{location:p,point:p.getPoint()}):null}},L.each(B._evaluateMethods,function(e){this[e+"At"]=function(t){t=this.getLocationAt(t);return t&&t[e]()}},{beans:!1,getLocationOf:function(){for(var t=U.read(arguments),e=this.getCurves(),r=0,n=e.length;r<n;r++){var i=e[r].getLocationOf(t);if(i)return i}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),r=0,n=0,i=e.length;n<i;n++){var s=r,a=e[n];if((r+=a.getLength())>t)return a.getLocationAt(t-s)}if(0<e.length&&t<=this.getLength())return new z(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function m(n,t,i){function e(t){var e,r;a=i?(t._transformCoordinates(i,d),s=d[0],d[1]):(e=t._point,s=e._x,e._y),g?(n.moveTo(s,a),g=!1):(f=i?(l=d[2],d[3]):(r=t._handleIn,l=s+r._x,a+r._y),l===s&&f===a&&u===o&&c===h?n.lineTo(s,a):n.bezierCurveTo(u,c,l,f,s,a)),o=s,h=a,c=i?(u=d[4],d[5]):(r=t._handleOut,u=o+r._x,h+r._y)}for(var s,a,o,h,l,f,u,c,r=t._segments,p=r.length,d=new Array(6),g=!0,v=0;v<p;v++)e(r[v]);t._closed&&0<p&&e(r[0])}return{_draw:function(t,e,r,n){function i(t){return f[(t%u+u)%u]}var s=e.dontStart,a=e.dontFinish||e.clip,o=this.getStyle(),h=o.hasFill(),l=o.hasStroke(),f=o.getDashArray(),u=!paper.support.nativeDash&&l&&f&&f.length;if(s||t.beginPath(),(h||l&&!u||a)&&(m(t,this,n),this._closed&&t.closePath()),!a&&(h||l)&&(this._setStyles(t,e,r),h&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),l)){if(u){s||t.beginPath();var c,p=new _(this,.25,32,!1,n),d=p.length,g=-o.getDashOffset(),v=0;for(g%=d;0<g;)g-=i(v--)+i(v--);for(;g<d;)c=g+i(v++),(0<g||0<c)&&p.drawPart(t,Math.max(g,0),Math.max(c,0)),g=c+i(v++)}t.stroke()}},_drawSelected:function(t,e){t.beginPath(),m(t,this,e),t.stroke(),function(r,t,e,n){function i(t){var e=h[t],t=h[t+1];s==e&&a==t||(r.beginPath(),r.moveTo(s,a),r.lineTo(e,t),r.stroke(),r.beginPath(),r.arc(e,t,o,0,2*Math.PI,!0),r.fill())}for(var s,a,o=n/2,h=new Array(6),l=0,f=t.length;l<f;l++){var u=t[l],c=u._selection;u._transformCoordinates(e,h),s=h[0],a=h[1],2&c&&i(2),4&c&&i(4),r.fillRect(s-o,a-o,n,n),1&c||(c=r.fillStyle,r.fillStyle="#ffffff",r.fillRect(s-o+1,a-o+1,n-2,n-2),r.fillStyle=c)}}(t,this._segments,e,paper.settings.handleSize)}}},new function(){function F(t){t=t._segments;if(!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new R(U.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new R(U.read(arguments))])},cubicCurveTo:function(){var t=U.read(arguments),e=U.read(arguments),r=U.read(arguments),n=F(this);n.setHandleOut(t.subtract(n._point)),this._add([new R(r,e.subtract(r))])},quadraticCurveTo:function(){var t=U.read(arguments),e=U.read(arguments),r=F(this)._point;this.cubicCurveTo(t.add(r.subtract(t).multiply(1/3)),t.add(e.subtract(t).multiply(1/3)),e)},curveTo:function(){var t=U.read(arguments),e=U.read(arguments),r=L.pick(L.read(arguments),.5),n=1-r,i=F(this)._point,n=t.subtract(i.multiply(n*n)).subtract(e.multiply(r*r)).divide(2*r*n);if(n.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(n,e)},arcTo:function(){var t,e,r,n=Math.abs,i=Math.sqrt,s=F(this),a=s._point,o=U.read(arguments),h=L.peek(arguments);if("boolean"==typeof(p=L.pick(h,!0)))var l=(g=a.add(o).divide(2)).add(g.subtract(a).rotate(p?-90:90));else if(L.remain(arguments)<=2)l=o,o=U.read(arguments);else{var f=A.read(arguments),u=N.isZero;if(u(f.width)||u(f.height))return this.lineTo(o);var c=L.read(arguments),p=!!L.read(arguments),d=!!L.read(arguments),g=a.add(o).divide(2),v=(I=a.subtract(g).rotate(-c)).x,m=I.y,_=n(f.width),y=n(f.height),w=_*_,b=y*y,h=v*v,u=m*m,f=i(h/w+u/b);if(1<f&&(w=(_*=f)*_,b=(y*=f)*y),(f=n(f=(w*b-w*u-b*h)/(w*u+b*h))<1e-12?0:f)<0)throw new Error("Cannot create an arc with the given arguments");t=new U(_*m/y,-y*v/_).multiply((d===p?-1:1)*i(f)).rotate(c).add(g),c=(e=(r=(new E).translate(t).rotate(c).scale(_,y))._inverseTransform(a)).getDirectedAngle(r._inverseTransform(o)),!p&&0<c?c-=360:p&&c<0&&(c+=360)}if(l){_=new O(a.add(l).divide(2),l.subtract(a).rotate(90),!0),y=new O(l.add(o).divide(2),o.subtract(l).rotate(90),!0),p=new O(a,o),l=p.getSide(l);if(!(t=_.intersect(y,!0))){if(!l)return this.lineTo(o);throw new Error("Cannot create an arc with the given arguments")}c=(e=a.subtract(t)).getDirectedAngle(o.subtract(t)),p=p.getSide(t);0===p?c=l*n(c):l===p&&(c+=c<0?360:-360)}for(var n=n(c),x=360<=n?4:Math.ceil((n-1e-7)/90),S=c/x,c=S*Math.PI/360,C=4/3*Math.sin(c)/(1+Math.cos(c)),P=[],k=0;k<=x;k++){var T,I=o,M=null;k<x&&(M=e.rotate(90).multiply(C),r?(I=r._transformPoint(e),M=r._transformPoint(e.add(M)).subtract(I)):I=t.add(e)),k?(T=e.rotate(-90).multiply(C),r&&(T=r._transformPoint(e.add(T)).subtract(I)),P.push(new R(I,T,M))):s.setHandleOut(M),e=e.rotate(S)}this._add(P)},lineBy:function(){var t=U.read(arguments),e=F(this)._point;this.lineTo(e.add(t))},curveBy:function(){var t=U.read(arguments),e=U.read(arguments),r=L.read(arguments),n=F(this)._point;this.curveTo(n.add(t),n.add(e),r)},cubicCurveBy:function(){var t=U.read(arguments),e=U.read(arguments),r=U.read(arguments),n=F(this)._point;this.cubicCurveTo(n.add(t),n.add(e),n.add(r))},quadraticCurveBy:function(){var t=U.read(arguments),e=U.read(arguments),r=F(this)._point;this.quadraticCurveTo(r.add(t),r.add(e))},arcBy:function(){var t=F(this)._point,e=t.add(U.read(arguments)),r=L.pick(L.peek(arguments),!0);"boolean"==typeof r?this.arcTo(e,r):this.arcTo(e,t.add(U.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var r=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return Z[r](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,r,n,i,s){function a(t){t._transformCoordinates(n,h);for(var e=0;e<2;e++)B._addBounds(l[e],l[e+4],h[e+2],h[e],e,s?s[e]:0,f,u,c);t=l;l=h,h=t}var o=t[0];if(!o)return new x;for(var h=new Array(6),l=o._transformCoordinates(n,new Array(6)),f=l.slice(0,2),u=f.slice(),c=new Array(2),p=1,d=t.length;p<d;p++)a(t[p]);return e&&a(o),new x(f[0],f[1],u[0]-f[0],u[1]-f[1])},getStrokeBounds:function(t,e,r,n,i){function s(t){d=d.include(t)}function a(t){d=d.unite(_.setCenter(t._point.transform(n)))}function o(t,e){"round"===e||t.isSmooth()?a(t):Z._addBevelJoin(t,e,g,m,n,c,s)}function h(t,e){"round"===e?a(t):Z._addSquareCap(t,e,g,n,c,s)}var l=r.getStyle(),f=l.hasStroke(),u=l.getStrokeWidth(),c=f&&r._getStrokeMatrix(n,i),p=f&&Z._getStrokePadding(u,c),d=Z.getBounds(t,e,r,n,i,p);if(!f)return d;for(var g=u/2,v=l.getStrokeJoin(),u=l.getStrokeCap(),m=l.getMiterLimit(),_=new x(new A(p)),y=t.length-(e?0:1),w=1;w<y;w++)o(t[w],v);return e?o(t[0],v):0<y&&(h(t[0],u),h(t[t.length-1],u)),d},_getStrokePadding:function(t,e){if(!e)return[t,t];var r=new U(t,0).transform(e),n=new U(0,t).transform(e),i=r.getAngleInRadians(),s=r.getLength(),t=n.getLength(),e=Math.sin(i),r=Math.cos(i),n=Math.tan(i),i=Math.atan2(t*n,s),n=Math.atan2(t,n*s);return[Math.abs(s*Math.cos(i)*r+t*Math.sin(i)*e),Math.abs(t*Math.sin(n)*r+s*Math.cos(n)*e)]},_addBevelJoin:function(t,e,r,n,i,s,a,o){var h,l=t.getCurve(),t=l.getPrevious(),i=l.getPoint1().transform(i),t=t.getNormalAtTime(1).multiply(r).transform(s),s=l.getNormalAtTime(0).multiply(r).transform(s);t.getDirectedAngle(s)<0&&(t=t.negate(),s=s.negate()),o&&a(i),a(i.add(t)),"miter"===e&&(h=new O(i.add(t),new U(-t.y,t.x),!0).intersect(new O(i.add(s),new U(-s.y,s.x),!0),!0))&&i.getDistance(h)<=n*r&&a(h),a(i.add(s))},_addSquareCap:function(t,e,r,n,i,s,a){n=t._point.transform(n),t=t.getLocation(),i=t.getNormal().multiply(0===t.getTime()?r:-r).transform(i);"square"===e&&(a&&(s(n.subtract(i)),s(n.add(i))),n=n.add(i.rotate(-90))),s(n.add(i)),s(n.subtract(i))},getHandleBounds:function(t,e,r,n,i){var s,a,o,h=r.getStyle();i.stroke&&h.hasStroke()&&(o=r._getStrokeMatrix(n,i),i=r=h.getStrokeWidth()/2,"miter"===h.getStrokeJoin()&&(i=r*h.getMiterLimit()),"square"===h.getStrokeCap()&&(i=Math.max(i,r*Math.SQRT2)),s=Z._getStrokePadding(r,o),a=Z._getStrokePadding(i,o));for(var l=new Array(6),f=1/0,u=-f,c=f,p=u,d=0,g=t.length;d<g;d++){t[d]._transformCoordinates(n,l);for(var v=0;v<6;v+=2){var m=v?s:a,_=m?m[0]:0,y=m?m[1]:0,w=l[v],b=l[v+1],m=w-_,w=w+_,_=b-y,y=b+y;m<f&&(f=m),u<w&&(u=w),_<c&&(c=_),p<y&&(p=y)}}return new x(f,c,u-f,p-c)}}});Z.inject({statics:new function(){function l(t,e,r){var n=L.getNamed(r),r=new Z(n&&0==n.insert&&T.NO_INSERT);return r._add(t),r._closed=e,r.set(n,{insert:!0})}function r(t,e,r){for(var n=new Array(4),i=0;i<4;i++){var s=a[i];n[i]=new R(s._point.multiply(e).add(t),s._handleIn.multiply(e),s._handleOut.multiply(e))}return l(n,!0,r)}var h=.5522847498307936,a=[new R([-1,0],[0,h],[0,-h]),new R([0,-1],[-h,0],[h,0]),new R([1,0],[0,-h],[0,h]),new R([0,1],[h,0],[-h,0])];return{Line:function(){return l([new R(U.readNamed(arguments,"from")),new R(U.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=U.readNamed(arguments,"center"),e=L.readNamed(arguments,"radius");return r(t,new A(e),arguments)},Rectangle:function(){var t,e,r=x.readNamed(arguments,"rectangle"),n=A.readNamed(arguments,"radius",0,{readNull:!0}),i=r.getBottomLeft(!0),s=r.getTopLeft(!0),a=r.getTopRight(!0),o=r.getBottomRight(!0);return l(!n||n.isZero()?[new R(i),new R(s),new R(a),new R(o)]:(t=(n=A.min(n,r.getSize(!0).divide(2))).width,e=n.height,r=t*h,n=e*h,[new R(i.add(t,0),null,[-r,0]),new R(i.subtract(0,e),[0,n]),new R(s.add(0,e),null,[0,-n]),new R(s.add(t,0),[-r,0],null),new R(a.subtract(t,0),null,[r,0]),new R(a.add(0,e),[0,-n],null),new R(o.subtract(0,e),null,[0,n]),new R(o.subtract(t,0),[r,0])]),!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=P._readEllipse(arguments);return r(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=U.readNamed(arguments,"from"),e=U.readNamed(arguments,"through"),r=U.readNamed(arguments,"to"),n=L.getNamed(arguments),i=new Z(n&&0==n.insert&&T.NO_INSERT);return i.moveTo(t),i.arcTo(e,r),i.set(n)},RegularPolygon:function(){for(var t=U.readNamed(arguments,"center"),e=L.readNamed(arguments,"sides"),r=L.readNamed(arguments,"radius"),n=360/e,i=e%3==0,s=new U(0,i?-r:r),a=i?-1:.5,o=new Array(e),h=0;h<e;h++)o[h]=new R(t.add(s.rotate((h+a)*n)));return l(o,!0,arguments)},Star:function(){for(var t=U.readNamed(arguments,"center"),e=2*L.readNamed(arguments,"points"),r=L.readNamed(arguments,"radius1"),n=L.readNamed(arguments,"radius2"),i=360/e,s=new U(0,-1),a=new Array(e),o=0;o<e;o++)a[o]=new R(t.add(s.rotate(i*o).multiply(o%2?n:r)));return l(a,!0,arguments)}}}});var q=G.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,r){var n=r,i=n[0];i&&"number"==typeof i[0]&&(n=[n]);for(var s=r.length-1;0<=s;s--){var a=n[s];n!==r||a instanceof Z||(n=L.slice(n)),Array.isArray(a)?n[s]=new Z({segments:a,insert:!1}):a instanceof q&&(n.splice.apply(n,[s,1].concat(a.removeChildren())),a.remove())}return t.base.call(this,e,n)},reduce:function t(e){for(var r=this._children,n=r.length-1;0<=n;n--)(i=r[n].reduce(e)).isEmpty()&&i.remove();if(r.length)return t.base.call(this);var i=new Z(T.NO_INSERT);return i.copyAttributes(this),i.insertAbove(this),this.remove(),i},isClosed:function(){for(var t=this._children,e=0,r=t.length;e<r;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,r=0,n=e.length;r<n;r++)e[r].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],r=0,n=t.length;r<n;r++)e.push.apply(e,t[r].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,r=0,n=t.length;r<n;r++)e+=t[r].getArea();return e},getLength:function(){for(var t=this._children,e=0,r=0,n=t.length;r<n;r++)e+=t[r].getLength();return e},getPathData:function(t,e){for(var r=this._children,n=[],i=0,s=r.length;i<s;i++){var a=r[i],o=a._matrix;n.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return n.join("")},_hitTestChildren:function t(e,r,n){return t.base.call(this,e,r.class===Z||"path"===r.type?r:L.set({},r,{fill:!1}),n)},_draw:function(t,e,r,n){var i=this._children;if(i.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,a=i.length;s<a;s++)i[s].draw(t,e,n);e.clip||(this._setStyles(t,e,r),(r=this._style).hasFill()&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),r.hasStroke()&&t.stroke())}},_drawSelected:function(t,e,r){for(var n=this._children,i=0,s=n.length;i<s;i++){var a=n[i],o=a._matrix;r[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function r(t,e){t=t._children;if(e&&!t.length)throw new Error("Use a moveTo() command first");return t[t.length-1]}return L.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var t=r(this,!0);t[e].apply(t,arguments)}},{moveTo:function(){var t=r(this),e=t&&t.isEmpty()?t:new Z(T.NO_INSERT);e!==t&&this.addChild(e),e.moveTo.apply(e,arguments)},moveBy:function(){var t=r(this,!0),e=t&&t.getLastSegment(),t=U.read(arguments);this.moveTo(e?t.add(e._point):t)},closePath:function(t){r(this,!0).closePath(t)}})},L.each(["reverse","flatten","simplify","smooth"],function(s){this[s]=function(t){for(var e,r=this._children,n=0,i=r.length;n<i;n++)e=r[n][s](t)||e;return e}},{}));G.inject(new function(){function m(t,e){t=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?t.resolveCrossings().reorient("nonzero"===t.getFillRule(),!0):t}function _(t,e,r,n,i){var s=new q(T.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),i&&0==i.insert||s.insertAbove(n&&r.isSibling(n)&&r.getIndex()<n.getIndex()?n:r),s.copyAttributes(r,!0),s}function r(t,e,r,n){function i(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];u.push.apply(u,n._segments),c.push.apply(c,n.getCurves()),n._overlapsOnly=!0}}if(n&&(0==n.trace||n.stroke)&&/^(subtract|intersect)$/.test(r))return y(t,e,r);var s=m(t,!0),a=e&&t!==e&&m(e,!0),o=k[r];o[r]=!0,a&&(o.subtract||o.exclude)^a.isClockwise()^s.isClockwise()&&a.reverse();var h,l=b(z.expand(s.getCrossings(a))),f=s._children||[s],r=a&&(a._children||[a]),u=[],c=[];if(l.length){i(f),r&&i(r);for(var p=0,d=l.length;p<d;p++)C(l[p]._segment,s,a,c,o);for(p=0,d=u.length;p<d;p++){var g=u[p],v=g._intersection;g._winding||C(g,s,a,c,o),v&&v._overlap||(g._path._overlapsOnly=!1)}h=P(u,o)}else h=w(r?f.concat(r):f.slice(),function(t){return!!o[t]});return _(h,!0,t,e,n)}function y(t,e,r){function n(t){return!l[t._id]&&(h||s.contains(t.getPointAt(t.getLength()/2))^o)&&(f.unshift(t),l[t._id]=!0)}for(var i=m(t),s=m(e),a=i.getCrossings(s),o="subtract"===r,h="divide"===r,l={},f=[],u=a.length-1;0<=u;u--){var c=a[u].split();c&&(n(c)&&c.getFirstSegment().setHandleIn(0,0),i.getLastSegment().setHandleOut(0,0))}return n(i),_(f,!1,t,e)}function x(t,e){for(var r=t;r;){if(r===e)return;r=r._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;(t._next=e)._previous=t}}function S(t){for(var e=t.length-1;0<=e;e--)t[e].clearHandles()}function w(t,e,r){var n=t&&t.length;if(n){var i=L.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),s=t.slice().sort(function(t,e){return O(e.getArea())-O(t.getArea())}),a=s[0];null==r&&(r=a.isClockwise());for(var o=0;o<n;o++){for(var h,l=s[o],f=i[l._id],u=l.getInteriorPoint(),c=0,p=o-1;0<=p;p--){var d=s[p];if(d.contains(u)){var g=i[d._id],c=g.winding;f.winding+=c,f.container=g.exclude?g.container:d;break}}e(f.winding)===e(c)?(f.exclude=!0,t[f.index]=null):(h=f.container,l.setClockwise(h?!h.isClockwise():r))}}return t}function b(t,e,r){function n(t){return t._path._id+"."+t._segment1._index}for(var i,s,a,o=e&&[],h=!1,l=r||[],f=r&&{},u=(r&&r.length)-1;0<=u;u--)(v=r[u])._path&&(f[n(v)]=!0);for(u=t.length-1;0<=u;u--){var c=t[u],p=c._time,d=p,g=e&&!e(c),v=c._curve;if(v&&(v!==s?(h=!v.hasHandles()||f&&f[n(v)],i=[],a=null,s=v):1e-8<=a&&(p/=a)),g)i&&i.push(c);else{if(e&&o.unshift(c),a=d,p<1e-8)m=v._segment1;else if(1-1e-8<p)m=v._segment2;else{d=v.divideAtTime(p,!0);h&&l.push(v,d);for(var m=d._segment1,_=i.length-1;0<=_;_--){var y=i[_];y._time=(y._time-p)/(1-p)}}c._setSegment(m);var w=m._intersection,c=c._intersection;if(w){x(w,c);for(var b=w;b;)x(b._intersection,w),b=b._next}else m._intersection=c}}return r||S(l),o||t}function A(l,f,u,c,p){function t(t){var e=t[g+0],r=t[g+2],n=t[g+4],i=t[g+6];if(m<=U(e,r,n,i)&&m>=E(e,r,n,i))for(var s,e=t[d+0],r=t[d+2],n=t[d+4],i=t[d+6],a=y>U(e,r,n,i)||w<E(e,r,n,i)?[t]:B.getMonoCurves(t,u),o=0,h=a.length;o<h;o++)if(s=function(t){var e=t[g+0],r=t[g+6];if(!(m<E(e,r)||m>U(e,r))){var n=t[d+0],i=t[d+2],s=t[d+4],a=t[d+6];if(e!==r){var o=m===e?0:m!==r&&!(y>U(n,i,s,a)||w<E(n,i,s,a))&&0<B.solveCubic(t,g,m,P,0,1)?P[0]:1,h=0===o?n:1===o?a:B.getPoint(t,o)[u?"y":"x"],i=r<e?1:-1,s=I[g]>I[g+6]?1:-1,r=I[d+6];return m!==e?(h<y?b+=i:w<h?x+=i:S=!0,v-_<h&&h<v+_&&(C/=2)):(i!=s?n<y?b+=i:w<n&&(x+=i):n!=r&&(r<w&&w<h?(x+=i,S=!0):y<r&&h<y&&(b+=i,S=!0)),C=0),I=t,!p&&y<h&&h<w&&0===B.getTangent(t,o)[u?"x":"y"]&&A(l,f,!u,c,!0)}(n<w&&y<a||a<w&&y<n)&&(S=!0)}}(a[o]))return s}for(var e,d=u?1:0,g=1^d,r=[l.x,l.y],v=r[d],m=r[g],_=1e-6,y=v-1e-9,w=v+1e-9,n=0,i=0,b=0,x=0,S=!1,s=!1,C=1,P=[],a=0,o=f.length;a<o;a++){var h=f[a],k=h._path,T=h.getValues();if(!(a&&f[a-1]._path===k||(I=null,k._closed||(e=B.getValues(k.getLastCurve().getSegment2(),h.getSegment1(),null,!c))[g]!==e[g+6]&&(I=e),I)))for(var I=T,M=k.getLastCurve();M&&M!==h;){var F=M.getValues();if(F[g]!==F[g+6]){I=F;break}M=M.getPrevious()}if(T=t(T))return T;if(a+1===o||f[a+1]._path!==k){if(e&&(T=t(e)))return T;n+=b=S&&!b&&!x?x=k.isClockwise(c)^u?1:-1:b,i+=x,b=x=0,S&&(S=!(s=!0)),e=null}}return n=O(n),i=O(i),{winding:U(n,i),windingL:n,windingR:i,quality:C,onPath:s}}function C(t,e,r,n,i){for(var s=[],a=t,o=0;u=(v=t.getCurve()).getLength(),s.push({segment:t,curve:v,length:u}),o+=u,(t=t.getNext())&&!t._intersection&&t!==a;);for(var h=[.5,.25,.75],l={winding:0,quality:-1},f=0;f<h.length&&l.quality<.5;f++)for(var u=o*h[f],c=0,p=s.length;c<p;c++){var d=s[c],g=d.length;if(u<=g){var v=d.curve,m=v._path,_=m._parent,d=_ instanceof q?_:m,_=N.clamp(v.getTimeAt(u),1e-8,1-1e-8),m=v.getPointAtTime(_),_=O(v.getTangentAtTime(_).y)<Math.SQRT1_2,_=i.subtract&&r&&(d===e&&r._getWinding(m,_,!0).winding||d===r&&!e._getWinding(m,_,!0).winding)?{winding:0,quality:1}:A(m,n,_,!0);_.quality>l.quality&&(l=_);break}u-=g}for(c=s.length-1;0<=c;c--)s[c].segment._winding=l}function P(t,e){function h(t){return!(!t||t._visited||e&&(!e[(t=t._winding||{}).winding]||e.unite&&2===t.winding&&t.windingL&&t.windingR))}function l(t){if(t)for(var e=0,r=f.length;e<r;e++)if(t===f[e])return!0;return!1}function r(t){for(var e=t._segments,r=0,n=e.length;r<n;r++)e[r]._visited=!0}var f,n=[];t.sort(function(t,e){var r=t._intersection,n=e._intersection,i=!(!r||!r._overlap),s=!(!n||!n._overlap),a=t._path,o=e._path;return i^s?i?1:-1:!r^!n?r?1:-1:a!==o?a._id-o._id:t._index-e._index});for(var i=0,s=t.length;i<s;i++){var a,o,u,c,p,d=t[i],g=h(d),v=null,m=!1,_=!0,y=[];for(g&&d._path._overlapsOnly&&(c=d._path,p=d._intersection._segment._path,c.compare(p)&&(c.getArea()&&n.push(c.clone(!1)),r(c),r(p),g=!1));g;){var w=!v,b=function(s,a){function t(t,e){for(;t&&t!==e;){var r,n=t._segment,i=n&&n._path;i&&(i=(r=n.getNext()||i.getFirstSegment())._intersection,n!==s&&(l(n)||l(r)||r&&h(n)&&(h(r)||i&&h(i._segment)))&&o.push(n),a&&f.push(n)),t=t._next}}var e=s._intersection,r=e,o=[];if(a&&(f=[s]),e){for(t(e);e&&e._prev;)e=e._prev;t(e,r)}return o}(d,w),x=b.shift(),S=!(m=!w&&(l(d)||l(x)))&&x;if(w&&(v=new Z(T.NO_INSERT),a=null),m){(d.isFirst()||d.isLast())&&(_=d._path._closed),d._visited=!0;break}if(S&&a&&(y.push(a),a=null),a||(S&&b.push(d),a={start:v._segments.length,crossings:b,visited:o=[],handleIn:u}),!h(d=S?x:d)){v.removeSegments(a.start);for(var C=0,P=o.length;C<P;C++)o[C]._visited=!1;for(o.length=0;(d=a&&a.crossings.shift())&&d._path||(d=null,(a=y.pop())&&(o=a.visited,u=a.handleIn)),a&&!h(d););if(!d)break}x=d.getNext();v.add(new R(d._point,u,x&&d._handleOut)),d._visited=!0,o.push(d),d=x||d._path.getFirstSegment(),u=x&&x._handleIn}m&&(_&&(v.getFirstSegment().setHandleIn(u),v.setClosed(_)),0!==v.getArea()&&n.push(v))}return n}var E=Math.min,U=Math.max,O=Math.abs,k={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,r){return A(t,this.getCurves(),e,r)},unite:function(t,e){return r(this,t,"unite",e)},intersect:function(t,e){return r(this,t,"intersect",e)},subtract:function(t,e){return r(this,t,"subtract",e)},exclude:function(t,e){return r(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?y(this,t,"divide"):_([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){function t(t,e){t=t&&t._intersection;return t&&t._overlap&&t._path===e}var e=this._children,r=e||[this],n=!1,i=!1,s=this.getIntersections(null,function(t){return t.hasOverlap()?n=!0:t.isCrossing()&&(i=!0)}),a=n&&i&&[],s=z.expand(s);if(n)for(var o=b(s,function(t){return t.hasOverlap()},a),h=o.length-1;0<=h;h--){var l=o[h],f=l._path,u=l._segment,c=u.getPrevious(),l=u.getNext();t(c,f)&&t(l,f)&&(u.remove(),c._handleOut._set(0,0),l._handleIn._set(0,0),c===u||c.getCurve().hasLength()||(l._handleIn.set(c._handleIn),c.remove()))}i&&(b(s,n&&function(t){var e=t.getCurve(),r=t.getSegment(),n=t._intersection,t=n._curve,n=n._segment;if(e&&t&&e._path&&t._path)return!0;r&&(r._intersection=null),n&&(n._intersection=null)},a),a&&S(a),r=P(L.each(r,function(t){this.push.apply(this,t._segments)},[])));var p,a=r.length;return 1<a&&e?(r!==e&&this.setChildren(r),p=this):1!==a||e||(r[0]!==this&&this.setSegments(r[0].removeSegments()),p=this),p||((p=new q(T.NO_INSERT)).addChildren(r),(p=p.reduce()).copyAttributes(this),this.replaceWith(p)),p},reorient:function(e,t){var r=this._children;return r&&r.length?this.setChildren(w(this.removeChildren(),function(t){return!!(e?t:1&t)},t)):t!==D&&this.setClockwise(t),this},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this.getCurves(),r=t.y,n=[],i=[],s=0,a=e.length;s<a;s++){var o=e[s].getValues(),h=o[1],l=o[3],f=o[5],u=o[7];if(r>=E(h,l,f,u)&&r<=U(h,l,f,u))for(var c=B.getMonoCurves(o),p=0,d=c.length;p<d;p++){var g=c[p],v=g[1],m=g[7];v!==m&&(v<=r&&r<=m||m<=r&&r<=v)&&(g=r===v?g[0]:r===m?g[6]:1===B.solveCubic(g,1,r,i,0,1)?B.getPoint(g,i[0]).x:(g[0]+g[6])/2,n.push(g))}}1<n.length&&(n.sort(function(t,e){return t-e}),t.x=(n[0]+n[1])/2)}return t}}});var _=L.extend({_class:"PathFlattener",initialize:function(t,o,e,h,r){function n(t,e){e=B.getValues(t,e,r);s.push(e),function t(e,r,n,i){{var s,a;!(u<i-n)||h&&B.isStraight(e)||B.isFlatEnough(e,o||.25)?(s=e[6]-e[0],a=e[7]-e[1],0<(a=Math.sqrt(s*s+a*a))&&(f+=a,l.push({offset:f,curve:e,index:r,time:i}))):(a=B.subdivide(e,.5),e=(n+i)/2,t(a[0],r,n,e),t(a[1],r,e,i))}}(e,t._index,0,1)}for(var i,s=[],l=[],f=0,u=1/(e||32),a=t._segments,c=a[0],p=1,d=a.length;p<d;p++)n(c,i=a[p]),c=i;t._closed&&n(i,a[0]),this.curves=s,this.parts=l,this.length=f,this.index=0},_get:function(t){for(var e,r=this.parts,n=r.length,i=this.index;(e=i)&&!(r[--i].offset<t););for(;e<n;e++){var s=r[e];if(s.offset>=t){var a=r[(this.index=e)-1],o=a&&a.index===s.index?a.time:0,a=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(t-a)/(s.offset-a)}}}return{index:r[n-1].index,time:1}},drawPart:function(t,e,r){for(var n=this._get(e),i=this._get(r),s=n.index,a=i.index;s<=a;s++){var o=B.getPart(this.curves[s],s===n.index?n.time:0,s===i.index?i.time:1);s===n.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},L.each(B._evaluateMethods,function(e){this[e+"At"]=function(t){t=this._get(t);return B[e](this.curves[t.index],t.time)}},{})),n=L.extend({initialize:function(t){for(var e,r=this.points=[],n=t._segments,t=t._closed,i=0,s=n.length;i<s;i++){var a=n[i].point;e&&e.equals(a)||r.push(e=a.clone())}t&&(r.unshift(r[r.length-1]),r.push(r[1])),this.closed=t},fit:function(t){var e=this.points,r=e.length,n=null;return 0<r&&(n=[new R(e[0])],1<r&&(this.fitCubic(n,t,0,r-1,e[1].subtract(e[0]),e[r-2].subtract(e[r-1])),this.closed&&(n.shift(),n.pop()))),n},fitCubic:function(t,e,r,n,i,s){var a=this.points;if(n-r!=1){for(var o,h=this.chordLengthParameterize(r,n),l=Math.max(e,e*e),f=!0,u=0;u<=4;u++){var c=this.generateBezier(r,n,h,i,s),p=this.findMaxError(r,n,c,h);if(p.error<e&&f)return void this.addCurve(t,c);if(o=p.index,p.error>=l)break;f=this.reparameterize(r,n,h,c),l=p.error}var d=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,r,o,i,d),this.fitCubic(t,e,o,n,d.negate(),s)}else{var g=a[r],d=a[n],a=g.getDistance(d)/3;this.addCurve(t,[g,g.add(i.normalize(a)),d.add(s.normalize(a)),d])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new R(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,r,n,i){for(var s=Math.abs,a=this.points,o=a[t],h=a[e],l=[[0,0],[0,0]],f=[0,0],u=0,c=e-t+1;u<c;u++){var p=r[u],d=1-p,g=3*p*d,v=d*d*d,m=g*d,_=g*p,d=p*p*p,g=n.normalize(m),p=i.normalize(_),d=a[t+u].subtract(o.multiply(v+m)).subtract(h.multiply(_+d));l[0][0]+=g.dot(g),l[0][1]+=g.dot(p),l[1][0]=l[0][1],l[1][1]+=p.dot(p),f[0]+=g.dot(d),f[1]+=p.dot(d)}var y,w,e=l[0][0]*l[1][1]-l[1][0]*l[0][1];1e-12<s(e)?(w=l[0][0]*f[1]-l[1][0]*f[0],y=(f[0]*l[1][1]-f[1]*l[0][1])/e,w=w/e):(e=l[0][0]+l[0][1],S=l[1][0]+l[1][1],y=w=1e-12<s(e)?f[0]/e:1e-12<s(S)?f[1]/S:0);var b,x,s=h.getDistance(o),S=1e-12*s;return y<S||w<S?y=w=s/3:(S=h.subtract(o),b=n.normalize(y),x=i.normalize(w),b.dot(S)-x.dot(S)>s*s&&(y=w=s/3,b=x=null)),[o,o.add(b||n.normalize(y)),h.add(x||i.normalize(w)),h]},reparameterize:function(t,e,r,n){for(i=t;i<=e;i++)r[i-t]=this.findRoot(n,this.points[i],r[i-t]);for(var i=1,s=r.length;i<s;i++)if(r[i]<=r[i-1])return!1;return!0},findRoot:function(t,e,r){for(var n=[],i=[],s=0;s<=2;s++)n[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)i[s]=n[s+1].subtract(n[s]).multiply(2);var a=this.evaluate(3,t,r),o=this.evaluate(2,n,r),h=this.evaluate(1,i,r),e=a.subtract(e),h=o.dot(o)+e.dot(h);return N.isZero(h)?r:r-e.dot(o)/h},evaluate:function(t,e,r){for(var n=e.slice(),i=1;i<=t;i++)for(var s=0;s<=t-i;s++)n[s]=n[s].multiply(1-r).add(n[s+1].multiply(r));return n[0]},chordLengthParameterize:function(t,e){for(var r=[0],n=t+1;n<=e;n++)r[n-t]=r[n-t-1]+this.points[n].getDistance(this.points[n-1]);for(var n=1,i=e-t;n<=i;n++)r[n]/=r[i];return r},findMaxError:function(t,e,r,n){for(var i=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,r,n[a-t]).subtract(this.points[a]),o=o.x*o.x+o.y*o.y;s<=o&&(s=o,i=a)}return{error:s,index:i}}}),o=T.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&L.isPlainObject(t)&&t.x===D&&t.y===D;this._initialize(e&&t,!e&&U.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),j=o.extend({_class:"PointText",initialize:function(){o.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new l(t.x,t.y,this,"setPoint")},setPoint:function(){var t=U.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,r){if(this._content){this._setStyles(t,e,r);var n=this._lines,r=this._style,i=r.hasFill(),s=r.hasStroke(),a=r.getLeading(),o=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var h=0,l=n.length;h<l;h++){t.shadowColor=o;var f=n[h];i&&(t.fillText(f,0,0),t.shadowColor="rgba(0,0,0,0)"),s&&t.strokeText(f,0,0),t.translate(0,a)}}},_getBounds:function(t,e){var r=this._style,n=this._lines,i=n.length,s=r.getJustification(),a=r.getLeading(),r=this.getView().getTextWidth(r.getFontStyle(),n),n=0;"left"!==s&&(n-=r/("center"===s?2:1));a=new x(n,i?-.75*a:0,r,i*a);return t?t._transformBounds(a,a):a}}),H=L.extend(new function(){var m,_={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},y={},w={},i=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],r={"rgb-hsb":function(t,e,r){var n=Math.max(t,e,r),i=n-Math.min(t,e,r);return[0==i?0:60*(n==t?(e-r)/i+(e<r?6:0):n==e?(r-t)/i+2:(t-e)/i+4),0===n?0:i/n,n]},"hsb-rgb":function(t,e,r){t=(t/60%6+6)%6;var n=Math.floor(t),t=t-n,t=[r,r*(1-e),r*(1-e*t),r*(1-e*(1-t))];return[t[(n=i[n])[0]],t[n[1]],t[n[2]]]},"rgb-hsl":function(t,e,r){var n=Math.max(t,e,r),i=Math.min(t,e,r),s=n-i,a=0==s,o=(n+i)/2;return[a?0:60*(n==t?(e-r)/s+(e<r?6:0):n==e?(r-t)/s+2:(t-e)/s+4),a?0:o<.5?s/(n+i):s/(2-n-i),o]},"hsl-rgb":function(t,e,r){if(0===e)return[r,r,r];for(var n=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],i=r<.5?r*(1+e):r+e-r*e,s=2*r-i,a=[],o=0;o<3;o++){var h=n[o];h<0&&(h+=1),1<h&&--h,a[o]=6*h<1?s+6*(i-s)*h:2*h<1?i:3*h<2?s+(i-s)*(2/3-h)*6:s}return a},"rgb-gray":function(t,e,r){return[.2989*t+.587*e+.114*r]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return L.each(_,function(t,s){y[s]=[],L.each(t,function(t,e){var r=L.capitalize(t),n=/^(hue|saturation)$/.test(t),i=y[s][e]="gradient"===t?function(t){var e=this._components[0];return e!==(t=V.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===s?function(){return U.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+r]=function(){return(this._type===s||n&&/^hs[bl]$/.test(this._type)?this._components:this._convert(s))[e]},this["set"+r]=function(t){this._type===s||n&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(s),this._properties=_[s],this._type=s),this._components[e]=i.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function t(e){var r,n,i=arguments,s=this.__read,a=0,o=null!=(e=Array.isArray(e)?(i=e)[0]:e)&&typeof e;if("string"===o&&e in _&&(h=e,e=i[1],Array.isArray(e)?(r=e,f=i[2]):(s&&(a=1),i=L.slice(i,1),o=typeof e)),!r){if(n="number"===o?i:"object"===o&&null!=e.length?e:null){var h=h||(3<=n.length?"rgb":"gray"),l=_[h].length,f=n[l];s&&(a+=n===arguments?l+(null!=f?1:0):1),n.length>l&&(n=L.slice(n,0,l))}else if("string"===o)h="rgb",4===(r=function(t){var e,r,n,i=t.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(i)for(e=[0,0,0],s=0;s<3;s++)o=i[s+1],e[s]=parseInt(1==o.length?o+o:o,16)/255;else if(i=t.match(/^rgba?\((.*)\)$/))for(var s=0,a=(e=i[1].split(",")).length;s<a;s++){var o=+e[s];e[s]=s<3?o/255:o}else e=I?((n=w[t])||(m||((m=tt.getContext(1,1)).globalCompositeOperation="copy"),m.fillStyle="rgba(0,0,0,0)",m.fillStyle=t,m.fillRect(0,0,1,1),r=m.getImageData(0,0,1,1).data,n=w[t]=[r[0]/255,r[1]/255,r[2]/255]),n.slice()):[0,0,0];return e}(e)).length&&(f=r[3],r.length--);else if("object"===o)if(e.constructor===t){if(h=e._type,r=e._components.slice(),f=e._alpha,"gradient"===h)for(var u=1,c=r.length;u<c;u++){var p=r[u];p&&(r[u]=p.clone())}}else if(e.constructor===V)h="gradient",n=i;else{var d=_[h="hue"in e?"lightness"in e?"hsl":"hsb":"gradient"in e||"stops"in e||"radial"in e?"gradient":"gray"in e?"gray":"rgb"],g=y[h];this._components=r=[];for(u=0,c=d.length;u<c;u++)null==(v=e[d[u]])&&!u&&"gradient"===h&&"stops"in e&&(v={stops:e.stops,radial:e.radial}),null!=(v=g[u].call(this,v))&&(r[u]=v);f=e.alpha}s&&h&&(a=1)}if(this._type=h||"rgb",!r){this._components=r=[];for(u=0,c=(g=y[this._type]).length;u<c;u++){var v=g[u].call(this,n&&n[u]);null!=v&&(r[u]=v)}}return this._components=r,this._properties=_[this._type],this._alpha=f,s&&(this.__read=a),this},set:"#initialize",_serialize:function(t,e){var r=this.getComponents();return L.serialize(/^(gray|rgb)$/.test(this._type)?r:[this._type].concat(r),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=r[this._type+"-"+t])?e.apply(this,this._components):r["rgb-"+t].apply(this,r[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new H(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=_[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=L.isPlainValue(t,!0)?H.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&L.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],r="gradient"===this._type,n=b.instance,i=0,s=t.length;i<s;i++){var a=this._components[i];null!=a&&e.push(t[i]+": "+(r?a:n.number(a)))}return null!=this._alpha&&e.push("alpha: "+n.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:1<t?1:t))}var r=this._convert("rgb"),n=t||null==this._alpha?1:this._alpha,r=[e(r[0]),e(r[1]),e(r[2])];return n<1&&r.push(n<0?0:n),t?"#"+((1<<24)+(r[0]<<16)+(r[1]<<8)+r[2]).toString(16).slice(1):(4==r.length?"rgba(":"rgb(")+r.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var r,n=this._components,i=n[0],s=i._stops,a=n[1],o=n[2],n=n[3],e=e&&e.inverted();e&&(a=e._transformPoint(a),o=e._transformPoint(o),n=n&&e._transformPoint(n)),r=i._radial?(e=o.getDistance(a),!n||(i=n.subtract(a)).getLength()>e&&(n=a.add(i.normalize(e-.1))),t.createRadialGradient((n=n||a).x,n.y,0,a.x,a.y,e)):t.createLinearGradient(a.x,a.y,o.x,o.y);for(var h=0,l=s.length;h<l;h++){var f=s[h],u=f._offset;r.addColorStop(null==u?h/(l-1):u,f._color.toCanvasStyle())}return this._canvasStyle=r},transform:function(t){if("gradient"===this._type){for(var e=this._components,r=1,n=e.length;r<n;r++){var i=e[r];t._transformPoint(i,i,!0)}this._changed()}},statics:{_types:_,random:function(){var t=Math.random;return new H(t(),t(),t())}}})},new function(){return L.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},function(a,t){this[t]=function(t){t=H.read(arguments);for(var e=this._type,r=this._components,n=t._convert(e),i=0,s=r.length;i<s;i++)n[i]=a(r[i],n[i]);return new H(e,n,null!=this._alpha?a(this._alpha,t.getAlpha()):null)}},{})}),V=L.extend({_class:"Gradient",initialize:function(t,e){this._id=p.get(),t&&L.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return L.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){t=this._owners?this._owners.indexOf(t):-1;-1!=t&&(this._owners.splice(t,1),this._owners.length||(this._owners=D))},clone:function(){for(var t=[],e=0,r=this._stops.length;e<r;e++)t[e]=this._stops[e].clone();return new V(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var r=0,n=e.length;r<n;r++)e[r]._owner=D;for(r=0,n=(e=this._stops=W.readList(t,0,{clone:!0})).length;r<n;r++)e[r]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,r=t._stops,n=e.length;if(n===r.length){for(var i=0;i<n;i++)if(!e[i].equals(r[i]))return!1;return!0}}return!1}}),W=L.extend({_class:"GradientStop",initialize:function(t,e){var r=t,n=e;"object"==typeof t&&e===D&&(Array.isArray(t)&&"number"!=typeof t[0]?(r=t[0],n=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(r=t.color,n=t.offset||t.rampPoint||0)),this.setColor(r),this.setOffset(n)},clone:function(){return new W(this._color.clone(),this._offset)},_serialize:function(t,e){var r=this._color,n=this._offset;return L.serialize(null==n?[r]:[r,n],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=H.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),h=L.extend(new function(){var n={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new U,selectedColor:null},i=L.set({},n,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),s=L.set({},i,{fillColor:new H}),r={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},c={beans:!0},p={_class:"Style",beans:!0,initialize:function(t,e,r){this._values={},this._owner=e,this._project=e&&e._project||r||paper.project,this._defaults=!e||e instanceof C?i:e instanceof o?s:n,t&&this.set(t)}};return L.each(i,function(t,o){var h=/Color$/.test(o),l="shadowOffset"===o,e=L.capitalize(o),a=r[o],f="set"+e,u="get"+e;p[f]=function(t){var e,r=this._owner,n=r&&r._children;if(n&&0<n.length&&!(r instanceof q))for(var i=0,s=n.length;i<s;i++)n[i]._style[f](t);else o in this._defaults&&((e=this._values[o])!==t&&(h&&(e&&e._owner!==D&&(e._owner=D),t&&t.constructor===H&&((t=t._owner?t.clone():t)._owner=r)),this._values[o]=t,r&&r._changed(a||65)))},p[u]=function(t){var e,r=this._owner,n=r&&r._children;if(o in this._defaults&&(!n||!n.length||t||r instanceof q))(e=this._values[o])===D?(e=this._defaults[o])&&e.clone&&(e=e.clone()):!(t=h?H:l?U:null)||e&&e.constructor===t||(this._values[o]=e=t.read([e],0,{readNull:!0,clone:!0}),e&&h&&(e._owner=r));else if(n)for(var i=0,s=n.length;i<s;i++){var a=n[i]._style[u]();if(i){if(!L.equals(e,a))return D}else e=a}return e},c[u]=function(t){return this._style[u](t)},c[f]=function(t){this._style[f](t)}}),L.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var r="get"+e,e="set"+e;p[r]=c[r]="#get"+t,p[e]=c[e]="#set"+t}),T.inject(c),p},{set:function(t){var e,r=t instanceof h,n=r?t._values:t;if(n)for(var i in n)i in this._defaults&&(e=n[i],this[i]=e&&r&&e.clone?e.clone():e)},equals:function(t){function e(t,e,r){var n,i=t._values,s=e._values,a=e._defaults;for(n in i){var o=i[n],h=s[n];if(!(r&&n in s||L.equals(o,h===D?a[n]:h)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&0<t.alpha},hasStroke:function(){var t=this.getStrokeColor();return!!t&&0<t.alpha&&0<this.getStrokeWidth()},hasShadow:function(){var t=this.getShadowColor();return!!t&&0<t.alpha&&(0<this.getShadowBlur()||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),r=this.getFontSize();return/pt|em|%|px/.test(r)&&(r=this.getView().getPixelSize(r)),null!=e?e:1.2*r}}),X=new function(){function i(t,e,r,n){for(var i=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=i[a],o=o?o+s:e;if(o in t){if(!r)return t[o];t[o]=n;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,e=e&&e.defaultView;return e&&e.getComputedStyle(t,"")},getBounds:function(t,e){var r,n=t.ownerDocument,i=n.body,s=n.documentElement;try{r=t.getBoundingClientRect()}catch(t){r={left:0,top:0,width:0,height:0}}var a=r.left-(s.clientLeft||i.clientLeft||0),o=r.top-(s.clientTop||i.clientTop||0);return e||(a+=(n=n.defaultView).pageXOffset||s.scrollLeft||i.scrollLeft,o+=n.pageYOffset||s.scrollTop||i.scrollTop),new x(a,o,r.width,r.height)},getViewportBounds:function(t){var e=t.ownerDocument,t=e.defaultView,e=e.documentElement;return new x(0,0,t.innerWidth||e.clientWidth,t.innerHeight||e.clientHeight)},getOffset:function(t,e){return X.getBounds(t,e).getPoint()},getSize:function(t){return X.getBounds(t,!0).getSize()},isInvisible:function(t){return X.getSize(t).equals(new A(0,0))},isInView:function(t){return!X.isInvisible(t)&&X.getViewportBounds(t).intersects(X.getBounds(t,!0))},isInserted:function(t){return M.body.contains(t)},getPrefixed:function(t,e){return t&&i(t,e)},setPrefixed:function(t,e,r){if("object"==typeof e)for(var n in e)i(t,n,!0,e[n]);else i(t,e,!0,r)}}},J={add:function(t,e){if(t)for(var r in e)for(var n=e[r],i=r.split(/[\s,]+/g),s=0,a=i.length;s<a;s++)t.addEventListener(i[s],n,!1)},remove:function(t,e){if(t)for(var r in e)for(var n=e[r],i=r.split(/[\s,]+/g),s=0,a=i.length;s<a;s++)t.removeEventListener(i[s],n,!1)},getPoint:function(t){t=t.targetTouches?(t.targetTouches.length?t.targetTouches:t.changedTouches)[0]:t;return new U(t.pageX||t.clientX+M.documentElement.scrollLeft,t.pageY||t.clientY+M.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return J.getPoint(t).subtract(X.getOffset(e||J.getTarget(t)))}};J.requestAnimationFrame=new function(){function n(){var t=a;a=[];for(var e=0,r=t.length;e<r;e++)t[e]();(s=i&&a.length)&&i(n)}var e,i=X.getPrefixed(I,"requestAnimationFrame"),s=!1,a=[];return function(t){a.push(t),i?s||(i(n),s=!0):e=e||setInterval(n,1e3/60)}};var Y=L.extend(t,{_class:"View",initialize:function t(e,r){function n(t){return r[t]||parseInt(r.getAttribute(t),10)}function i(){var t=X.getSize(r);return t.isNaN()||t.isZero()?new A(n("width"),n("height")):t}var s,a,o,h,l;I&&r?(this._id=r.getAttribute("id"),null==this._id&&r.setAttribute("id",this._id="view-"+t._id++),J.add(r,this._viewEvents),X.setPrefixed(r.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(r,"resize")&&J.add(I,(s=this)._windowEvents={resize:function(){s.setViewSize(i())}}),l=i(),f.hasAttribute(r,"stats")&&"undefined"!=typeof Stats&&(this._stats=new Stats,o=(a=this._stats.domElement).style,h=X.getOffset(r),o.position="absolute",o.left=h.x+"px",o.top=h.y+"px",M.body.appendChild(a))):(l=new A(r),r=null),this._project=e,this._scope=e._scope,this._element=r,this._pixelRatio||(this._pixelRatio=I&&I.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,t._views.push(this),((t._viewsById[this._id]=this)._matrix=new E)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!paper.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;Y._focused===this&&(Y._focused=null),Y._views.splice(Y._views.indexOf(this),1),delete Y._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),J.remove(this._element,this._viewEvents),J.remove(I,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:L.each(T._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){(this._autoUpdate=t)&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){var e;this._requested||(e=this,J.requestAnimationFrame(function(){var t;e._requested=!1,e._animate&&(e.requestUpdate(),t=e._element,X.getPrefixed(M,"hidden")&&"true"!==f.getAttribute(t,"keepalive")||!X.isInView(t)||e._handleFrame()),e._autoUpdate&&e.update()}),this._requested=!0)},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){paper=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new L({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var r=this._frameItems;e?(r[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete r[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){e=this._frameItems[e];e.item.emit("frame",new L(t,{time:e.time+=t.delta,count:e.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=D},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new r(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=A.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var r=this._element;r&&(r.width!==t&&(r.width=t),r.height!==e&&(r.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new x(new U,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return X.isInView(this._element)},isInserted:function(){return X.isInserted(this._element)},getPixelSize:function(t){var e,r,n=this._element;return n?(r=n.parentNode,(n=M.createElement("div")).style.fontSize=t,r.appendChild(n),e=parseFloat(X.getStyles(n).fontSize),r.removeChild(n)):e=parseFloat(e),e},getTextWidth:function(t,e){return 0}},L.each(["rotate","scale","shear","skew"],function(r){var n="rotate"===r;this[r]=function(){var t=(n?L:U).read(arguments),e=U.read(arguments,0,{readNull:!0});return this.transform((new E)[r](t,e||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new E;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=U.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),t=t&&t.scaling;return t?(t.x+t.y)/2:0},setZoom:function(t){this.transform((new E).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),t=t&&t.scaling;return t?new l(t.x,t.y,this,"setScaling"):D},setScaling:function(){var t=this.getScaling(),e=U.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(U.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(U.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(U.read(arguments))},getEventPoint:function(t){return this.viewToProject(J.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return M&&"string"==typeof e&&(e=M.getElementById(e)),new(I?d:Y)(t,e)}}},new function(){function n(t){t=J.getTarget(t);return t.getAttribute&&Y._viewsById[t.getAttribute("id")]}function i(){var t=Y._focused;if(!t||!t.isVisible())for(var e=0,r=Y._views.length;e<r;e++)if((t=Y._views[e]).isVisible()){Y._focused=o=t;break}}function a(t,e,r){t._handleMouseEvent("mousemove",e,r)}function d(t,n,e,i,s,a,r){for(var o,h=!1;t&&t!==r&&!function t(e,r){if(e.responds(r)){if(o=o||new K(r,i,s,n||e,a?s.subtract(a):null),e.emit(r,o)&&(P=!0,o.prevented&&(k=!0),o.stopped))return h=!0}else if(r=u[r])return t(e,r)}(t,e);)t=t._parent;return h}function g(t,e,r,n,i,s){return t._project.removeOn(r),k=P=!1,b&&d(b,null,r,n,i,s)||e&&e!==b&&!e.isDescendant(b)&&d(e,null,r,n,i,s,b)||d(t,b||e||t,r,n,i,s)}if(I){var s,o,t,e,r,v=!1,h=!1,l=I.navigator;l.pointerEnabled||l.msPointerEnabled?(t="pointerdown MSPointerDown",e="pointermove MSPointerMove",r="pointerup pointercancel MSPointerUp MSPointerCancel"):(t="touchstart",e="touchmove",r="touchend touchcancel","ontouchstart"in I&&l.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(t+=" mousedown",e+=" mousemove",r+=" mouseup"));var f={},l={mouseout:function(t){var e,r,n,i=Y._focused,s=J.getRelatedTarget(t);!i||s&&"HTML"!==s.nodeName||(r=(e=J.getOffset(t,i._element)).x,s=(n=Math.abs)(r),e.x=n(n=s-(1<<25))<s?n*(r<0?-1:1):r,a(i,t,i.viewToProject(e)))},scroll:i};f[t]=function(t){var e=Y._focused=n(t);v||(v=!0,e._handleMouseEvent("mousedown",t))},l[e]=function(t){var e,r=Y._focused;h||((e=n(t))?r!==e&&(r&&a(r,t),s=s||r,r=Y._focused=o=e):o&&o===r&&(s&&!s.isInserted()&&(s=null),r=Y._focused=s,s=null,i())),r&&a(r,t)},l[t]=function(){h=!0},l[r]=function(t){var e=Y._focused;e&&v&&e._handleMouseEvent("mouseup",t),h=v=!1},J.add(M,l),J.add(I,{load:i});var m,_,y,w,b,x,S,C,P=!1,k=!1,u={doubleclick:"click",mousedrag:"mousemove"},T=!1,c={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:f,_handleMouseEvent:function(t,e,r){function n(t){return i.virtual[t]||h.responds(t)||o&&o.responds(t)}var i=this._itemEvents,s=i.native[t],a="mousemove"===t,o=this._scope.tool,h=this;a&&v&&n("mousedrag")&&(t="mousedrag"),r=r||this.getEventPoint(e);var l=this.getBounds().contains(r),f=s&&l&&h._project.hitTest(r,{tolerance:0,fill:!0,stroke:!0}),u=f&&f.item||null,c=!1,f={};if(f[t.substr(5)]=!0,s&&u!==w&&(w&&d(w,null,"mouseleave",e,r),u&&d(u,null,"mouseenter",e,r),w=u),T^l&&(d(this,null,l?"mouseenter":"mouseleave",e,r),c=!0),!l&&!f.drag||r.equals(_)||(g(this,u,a?t:"mousemove",e,r,_),c=!0),T=l,f.down&&l||f.up&&m){if(g(this,u,t,e,r,m),f.down){if(C=u===x&&Date.now()-S<300,y=x=u,!k&&u){for(var p=u;p&&!p.responds("mousedrag");)p=p._parent;p&&(b=u)}m=r}else f.up&&(k||u!==y||(S=Date.now(),g(this,u,C?"doubleclick":"click",e,r,m),C=!1),y=b=null);c=!(T=!1)}_=r,((P=c&&o?o._handleMouseEvent(t,e,r,f)||P:P)&&!f.move||f.down&&n("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(e,r,n,i){function t(t){t.responds(e)&&(paper=a,t.emit(e,s=s||new Q(e,r,n,i)))}var s,a=this._scope,o=a.tool;this.isVisible()&&(t(this),o&&o.responds(e)&&t(o))},_countItemEvent:function(t,e){var r,n=this._itemEvents,i=n.native,n=n.virtual;for(r in c)i[r]=(i[r]||0)+(c[r][t]||0)*e;n[t]=(n[t]||0)+e},statics:{updateFocus:i}}}}),d=Y.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof I.HTMLCanvasElement)){var r=A.read(arguments,1);if(r.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+L.slice(arguments,1));e=tt.getCanvas(r)}var n=this._context=e.getContext("2d");n.save(),this._pixelRatio=1,/^off|false$/.test(f.getAttribute(e,"hidpi"))||(r=I.devicePixelRatio||1,n=X.getPrefixed(n,"backingStorePixelRatio")||1,this._pixelRatio=r/n),Y.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,r){var n,i,s=this._pixelRatio;t.base.call(this,e*s,r*s),1!==s&&(i=this._element,n=this._context,f.hasAttribute(i,"resize")||((i=i.style).width=e+"px",i.height=r+"px"),n.restore(),n.save(),n.scale(s,s))},getPixelSize:function t(e){var r,n,i=paper.agent;return i&&i.firefox?r=t.base.call(this,e):(i=(n=this._context).font,n.font=e+" serif",r=parseFloat(n.font),n.font=i),r},getTextWidth:function(t,e){var r=this._context,n=r.font,i=0;r.font=t;for(var s=0,a=e.length;s<a;s++)i=Math.max(i,r.measureText(e[s]).width);return r.font=n,i},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,r=this._viewSize;return e.clearRect(0,0,r.width+1,r.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),!(this._needsUpdate=!1)}}),g=L.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return v.modifiers}}),Q=g.extend({_class:"KeyEvent",initialize:function(t,e,r,n){this.type=t,this.event=e,this.key=r,this.character=n},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),v=new function(){function n(t){var e=t.key||t.keyIdentifier,e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===D?String.fromCharCode(t.keyCode):e;return r[e]||(1<e.length?L.hyphenate(e):e.toLowerCase())}function h(t,e,r,n){var i,s=Y._focused;if((f[e]=t)?u[e]=r:delete u[e],1<e.length&&(i=L.camelize(e))in c){c[i]=t;var a=paper&&paper.agent;if("meta"===i&&a&&a.mac)if(t)l={};else{for(var o in l)o in u&&h(!1,o,l[o],n);l=null}}else t&&l&&(l[e]=r);s&&s._handleKeyEvent(t?"keydown":"keyup",n,e,r)}var l,i,r={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},s={tab:"\t",space:" ",enter:"\r"},f={},u={},c=new L({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=paper&&paper.agent;return t&&t.mac?this.meta:this.control}}});return J.add(M,{keydown:function(t){var e=n(t),r=paper&&paper.agent;1<e.length||r&&r.chrome&&(t.altKey||r.mac&&t.metaKey||!r.mac&&t.ctrlKey)?h(!0,e,s[e]||(1<e.length?"":e),t):i=e},keypress:function(t){var e,r;i&&(e=n(t),r=32<=(r=t.charCode)?String.fromCharCode(r):1<e.length?"":e,h(!0,e=e!==i?r.toLowerCase():e,r,t),i=null)},keyup:function(t){var e=n(t);e in u&&h(!1,e,u[e],t)}}),J.add(I,{blur:function(t){for(var e in u)h(!1,e,u[e],t)}}),{modifiers:c,isDown:function(t){return!!f[t]}}},K=g.extend({_class:"MouseEvent",initialize:function(t,e,r,n,i){this.type=t,this.event=e,this.point=r,this.target=n,this.delta=i},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),m=g.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,r){this.tool=t,this.type=e,this.event=r},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,r=e._parent;/^(Group|CompoundPath)$/.test(r._class);)r=(e=r)._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),$=(e.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){e.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){null!=(this._minDistance=t)&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,a,o){function r(t,e){var r=a,n=h?u._point:u._downPoint||r;if(h){if(u._moveCount&&r.equals(n))return;if(n&&(null!=t||null!=e)){var i=r.subtract(n),s=i.getLength();if(s<(t||0))return;e&&(r=n.add(i.normalize(Math.min(s,e))))}u._moveCount++}return u._point=r,u._lastPoint=n||r,o.down&&(u._moveCount=-1,u._downPoint=r,u._downCount++),1}function n(){i&&(f=u.emit(t,new m(u,t,e))||f)}paper=this._scope,o.drag&&!this.responds(t)&&(t="mousemove");var h=o.move||o.drag,i=this.responds(t),s=this.minDistance,l=this.maxDistance,f=!1,u=this;if(o.down)r(),n();else if(o.up)r(null,l),n();else if(i)for(;r(s,l);)n();return f}}),{request:function(r){var n=new w.XMLHttpRequest;return n.open((r.method||"get").toUpperCase(),r.url,L.pick(r.async,!0)),r.mimeType&&n.overrideMimeType(r.mimeType),n.onload=function(){var t=n.status;0===t||200===t?r.onLoad&&r.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var t=n.status,e='Could not load "'+r.url+'" (Status: '+t+")";if(!r.onError)throw new Error(e);r.onError(e,t)},n.send(null)}}),tt={canvases:[],getCanvas:function(t,e){if(!I)return null;var r,n=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?r=this.canvases.pop():(r=M.createElement("canvas"),n=!1);var i=r.getContext("2d");if(!i)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===t&&r.height===e?n&&i.clearRect(0,0,t+1,e+1):(r.width=t,r.height=e),i.save(),r},getContext:function(t,e){e=this.getCanvas(t,e);return e?e.getContext("2d"):null},release:function(t){t=t&&t.canvas?t.canvas:t;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},y=new function(){function a(t,e,r){return.2989*t+.587*e+.114*r}function t(t,e,r,n){var i,s=n-a(t,e,r),n=a(x=t+s,S=e+s,C=r+s),r=o(x,S,C),s=h(x,S,C);r<0&&(x=n+(x-n)*n/(i=n-r),S=n+(S-n)*n/i,C=n+(C-n)*n/i),255<s&&(x=n+(x-n)*(i=255-n)/(s=s-n),S=n+(S-n)*i/s,C=n+(C-n)*i/s)}function e(t,e,r){return h(t,e,r)-o(t,e,r)}function r(t,e,r,n){var i=[t,e,r],s=h(t,e,r),r=o(t,e,r),e=0===o(r=r===t?0:r===e?1:2,s=s===t?0:s===e?1:2)?1===h(r,s)?2:1:0;i[s]>i[r]?(i[e]=(i[e]-i[r])*n/(i[s]-i[r]),i[s]=n):i[e]=i[s]=0,i[r]=0,x=i[0],S=i[1],C=i[2]}var d,g,v,m,_,y,w,b,x,S,C,o=Math.min,h=Math.max,n=Math.abs,P={multiply:function(){x=_*d/255,S=y*g/255,C=w*v/255},screen:function(){x=_+d-_*d/255,S=y+g-y*g/255,C=w+v-w*v/255},overlay:function(){x=_<128?2*_*d/255:255-2*(255-_)*(255-d)/255,S=y<128?2*y*g/255:255-2*(255-y)*(255-g)/255,C=w<128?2*w*v/255:255-2*(255-w)*(255-v)/255},"soft-light":function(){var t=d*_/255;x=t+_*(255-(255-_)*(255-d)/255-t)/255,S=(t=g*y/255)+y*(255-(255-y)*(255-g)/255-t)/255,C=(t=v*w/255)+w*(255-(255-w)*(255-v)/255-t)/255},"hard-light":function(){x=d<128?2*d*_/255:255-2*(255-d)*(255-_)/255,S=g<128?2*g*y/255:255-2*(255-g)*(255-y)/255,C=v<128?2*v*w/255:255-2*(255-v)*(255-w)/255},"color-dodge":function(){x=0===_?0:255===d?255:o(255,255*_/(255-d)),S=0===y?0:255===g?255:o(255,255*y/(255-g)),C=0===w?0:255===v?255:o(255,255*w/(255-v))},"color-burn":function(){x=255===_?255:0===d?0:h(0,255-255*(255-_)/d),S=255===y?255:0===g?0:h(0,255-255*(255-y)/g),C=255===w?255:0===v?0:h(0,255-255*(255-w)/v)},darken:function(){x=_<d?_:d,S=y<g?y:g,C=w<v?w:v},lighten:function(){x=d<_?_:d,S=g<y?y:g,C=v<w?w:v},difference:function(){(x=_-d)<0&&(x=-x),(S=y-g)<0&&(S=-S),(C=w-v)<0&&(C=-C)},exclusion:function(){x=_+d*(255-_-_)/255,S=y+g*(255-y-y)/255,C=w+v*(255-w-w)/255},hue:function(){r(d,g,v,e(_,y,w)),t(x,S,C,a(_,y,w))},saturation:function(){r(_,y,w,e(d,g,v)),t(x,S,C,a(_,y,w))},luminosity:function(){t(_,y,w,a(d,g,v))},color:function(){t(d,g,v,a(_,y,w))},add:function(){x=o(_+d,255),S=o(y+g,255),C=o(w+v,255)},subtract:function(){x=h(_-d,0),S=h(y-g,0),C=h(w-v,0)},average:function(){x=(_+d)/2,S=(y+g)/2,C=(w+v)/2},negation:function(){x=255-n(255-d-_),S=255-n(255-g-y),C=255-n(255-v-w)}},k=this.nativeModes=L.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),i=tt.getContext(1,1);i&&(L.each(P,function(t,e){var r="darken"===e,n=!1;i.save();try{i.fillStyle=r?"#300":"#a00",i.fillRect(0,0,1,1),i.globalCompositeOperation=e,i.globalCompositeOperation===e&&(i.fillStyle=r?"#a00":"#300",i.fillRect(0,0,1,1),n=i.getImageData(0,0,1,1).data[0]!==r?170:51)}catch(t){}i.restore(),k[e]=n}),tt.release(i)),this.process=function(t,e,r,n,i){var s=e.canvas,a="normal"===t;if(a||k[t])r.save(),r.setTransform(1,0,0,1,0,0),r.globalAlpha=n,a||(r.globalCompositeOperation=t),r.drawImage(s,i.x,i.y),r.restore();else{var o=P[t];if(o){for(var t=r.getImageData(i.x,i.y,s.width,s.height),h=t.data,l=e.getImageData(0,0,s.width,s.height).data,f=0,u=h.length;f<u;f+=4){d=l[f],_=h[f],g=l[f+1],y=h[f+1],v=l[f+2],w=h[f+2],m=l[f+3],b=h[f+3],o();var c=m*n/255,p=1-c;h[f]=c*x+p*_,h[f+1]=c*S+p*y,h[f+2]=c*C+p*w,h[f+3]=m*n+p*b}r.putImageData(t,i.x,i.y)}}}},et=new function(){function n(t,e,r){for(var n in e){var i=e[n],s=a[n];"number"==typeof i&&r&&(i=r.number(i)),s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}return t}var i="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",e="http://www.w3.org/1999/xlink",a={href:e,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};return{svg:i,xmlns:t,xlink:e,create:function(t,e,r){return n(M.createElementNS(i,t),e,r)},get:function(t,e){var r=a[e],e=r?t.getAttributeNS(r,e):t.getAttribute(e);return"null"===e?null:e},set:n}},rt=L.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof G||t instanceof P||t instanceof o)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var r=L.capitalize(e),n=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:n,fromSVG:n&&L.each(n,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+r,set:"set"+r}},{});return function(){function f(t,e,r){var n,i,s=new L,a=t.getTranslation();return e&&(n=(t=t._shiftless())._inverseTransform(a),s[r?"cx":"x"]=n.x,s[r?"cy":"y"]=n.y,a=null),t.isIdentity()||((i=t.decompose())?(e=[],r=i.rotation,n=i.scaling,i=i.skewing,a&&!a.isZero()&&e.push("translate("+v.point(a)+")"),r&&e.push("rotate("+v.number(r)+")"),N.isZero(n.x-1)&&N.isZero(n.y-1)||e.push("scale("+v.point(n)+")"),i.x&&e.push("skewX("+v.number(i.x)+")"),i.y&&e.push("skewY("+v.number(i.y)+")"),s.transform=e.join(" ")):s.transform="matrix("+t.getValues().join(",")+")"),s}function t(t,e){for(var r=f(t._matrix),n=t._children,i=et.create("g",r,v),s=0,a=n.length;s<a;s++){var o,h=n[s],l=c(h,e);l&&(h.isClipMask()?((o=et.create("clipPath")).appendChild(l),g(h,o,"clip"),et.set(i,{"clip-path":"url(#"+o.id+")"})):i.appendChild(l))}return i}function u(t){var e,r=t._type,n=t._radius,i=f(t._matrix,!0,"rectangle"!==r);return"rectangle"===r&&(r="rect",t=(e=t._size).width,e=e.height,i.x-=t/2,i.y-=e/2,i.width=t,i.height=e,n.isZero()&&(n=null)),n&&("circle"===r?i.r=n:(i.rx=n.width,i.ry=n.height)),et.create(r,i,v)}function s(i,t,e){var s={},a=!e&&i.getParent(),o=[];return null!=i._name&&(s.id=i._name),L.each(rt,function(t){var e=t.get,r=t.type,n=i[e]();(t.exportFilter?!t.exportFilter(i,n):a&&L.equals(a[e](),n))||("color"!==r||null==n||(e=n.getAlpha())<1&&(s[t.attribute+"-opacity"]=e),"style"===r?o.push(t.attribute+": "+n):s[t.attribute]=null==n?"none":"color"===r?n.gradient?function(t){if(!(o=d(t,"color"))){var e,r,n=t.getGradient(),i=n._radial,s=t.getOrigin(),a=t.getDestination();i?(e={cx:s.x,cy:s.y,r:s.getDistance(a)},(r=t.getHighlight())&&(e.fx=r.x,e.fy=r.y)):e={x1:s.x,y1:s.y,x2:a.x,y2:a.y},e.gradientUnits="userSpaceOnUse";for(var o=et.create((i?"radial":"linear")+"Gradient",e,v),h=n._stops,l=0,f=h.length;l<f;l++){var u=h[l],c=u._color,p=c.getAlpha(),u=u._offset;e={offset:null==u?l/(f-1):u},c&&(e["stop-color"]=c.toCSS(!0)),p<1&&(e["stop-opacity"]=p),o.appendChild(et.create("stop",e,v))}g(t,o,"color")}return"url(#"+o.id+")"}(n):n.toCSS(!0):"array"===r?n.join(","):"lookup"===r?t.toSVG[n]:n)}),o.length&&(s.style=o.join(";")),1===s.opacity&&delete s.opacity,i._visible||(s.visibility="hidden"),et.set(t,s,v)}function d(t,e){return a=a||{ids:{},svgs:{}},t&&a.svgs[e+"-"+(t._id||t.__id||(t.__id=p.get("svg")))]}function g(t,e,r){a||d();var n=a.ids[r]=(a.ids[r]||0)+1;e.id=r+"-"+n,a.svgs[r+"-"+(t._id||t.__id)]=e}function h(t,e){var r=t,n=null;if(a){for(var i in r="svg"===t.nodeName.toLowerCase()&&t,a.svgs)n||(r||(r=et.create("svg")).appendChild(t),n=r.insertBefore(et.create("defs"),r.firstChild)),n.appendChild(a.svgs[i]);a=null}return e.asString?(new w.XMLSerializer).serializeToString(r):r}function c(t,e,r){var n=o[t._class],i=n&&n(t,e);return i&&((n=e.onExport)&&(i=n(t,i,e)||i),(e=JSON.stringify(t._data))&&"{}"!==e&&"null"!==e&&i.setAttribute("data-paper-data",e)),i&&s(t,i,r)}function l(t){return v=new b((t=t||{}).precision),t}var v,a,o={Group:t,Layer:t,Raster:function(t,e){var r=f(t._matrix,!0),n=t.getSize(),i=t.getImage();return r.x-=n.width/2,r.y-=n.height/2,r.width=n.width,r.height=n.height,r.href=0==e.embedImages&&i&&i.src||t.toDataURL(),et.create("image",r,v)},Path:function(t,e){var r=e.matchShapes;if(r){var n=t.toShape(!1);if(n)return u(n)}var i=t._segments,s=i.length,a=f(t._matrix);if(r&&2<=s&&!t.hasHandles())if(2<s){for(var o=t._closed?"polygon":"polyline",h=[],l=0;l<s;l++)h.push(v.point(i[l]._point));a.points=h.join(" ")}else{o="line";n=i[0]._point,r=i[1]._point;a.set({x1:n.x,y1:n.y,x2:r.x,y2:r.y})}else o="path",a.d=t.getPathData(null,e.precision);return et.create(o,a,v)},Shape:u,CompoundPath:function(t,e){var r=f(t._matrix),e=t.getPathData(null,e.precision);return e&&(r.d=e),et.create("path",r,v)},SymbolItem:function(t,e){var r=f(t._matrix,!0),n=t._definition,i=d(n,"symbol"),s=n._item,t=s.getBounds();return i||((i=et.create("symbol",{viewBox:v.rectangle(t)})).appendChild(c(s,e)),g(n,i,"symbol")),r.href="#"+i.id,r.x+=t.x,r.y+=t.y,r.width=t.width,r.height=t.height,r.overflow="visible",et.create("use",r,v)},PointText:function(t){var e=et.create("text",f(t._matrix,!0),v);return e.textContent=t._content,e}};T.inject({exportSVG:function(t){return h(c(this,t=l(t),!0),t)}}),S.inject({exportSVG:function(t){t=l(t);var e=this._children,r=this.getView(),n=L.pick(t.bounds,"view"),i=t.matrix||"view"===n&&r._matrix,i=i&&E.read([i]),r="view"===n?new x([0,0],r.getViewSize()):"content"===n?T._getBounds(e,i,{stroke:!0}).rect:x.read([n],0,{readNull:!0}),n={version:"1.1",xmlns:et.svg,"xmlns:xlink":et.xlink};r&&(n.width=r.width,n.height=r.height,(r.x||r.y)&&(n.viewBox=v.rectangle(r)));var n=et.create("svg",n,v),s=n;i&&!i.isIdentity()&&(s=n.appendChild(et.create("g",f(i),v)));for(var a=0,o=e.length;a<o;a++)s.appendChild(c(e[a],t,!0));return h(n,t)}})}(),function(){function c(t,e,r,n,i){t=et.get(t,e),r=null==t?n?null:r?"":0:r?t:parseFloat(t);return/%\s*$/.test(t)?r/100*(i?1:m[/x|^width/.test(e)?"width":"height"]):r}function p(t,e,r,n,i){return e=c(t,e||"x",!1,n,i),r=c(t,r||"y",!1,n,i),!n||null!=e&&null!=r?new U(e,r):null}function d(t,e,r,n,i){return e=c(t,e||"width",!1,n,i),r=c(t,r||"height",!1,n,i),!n||null!=e&&null!=r?new A(e,r):null}function h(t,e,r){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?s(t)||t:"lookup"===e?r[t]:t}function i(t,e,r,n){var i=t.childNodes,s="clippath"===e,a="defs"===e,o=new C,h=o._project,e=h._currentStyle,l=[];if(s||a||(o=g(o,t,n),h._currentStyle=o._style.clone()),n)for(var f=t.querySelectorAll("defs"),u=0,c=f.length;u<c;u++)v(f[u],r,!1);for(u=0,c=i.length;u<c;u++){var p,d=i[u];1!==d.nodeType||/^defs$/i.test(d.nodeName)||!(p=v(d,r,!1))||p instanceof k||l.push(p)}return o.addChildren(l),s&&(o=g(o.reduce(),t,n)),h._currentStyle=e,(s||a)&&(o.remove(),o=null),o}function t(t,e){for(var r=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),n=[],i=0,s=r.length;i<s;i+=2)n.push(new U(parseFloat(r[i]),parseFloat(r[i+1])));t=new Z(n);return"polygon"===e&&t.closePath(),t}function e(t,e){var r,n=(c(t,"href",!0)||"").substring(1),e="radialgradient"===e;if(n)(r=_[n].getGradient())._radial^e&&((r=r.clone())._radial=e);else{for(var i=t.childNodes,s=[],a=0,o=i.length;a<o;a++){var h=i[a];1===h.nodeType&&s.push(g(new W,h))}r=new V(s,e)}var l,f,u,n="userSpaceOnUse"!==c(t,"gradientUnits",!0);return e?(f=(l=p(t,"cx","cy",!1,n)).add(c(t,"r",!1,!1,n),0),u=p(t,"fx","fy",!0,n)):(l=p(t,"x1","y1",!1,n),f=p(t,"x2","y2",!1,n)),g(new H(r,l,f,u),t)._scaleToBounds=n,null}function r(t,e,r,n){if(t.transform){for(var i=(n.getAttribute(r)||"").split(/\)\s*/g),s=new E,a=0,o=i.length;a<o;a++){var h=i[a];if(!h)break;for(var l=h.split(/\(\s*/),h=l[0],f=l[1].split(/[\s,]+/g),u=0,c=f.length;u<c;u++)f[u]=parseFloat(f[u]);switch(h){case"matrix":s.append(new E(f[0],f[1],f[2],f[3],f[4],f[5]));break;case"rotate":s.rotate(f[0],f[1],f[2]);break;case"translate":s.translate(f[0],f[1]);break;case"scale":s.scale(f);break;case"skewX":s.skew(f[0],0);break;case"skewY":s.skew(0,f[0])}}t.transform(s)}}function n(t,e,r){r="fill-opacity"===r?"getFillColor":"getStrokeColor",r=t[r]&&t[r]();r&&r.setAlpha(parseFloat(e))}function l(t,e,r){var n=t.attributes[e],n=n&&n.value;return n||(e=L.camelize(e),(n=t.style[e])||r.node[e]===r.parent[e]||(n=r.node[e])),n?"none"===n?null:n:D}function g(n,i,t){var e,s;return i.style&&(e=i.parentNode,s={node:X.getStyles(i)||{},parent:!t&&!/^defs$/i.test(e.tagName)&&X.getStyles(e)||{}},L.each(o,function(t,e){var r=l(i,e,s);n=r!==D&&t(n,r,e,i,s)||n})),n}function s(t){t=t&&t.match(/\((?:["'#]*)([^"')]+)/),t=t&&t[1],t=t&&_[I?t.replace(I.location.href.split("#")[0]+"#",""):t];return t&&t._scaleToBounds&&((t=t.clone())._scaleToBounds=!0),t}function v(t,e,r){var n,i,s,a=t.nodeName.toLowerCase(),o="#document"!==a,h=M.body;r&&o&&(m=paper.getView().getSize(),m=d(t,null,null,!0)||m,n=et.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),i=t.parentNode,s=t.nextSibling,n.appendChild(t),h.appendChild(n));var l=paper.settings,f=l.applyMatrix,u=l.insertItems;l.applyMatrix=!1,l.insertItems=!1;var c=y[a],a=c&&c(t,a,e,r)||null;return l.insertItems=u,l.applyMatrix=f,a&&(!o||a instanceof C||(a=g(a,t,r)),l=e.onImport,o=o&&t.getAttribute("data-paper-data"),l&&(a=l(t,a,e)||a),e.expandShapes&&a instanceof P&&(a.remove(),a=a.toPath()),o&&(a._data=JSON.parse(o))),n&&(h.removeChild(n),i&&(s?i.insertBefore(t,s):i.appendChild(t))),r&&(_={},a&&L.pick(e.applyMatrix,f)&&a.matrix.apply(!0,!0)),a}function a(n,i,s){function t(t){try{var e="object"==typeof t?t:(new w.DOMParser).parseFromString(t,"image/svg+xml");if(!e.nodeName)throw e=null,new Error("Unsupported SVG source: "+n);paper=o,h=v(e,i,!0),i&&!1===i.insert||s._insertItem(D,h);var r=i.onLoad;r&&r(h,t)}catch(t){a(t)}}function a(t,e){var r=i.onError;if(!r)throw new Error(t);r(t,e)}if(!n)return null;i="function"==typeof i?{onLoad:i}:i||{};var o=paper,h=null;if("string"!=typeof n||/^.*</.test(n)){if("undefined"!=typeof File&&n instanceof File){var e=new FileReader;return e.onload=function(){t(e.result)},e.onerror=function(){a(e.error)},e.readAsText(n)}t(n)}else{var r=M.getElementById(n);r?t(r):$.request({url:n,async:!0,onLoad:t,onError:a})}return h}var m,_={},y={"#document":function(t,e,r,n){for(var i=t.childNodes,s=0,a=i.length;s<a;s++){var o=i[s];if(1===o.nodeType)return v(o,r,n)}},g:i,svg:i,clippath:i,polygon:t,polyline:t,path:function(t){return G.create(t.getAttribute("d"))},lineargradient:e,radialgradient:e,image:function(e){var t=new u(c(e,"href",!0));return t.on("load",function(){var t=d(e);this.setSize(t);t=this._matrix._transformPoint(p(e).add(t.divide(2)));this.translate(t)}),t},symbol:function(t,e,r,n){return new k(i(t,e,r,n),!0)},defs:i,use:function(t){var e=(c(t,"href",!0)||"").substring(1),e=_[e],t=p(t);return e?e instanceof k?e.place(t):e.clone().translate(t):null},circle:function(t){return new P.Circle(p(t,"cx","cy"),c(t,"r"))},ellipse:function(t){return new P.Ellipse({center:p(t,"cx","cy"),radius:d(t,"rx","ry")})},rect:function(t){return new P.Rectangle(new x(p(t),d(t)),d(t,"rx","ry"))},line:function(t){return new Z.Line(p(t,"x1","y1"),p(t,"x2","y2"))},text:function(t){var e=new j(p(t).add(p(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}},o=L.set(L.each(rt,function(r){this[r.attribute]=function(t,e){!t[r.set]||(t[r.set](h(e,r.type,r.fromSVG)),"color"!==r.type)||(e=t[r.get]())&&e._scaleToBounds&&(t=t.getBounds(),e.transform((new E).translate(t.getPoint()).scale(t.getSize())))}},{}),{id:function(t,e){(_[e]=t).setName&&t.setName(e)},"clip-path":function(t,e){e=s(e);if(e){if((e=e.clone()).setClipMask(!0),!(t instanceof C))return new C(e,t);t.insertChild(0,e)}},gradientTransform:r,transform:r,"fill-opacity":n,"stroke-opacity":n,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){var r;t.setOffset&&(r=e.match(/(.*)%$/),t.setOffset(r?r[1]/100:parseFloat(e)))},viewBox:function(t,e,r,n,i){var s,a,o=new x(h(e,"array")),e=d(n,null,null,!0);t instanceof C?(a=e?e.divide(o.getSize()):1,s=(new E).scale(a).translate(o.getPoint().negate()),a=t):t instanceof k&&(e&&o.setSize(e),a=t._item),a&&("visible"!==l(n,"overflow",i)&&((o=new P.Rectangle(o)).setClipMask(!0),a.addChild(o)),s&&a.transform(s))}});T.inject({importSVG:function(t,e){return a(t,e,this)}}),S.inject({importSVG:function(t,e){return this.activate(),a(t,e,this)}})}(),(paper=new(f.inject(L.exports,{Base:L,Numerical:N,Key:v,DomEvent:J,DomElement:X,document:M,window:I,Symbol:k,PlacedSymbol:s}))).agent.node&&require("./node/extend.js")(paper),"function"==typeof define&&define.amd?define("paper",paper):"object"==typeof module&&module&&(module.exports=paper),paper}.call(this,"object"==typeof self?self:null),NETXUS;function UnionFind(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}void 0===NETXUS&&(NETXUS=function(){}),NETXUS.RectanglePacker=function(t,e){this.root={},this.reset(t,e)},NETXUS.RectanglePacker.prototype.reset=function(t,e){this.root.x=0,this.root.y=0,this.root.w=t,this.root.h=e,delete this.root.lft,delete this.root.rgt,this.usedWidth=0,this.usedHeight=0},NETXUS.RectanglePacker.prototype.getDimensions=function(){return{w:this.usedWidth,h:this.usedHeight}},NETXUS.RectanglePacker.prototype.findCoords=function(t,e){var r=function t(e,r,n){function i(t){return{x:t.x,y:t.y,w:t.w,h:t.h}}if(e.lft){var s=t(e.lft,r,n);return s||t(e.rgt,r,n)}return e.used||r>e.w||n>e.h?null:r==e.w&&n==e.h?(e.used=!0,{x:e.x,y:e.y}):(e.lft=i(e),e.rgt=i(e),e.w-r>e.h-n?(e.lft.w=r,e.rgt.x=e.x+r,e.rgt.w=e.w-r):(e.lft.h=n,e.rgt.y=e.y+n,e.rgt.h=e.h-n),t(e.lft,r,n))}(this.root,t,e);return r&&(this.usedWidth<r.x+t&&(this.usedWidth=r.x+t),this.usedHeight<r.y+e&&(this.usedHeight=r.y+e)),r},UnionFind.prototype.find=function(t){for(var e=t,r=this.roots;r[t]!=t;)t=r[t];for(;r[e]!=t;){var n=r[e];r[e]=t,e=n}return t},UnionFind.prototype.link=function(t,e){var r,n,i=this.find(t),s=this.find(e);i!=s&&(r=this.ranks,n=this.roots,(t=r[i])<(e=r[s])?n[i]=s:e<t?n[s]=i:++r[n[s]=i])};var ICC=function(){var i=new Int16Array(1),s=new Uint8Array(i.buffer);function c(t,e){return t[e]<<8|t[e+1]}function p(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function l(t,e,r){for(var n="",i=0;i<r;i++)n+=String.fromCharCode(t[e+i]);return n}function f(t,e,r){for(var n="",i=0;i<r;i++){var s=t[e++]<<8|t[e++];n+=String.fromCharCode(s)}return n}function d(t,e,r){var n,i=l(t,e,4),s={v:i,H:r};if(e+=4,e+=4,"mluc"==i)for(var a=[],o=0;o<r;o++)a.push(t[e-8+o]);return"mluc"==i?function(t,e,r){var n=r-8,i=p(e,r);p(e,r+=4);r+=4,t.g=[];for(var s=0;s<i;s++){var a={};t.g.push(a),a.code=l(e,r,4);var o=p(e,r+4),h=p(e,r+8);r+=12,a.text=f(e,n+h,o>>>1)}}(s,t,e):"text"==i?(n=e,s.value=l(t,n,r-9)):"desc"==i?function(t,e,r){var n=p(e,r);r+=4,t.r=l(e,r,n-1);p(e,r+=n);n=p(e,r+=4);r+=4,t.d=f(e,r,n);c(e,r+=n);n=e[r+=2];r++,t.s=l(e,r,n)}(s,t,e):"mAB "==i?function(t,e,r){var n=r-8;t.j=e[r],r++,t.h=e[r],r++;var i=p(e,r+=2),s=p(e,r+=4),a=p(e,r+=4),o=p(e,r+=4),h=p(e,r+=4);if(r+=4,0!=i){t.c=[],r=n+i;for(var l=0;l<t.h;l++){var f=d(e,r,0);r+=f.H,t.c.push(f)}}if(0!=s){t.q=[];for(l=0;l<12;l++)t.q.push(v(e,n+s+4*l))}if(0!=a){t.w=[],r=n+a;for(l=0;l<t.h;l++){f=d(e,r,0);r+=f.H,t.w.push(f)}}if(0!=o){t.I=[],r=n+o,t.f=[];for(l=0;l<t.j;l++)t.f.push(e[r+l]);o=e[r+=16];r+=4;for(var u=t.h,l=0;l<t.j;l++)u*=t.f[l];if(1==o)for(l=0;l<u;l++)t.I.push(e[r+l]*(1/255));if(2==o)for(l=0;l<u;l++)t.I.push(c(e,r+2*l)*(1/65535))}if(0!=h){t.p=[],r=n+h;for(l=0;l<t.j;l++){f=d(e,r,0);r+=f.H,t.p.push(f)}}}(s,t,e):"mft1"==i?function(t,e,r){h(t,e,r),r+=40,t.G=u(e,r,t.j,256),r+=256*t.j,t.I=[];for(var n=Math.round(Math.pow(t.l,t.j))*t.h,i=0;i<n;i++)t.I.push(e[r+i]*(1/255));r+=n,t.e=u(e,r,t.h,256),r+=256*t.h}(s,t,e):"mft2"==i?function(t,e,r){h(t,e,r);var n=c(e,r+=40),i=c(e,r+=2);r+=2,t.G=g(e,r,t.j,n),r+=2*t.j*n,t.I=[];for(var s=Math.round(Math.pow(t.l,t.j))*t.h,a=0;a<s;a++)t.I.push(c(e,r+2*a)*(1/65535));r+=2*s,t.e=g(e,r,t.h,i),r+=2*t.h*i}(s,t,e):"XYZ "==i?(n=e,s.value=m(t,n)):"para"==i?function(t,e,r){t.z=c(e,r),r+=2,r+=2;var n=[1,3,4,5,7];t.g=[];for(var i=0;i<n[t.z];i++)t.g.push(v(e,r+4*i))}(s,t,e):"curv"==i?function(t,e,r){var n=p(e,r);if(r+=4,t.g=[],1==n)t.g.push(function(t,e){return t[e]+t[e+1]/256}(e,r));else for(var i=0;i<n;i++)t.g.push(c(e,r+2*i)*(1/65535));t.H=12+2*n}(s,t,e):"sf32"==i&&function(t,e,r,n){var i=n/4-2;t.value=[];for(var s=0;s<i;s++)t.value.push(v(e,r+4*s))}(s,t,e,r),0!=(3&s.H)&&(s.H+=4-(3&s.H)),s}function h(t,e,r){t.j=e[r],t.h=e[++r],t.l=e[++r],r++,r++,t.q=[];for(var n=0;n<9;n++)t.q.push(v(e,r)),r+=4}function u(t,e,r,n){for(var i=[],s=0;s<r;s++){var a=[];i.push(a);for(var o=0;o<n;o++)a.push(t[e]*(1/255)),e++}return i}function g(t,e,r,n){for(var i=[],s=0;s<r;s++){var a=[];i.push(a);for(var o=0;o<n;o++)a.push(c(t,e)*(1/65535)),e+=2}return i}function v(t,e){return r=t,n=e,s[0]=r[n+1],s[1]=r[n],i[0]+c(t,e+2)*(1/65536);var r,n}function m(t,e){for(var r=[],n=0;n<3;n++)r.push(v(t,e+4*n));return r}return{R:function(t){return{header:function(t){for(var e=l,r=p,n={cmmType:e(t,4,4),version:t[8]+"."+(t[9]>>>4)+"."+(15&t[9]),profileClass:e(t,12,4),spaceIn:e(t,16,4),spaceOut:e(t,20,4),date:c(t,24),platform:e(t,40,4),flags:r(t,44),deviceManufac:e(t,48,4),deviceModel:r(t,52),deviceAttribs:[r(t,56),r(t,60)],rendIntent:r(t,64),illuminant:m(t,68),creator:e(t,80,4)},i=0;i<5;i++)n.date+="."+c(t,26+2*i);return n}(t=new Uint8Array(t)),tags:function(t,e){var r=p,n={},i=r(t,e);e+=4;for(var s=0;s<i;s++){var a=l(t,e,4),o=r(t,e+=4),h=r(t,e+=4);e+=4,n[a]=d(t,o,h)}return n}(t,128)}}}}();ICC.U=function(){var f=[.9672,1,.81427],b={D:[3.1338561,-1.6168667,-.4906146,-.9787684,1.9161415,.033454,.0719453,-.2289914,1.4052427],t:[.4360747,.3850649,.14308038,.2225045,.7168786,.0606169,.0139322,.0971045,.7141733],n:function(t){return t<.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055},K:function(t){return t<.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},J:function(t,e,r){var n=b.b[0];b.b[1];t=n[~~(1e3*t)],e=n[~~(1e3*e)],r=n[~~(1e3*r)];var i=b.t,s=i[0]*t+i[1]*e+i[2]*r,n=i[3]*t+i[4]*e+i[5]*r,r=i[6]*t+i[7]*e+i[8]*r;return b.u(s,n,r)},u:function(t,e,r,n){t*=1/(n=null==n?f:n)[0],e*=1/n[1],r*=1/n[2];n=b.b[1],t=n[~~(1e3*t)],e=n[~~(1e3*e)];return{m:116*e-16,C:500*(t-e),a:200*(e-n[~~(1e3*r)])}},F:function(t,e,r,n){for(var i=(t+16)/116,s=i*i*i,a=i-r/200,o=a*a*a,t=e/500+i,e=t*t*t,t=(.008856<e?e:(116*t-16)/903.3)*(n=null==n?f:n)[0],i=(.008856<s?s:(116*i-16)/903.3)*n[1],r=(.008856<o?o:(116*a-16)/903.3)*n[2],n=b.D,h=[n[0]*t+n[1]*i+n[2]*r,n[3]*t+n[4]*i+n[5]*r,n[6]*t+n[7]*i+n[8]*r],l=0;l<3;l++)h[l]=Math.max(0,Math.min(1,b.n(h[l])));return{k:h[0],l:h[1],a:h[2]}}};function x(t,e,r){t[e]=r.m/100,t[e+1]=(128+r.C)/255,t[e+2]=(128+r.a)/255}function S(t,e,r,n,i){t[e]=s(t[e],r),t[e+1]=s(t[e+1],n),t[e+2]=s(t[e+2],i)}function s(t,e){var r=e.v,e=e.g;if("curv"==r)return C(t,e);if("para"==r)return function(t,e){var r=e.length,n=t,i=e[0],s=e[1],a=e[2],o=e[3],h=e[4],l=e[5],e=e[6];1==r?n=Math.pow(t,i):3==r?n=-a/s<=t?Math.pow(s*t+a,i):0:4==r?n=-a/s<=t?Math.pow(s*t+a,i)+o:o:5==r?n=h<=t?Math.pow(s*t+a,i):o*t:7==r&&(n=h<=t?Math.pow(s*t+a,i)+l:o*t+e);return n}(t,e);throw r}function C(t,e){var r=e.length;if(0==r)return t;if(1==r)return Math.pow(t,e[0]);t=t*(r-1)*.99999,r=~~t,t-=r;return(1-t)*e[r]+t*e[1+r]}function P(t,e,r,n){var i=[0,0,0,0,0,0,0,0,0,0,0,0],s=n-1.000001;k(s*t[e+0],s*t[e+1],s*t[e+2],n,r,i,3),t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2]}function k(t,e,r,n,i,s,a){var o=~~t,h=~~e,l=~~r,f=a*n*n,u=a*(l+n*h+n*n*o),n=a*(l+n*(1+h)+n*n*o);T(u,u+a,i,r-l,0,s),T(n,n+a,i,r-l,3,s),T(u+f,u+a+f,i,r-l,6,s),T(n+f,n+a+f,i,r-l,9,s),T(0,3,s,e-h,0,s),T(6,9,s,e-h,6,s),T(0,6,s,t-o,0,s)}function T(t,e,r,n,i,s){var a=1-n;s[i+0]=a*r[t]+n*r[e],s[i+1]=a*r[t+1]+n*r[e+1],s[i+2]=a*r[t+2]+n*r[e+2]}return b.b=function(){for(var t=[],e=[],r=0;r<2e3;r++){var n=r/1e3;t[r]=b.K(n),e[r]=.008856<n?Math.pow(n,1/3):1/116*(903.3*n+16)}return[t,e]}(),{rgba8LUT:function(t,e){for(var r=e*e*e,n=new Uint8Array(4*r),i=0;i<r;i++){var s=3*i,a=s+i,o=Math.max(0,Math.min(1,t[s])),h=Math.max(0,Math.min(1,t[1+s])),l=Math.max(0,Math.min(1,t[2+s]));n[a]=~~(.5+255*o),n[a+1]=~~(.5+255*h),n[a+2]=~~(.5+255*l),n[a+3]=255,t[s]=o,t[1+s]=h,t[2+s]=l}return n},sampleLUT:function(t,e){var r=t.tags,n=(t=t.header).spaceIn.toLowerCase(),i=t.spaceOut.toLowerCase(),s="cmyk"==n?4:3,a=function(t,e){for(var r=1/(t-1),n=[],i=0;i<t;i++)for(var s=0;s<t;s++)for(var a=0;a<t;a++)if(3==e)n.push(i*r,s*r,a*r);else for(var o=0;o<t;o++)n.push(i*r,s*r,a*r,o*r);return n}(e,s),o=r.wtpt?r.wtpt.value:null;"cmyk"==n&&(o=null);for(var h,l,f,u,c,p,d,g,v,m,_=0;_<a.length;_+=s){if("rgb "!=n&&"cmyk"!=n){if("lab "!=n)throw n;x(a,_,b.J(a[_],a[_+1],a[_+2]))}if(r.rTRC&&S(a,_,h=r.rTRC,l=r.gTRC,f=r.bTRC),r.rXYZ&&(h=r.rXYZ.value,l=r.gXYZ.value,f=r.bXYZ.value,p=h,d=l,w=f,m=v=g=void 0,g=(u=a)[c=_],v=u[c+1],m=u[c+2],u[c]=g*p[0]+v*d[0]+m*w[0],u[c+1]=g*p[1]+v*d[1]+m*w[1],u[c+2]=g*p[2]+v*d[2]+m*w[2]),r.A2B0){var y=r.A2B0,w=y.v;if("mAB "==w)!function(t,e,r){r.I&&P(t,e,r.I,r.f[0]);r.w&&S(t,e,r.w[0],r.w[1],r.w[2]);r.q&&function(t,e,r){var n=t[e],i=t[e+1],s=t[e+2];t[e]=Math.max(0,Math.min(1,r[0]*n+r[1]*i+r[2]*s+r[9])),t[e+1]=Math.max(0,Math.min(1,r[3]*n+r[4]*i+r[5]*s+r[10])),t[e+2]=Math.max(0,Math.min(1,r[6]*n+r[7]*i+r[8]*s+r[11]))}(t,e,r.q)}(a,_,y);else{if("mft1"!=w&&"mft2"!=w)throw w;!function(t,e,r){for(var n=0;n<r.j;n++)t[e+n]=C(t[e+n],r.G[n]);3==r.j&&P(t,e,r.I,r.l);4==r.j&&function(t,e,r,n){var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=n-1.000001,a=s*t[e+0],o=s*t[e+1],h=s*t[e+2],l=s*t[e+3],s=~~a;k(o,h,l+s*n*n*n,n,r,i,3),i[12]=i[0],i[13]=i[1],i[14]=i[2],k(o,h,l+(1+s)*n*n*n,n,r,i,3),T(12,0,i,a-s,0,i),t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2]}(t,e,r.I,r.l)}(a,_,y)}}if("rgb "!=i){if("xyz "!=i&&"lab "!=i)throw i;"xyz "==i&&x(a,_,b.u(a[_],a[_+1],a[_+2],o));y=b.F(100*a[_],255*a[_+1]-128,255*a[_+2]-128,o);a[_]=y.k,a[_+1]=y.l,a[_+2]=y.a}}return a},applyLUT:function(t,e,r,n){for(var i=[0,0,0,0,0,0,0,0,0,0,0,0],s=(e-1.000001)/255,a=r.length,o=0;o<a;o+=4)k(s*r[o],s*r[o+1],s*r[o+2],e,t,i,3),n[o]=~~(.5+255*i[0]),n[o+1]=~~(.5+255*i[1]),n[o+2]=~~(.5+255*i[2])},applyLUT4:function(t,e,r,n){for(var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=(e-1.000001)/255,a=r.length,o=e*e*e,h=0;h<a;h+=4){var l=s*r[h],f=s*r[h+1],u=s*r[h+2],c=s*r[h+3],p=~~l;k(f,u,c+p*o,e,t,i,4),i[12]=i[0],i[13]=i[1],i[14]=i[2],k(f,u,c+(1+p)*o,e,t,i,4),T(12,0,i,l-p,0,i),n[h]=~~(.5+255*i[0]),n[h+1]=~~(.5+255*i[1]),n[h+2]=~~(.5+255*i[2])}},profileName:function(t){return(t=t.tags.desc).r||t.g[0].text}}}(),function(){"use strict";function t(t){t?(f[0]=f[16]=f[1]=f[2]=f[3]=f[4]=f[5]=f[6]=f[7]=f[8]=f[9]=f[10]=f[11]=f[12]=f[13]=f[14]=f[15]=0,this.blocks=f):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var h="object"==typeof window?window:{},s=!h.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;s&&(h=global);var i=!h.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,e="function"==typeof define&&define.amd,r="0123456789abcdef".split(""),o=[-2147483648,8388608,32768,128],n=[24,16,8,0],a=["hex","array","digest","arrayBuffer"],f=[],u=function(r){return function(e){return new t(!0).update(e)[r]()}},c=function(){var e=u("hex");(e=s?p(e):e).create=function(){return new t},e.update=function(t){return e.create().update(t)};for(var r=0;r<a.length;++r){var n=a[r];e[n]=u(n)}return e},p=function(t){var h=eval("require('crypto')"),s=eval("require('buffer').Buffer"),i=function(e){if("string"==typeof e)return h.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return t(e);return h.createHash("sha1").update(new s(e)).digest("hex")};return i};t.prototype.update=function(t){if(!this.finalized){for(var e,r,i="string"!=typeof t,s=0,a=(t=i&&t.constructor===h.ArrayBuffer?new Uint8Array(t):t).length||0,o=this.blocks;s<a;){if(this.hashed&&(this.hashed=!1,o[0]=this.block,o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),i)for(r=this.start;s<a&&r<64;++s)o[r>>2]|=t[s]<<n[3&r++];else for(r=this.start;s<a&&r<64;++s)(e=t.charCodeAt(s))<128?o[r>>2]|=e<<n[3&r++]:(e<2048?o[r>>2]|=(192|e>>6)<<n[3&r++]:(e<55296||57344<=e?o[r>>2]|=(224|e>>12)<<n[3&r++]:(e=65536+((1023&e)<<10|1023&t.charCodeAt(++s)),o[r>>2]|=(240|e>>18)<<n[3&r++],o[r>>2]|=(128|e>>12&63)<<n[3&r++]),o[r>>2]|=(128|e>>6&63)<<n[3&r++]),o[r>>2]|=(128|63&e)<<n[3&r++]);this.lastByteIndex=r,this.bytes+=r-this.start,64<=r?(this.block=o[16],this.start=r-64,this.hash(),this.hashed=!0):this.start=r}return 4294967295<this.bytes&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},t.prototype.finalize=function(){var t,e;this.finalized||(this.finalized=!0,t=this.blocks,e=this.lastByteIndex,t[16]=this.block,t[e>>2]|=o[3&e],this.block=t[16],56<=e&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash())},t.prototype.hash=function(){for(var t,e=this.h0,r=this.h1,n=this.h2,i=this.h3,s=this.h4,a=this.blocks,o=16;o<80;++o)t=a[o-3]^a[o-8]^a[o-14]^a[o-16],a[o]=t<<1|t>>>31;for(o=0;o<20;o+=5)e=(t=(r=(t=(n=(t=(i=(t=(s=(t=e<<5|e>>>27)+(r&n|~r&i)+s+1518500249+a[o]<<0)<<5|s>>>27)+(e&(r=r<<30|r>>>2)|~e&n)+i+1518500249+a[o+1]<<0)<<5|i>>>27)+(s&(e=e<<30|e>>>2)|~s&r)+n+1518500249+a[o+2]<<0)<<5|n>>>27)+(i&(s=s<<30|s>>>2)|~i&e)+r+1518500249+a[o+3]<<0)<<5|r>>>27)+(n&(i=i<<30|i>>>2)|~n&s)+e+1518500249+a[o+4]<<0,n=n<<30|n>>>2;for(;o<40;o+=5)e=(t=(r=(t=(n=(t=(i=(t=(s=(t=e<<5|e>>>27)+(r^n^i)+s+1859775393+a[o]<<0)<<5|s>>>27)+(e^(r=r<<30|r>>>2)^n)+i+1859775393+a[o+1]<<0)<<5|i>>>27)+(s^(e=e<<30|e>>>2)^r)+n+1859775393+a[o+2]<<0)<<5|n>>>27)+(i^(s=s<<30|s>>>2)^e)+r+1859775393+a[o+3]<<0)<<5|r>>>27)+(n^(i=i<<30|i>>>2)^s)+e+1859775393+a[o+4]<<0,n=n<<30|n>>>2;for(;o<60;o+=5)e=(t=(r=(t=(n=(t=(i=(t=(s=(t=e<<5|e>>>27)+(r&n|r&i|n&i)+s-1894007588+a[o]<<0)<<5|s>>>27)+(e&(r=r<<30|r>>>2)|e&n|r&n)+i-1894007588+a[o+1]<<0)<<5|i>>>27)+(s&(e=e<<30|e>>>2)|s&r|e&r)+n-1894007588+a[o+2]<<0)<<5|n>>>27)+(i&(s=s<<30|s>>>2)|i&e|s&e)+r-1894007588+a[o+3]<<0)<<5|r>>>27)+(n&(i=i<<30|i>>>2)|n&s|i&s)+e-1894007588+a[o+4]<<0,n=n<<30|n>>>2;for(;o<80;o+=5)e=(t=(r=(t=(n=(t=(i=(t=(s=(t=e<<5|e>>>27)+(r^n^i)+s-899497514+a[o]<<0)<<5|s>>>27)+(e^(r=r<<30|r>>>2)^n)+i-899497514+a[o+1]<<0)<<5|i>>>27)+(s^(e=e<<30|e>>>2)^r)+n-899497514+a[o+2]<<0)<<5|n>>>27)+(i^(s=s<<30|s>>>2)^e)+r-899497514+a[o+3]<<0)<<5|r>>>27)+(n^(i=i<<30|i>>>2)^s)+e-899497514+a[o+4]<<0,n=n<<30|n>>>2;this.h0=this.h0+e<<0,this.h1=this.h1+r<<0,this.h2=this.h2+n<<0,this.h3=this.h3+i<<0,this.h4=this.h4+s<<0},t.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,i=this.h3,s=this.h4;return r[t>>28&15]+r[t>>24&15]+r[t>>20&15]+r[t>>16&15]+r[t>>12&15]+r[t>>8&15]+r[t>>4&15]+r[15&t]+r[e>>28&15]+r[e>>24&15]+r[e>>20&15]+r[e>>16&15]+r[e>>12&15]+r[e>>8&15]+r[e>>4&15]+r[15&e]+r[n>>28&15]+r[n>>24&15]+r[n>>20&15]+r[n>>16&15]+r[n>>12&15]+r[n>>8&15]+r[n>>4&15]+r[15&n]+r[i>>28&15]+r[i>>24&15]+r[i>>20&15]+r[i>>16&15]+r[i>>12&15]+r[i>>8&15]+r[i>>4&15]+r[15&i]+r[s>>28&15]+r[s>>24&15]+r[s>>20&15]+r[s>>16&15]+r[s>>12&15]+r[s>>8&15]+r[s>>4&15]+r[15&s]},t.prototype.toString=t.prototype.hex,t.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4;return[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,i>>24&255,i>>16&255,i>>8&255,255&i]},t.prototype.array=t.prototype.digest,t.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};var y=c();i?module.exports=y:(h.sha1=y,e&&define(function(){return y}))}();var EXRLoader={parse:function(t){var e={FloatType:1,UnsignedByteType:2,HalfFloatType:3,RGBEFormat:4};this.type=e.FloatType;var b=65536,x=b>>3,v=14,c=65537,f=1<<v,m=f-1,r=32768,n=65535,p=59,d=63,g=2+d-p,i=8,s=4,a=4,U=2,o=1,E=0,O=1,D=0,L=2,h=Math.pow(2.7182818,2.2),l=new DataView(new ArrayBuffer(8));var _={l:0,c:0,lc:0};function y(t,e,r,n,i){for(;r<t;)e=e<<8|W(n,i),r+=8;_.l=e>>(r-=t)&(1<<t)-1,_.c=e,_.lc=r}var w=new Array(59);function u(t,e,r,n,i,s,a){for(var o=r,h=0,l=0;i<=s;i++){if(o.value-r.value>n)return;y(6,h,l,t,o);var f=_.l;if(h=_.c,l=_.lc,(a[i]=f)==d){if(o.value-r.value>n)throw"Something wrong with hufUnpackEncTable";y(8,h,l,t,o);var u=_.l+g,h=_.c,l=_.lc;if(s+1<i+u)throw"Something wrong with hufUnpackEncTable";for(;u--;)a[i++]=0;i--}else if(p<=f){if(i+(u=f-p+2)>s+1)throw"Something wrong with hufUnpackEncTable";for(;u--;)a[i++]=0;i--}}!function(t){for(var e=0;e<=58;++e)w[e]=0;for(e=0;e<c;++e)w[t[e]]+=1;for(var r=0,e=58;0<e;--e){var n=r+w[e]>>1;w[e]=r,r=n}for(e=0;e<c;++e){var i=t[e];0<i&&(t[e]=i|w[i]++<<6)}}(a)}var S={c:0,lc:0};function C(t,e,r,n){t=t<<8|W(r,n),e+=8,S.c=t,S.lc=e}var P={c:0,lc:0};function k(t,e,r,n,i,s,a,o,h,l){if(t==e){n<8&&(C(r,n,i,a),r=S.c,n=S.lc);var f=r>>(n-=8),f=new Uint8Array([f])[0];if(h.value+f>l)return;for(var u=o[h.value-1];0<f--;)o[h.value++]=u}else{if(!(h.value<l))return;o[h.value++]=t}P.c=r,P.lc=n}function T(t){return 65535&t}function I(t){t=T(t);return 32767<t?t-65536:t}var M={a:0,b:0};function F(t,e){t=I(t),e=I(e),t=t+(1&e)+(e>>1),e=t-e;M.a=t,M.b=e}function A(t,e){t=T(t),e=T(e),t=t-(e>>1)&n;M.a=e+t-r&n,M.b=t}function N(t,e,r,n,i,g){var s=r.value,a=V(e,r),o=V(e,r);r.value+=4;var h=V(e,r);if(r.value+=4,a<0||c<=a||o<0||c<=o)throw"Something wrong with HUF_ENCSIZE";var l=new Array(c),e=new Array(f);if(function(t){for(var e=0;e<f;e++)t[e]={},t[e].len=0,t[e].lit=0,t[e].p=null}(e),u(t,0,r,n-(r.value-s),a,o,l),h>8*(n-(r.value-s)))throw"Something wrong with hufUncompress";!function(t,e,r,n){for(;e<=r;e++){var i=t[e]>>6,s=63&t[e];if(i>>s)throw"Invalid table entry";if(v<s){if((h=n[i>>s-v]).len)throw"Invalid table entry";if(h.lit++,h.p){var a=h.p;h.p=new Array(h.lit);for(var o=0;o<h.lit-1;++o)h.p[o]=a[o]}else h.p=new Array(1);h.p[h.lit-1]=e}else if(s)for(var h,l=0,o=1<<v-s;0<o;o--){if((h=n[(i<<v-s)+l]).len||h.p)throw"Invalid table entry";h.len=s,h.lit=e,l++}}}(l,a,o,e),function(t,e,r,n,i,s,a,o){for(var h=0,l=0,f=g,u=Math.trunc(n.value+(i+7)/8);n.value<u;)for(C(h,l,r,n),h=S.c,l=S.lc;v<=l;)if((d=e[h>>l-v&m]).len)l-=d.len,k(d.lit,s,h,l,r,0,n,a,o,f),h=P.c,l=P.lc;else{if(!d.p)throw"hufDecode issues";for(var c=0;c<d.lit;c++){for(var p=63&t[d.p[c]];l<p&&n.value<u;)C(h,l,r,n),h=S.c,l=S.lc;if(p<=l&&t[d.p[c]]>>6==(h>>l-p&(1<<p)-1)){l-=p,k(d.p[c],s,h,l,r,0,n,a,o,f),h=P.c,l=P.lc;break}}if(c==d.lit)throw"hufDecode issues"}var d,i=8-i&7;for(h>>=i,l-=i;0<l;){if(!(d=e[h<<v-l&m]).len)throw"hufDecode issues";l-=d.len,k(d.lit,s,h,l,r,0,n,a,o,f),h=P.c,l=P.lc}}(l,e,t,r,h,o,i,{value:0})}function R(t){for(var e=1;e<t.length;e++){var r=t[e-1]+t[e]-128;t[e]=r}}function B(t,e){for(var r=0,n=Math.floor((t.length+1)/2),i=0,s=t.length-1;!(s<i||(e[i++]=t[r++],s<i));)e[i++]=t[n++]}function z(t){for(var e=t.byteLength,r=new Array,n=0,i=new DataView(t);0<e;){var s=i.getInt8(n++);if(s<0){e-=1+(o=-s);for(var a=0;a<o;a++)r.push(i.getUint8(n++))}else{var o=s;e-=2;for(var h=i.getUint8(n++),a=0;a<o+1;a++)r.push(h)}}return r}function G(t,e,r){for(var n,i=0;i<64;++i)e[r+i]=K((n=t[i])<=1?Math.sign(n)*Math.pow(Math.abs(n),2.2):Math.sign(n)*Math.pow(h,Math.abs(n)-1))}function Z(t){var e=t.array.slice(t.offset.value,t.offset.value+t.size),t=new Uint8Array(pako.inflate(e).buffer),e=new Uint8Array(t.length);return R(t),B(t,e),new DataView(e.buffer)}function q(t){var e=t.viewer,r={value:t.offset.value},n=new Uint8Array(t.width*t.lines*(rt.channels.length*t.type*U)),i={version:J(e,r),unknownUncompressedSize:J(e,r),unknownCompressedSize:J(e,r),acCompressedSize:J(e,r),dcCompressedSize:J(e,r),rleCompressedSize:J(e,r),rleUncompressedSize:J(e,r),rleRawSize:J(e,r),totalAcUncompressedCount:J(e,r),totalDcUncompressedCount:J(e,r),acCompression:J(e,r)};if(i.version<2)throw"EXRLoader.parse: "+rt.compression+" version "+i.version+" is unsupported";for(var s=new Array,a=$(e,r)-U;0<a;){var o=j(e.buffer,r),h=X(e,r),l=h>>2&3,f=new Int8Array([(h>>4)-1])[0],h=X(e,r);s.push({name:o,index:f,type:h,compression:l}),a-=o.length+3}for(var u=rt.channels,c=new Array(t.channels),p=0;p<t.channels;++p){var d=c[p]={},g=u[p];d.name=g.name,d.compression=D,d.decoded=!1,d.type=g.pixelType,d.pLinear=g.pLinear,d.width=t.width,d.height=t.lines}for(var v,m,_={idx:new Array(3)},y=0;y<t.channels;++y)for(d=c[y],p=0;p<s.length;++p){var w=s[p];d.name==w.name&&(d.compression=w.compression,0<=w.index&&(_.idx[w.index]=y),d.offset=y)}if(0<i.acCompressedSize)switch(i.acCompression){case E:var b=new Uint16Array(i.totalAcUncompressedCount);N(t.array,e,r,i.acCompressedSize,b,i.totalAcUncompressedCount);break;case O:var x=t.array.slice(r.value,r.value+i.totalAcUncompressedCount),b=new Uint16Array(pako.inflate(x).buffer);r.value+=i.totalAcUncompressedCount}0<i.dcCompressedSize&&(v={array:t.array,offset:r,size:i.dcCompressedSize},v=new Uint16Array(Z(v).buffer),r.value+=i.dcCompressedSize),0<i.rleRawSize&&(x=t.array.slice(r.value,r.value+i.rleCompressedSize),m=z(pako.inflate(x).buffer),r.value+=i.rleCompressedSize);for(var S=0,C=new Array(c.length),p=0;p<C.length;++p)C[p]=new Array;for(var P=0;P<t.lines;++P)for(var k=0;k<c.length;++k)C[k].push(S),S+=c[k].width*t.type*U;for(!function(t,e,r,n,i,s){for(var a=new DataView(s.buffer),o=r[t.idx[0]].width,h=r[t.idx[0]].height,l=Math.floor(o/8),f=Math.ceil(o/8),u=Math.ceil(h/8),c=o-8*(f-1),p=h-8*(u-1),d={value:0},g=new Array(3),v=new Array(3),m=new Array(3),_=new Array(3),y=new Array(3),w=0;w<3;++w)y[w]=e[t.idx[w]],g[w]=w<1?0:g[w-1]+f*u,v[w]=new Float32Array(64),m[w]=new Uint16Array(64),_[w]=new Uint16Array(64*f);for(var b,x,S=0;S<u;++S){var C=8;S==u-1&&(C=p);for(var P=8,k=0;k<f;++k){for(k==f-1&&(P=c),w=0;w<3;++w)m[w].fill(0),m[w][0]=i[g[w]++],function(t,e,r){for(var n,i=1;i<64;)65280==(n=e[t.value])?i=64:n>>8==255?i+=255&n:(r[i]=n,i++),t.value++}(d,n,m[w]),b=m[w],(x=v[w])[0]=Q(b[0]),x[1]=Q(b[1]),x[2]=Q(b[5]),x[3]=Q(b[6]),x[4]=Q(b[14]),x[5]=Q(b[15]),x[6]=Q(b[27]),x[7]=Q(b[28]),x[8]=Q(b[2]),x[9]=Q(b[4]),x[10]=Q(b[7]),x[11]=Q(b[13]),x[12]=Q(b[16]),x[13]=Q(b[26]),x[14]=Q(b[29]),x[15]=Q(b[42]),x[16]=Q(b[3]),x[17]=Q(b[8]),x[18]=Q(b[12]),x[19]=Q(b[17]),x[20]=Q(b[25]),x[21]=Q(b[30]),x[22]=Q(b[41]),x[23]=Q(b[43]),x[24]=Q(b[9]),x[25]=Q(b[11]),x[26]=Q(b[18]),x[27]=Q(b[24]),x[28]=Q(b[31]),x[29]=Q(b[40]),x[30]=Q(b[44]),x[31]=Q(b[53]),x[32]=Q(b[10]),x[33]=Q(b[19]),x[34]=Q(b[23]),x[35]=Q(b[32]),x[36]=Q(b[39]),x[37]=Q(b[45]),x[38]=Q(b[52]),x[39]=Q(b[54]),x[40]=Q(b[20]),x[41]=Q(b[22]),x[42]=Q(b[33]),x[43]=Q(b[38]),x[44]=Q(b[46]),x[45]=Q(b[51]),x[46]=Q(b[55]),x[47]=Q(b[60]),x[48]=Q(b[21]),x[49]=Q(b[34]),x[50]=Q(b[37]),x[51]=Q(b[47]),x[52]=Q(b[50]),x[53]=Q(b[56]),x[54]=Q(b[59]),x[55]=Q(b[61]),x[56]=Q(b[35]),x[57]=Q(b[36]),x[58]=Q(b[48]),x[59]=Q(b[49]),x[60]=Q(b[57]),x[61]=Q(b[58]),x[62]=Q(b[62]),x[63]=Q(b[63]),function(t){for(var e=.5*Math.cos(.7853975),r=.5*Math.cos(.196349375),n=.5*Math.cos(.39269875),i=.5*Math.cos(3*3.14159/16),s=.5*Math.cos(.981746875),a=.5*Math.cos(3*3.14159/8),o=.5*Math.cos(1.374445625),h=new Array(4),l=new Array(4),f=new Array(4),u=new Array(4),c=0;c<8;++c){var p=8*c;h[0]=n*t[2+p],h[1]=a*t[2+p],h[2]=n*t[6+p],h[3]=a*t[6+p],l[0]=r*t[1+p]+i*t[3+p]+s*t[5+p]+o*t[7+p],l[1]=i*t[1+p]-o*t[3+p]-r*t[5+p]-s*t[7+p],l[2]=s*t[1+p]-r*t[3+p]+o*t[5+p]+i*t[7+p],l[3]=o*t[1+p]-s*t[3+p]+i*t[5+p]-r*t[7+p],f[0]=e*(t[0+p]+t[4+p]),f[3]=e*(t[0+p]-t[4+p]),f[1]=h[0]+h[3],f[2]=h[1]-h[2],u[0]=f[0]+f[1],u[1]=f[3]+f[2],u[2]=f[3]-f[2],u[3]=f[0]-f[1],t[0+p]=u[0]+l[0],t[1+p]=u[1]+l[1],t[2+p]=u[2]+l[2],t[3+p]=u[3]+l[3],t[4+p]=u[3]-l[3],t[5+p]=u[2]-l[2],t[6+p]=u[1]-l[1],t[7+p]=u[0]-l[0]}for(var d=0;d<8;++d)h[0]=n*t[16+d],h[1]=a*t[16+d],h[2]=n*t[48+d],h[3]=a*t[48+d],l[0]=r*t[8+d]+i*t[24+d]+s*t[40+d]+o*t[56+d],l[1]=i*t[8+d]-o*t[24+d]-r*t[40+d]-s*t[56+d],l[2]=s*t[8+d]-r*t[24+d]+o*t[40+d]+i*t[56+d],l[3]=o*t[8+d]-s*t[24+d]+i*t[40+d]-r*t[56+d],f[0]=e*(t[d]+t[32+d]),f[3]=e*(t[d]-t[32+d]),f[1]=h[0]+h[3],f[2]=h[1]-h[2],u[0]=f[0]+f[1],u[1]=f[3]+f[2],u[2]=f[3]-f[2],u[3]=f[0]-f[1],t[0+d]=u[0]+l[0],t[8+d]=u[1]+l[1],t[16+d]=u[2]+l[2],t[24+d]=u[3]+l[3],t[32+d]=u[3]-l[3],t[40+d]=u[2]-l[2],t[48+d]=u[1]-l[1],t[56+d]=u[0]-l[0]}(v[w]);for(function(t){for(var e=0;e<64;++e){var r=t[0][e],n=t[1][e],i=t[2][e];t[0][e]=r+1.5747*i,t[1][e]=r-.1873*n-.4682*i,t[2][e]=r+1.8556*n}}(v),w=0;w<3;++w)G(v[w],_[w],64*k)}for(var T=0,w=0;w<3;++w){for(var I=r[t.idx[w]].type,M=8*S;M<8*S+C;++M)for(T=y[w][M],k=0;k<l;++k){var F=64*k+8*(7&M);a.setUint16(T+0*U*I,_[w][F+0],!0),a.setUint16(T+ +U*I,_[w][F+1],!0),a.setUint16(T+2*U*I,_[w][F+2],!0),a.setUint16(T+3*U*I,_[w][F+3],!0),a.setUint16(T+4*U*I,_[w][F+4],!0),a.setUint16(T+5*U*I,_[w][F+5],!0),a.setUint16(T+6*U*I,_[w][F+6],!0),a.setUint16(T+7*U*I,_[w][F+7],!0),T+=8*U*I}if(l!=f)for(M=8*S;M<8*S+C;++M)for(var T=y[w][M]+8*l*U*I,F=64*l+8*(7&M),A=0;A<P;++A)a.setUint16(T+A*U*I,_[w][F+A],!0)}}var E=new Uint16Array(o),a=new DataView(s.buffer);for(w=0;w<3;++w)if(r[t.idx[w]].decoded=!0,I=r[t.idx[w]].type,2==r[w].type)for(M=0;M<h;++M){for(T=y[w][M],A=0;A<o;++A)E[A]=a.getUint16(T+A*U*I,!0);for(A=0;A<o;++A)a.setFloat32(T+A*U*I,Q(E[A]),!0)}}(_,C,c,b,v,n),p=0;p<c.length;++p)if(!(d=c[p]).decoded){if(d.compression!==L)throw"EXRLoader.parse: unsupported channel compression";for(var T=0,I=0,P=0;P<t.lines;++P){for(var M=C[p][T],F=0;F<d.width;++F){for(var A=0;A<U*d.type;++A)n[M++]=m[I+A*d.width*d.height];I++}T++}}return new DataView(n.buffer)}function j(t,e){for(var r=new Uint8Array(t),n=0;0!=r[e.value+n];)n+=1;t=(new TextDecoder).decode(r.slice(e.value,e.value+n));return e.value=e.value+n+1,t}function H(t,e){t=t.getInt32(e.value,!0);return e.value=e.value+a,t}function V(t,e){t=t.getUint32(e.value,!0);return e.value=e.value+a,t}function W(t,e){t=t[e.value];return e.value=e.value+o,t}function X(t,e){t=t.getUint8(e.value);return e.value=e.value+o,t}function J(t,e){t=Number(t.getBigInt64(e.value,!0));return e.value+=i,t}function Y(t,e){t=t.getFloat32(e.value,!0);return e.value+=s,t}function Q(t){var e=(31744&t)>>10,r=1023&t;return(t>>15?-1:1)*(e?31==e?r?NaN:1/0:Math.pow(2,e-15)*(1+r/1024):r/1024*6103515625e-14)}function K(t){l.setFloat32(0,t);var e=l.getInt32(0),r=e>>16&32768,n=e>>12&2047,t=e>>23&255;return t<103?r:142<t?(r|=31744)|((255==t?0:1)&&8388607&e):t<113?r|((n|=2048)>>114-t)+(n>>113-t&1):(r|=t-112<<10|n>>1)+(1&n)}function $(t,e){t=t.getUint16(e.value,!0);return e.value+=U,t}var tt=new DataView(t),et=new Uint8Array(t),rt={};tt.getUint32(0,!0),tt.getUint8(4,!0),tt.getUint8(5,!0);for(var nt,it,st,at,ot,ht,lt,ft,ut,ct,pt={value:8},dt=!0;dt;){var gt,vt=j(t,pt);0==vt?dt=!1:(nt=tt,at=j(it=t,st=pt),ot=V(tt,pt),ct=ut=ft=lt=ht=void 0,gt="string"===at||"stringvector"===at||"iccProfile"===at?function(t,e,r){t=(new TextDecoder).decode(new Uint8Array(t).slice(e.value,e.value+r));return e.value=e.value+r,t}(it,st,ot):"chlist"===at?function(t,e,r,n){for(var i=r.value,s=[];r.value<i+n-1;){var a=j(e,r),o=H(t,r),h=X(t,r);r.value+=3;var l=H(t,r),f=H(t,r);s.push({name:a,pixelType:o,pLinear:h,xSampling:l,ySampling:f})}return r.value+=1,s}(nt,it,st,ot):"chromaticities"===at?{redX:Y(it=nt,ct=st),redY:Y(it,ct),greenX:Y(it,ct),greenY:Y(it,ct),blueX:Y(it,ct),blueY:Y(it,ct),whiteX:Y(it,ct),whiteY:Y(it,ct)}:"compression"===at?["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][X(nt,st)]:"box2i"===at?{xMin:V(ct=nt,ut=st),yMin:V(ct,ut),xMax:V(ct,ut),yMax:V(ct,ut)}:"lineOrder"===at?["INCREASING_Y"][X(nt,st)]:"float"===at?Y(nt,st):"v2f"===at?[Y(ut=nt,ft=st),Y(ut,ft)]:"v3f"===at?[Y(ft=nt,lt=st),Y(ft,lt),Y(ft,lt)]:"int"===at?H(nt,st):"rational"===at?[H(lt=nt,ht=st),V(lt,ht)]:"timecode"===at?[V(ht=nt,nt=st),V(ht,nt)]:(st.value+=ot,void console.log("Cannot parse value for unsupported type: "+at)),rt[vt]=gt)}var mt,_t,yt,wt,bt=rt.dataWindow.yMax+1;switch(rt.compression){case"NO_COMPRESSION":_t=1,mt=function(t){return new DataView(t.array.buffer,t.offset.value,t.size)};break;case"RLE_COMPRESSION":_t=1,mt=function(t){var e=t.viewer.buffer.slice(t.offset.value,t.offset.value+t.size),t=new Uint8Array(z(e)),e=new Uint8Array(t.length);return R(t),B(t,e),new DataView(e.buffer)};break;case"ZIPS_COMPRESSION":_t=1,mt=Z;break;case"ZIP_COMPRESSION":_t=16,mt=Z;break;case"PXR24_COMPRESSION":_t=16,mt=function(t){for(var t=t.array.slice(t.offset.value,t.offset.value+t.size),e=new Uint8Array(pako.inflate(t).buffer),t=new Uint8Array(e.length),r=t,n=kt,i=0;i<r.length;i+=2*n){for(var s=0;s<n;s++)r[i+2*s]=e[i+s+n],r[i+2*s+1]=e[i+s];for(var a=new Uint16Array(r.buffer,i,n),s=1;s<n;s++)a[s]=a[s-1]+a[s]&65535}return new DataView(t.buffer)};break;case"PIZ_COMPRESSION":_t=32,mt=function(t){for(var e=t.viewer,r={value:t.offset.value},n=t.width*_t*(rt.channels.length*t.type),i=new Uint16Array(n),s=new Uint8Array(x),a=0,o=new Array(t.channels),h=0;h<t.channels;h++)o[h]={},o[h].start=a,o[h].end=o[h].start,o[h].nx=t.width,o[h].ny=t.lines,o[h].size=t.type,a+=o[h].nx*o[h].ny*o[h].size;var l=$(e,r),f=$(e,r);if(x<=f)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(l<=f)for(h=0;h<f-l+1;h++)s[h+l]=X(e,r);var u=new Uint16Array(b),c=function(t,e){for(var r=0,n=0;n<b;++n)(0==n||t[n>>3]&1<<(7&n))&&(e[r++]=n);for(var i=r-1;r<b;)e[r++]=0;return i}(s,u),n=V(e,r);for(N(t.array,e,r,n,i,a),h=0;h<t.channels;++h)for(var p=o[h],d=0;d<o[h].size;++d)!function(t,e,r,n,i,s,a){for(var o,h=a<16384,l=i<r?i:r,f=1;f<=l;)f<<=1;for(o=f>>=1,f>>=1;1<=f;){for(var u,c,p,d,g=0,v=g+s*(i-o),m=s*f,_=s*o,y=n*f,w=n*o;g<=v;g+=_){for(var b,x=g,S=g+n*(r-o);x<=S;x+=w){var C=x+y,P=(b=x+m)+y;h?(F(t[x+e],t[b+e]),u=M.a,p=M.b,F(t[C+e],t[P+e]),c=M.a,d=M.b,F(u,c),t[x+e]=M.a,t[C+e]=M.b,F(p,d)):(A(t[x+e],t[b+e]),u=M.a,p=M.b,A(t[C+e],t[P+e]),c=M.a,d=M.b,A(u,c),t[x+e]=M.a,t[C+e]=M.b,A(p,d)),t[b+e]=M.a,t[P+e]=M.b}r&f&&((h?F:A)(t[x+e],t[(b=x+m)+e]),u=M.a,t[b+e]=M.b,t[x+e]=u)}if(i&f)for(S=(x=g)+n*(r-o);x<=S;x+=w)(h?F:A)(t[x+e],t[(C=x+y)+e]),u=M.a,t[C+e]=M.b,t[x+e]=u;o=f,f>>=1}}(i,p.start+d,p.nx,p.size,p.ny,p.nx*p.size,c);!function(t,e,r){for(var n=0;n<r;++n)e[n]=t[e[n]]}(u,i,a);for(var g=0,v=new Uint8Array(i.buffer.byteLength),m=0;m<t.lines;m++)for(var _=0;_<t.channels;_++){var y=(p=o[_]).nx*p.size,w=new Uint8Array(i.buffer,p.end*U,y*U);v.set(w,g),g+=y*U,p.end+=y}return new DataView(v.buffer)};break;case"DWAA_COMPRESSION":_t=32,mt=q;break;case"DWAB_COMPRESSION":_t=256,mt=q;break;default:throw"EXRLoader.parse: "+rt.compression+" is unsupported"}var xt=rt.channels[0].pixelType;if(1===xt)switch(this.type){case e.UnsignedByteType:case e.FloatType:wt=function(t,e){return Q($(t,e))},yt=U;break;case e.HalfFloatType:wt=$,yt=U}else{if(2!==xt)throw"EXRLoader.parse: unsupported pixelType "+xt+" for "+rt.compression+".";switch(this.type){case e.UnsignedByteType:case e.FloatType:wt=Y,yt=s;break;case e.HalfFloatType:wt=function(t,e){return K(Y(t,e))},yt=s}}for(var St,Ct=bt/_t,Pt=0;Pt<Ct;Pt++)St=pt,tt.getUint32(0,!0),St.value=St.value+i;var bt=rt.dataWindow,kt=bt.xMax-bt.xMin+1,Tt=bt.yMax-bt.yMin+1,It=kt*Tt*4;switch(this.type){case e.UnsignedByteType:case e.FloatType:var Mt=new Float32Array(It);rt.channels.length<4&&Mt.fill(1,0,It);break;case e.HalfFloatType:Mt=new Uint16Array(It),rt.channels.length<4&&Mt.fill(15360,0,It);break;default:console.error("THREE.EXRLoader: unsupported type: ",this.type)}for(var Ft,At,Et={R:0,G:1,B:2,A:3},Ut={size:0,width:kt,lines:_t,offset:pt,array:et,viewer:tt,type:xt,channels:rt.channels.length},Ot={value:0},Dt=0;Dt<Tt/_t;Dt++){Ft=V(tt,pt),It=V(tt,pt),Ut.lines=Tt<Ft+_t?Tt-Ft:_t,Ut.offset=pt,Ut.size=It,At=mt(Ut),pt.value+=It;for(var Lt=0;Lt<_t;Lt++){var Nt=Lt+Dt*_t;if(Tt<=Nt)break;for(var Rt=0;Rt<rt.channels.length;Rt++)for(var Bt=Et[rt.channels[Rt].name],zt=0;zt<kt;zt++){var Gt=Lt*(rt.channels.length*kt)+Rt*kt+zt;Ot.value=Gt*yt;Gt=wt(At,Ot);Mt[4*kt*(Tt-1-Nt)+4*zt+Bt]=Gt}}}if(this.type===e.UnsignedByteType){for(var It=Mt.length,Zt=new Uint8Array(It),qt=0;qt<Tt;++qt)for(var jt=0;jt<kt;++jt){var Ht,Vt,Wt=Mt[Pt=qt*kt*4+4*jt],Xt=Mt[Pt+1],Jt=Mt[Pt+2];(Vt=Jt>(Vt=Xt<Wt?Wt:Xt)?Jt:Vt)<1e-32?Zt[Pt]=Zt[Pt+1]=Zt[Pt+2]=Zt[Pt+3]=0:(Vt=256*(Ht=function(t){if(0===t)return[t,0];l.setFloat64(0,t);var e=l.getUint32(0)>>>20&2047;return 0===e&&(l.setFloat64(0,t*Math.pow(2,64)),e=(l.getUint32(0)>>>20&2047)-64),[function(t,e){for(var r=Math.min(3,Math.ceil(Math.abs(e)/1023)),n=t,i=0;i<r;i++)n*=Math.pow(2,Math.floor((e+i)/r));return n}(t,-(e-=1022)),e]}(Vt))[0]/Vt,Zt[Pt]=Wt*Vt,Zt[Pt+1]=Xt*Vt,Zt[Pt+2]=Jt*Vt,Zt[Pt+3]=Ht[1]+128)}Mt=Zt}e=this.type===e.UnsignedByteType?e.RGBEFormat:e.RGBAFormat;return{header:rt,width:kt,height:Tt,data:Mt,format:e,type:this.type}}};